(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[25],{"../components/repl/components/preview.marko":(e,n,t)=>{"use strict";t.r(n),t.d(n,{default:()=>J});var o=t("../../node_modules/marko/dist/runtime/vdom/index.js"),s=t("../../node_modules/path-browserify/index.js"),r=t.n(s),l=t("../../node_modules/prettier/standalone.js"),a=(t("../../node_modules/prettier/parser-html.js"),t("../../node_modules/prettier/parser-babel.js")),i=t.n(a),d=t("../utils/highlight.js"),m=t.n(d),c=t("../utils/compiler/index.js"),u=t("../../node_modules/memfs/lib/index.js"),p=t("../../node_modules/@marko/tags-api-preview/dist/components/return/index-browser.mjs"),v=t("../../node_modules/@marko/tags-api-preview/dist/transform/cached-function/index-browser.mjs"),f=t("../../node_modules/@marko/tags-api-preview/dist/util/replace-assignments/index.mjs"),w=t("../../node_modules/marko/dist/runtime/vdom/helpers/v-element.js"),_=t.n(w),y=t("../../node_modules/marko/dist/runtime/helpers/class-value.js"),h=t.n(y),b=t("../../node_modules/@marko/tags-api-preview/dist/transform/native-tag-var/index-browser.mjs"),g=t("../../node_modules/@marko/tags-api-preview/dist/translate/native-tag-handlers/index-browser.mjs"),k=t("../../node_modules/marko/dist/runtime/vdom/helpers/attrs.js"),j=t.n(k),x=t("../../node_modules/@marko/tags-api-preview/dist/translate/track-rendering/index.mjs"),C=t("../../node_modules/marko/dist/runtime/components/renderer.js"),T=t.n(C),E=t("../../node_modules/marko/dist/runtime/components/registry/index-browser.js"),S=t("../../node_modules/marko/dist/runtime/components/defineComponent.js"),O=t.n(S);const L="AzL9TbmU",F=(0,o.t)(L),N=F;(0,E.r)(L,(()=>F));const D={onCreate(){this.state={}}};F._=T()((function(e,n,t,o,s){(0,x.begin)();try{var r=o;const s=e,i=(0,b.default)(r,"0");var l={};n.e("iframe",j()((0,g.default)({...s},t,"iframe",l)),"@0",o,0,4,{...l});const d=(0,b.default)(r,"1");var a={};n.e("iframe",j()((0,g.default)({...s,style:"display:none"},t,"iframe",a)),"@1",o,0,4,{...a}),e._return&&e._return({default:{next:()=>"none"===i().style.display?i():d(),swap(){const e="none"===i().style.display,n=e?d():i(),t=e?i():d();return n.srcdoc=n.srcdoc,n.style.display="none",t.style.display="",t}}},1)}finally{(0,x.end)()}}),{t:L},D),F.Component=O()(D,F._);var I=t("../../node_modules/marko/dist/runtime/helpers/render-tag.js"),M=t.n(I),U=t("../../node_modules/@marko/tags-api-preview/dist/components/_instance/index.marko"),A=t("../../node_modules/@marko/tags-api-preview/dist/components/effect/index.mjs");const $="P9JdgJzT",z=(0,o.t)($),J=z,R=_()("small",null,"6",null,1,0).t("Open the dev tools to view the full error.");(0,E.r)($,(()=>z));const W={onCreate(){this.state={}}};z._=T()((function(e,n,t,o,s){(0,x.begin)();try{var a,d=o,w=s,_=e=>a=e;const{type:y,files:b,selectedFile:g,getCompilerOptions:k,debounce:j,onSelectError:C,onSyntaxError:T}=e,E=d.elId("@0"),S=r().join("/",E,g.path),O=r().join("/",E,b[0].path),L="0"in w?w[0]:w[0]=null,F=e=>d.setState("0",e),D="1"in w?w[1]:w[1]=null,I=e=>d.setState("1",e),$=/(.+?)(?:\((\d+),(\d+)\)|:(\d+)): (.*(?=\s+\d+ | ))/;n.be("div",{class:h()(["preview-error",L&&"preview-error-active"])},"0",o,null,1),L&&(n.be("h1",{class:"error-name"},"1",o,null,1),n.t(L.name,o),L.file&&(n.t(" :  ",o),n.be("a",null,"2",o,null,0,{onclick:t.d("click",(function(){C(L)}),!1)}),n.t(L.file.slice(1),o),n.t("(",o),n.t(L.line,o),n.t(",",o),n.t(L.column,o),n.t(")",o),n.ee()),n.ee(),n.be("div",null,"3",o,null,0),n.t(L.message,o),n.ee(),S!==L.file&&(L.codeFrame?(n.be("pre",null,"4",o,null,0),n.be("code",null,"5",o,null,0),n.t(L.codeFrame,o),n.ee(),n.ee()):n.n(R,o))),n.ee(),"preview"===y?M()(U.default,{renderBody:(e,n,t,o)=>{var s=n,r=(0,p.default)(t);M()(N,{class:"preview-output",_return:r},e,s,"8");const{default:l}=r();_(l)}},n,t,"7"):(n.be("div",{class:"preview-compiled"},"9",o,null,1),n.h(D,o),n.ee()),(0,A.default)(o,(0,v.cache)((0,v.cached)(d,[j,b,E,y,O,k,a,S,T])||function(){let e,n;async function t(){for(const e of b){const t=r().join("/",E,e.path);u.vol.mkdirSync(r().dirname(t),{recursive:!0}),u.vol.writeFileSync(t,e.content)}try{if("preview"===y||"html"===y){const o=await(0,c.g)({entry:O,markoOptions:{output:"vdom",...k?k():{}}});if("preview"===y){const{contentWindow:s,contentDocument:d}=a.next();s.__INTERNAL_MODULES__=window.__INTERNAL_MODULES__;const p=(0,s.eval)(o.js),v=d.createElement("style");v.innerHTML=o.css,d.head.appendChild(v),k?.().translator?p.default({},d.body):(await p.render({})).appendTo(d.body),a.swap()}}else{const w=y.startsWith("compiled-html")?"html":"vdom",_=await(0,c.M)({entry:S,markoOptions:{output:w,...k?k():{}}});(0,f.default)(I,m()("javascript",(0,l.format)(_.replaceAll(`${E}/`,""),{parser:"babel",plugins:[i()]})))}(0,f.default)(F,null)}catch(h){function g(){const e="SyntaxError"===h.name&&$.exec(h.message);if(e){let[n,t,o,s,l,a]=e;l&&(o=l,s=0),t=r().resolve(t),o=parseInt(o,10),s=parseInt(s,10)+1;const i=h.message.slice(n.length),d=(0,f.default)(F,{name:h.name,file:t,message:a,line:o,column:s,codeFrame:i});t===S&&T&&T(d)}else(0,f.default)(F,h),console.error(h)}j?n=setTimeout(g,1e3):g()}}return j?e=setTimeout(t,100):t(),()=>{clearTimeout(e),clearTimeout(n);try{u.vol.rmdirSync(E,{recursive:!0})}catch(e){}}}))}finally{(0,x.end)()}}),{t:$},W),z.Component=O()(W,z._),t("../components/repl/components sync \\/preview\\.(?:style%7Ccomponent-browser)\\.[^\\/]+$")},"../components/repl/components sync \\/preview\\.(?:style%7Ccomponent-browser)\\.[^\\/]+$":e=>{function n(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}n.keys=()=>[],n.resolve=n,n.id="../components/repl/components sync \\/preview\\.(?:style%7Ccomponent-browser)\\.[^\\/]+$",e.exports=n}}]);
//# sourceMappingURL=25.271ba957.js.map