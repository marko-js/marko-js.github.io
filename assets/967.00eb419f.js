"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[967],{"../components/repl/components/preview.marko":(e,t,n)=>{n.r(t),n.d(t,{default:()=>Z});var s=n("../../node_modules/marko/dist/runtime/vdom/index.js"),o=n("../../node_modules/path-browserify/index.js"),r=n.n(o),l=n("../../node_modules/prettier/standalone.mjs"),a=n("../../node_modules/prettier/plugins/babel.mjs"),i=n("../../node_modules/prettier/plugins/estree.mjs"),d=n("../utils/highlight.js"),m=n.n(d),c=n("../utils/compiler/index.js"),u=n("../../node_modules/memfs/lib/index.js"),p=n("../../node_modules/@marko/tags-api-preview/dist/transform/cached-values/index-browser.mjs"),v=n("../../node_modules/@marko/tags-api-preview/dist/components/return/index-browser.mjs"),h=n("../../node_modules/@marko/tags-api-preview/dist/util/replace-assignments/index.mjs"),f=n("../../node_modules/marko/dist/runtime/vdom/helpers/const-element.js"),_=n.n(f),w=n("../../node_modules/marko/dist/runtime/helpers/class-value.js"),y=n.n(w),g=n("../../node_modules/@marko/tags-api-preview/dist/transform/native-tag-var/index-browser.mjs"),k=n("../../node_modules/@marko/tags-api-preview/dist/translate/native-tag-handlers/index-browser.mjs"),b=n("../../node_modules/marko/dist/runtime/vdom/helpers/attrs.js"),j=n.n(b),x=n("../../node_modules/@marko/tags-api-preview/dist/chunk-5R2Z7TR6.mjs"),T=n("../../node_modules/marko/dist/runtime/components/renderer.js"),S=n.n(T),C=n("../../node_modules/marko/dist/runtime/components/registry.js"),E=n("../../node_modules/marko/dist/runtime/components/defineComponent.js"),A=n.n(E);const I="UKZWpLo",L=(0,s.t)(I),O=L;(0,C.r)(I,(()=>L));const F={onCreate(){this.state={}}};L._=S()((function(e,t,n,s,o,r){(0,x.begin)();try{var l=s;const o=e,r=(0,g.default)(l,"0");var a={};t.e("iframe",j()((0,k.default)({...o},n,"iframe",a)),"@0",s,0,4,{...a});const d=(0,g.default)(l,"1");var i={};t.e("iframe",j()((0,k.default)({...o,style:"display:none"},n,"iframe",i)),"@1",s,0,4,{...i}),e._return&&e._return({value:(0,p.cache)((0,p.cached)(l,[])||{next:()=>"none"===r().style.display?r():d(),swap(){const e="none"===r().style.display,t=e?d():r(),n=e?r():d();return t.srcdoc=t.srcdoc,t.style.display="none",n.style.display="",n}})},1)}finally{(0,x.end)()}}),{t:I},F),L.Component=A()(F,L._);var N=n("../../node_modules/marko/dist/runtime/helpers/render-tag.js"),R=n.n(N),D=n("../../node_modules/@marko/tags-api-preview/dist/components/_instance/index.marko"),M=n("../../node_modules/@marko/tags-api-preview/dist/components/effect/index.mjs");const U="J$mzIAl",W=(0,s.t)(U),Z=W,$=/(.+?)(?:\((\d+),(\d+)\)|:(\d+)): (.*(?=\s+\d+ | ))/,z=_()("small",null,1).t("Open the dev tools to view the full error.");(0,C.r)(U,(()=>W));const B={onCreate(){this.state={}}};W._=S()((function(e,t,n,s,o,d){(0,x.begin)();try{var f,_=s,w=o,g=e=>f=e;const{type:d,files:k,selectedFile:b,getCompilerOptions:j,debounce:x,onSelectError:T,onSyntaxError:S}=e,C=_.elId("@0"),E=(0,p.cache)((0,p.cached)(_,[C,b.path])||r().join("/",C,b.path)),A=(0,p.cache)((0,p.cached)(_,[C,k[0].path])||r().join("/",C,k[0].path)),I="0"in w?w[0]:w[0]=null,L=e=>_.setState("0",e),F="1"in w?w[1]:w[1]=null,N=e=>_.setState("1",e);t.be("div",{class:y()(["preview-error",I&&"preview-error-active"])},"0",s,null,1),I&&(t.be("h1",{class:"error-name"},"1",s,null,1),t.t(I.name,s),I.file&&(t.t(" :  ",s),t.be("a",null,"2",s,null,0,{onclick:n.d("click",(function(){T(I)}),!1)}),t.t(I.file.slice(1),s),t.t("(",s),t.t(I.line,s),t.t(",",s),t.t(I.column,s),t.t(")",s),t.ee()),t.ee(),t.be("pre",null,"3",s,null,0),t.be("code",null,"4",s,null,0),t.t(I.message.replaceAll(C,""),s),t.ee(),t.ee(),E!==I.file&&(I.codeFrame?(t.be("pre",null,"5",s,null,0),t.be("code",null,"6",s,null,0),t.t(I.codeFrame,s),t.ee(),t.ee()):t.n(z,s))),t.ee(),"preview"===d?R()(D.default,{renderBody:(e,t,n,s)=>{var o=t,r=(0,v.default)(n);R()(O,{class:"preview-output",_return:r},e,o,"9");const{value:l}=r();g(l)}},t,n,"8"):(t.be("div",{class:"preview-compiled"},"10",s,null,1),t.h(F,s),t.ee()),(0,M.default)(s,(0,p.cache)((0,p.cached)(_,[x,k,C,d,A,j,f,E,S])||function(){let e,t;async function n(){for(const e of k){const n=r().join("/",C,e.path);u.vol.mkdirSync(r().dirname(n),{recursive:!0}),u.vol.writeFileSync(n,e.content)}try{if("preview"===d||"html"===d){const s=await(0,c.l)({entry:A,markoOptions:{output:"vdom",...j?.()}});if(f){const{contentWindow:o,contentDocument:p}=f.next();o.__INTERNAL_MODULES__=window.__INTERNAL_MODULES__;const v=(0,o.eval)(s.js),_=p.createElement("style");_.innerHTML=s.css,p.head.appendChild(_),j?.()?.translator?v.default.mount({},p.body):(await v.render({})).appendTo(p.body),f.swap()}}else{const w=d.startsWith("compiled-html")?"html":"vdom",y=await(0,c.w)({entry:E,markoOptions:{output:w,...j?.()}});(0,h.default)(N,m()("javascript",await(0,l.GP)(y.replaceAll(`${C}/`,""),{parser:"babel",plugins:[a.A,i.Ay]})))}(0,h.default)(L,null)}catch(g){function b(){const e="SyntaxError"===g.name&&$.exec(g.message);if(e){let[t,n,s,o,l,a]=e;l&&(s=l,o=0),n=r().resolve(n),s=parseInt(s,10),o=parseInt(o,10)+1;const i=g.message.slice(t.length),d=(0,h.default)(L,{name:g.name,file:n,message:a,line:s,column:o,codeFrame:i});n===E&&S&&S(d)}else(0,h.default)(L,g),console.error(g)}x?t=setTimeout(b,1e3):b()}}return x?e=setTimeout(n,100):n(),()=>{clearTimeout(e),clearTimeout(t);try{u.vol.rmdirSync(C,{recursive:!0})}catch(e){}}}))}finally{(0,x.end)()}}),{t:U},B),W.Component=A()(B,W._)}}]);
//# sourceMappingURL=967.00eb419f.js.map