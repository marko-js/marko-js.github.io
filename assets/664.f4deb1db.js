(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[664],{"../components/repl/index.marko":(e,t,r)=>{"use strict";r.d(t,{Z:()=>re});var n=r("../../node_modules/marko/dist/runtime/vdom/index.js"),o=r("../../node_modules/@marko/tags-api-preview/dist/util/replace-assignments/index.mjs"),s=r("../../node_modules/@marko/tags-api-preview/dist/transform/cached-function/index-browser.mjs"),a=r("../../node_modules/@marko/tags-api-preview/dist/transform/native-tag-var/index-browser.mjs"),i=r("../../node_modules/@marko/tags-api-preview/dist/components/lifecycle/index.mjs"),l=r("../../node_modules/@marko/tags-api-preview/dist/components/_instance/index.marko"),d=r("../../node_modules/marko/dist/runtime/helpers/render-tag.js"),p=r.n(d),c=r("../../node_modules/marko/dist/runtime/helpers/class-value.js"),u=r.n(c),m=r("../../node_modules/@marko/tags-api-preview/dist/translate/track-rendering/index.mjs"),f=r("../../node_modules/marko/dist/runtime/components/renderer.js"),y=r.n(f),h=r("../../node_modules/marko/dist/runtime/components/registry/index-browser.js"),g=r("../../node_modules/marko/dist/runtime/components/defineComponent.js"),b=r.n(g);const v="6o3N4O4f",x=(0,n.t)(v),w=x;(0,h.r)(v,(()=>x));const k={onCreate(){this.state={}}};x._=y()((function(e,t,r,n,d){(0,m.begin)();try{var c=n,f=d;const{selectedIndexChange:y,filesChange:h,files:g,selectedIndex:b}=e,v=h||(e=>c.setState("0",e)),x=h?g:"0"in f?f[0]:f[0]=g,w=y||(e=>c.setState("1",e)),k=y?b:"1"in f?f[1]:f[1]=b,E=x[k];t.be("div",{class:"file-tabs"},"0",n,null,1);{const e="2"in f?f[2]:f[2]=1,d=e=>c.setState("2",e);let m=0;for(const e of x){let n=m++;const d=`[${n}]`;p()(l.default,{renderBody:(t,r,c,m)=>{var f=r,y=c;const h="0"in m?m[0]:m[0]=!1,g=e=>c.setState("0",e),b=E===e,C=n>0;t.be("div",{class:u()(["file-tab",{selected:b}])},"2"+d,y,null,1,{onclick:f.d("click",(function(){b?(0,o.default)(g,!0):((0,o.default)(g,!1),(0,o.default)(w,n))}),!1)}),h&&b&&C?p()(l.default,{renderBody:(t,r,l,d)=>{var p=r,c=l;const u="0"in d?d[0]:d[0]=e.name,m=(0,s.cache)((0,s.cached)(l,[u,x])||function(){const t={...e,name:u,path:e.path.replace(e.name,u)};(0,o.default)(v,[...x.slice(0,n),t,...x.slice(n+1)]),(0,o.default)(g,!1)}),f=(0,a.default)(l,"0");var y=e=>l.setState("0",e);t.e("input",{type:"text",size:u.length,value:u},"@0",c,0,0,{pa:[y&&"value"],onblur:p.d("blur",m,!1),onkeydown:p.d("keydown",(function(e){"Enter"===e.code&&m()}),!1),oninput:p.d("input",(e=>{y(e.target.value)}),!1)}),(0,i.default)(c,{onMount:(0,s.cache)((0,s.cached)(l,[u])||function(){f().focus(),f().setSelectionRange(0,u.indexOf("."))})})}},t,f,"3"+d):t.t(e.name,y),C&&(t.be("button",{class:"file-close"},"4"+d,y,null,1,{onclick:f.d("click",(function(t){window.confirm(`Delete ${e.path}?`)&&(k>=n&&(0,o.default)(w,k-1),(0,o.default)(v,[...x.slice(0,n),...x.slice(n+1)])),t.stopPropagation()}),!1)}),t.t("×",y),t.ee()),t.ee()}},t,r,"1"+d)}t.be("button",{class:"new-file"},"5",n,null,1,{onclick:r.d("click",(function(){const t={name:`Component${e}.marko`,path:`/components/Component${e}.marko`,content:""},r=x.length;(0,o.default)(v,x.concat(t)),(0,o.default)(w,r),(0,o.default)(d,e+1)}),!1)}),t.t("+",n),t.ee()}t.ee()}finally{(0,m.end)()}}),{t:v},k),x.Component=b()(k,x._);var E=r("../../node_modules/marko/dist/runtime/helpers/dynamic-tag.js"),C=r.n(E);const S="QAUP5peK",T=(0,n.t)(S),L=T;(0,h.r)(S,(()=>T));const j={};T._=y()((function(e,t,r,n,o){(0,m.begin)();try{const{actions:o,body:s}=e;t.be("div",{class:"pane"},"0",n,null,1),t.be("div",{class:"pane-actions"},"1",n,null,1),C()(t,o.renderBody,null,null,null,null,r,"2"),t.ee(),t.e("div",{class:"pane-divider"},"3",n,0,1),t.be("div",{class:"pane-body"},"4",n,null,1),C()(t,s.renderBody,null,null,null,null,r,"5"),t.ee(),t.ee()}finally{(0,m.end)()}}),{t:S,i:!0},j),T.Component=b()(j,T._);var M=r("../../node_modules/marko/dist/runtime/vdom/helpers/v-element.js"),D=r.n(M),A=r("../../node_modules/@marko/tags-api-preview/dist/components/effect/index.mjs");const _="rRMAwOPg",N=(0,n.t)(_),I=N;(0,h.r)(_,(()=>N));const $={onCreate(){this.state={}}};N._=y()((function(e,t,r,n,o){(0,m.begin)();try{var i=n;const{value:o,valueChange:l,renderBody:d,class:p}=e,c=(0,a.default)(i,"0");t.be("select",{class:u()(p)},"@0",n,null,1,{onchange:r.d("change",(function(e){l(e.target.value)}),!1)}),C()(t,d,null,null,null,null,r,"0"),t.ee(),(0,A.default)(n,(0,s.cache)((0,s.cached)(i,[o,d,l])||function(){c().value=o}))}finally{(0,m.end)()}}),{t:_},$),N.Component=b()($,N._);var F=r("../../node_modules/lz-string/libs/lz-string.js"),P=r("../../node_modules/@marko/tags-api-preview/dist/translate/native-tag-handlers/index-browser.mjs"),B=r("../../node_modules/marko/dist/runtime/vdom/helpers/attrs.js"),U=r.n(B);const R="ftG9dvL8",O=(0,n.t)(R),z=O,q=D()("span",null,"1",null,1,0).t("Open in playground ");(0,h.r)(R,(()=>O));const W={};O._=y()((function(e,t,r,n,o){(0,m.begin)();try{const{files:o,...a}=e;var s={};t.be("a",U()((0,P.default)({...a,href:`/playground/#${(0,F.compressToEncodedURIComponent)(JSON.stringify(o))}`,target:"_top",class:"playground-link"},r,"a",s)),"0",n,null,4,{...s}),t.n(q,n),t.t("↗",n),t.ee()}finally{(0,m.end)()}}),{t:R,i:!0},W),O.Component=b()(W,O._);var V=r("../../node_modules/@marko/tags-api-preview/dist/components/return/index-browser.mjs");const H="dL815V5K",J=(0,n.t)(H),Y=J;(0,h.r)(H,(()=>J));const Z={onCreate(){this.state={}}};J._=y()((function(e,t,r,n,a){(0,m.begin)();try{var i=n,l=a;const{default:t,fallback:r}=e,d="0"in l?l[0]:l[0]=window.matchMedia(t).matches,p=e=>i.setState("0",e);(0,A.default)(n,(0,s.cache)((0,s.cached)(i,[t])||function(){const e=window.matchMedia(t),r=()=>(0,o.default)(p,!!e.matches);return e.addEventListener("change",r),(0,o.default)(p,!!e.matches),()=>e.removeEventListener("change",r)})),e._return&&e._return({default:d},1)}finally{(0,m.end)()}}),{t:H},Z),J.Component=b()(Z,J._);const G="V970f081",K=(0,n.t)(G),X=K;(0,h.r)(G,(()=>K));const Q={onCreate(){this.state={}}};K._=y()((function(e,t,r,n,i){(0,m.begin)();try{var d=n,c=i;const{left:g,right:b}=e,v="0"in c?c[0]:c[0]=.5,x=e=>d.setState("0",e),w="1"in c?c[1]:c[1]=!1,k=e=>d.setState("1",e);var f=(0,V.default)(d);p()(Y,{default:"(max-aspect-ratio: 1/1)",_return:f},t,r,"0");const{default:E}=f(),S=(0,a.default)(d,"0");t.be("div",{class:u()(["panes",w&&"resizing"])},"@0",n,null,1);var y={};t.be("div",U()((0,P.default)({...g,style:`flex-grow:${v}`},r,"div",y)),"1",n,null,4,{...y}),C()(t,g.renderBody,null,null,null,null,r,"2"),t.ee(),t.be("div",{class:"divider"},"3",n,null,1),t.e("div",{class:"inner"},"4",n,0,1,{onmousedown:r.d("mousedown",(function(e){(0,o.default)(k,!0),e.preventDefault(),e.stopPropagation()}),!1)}),t.ee();var h={};t.be("div",U()((0,P.default)({...b,style:"flex-grow:"+(1-v)},r,"div",h)),"5",n,null,4,{...h}),C()(t,b.renderBody,null,null,null,null,r,"6"),t.ee(),t.ee(),w&&p()(l.default,{renderBody:(e,t,r,n)=>{var a=r;(0,A.default)(a,(0,s.cache)((0,s.cached)(r,[E])||function(){const e=e=>{if(e.buttons||e.which){const t=S().getBoundingClientRect(),r=E?(e.clientY-t.top)/t.height:(e.clientX-t.left)/t.width;r>0&&(0,o.default)(x,Math.min(.8,Math.max(.2,r)))}else(0,o.default)(k,!1)};return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)}))}},t,r,"7")}finally{(0,m.end)()}}),{t:G},Q),K.Component=b()(Q,K._);const ee="Y/QiYO60",te=(0,n.t)(ee),re=te,ne=D()("option",{value:"preview"},"7",null,1,0).t("App Preview"),oe=D()("option",{value:"compiled-html"},"8",null,1,0).t("Compiled (HTML)"),se=D()("option",{value:"compiled-vdom"},"9",null,1,0).t("Compiled (DOM)");(0,h.r)(ee,(()=>te));const ae={onCreate(){this.state={}}};te._=y()((function(e,t,n,a,d){(0,m.begin)();try{var c=a,u=d;const{filesChange:f,getTranslator:y,files:h}=e,g="0"in u?u[0]:u[0]=0,b=e=>c.setState("0",e),v="1"in u?u[1]:u[1]="preview",x=e=>c.setState("1",e),k="2"in u?u[2]:u[2]=!1,E=e=>c.setState("2",e),S=h[g];p()(X,{left:{class:"editor-container",renderBody:e=>{p()(L,{actions:{renderBody:e=>{p()(w,{files:h,filesChange:f,selectedIndex:g,selectedIndexChange:b},e,n,"2")}},body:{renderBody:e=>{p()(l.default,{renderBody:(e,t,n,a)=>{var l=t,d=n;const p="0"in a?a[0]:a[0]=null,c=e=>n.setState("0",e);C()(e,p,(()=>({value:S.content,filename:S.path,valueChange:(0,s.cache)((0,s.cached)(n,[S,h,g])||function(e){const t={...S,content:e};(0,o.default)(f,[...h.slice(0,g),t,...h.slice(g+1)]),(0,o.default)(E,!0)})})),null,null,null,l,"4"),(0,i.default)(d,{onMount:async()=>{const e=await Promise.all([r.e(103),r.e(400),r.e(109),r.e(888),r.e(176)]).then(r.bind(r,"../components/repl/components/editor.marko"));await e.loading,(0,o.default)(c,e)}})}},e,n,"3")}}},e,n,"1")}},right:{renderBody:e=>{p()(L,{actions:{renderBody:e=>{p()(I,{value:v,valueChange:function(e){(0,o.default)(x,e),(0,o.default)(E,!1)},class:"preview-select",renderBody:e=>{e.n(ne,a),e.n(oe,a),e.n(se,a)}},e,n,"6"),p()(z,{files:h},e,n,"10")}},body:{renderBody:e=>{p()(l.default,{renderBody:(e,t,n,s)=>{var a=t,l=n;const d="0"in s?s[0]:s[0]=null,p=e=>n.setState("0",e);C()(e,d,(()=>({type:v,files:h,selectedFile:S,getTranslator:y,debounce:k})),null,null,null,a,"12"),(0,i.default)(l,{onMount:async()=>{(0,o.default)(p,await Promise.all([r.e(103),r.e(641),r.e(400),r.e(648),r.e(888),r.e(546),r.e(25)]).then(r.bind(r,"../components/repl/components/preview.marko")))}})}},e,n,"11")}}},e,n,"5")}}},t,n,"0")}finally{(0,m.end)()}}),{t:ee},ae),te.Component=b()(ae,te._)},"./playground/components/hash-value.marko":(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r("../../node_modules/marko/dist/runtime/vdom/index.js"),o=r("../../node_modules/lz-string/libs/lz-string.js"),s=r("../../node_modules/@marko/tags-api-preview/dist/transform/cached-function/index-browser.mjs"),a=r("../../node_modules/@marko/tags-api-preview/dist/util/replace-assignments/index.mjs"),i=r("../../node_modules/@marko/tags-api-preview/dist/components/lifecycle/index.mjs"),l=r("../../node_modules/@marko/tags-api-preview/dist/translate/track-rendering/index.mjs"),d=r("../../node_modules/marko/dist/runtime/components/renderer.js"),p=r.n(d),c=r("../../node_modules/marko/dist/runtime/components/registry/index-browser.js"),u=r("../../node_modules/marko/dist/runtime/components/defineComponent.js"),m=r.n(u);const f="41NMzc7K",y=(0,n.t)(f),h=y;(0,c.r)(f,(()=>y));const g={onCreate(){this.state={}}};y._=p()((function(e,t,r,n,d){(0,l.begin)();try{var p=n,c=d;const{default:t}=e,r="0"in c?c[0]:c[0]=(()=>{try{return JSON.parse((0,o.decompressFromEncodedURIComponent)(window.location.hash.slice(1)))}catch(e){console.error(e)}})()||t,u=e=>p.setState("0",e);(0,i.default)(n,{onMount:function(){window.addEventListener("hashchange",this.handler=()=>{try{this.isUpdating?this.isUpdating=!1:(0,a.default)(u,JSON.parse((0,o.decompressFromEncodedURIComponent)(window.location.hash.slice(1))))}catch(e){console.error(e)}})},onUpdate:(0,s.cache)((0,s.cached)(p,[r])||function(){this.isUpdating=!0,window.location.hash=(0,o.compressToEncodedURIComponent)(JSON.stringify(r))}),onDestroy:function(){window.removevEventListener("hashchange",this.handler)}}),e._return&&e._return({default:r,defaultChange:u},1)}finally{(0,l.end)()}}),{t:f},g),y.Component=m()(g,y._)},"./playground/v6/index.marko?browser-entry":(e,t,r)=>{"use strict";var n={};r.r(n),r.d(n,{analyze:()=>er,taglibs:()=>rr,translate:()=>tr});var o,s=r("../../node_modules/marko/dist/runtime/components/index.js"),a=(r("../components/app-layout/favicon.png"),r("../logos/marko.svg"),r("../components/app-layout/components/layout-header/component-browser.js")),i=r.n(a),l=r("../components/app-layout/components/layout-sidebar/components/version-switcher/component-browser.js"),d=r.n(l),p=r("../components/app-layout/components/layout-sidebar/component-browser.js"),c=r.n(p),u=(r("../components/app-footer/openjsf.svg"),r("../components/app-footer/osi.svg"),r("../components/app-footer/ebay.svg"),r("../logos/discord.svg"),r("../../node_modules/marko/dist/runtime/vdom/index.js")),m=r("../../browser-shims/compiler/index.js"),f=r("../../node_modules/@marko/babel-utils/dist/index.js"),y=r("../../node_modules/path-browserify/index.js"),h=r.n(y),g=(o=function(e){throw new Error('Dynamic require of "'+e+'" is not supported')},"undefined"!=typeof Proxy?new Proxy(o,{get:(e,t)=>e[t]}):o);function b(){return"html"===x().output}function v(){return!b()}function x(){return Ne.hub.file.markoOpts}function w(e){return{insert(t,r){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t){if(Array.isArray(t))return function(e,t,r){const n=t.length;let o=n,s=0;for(;s<o;){const n=s+o>>>1,a=e(t[n],r);if(0===a)return t;a>0?o=n:s=n+1}let a=r;for(;s<n;){const e=a;a=t[s],t[s++]=e}return t[n]=a,t}(e,n?[...t]:t,r);{const n=e(t,r);if(0!==n)return n<0?[t,r]:[r,t]}}return r},find(t,r){if(t)return Array.isArray(t)?t[function(e,t,r){let n=t.length,o=0;for(;o<n;){const s=o+n>>>1,a=e(t[s],r);if(0===a)return s;a>0?n=s:o=s+1}return-1}(e,t,r)]:t===r?t:void 0}}}var k=/^<.*>$|\.marko$/;function E(e){const t=e.node.extra??={};if(void 0===t.tagNameType){const r=e.get("name");if(r.isStringLiteral())t.tagNameType="@"===r.node.value[0]?3:(0,f.isNativeTag)(e)?0:1,t.tagNameNullable=t.tagNameNullable=!1;else{const e=[r];let n,o,s=!1;for(;(n=e.pop())&&2!==o;)if(n.isConditionalExpression())e.push(n.get("consequent")),n.node.alternate&&e.push(n.get("alternate"));else if(n.isLogicalExpression())"||"===n.node.operator?e.push(n.get("left")):s=!0,e.push(n.get("right"));else if(n.isAssignmentExpression())e.push(n.get("right"));else if(n.isBinaryExpression())o="+"!==n.node.operator||void 0!==o&&0!==o?2:0;else if(n.isStringLiteral()||n.isTemplateLiteral())o=void 0!==o&&0!==o?2:0;else if(n.isNullLiteral())s=!0;else if(n.isIdentifier()){if("undefined"===n.node.name){s=!0;continue}const t=n.scope.getBinding(n.node.name);if(!t){o=2;continue}if("module"===t.kind){const e=t.path.parent;o=k.test(e.source.value)&&e.specifiers.some((e=>m.types.isImportDefaultSpecifier(e)))?void 0!==o&&1!==o?2:1:2;continue}const r=t.path;if(r.isMarkoTag()&&"local"===t.kind){const n=r.get("name").node.value;if("tag"===n){o=void 0!==o&&1!==o?2:1;continue}if("const"===n){e.push(r.get("attributes")[0].get("value"));continue}if("let"===n){const n=r.get("attributes")[0];n.node?e.push(n.get("value")):s=!0;const a=t.constantViolations;for(let t=a.length;t--;){const r=a[t],{operator:n}=r.node;if("="===n)e.push(r.get("right"));else{if("+="!==n){o=2;break}o=void 0!==o&&0!==o?2:0}}}continue}o=2}else o=2;t.tagNameType=o,t.tagNameNullable=s,t.tagNameDynamic=!0}}return t.tagNameType}function C(e){const t=e.node.extra??={};let r=t.sectionId;if(void 0===r){const n=e.hub.file.path.node.extra??={},o=e.parent?.name,s=o?.value??o?.name??"dynamic";r=t.sectionId=n.nextSectionId||0,n.nextSectionId=r+1,n.sectionNames=n.sectionNames??[],n.sectionNames[r]=Ne.scope.generateUid(s+"Body")}return r}function S(e){let t=e;for(;;){if("Program"===t.type||"MarkoTagBody"===t.type&&0!==E(t.parentPath))return C(t);t=t.parentPath}}function T(e){let t,r=e;for(;void 0===(t=r.node.extra?.sectionId);)r=r.parentPath;return t}function L(e,t){return[r=>{const n=Ne.state[e]??=[];return n[r]??=t&&t(r)},(t,r)=>{(Ne.state[e]??=[])[t]=r}]}function j(e){const{nextSectionId:t}=Ne.node.extra;for(let r=0;r<t;r++)e(r)}var[M]=L("reservesByType",(()=>[void 0,void 0,void 0]));function D(e,t,r,n){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;const s=r.extra??={};if(s.reserve){const e=s.reserve;if(o&&e.size)throw new Error("Unable to reserve multiple scopes for a node");return e.size=o,e.name+="_"+n,e}const a=M(t),i=s.reserve={id:0,type:e,size:o,name:n,sectionId:t};return a[e]?i.id=a[e].push(i)-1:a[e]=[i],i}function A(e,t){return e.sectionId-t.sectionId||e.type-t.type||e.id-t.id}var{insert:_}=w(A),[N]=L("apply",(()=>[{sectionId:0,index:0,count:0,references:void 0,apply:m.types.identifier(""),hydrate:m.types.identifier("")}]));function I(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const n=t.scope,o=t.getBindingIdentifiers();for(const t in o){const s=n.getBinding(t).referencePaths,a=D(r,e,o[t],t);z(N(e),{sectionId:e,index:0,count:0,references:a,apply:m.types.identifier(""),hydrate:m.types.identifier("")});for(const e of s){const t=U(e.scope.path),r=B(t||e),n=r.parentPath;if(t){const e=t.node.id?.name;e||n.isMarkoAttribute()&&!n.node.default&&((t.node.extra??={}).name=n.node.name),$(t,"references",a)}$(n,`${r.listKey||r.key}References`,a)}}}function $(e,t,r){const n=S(e),o=(e.node.extra??={})[t],s=_(o?.references,r,!0);o&&o.count--,P(n,r),e.node.extra[t]=P(n,s)}function F(e,t){let r;for(const[n,o]of t){const t=n[o],s=t.references;if(delete n[o],t.count--,e=t.sectionId,s)if(Array.isArray(s))for(const e of s)r=_(r,e);else r=_(r,s)}return P(e,r)}function P(e,t){const r={sectionId:e,index:0,count:1,references:t,apply:m.types.identifier(""),hydrate:m.types.identifier("")},n=N(e),o=q(n,r);return o?o.count++:z(n,r),o??r}function B(e){let t=e;for(;!R(t.parentPath);)t=t.parentPath;return t}function U(e){let t=e;if(!t.isProgram()){for(;!O(t);){if(R(t))return;t=t.parentPath}return t}}function R(e){switch(e.type){case"MarkoTag":case"MarkoTagBody":case"MarkoAttribute":case"MarkoSpreadAttribute":case"MarkoPlaceholder":case"MarkoScriptlet":return!0;default:return!1}}function O(e){switch(e.type){case"FunctionExpression":case"ArrowFunctionExpression":return!0;default:return!1}}var{insert:z,find:q}=w((function(e,t){let{references:r}=e,{references:n}=t;if(r){if(n){if(Array.isArray(r)){if(Array.isArray(n)){const e=r.length,t=e-n.length;if(0!==t)return t;for(let t=0;t<e;t++){const e=A(r[t],n[t]);if(0!==e)return e}return 0}return 1}return Array.isArray(n)?-1:A(r,n)}return 1}return n?-1:0}));function W(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const n=r?N(e):Ne.node.extra.referenceGroups[e];let o;if(o="number"==typeof t?n[t]:q(n,{references:t}),!o)throw new Error(`Reference group not found for section ${e}: ${t}`);return o}function V(e,t,r){let n=e+(t?Ne.node.extra.sectionNames[t].replace("_","$"):"");if(r)if(Array.isArray(r)){n+="With";for(const e of r)n+=`_${e.name}`}else n+=`_${r.name}`;return Ne.scope.generateUid(n)}function H(e){const{output:t}=x();return(0,f.importNamed)(Ne.hub.file,Z(t),e)}function J(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return m.types.callExpression(H(e),r.filter(Boolean))}function Y(){return g(Z("html"))}function Z(e){const{optimize:t}=x();return`@marko/runtime-fluurt/${t?"dist":"dist/debug"}/${"html"===e?"html":"dom"}`}function G(e,t){return m.types.memberExpression(K(e,t),m.types.numericLiteral(e.id),!0)}function K(e,t){const r=e.sectionId!==t?1:0;let n=Ie;for(let e=0;e<r;e++)n=m.types.memberExpression(n,m.types.identifier("_"));return n}var[X]=L("applyStatements",(()=>[])),[Q]=L("hydrateStatements",(()=>[])),[ee,te]=L("queue");function re(e,t){te(T(e.get("body")),t)}function ne(e,t,r,n){const o=r?.index??0,s="apply"===e?X(t):Q(t),a=s[o]??=[];Array.isArray(n)?a.push(...n):a.push(n)}function oe(e,t){const{markoOpts:{optimize:r},opts:{filename:n}}=Ne.hub.file;let o="";if(t)if(Array.isArray(t))for(const e of t)o+=`_${e.name}`;else o+=`_${t.name}`;return(0,f.getTemplateId)(r,`${n}_${e}${o}`)}var[se]=L("closurePriorities",(()=>[]));function ae(e,t){ne("hydrate",e,t,void 0)}function ie(e){const t=S(e),r=Q(t);if(e.unshiftContainer("body",m.types.variableDeclaration("const",[m.types.variableDeclarator(Ie,J("nextScopeId"))])),!r.length)return;const n=[];for(let o=r.length;o--;)if(r[o]?.length){const{references:r}=W(t,o);if(r)if(Array.isArray(r))for(const e of r)_(n,e);else _(n,r);e.pushContainer("body",m.types.expressionStatement(J("writeHydrateCall",Ie,m.types.stringLiteral(oe(t,r)))))}e.pushContainer("body",m.types.expressionStatement(J("writeHydrateScope",Ie,m.types.objectExpression(n.reduce(((e,t)=>(e.push(m.types.objectProperty(m.types.numericLiteral(t.id),m.types.identifier(t.name))),e)),[])))))}var le={FunctionExpression:{exit:de},ArrowFunctionExpression:{exit:de}};function de(e,t){let{root:r,sectionId:n}=t;const{node:o}=e,{extra:s}=o,a=s?.references?.references,i=e.hub.file.path.scope.generateUidIdentifier(s?.name);a&&("BlockStatement"!==o.body.type&&(o.body=m.types.blockStatement([m.types.returnStatement(o.body)])),o.body.body.unshift(m.types.variableDeclaration("const",(Array.isArray(a)?a:[a]).map((e=>m.types.variableDeclarator(m.types.identifier(e.name),G(e,n))))))),r.insertBefore(m.types.variableDeclaration("const",[m.types.variableDeclarator(i,o)])),o.params.unshift(Ie),e.replaceWith(J("bind",Ie,i))}function pe(e){const[t]=X(e);return t?W(e,0).apply:m.types.nullLiteral()}function ce(e){const t=[],r=[];let n=e[0];for(let o=1;o<e.length;o++){let s=e[o];if("object"==typeof s){if(!m.types.isStringLiteral(s)){if(m.types.isTemplateLiteral(s)){let t=o+1;const r=s.expressions.length;me(e,t,s.quasis.length+r);for(let n=0;n<r;n++)e[t++]=s.quasis[n].value.raw,e[t++]=s.expressions[n];e[t]=s.quasis[r].value.raw;continue}r.push(s),t.push(n),n="";continue}s=s.value}n+=s}return r.length?(t.push(n),m.types.templateLiteral(t.map((e=>m.types.templateElement({raw:e}))),r)):n?m.types.stringLiteral(n):void 0}function ue(e,t){e[e.length-1]+=t}function me(e,t,r){for(let n=e.length-1;n>=t;n--)e[n+r]=e[n]}var[fe]=L("walks",(()=>[""])),[ye]=L("walkComment",(()=>[])),[he]=L("steps",(()=>[])),ge={32:"get",33:"before",35:"after",36:"inside",37:"replace",38:"endChild",40:"skip",47:"beginChild",67:"next",97:"over",107:"out",117:"multiplier",46:"skipEnd",66:"beginChildEnd",91:"nextEnd",106:"overEnd",116:"outEnd",126:"multiplierEnd"};function be(e){he(T(e)).push(0)}function ve(e){he(T(e)).push(1)}function xe(e){he(T(e)).push(0,1)}function we(e,t){const{reserve:r}=e.node.extra;if(t&&(!r||0!==r.type))throw e.buildCodeFrameError("Tried to visit a node that was not marked as needing to visit during analyze.");const n=T(e),o=he(n),s=fe(n),a=ye(n);if(t&&b())Le(e)`${J("markHydrateNode",Ie,m.types.numericLiteral(r.id))}`;else{let n="";if(o.length){const e=[];let t=0;for(const r of o)0===r?(t++,e.push(67)):(t--,t>=0?(e.length=e.lastIndexOf(67),e.push(97)):(e.length=e.lastIndexOf(107)+1,e.push(107),t=0));let r=e[0],s=0;for(const t of e)t!==r?(a.push(`${ge[r]}(${s})`),n+=ke(r,s),r=t,s=1):s++;a.push(`${ge[r]}(${s})`),n+=ke(r,s),o.length=0}void 0!==t&&(32!==t&&Le(e)`<!>`,a.push(`${ge[t]}`),n+=String.fromCharCode(t)),r?.size&&(a.push(`${ge[40]}(${r.size})`),n+=ke(40,r.size)),ue(s,n)}}function ke(e,t){switch(e){case 67:case 47:return Ee(t,e,20);case 97:case 107:return Ee(t,e,10);case 40:return Ee(t,e,7);default:throw new Error(`Unexpected walk code: ${e}`)}}function Ee(e,t,r){let n="";if(e>=r){const t=Math.floor(e/r);n+=Ee(t,117,10),e-=t*r}return n+=String.fromCharCode(t+e),n}function Ce(e){const t=ce(fe(e))||m.types.stringLiteral("");return""!==t.value&&(t.leadingComments=[{type:"CommentBlock",value:" "+ye(e).join(", ")+" "}]),t}var[Se]=L("renderer",(e=>{const t=Ne.node.extra.sectionNames[e];return m.types.identifier(t)})),[Te]=L("writes",(()=>[""]));function Le(e){const t=T(e);return function(e){const r=arguments.length<=1?0:arguments.length-1,n=Te(t);ue(n,e[0]);for(let t=0;t<r;t++)n.push(t+1<1||arguments.length<=t+1?void 0:arguments[t+1],e[t+1])}}function je(e){const t=Te(T(e)),r=ce(t);if(t.length=0,t[0]="",r)return m.types.expressionStatement(J("write",r))}function Me(e){const t=je(e);t&&e.insertBefore(t)[0].skip()}function De(e){const t=e.isProgram()?e:e.get("body"),r=je(t);r&&t.pushContainer("body",r)[0].skip()}function Ae(e){const t=Te(e);return{apply:pe(e),walks:Ce(e),writes:ce(t)||m.types.stringLiteral("")}}function _e(e){return e.isImportDeclaration()||e.isExportDeclaration()||e.isMarkoScriptlet({static:!0})}var Ne,Ie,$e={translate:{exit(e){De(e),ie(e);const t=[];for(const r of e.get("body"))_e(r)?r.isMarkoScriptlet()&&r.replaceWithMultiple(r.node.body):(t.push(r.node),r.remove());const r=e.scope.generateUidIdentifier("renderer"),{attrs:n}=e.node.extra;e.pushContainer("body",[m.types.variableDeclaration("const",[m.types.variableDeclarator(r,m.types.arrowFunctionExpression([n?n.var:m.types.identifier("input")],m.types.blockStatement(t)))]),m.types.exportDefaultDeclaration(r),m.types.exportNamedDeclaration(m.types.variableDeclaration("const",[m.types.variableDeclarator(m.types.identifier("render"),J("createRenderer",r))]))])}}},Fe={translate:{exit(e){we(e);const t=T(e),r=m.types.identifier("template"),n=m.types.identifier("walks"),o=m.types.identifier("apply"),s=m.types.identifier("applyAttrs"),{attrs:a}=e.node.extra,{walks:i,writes:l,apply:d}=Ae(t);!function(e){const{nextSectionId:t}=Ne.node.extra;for(let r=t;r--;)e(r)}((e=>{!function(e){const t=Q(e);for(let r=t.length;r--;){const n=t[r];if(!n?.length)continue;const o=W(e,r),{references:s,hydrate:a}=o,i=s?(Array.isArray(s)?s:[s]).map((t=>m.types.assignmentPattern(m.types.identifier(t.name),G(t,e)))):[],[l]=Ne.pushContainer("body",[m.types.functionDeclaration(a,[Ie,...i],m.types.blockStatement(n)),m.types.expressionStatement(J("register",m.types.stringLiteral(oe(e,s)),a))]);l.traverse(le,{root:l,sectionId:e}),ne("apply",e,W(e,s),m.types.expressionStatement(J("queueHydrate",Ie,a)))}}(e),function(e){const t=X(e),r=Ne.node.extra.referenceGroups[e].length;if(!r)return;for(let n=r;n--;){const r=t[n]??[];if(0===n&&!r.length)continue;const o=W(e,n),{references:s,apply:a}=o,i=m.types.numericLiteral(n-1);let l,d;if(s)if(Array.isArray(s)){l=s.map((t=>m.types.assignmentPattern(m.types.identifier(t.name),G(t,e)))),d=m.types.blockStatement(r);for(const t of s)ne("apply",e,W(e,t),m.types.expressionStatement(J("queue",Ie,a,i)))}else if(s.sectionId!==e){l=[m.types.assignmentPattern(m.types.identifier(s.name),G(s,e))],d=m.types.blockStatement(r);const t=ee(e);if(t){const r=m.types.numericLiteral(NaN);se(s.sectionId).push(r),ne("apply",s.sectionId,W(s.sectionId,s),m.types.expressionStatement(t(o,r))),ne("apply",e,void 0,m.types.expressionStatement(J("queue",Ie,a,i)))}}else{const e=m.types.identifier(s.name);l=[e],d=m.types.blockStatement([m.types.ifStatement(J("write",Ie,m.types.numericLiteral(s.id),e),m.types.blockStatement(r))])}else l=[],d=m.types.blockStatement(r);const[p]=Ne.pushContainer("body",m.types.functionDeclaration(a,[Ie,...l],d));p.traverse(le,{root:p,sectionId:e})}const n=se(e);for(let e=0;e<n.length;e++)n[e].value=e+t.length}(e)}));const p=[];if(j((e=>{if(e!==t){const{walks:t,writes:r,apply:n}=Ae(e),o=Se(e);p.push(m.types.variableDeclarator(o,J("createRenderer",r,t,n)))}})),a){const r=[];e.node.body.push(m.types.exportNamedDeclaration(m.types.variableDeclaration("const",[m.types.variableDeclarator(s,m.types.functionExpression(null,[Ie,a.var],m.types.blockStatement(Object.keys(a.bindings).map((e=>{const n=a.bindings[e],{apply:o}=W(t,n.extra.reserve);return r.push(m.types.exportSpecifier(o,n.extra.reserve.exportIdentifier)),m.types.expressionStatement(m.types.callExpression(o,[Ie,n]))})))))])),m.types.exportNamedDeclaration(null,r))}e.node.body.push(m.types.exportNamedDeclaration(m.types.variableDeclaration("const",[m.types.variableDeclarator(r,l||m.types.stringLiteral(""))])),m.types.exportNamedDeclaration(m.types.variableDeclaration("const",[m.types.variableDeclarator(n,i||m.types.stringLiteral(""))])),m.types.exportNamedDeclaration(m.types.variableDeclaration("const",[m.types.variableDeclarator(o,m.types.isNullLiteral(d)?m.types.functionExpression(null,[],m.types.blockStatement([])):d)]))),p.length&&e.node.body.push(m.types.variableDeclaration("const",p)),e.node.body.push(m.types.exportDefaultDeclaration(J("createRenderFn",r,n,o,a&&s)))}}},Pe=new WeakMap,Be={migrate:{enter(e){Pe.set(e,Ne),Ne=e},exit(){Ne.scope.crawl(),Ne=Pe.get(Ne)}},analyze:{enter(e){Pe.set(e,Ne),Ne=e,C(e)},exit(){j((e=>{let t=0;for(const r of M(e))if(r)for(const e of r)e.id=t,t+=e.size+1})),function(){const e=[];j((t=>{const r=N(t).filter((e=>e.count>0||!Array.isArray(e.references)));r.forEach(((e,r)=>{e.index=r,e.apply.name=V("apply",t,e.references),e.hydrate.name=V("hydrate",t,e.references)})),e[t]=r})),(Ne.node.extra??={}).referenceGroups=e}(),Ne=Pe.get(Ne)}},translate:{enter(e){if(Pe.set(e,Ne),Ne=e,Ie=e.scope.generateUidIdentifier("scope"),"hydrate"===x().output)return e.skip(),e.node.body=[m.types.importDeclaration([],m.types.stringLiteral(e.hub.file.opts.filename))],void((e.node.extra.hasInteractiveChild||e.node.extra.isInteractive)&&e.node.body.push(m.types.expressionStatement(J("init"))))},exit(e){b()?$e.translate.exit(e):Fe.translate.exit(e),Ne=Pe.get(Ne)}}},Ue={translate:{exit(e){const t=e.get("source"),r=t.node.value;t.node.value=(0,f.resolveTagImport)(t,r)||r}}},Re={translate(e){b()&&Le(e)`<!${e.node.value}>`,e.remove()}},Oe={translate(e){b()&&Le(e)`<?${e.node.value}?>`,e.remove()}},ze={translate(e){b()&&Le(e)`<![CDATA[${e.node.value}]]>`,e.remove()}},qe={translate(e){Le(e)`${e.node.value}`,xe(e),e.remove()}};function We(e,t){if(!e)return!1;const{node:r}=t,n=He(e)?e.default:e;return Je(n)?n(t,m.types):n.enter&&n.enter(t,m.types),r!==t.node}function Ve(e,t){if(!e)return!1;const{node:r}=t,n=He(e)?e.default:e;return!Je(n)&&n.exit&&n.exit(t,m.types),r!==t.node}function He(e){return Boolean(e.default)}function Je(e){return"function"==typeof e}var Ye=/^[0-9A-Z_$]+$/i;function Ze(e){return Ye.test(e)?m.types.identifier(e):m.types.stringLiteral(e)}function Ge(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{node:r}=e;let n=m.types.objectExpression([]);const o=n.extra={};for(const e of r.attributes){const t=e.value;m.types.isMarkoSpreadAttribute(e)?n.properties.push(m.types.spreadElement(t)):n.properties.push(m.types.objectProperty(Ze(e.name),t))}if(t){const{body:t,params:o}=r.body;let s=r.extra.hoistedControlFlows;if(s)for(const t of e.get("body").get("body"))if(e.insertBefore(t.node),t.remove(),(t.isConditional()||t.isLoop())&&!--s)break;t.length&&n.properties.push(m.types.objectMethod("method",m.types.identifier("renderBody"),o,m.types.blockStatement(t)))}if(n.properties.length){if(1===n.properties.length){const[e]=n.properties;m.types.isSpreadElement(e)&&(n=e.argument,n.extra=o)}return n}}function Ke(e){if(m.types.isObjectExpression(e)){const t=e.properties[e.properties.length-1];if(m.types.isObjectMethod(t)&&"renderBody"===t.key.name)return t}}function Xe(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"const";const{node:{var:n}}=e;n&&(e.get("var").remove(),e.insertBefore(m.types.variableDeclaration(r,[m.types.variableDeclarator(m.types.cloneDeep(n),t)])),e.hub.file.path.scope.crawl())}function Qe(e){let{extra:t}=e.node;if(t||(t=e.node.extra={}),void 0===t.confident){const r=e.get("value"),{confident:n,value:o}=r.evaluate();t.computed=o,t.confident=n}return t}var et={analyze:{enter(e){const{node:t}=e,r=e.get("attributes");let n=e.has("var")?S(e):void 0;if(r.some(tt));else for(const t of r){const r=t.node,{name:o}=r;o.startsWith("on")?(n??=S(e),(Ne.node.extra??{}).isInteractive=!0):Qe(t).confident||(n??=S(e))}void 0!==n&&D(0,n,t,t.name.value)}},translate:{enter(e){const{extra:t}=e.node,r=b(),n=e.get("name"),o=e.get("attributes"),s=(0,f.getTagDef)(e),a=o.some((e=>e.isMarkoSpreadAttribute())),i=Le(e),l=T(e);let d;if(r&&(t.tagNameNullable&&Me(e),Xe(e,m.types.unaryExpression("void",m.types.numericLiteral(0)))),t.reserve&&(d=m.types.numericLiteral(t.reserve.id),we(e,32)),i`<${n.node}`,a){const t=J("attrs",Ie,Ge(e));r?i`${t}`:e.insertBefore(m.types.expressionStatement(t))}else for(const e of o){const t=e.node.name,n=e.node.extra??{},o=e.get("value"),{confident:s,computed:a,valueReferences:p}=n;switch(t){case"class":case"style":{const e=`${t}Attr`;s?i`${Y()[e](a)}`:r?i`${J(e,o.node)}`:ne("apply",l,p,m.types.expressionStatement(J(e,m.types.memberExpression(Ie,d,!0),o.node)));break}default:s?i`${Y().attr(t,a)}`:r?t.startsWith("on")?ae(l,n.valueReferences):i`${J("attr",m.types.stringLiteral(t),o.node)}`:t.startsWith("on")?ne("hydrate",l,n.valueReferences,m.types.expressionStatement(J("on",m.types.memberExpression(Ie,d,!0),m.types.stringLiteral(t.slice(2)),o.node))):ne("apply",l,p,m.types.expressionStatement(J("attr",m.types.memberExpression(Ie,d,!0),m.types.stringLiteral(t),o.node)))}}let p=!1;if(s&&s.parseOptions?.openTagOnly){switch(s.htmlType){case"svg":case"math":i`/>`;break;default:i`>`}p=!0}else e.node.body.body.length?i`>`:(i`></${n.node}>`,p=!0);r&&t.tagNameNullable&&e.insertBefore(m.types.ifStatement(n.node,je(e)))[0].skip(),p?(xe(e),e.remove()):be(e)},exit(e){const{extra:t}=e.node,r=b();r&&t.tagNameNullable&&De(e),e.insertBefore(e.node.body.body).forEach((e=>e.skip())),Le(e)`</${e.node.name}>`,r&&t.tagNameNullable&&e.insertBefore(m.types.ifStatement(e.node.name,je(e)))[0].skip(),ve(e),e.remove()}}};function tt(e){return"MarkoSpreadAttribute"===e.type}var rt={analyze:{enter(e){!function(e){e.has("var")&&I(S(e),e.get("var"));const t=e.get("body");t.get("body").length&&t.get("params").length&&I(S(t),t)}(e);const t=e.get("body");t.get("body").length&&C(t),(0,f.getTagDef)(e)?.template&&D(1,S(e),e.node,"child");const r=(0,f.loadFileForTag)(e)?.ast.program.extra;(r?.isInteractive||r?.hasInteractiveChild)&&((Ne.node.extra??{}).hasInteractiveChild=!0)},exit(e){const t=(0,f.getTagDef)(e)?.template,r=S(e);t&&(e.node.extra.attrsReferences=F(r,e.node.attributes.filter((e=>e.extra?.valueReferences)).map((e=>[e.extra,"valueReferences"]))))}},translate:{enter(e){we(e),b()&&Me(e)},exit(e){const t=T(e),r=e.get("body"),n=T(r),o=b(),{node:s}=e,a=Le(e),i=s.extra.reserve;let l,d;if(o&&(De(e),ie(r)),m.types.isStringLiteral(s.name)){const{file:t}=e.hub,r=s.name.value,n=t.metadata.marko.tags,p=(0,f.getTagDef)(e)?.template,c=p&&(0,f.resolveRelativePath)(t,p),u=(0,f.loadFileForTag)(e).ast.program;if(!c)throw e.get("name").buildCodeFrameError(`Unable to find entry point for custom tag <${r}>.`);o?l=(0,f.importDefault)(t,c,r):(l=(0,f.importNamed)(t,c,"apply",r),u.extra.attrs&&(d=(0,f.importNamed)(t,c,"applyAttrs",`${r}_attrs`)),a`${(0,f.importNamed)(t,c,"template",`${r}_template`)}`,function(e,t,r){const n=fe(T(e));ye(T(e)).push(`${ge[47]}(${t})`,r.name,ge[38]),ue(n,ke(47,t)),n.push(r,String.fromCharCode(38))}(e,i.id,(0,f.importNamed)(t,c,"walks",`${r}_walks`))),n.includes(c)||n.push(c)}else l=s.name;const p=s.var,c=Ge(e,!0),u=Ke(c);if(o&&s.extra.tagNameNullable){let t,r=ot(l,Ge(e));if(u){t=e.scope.generateUidIdentifier("renderBody");const[r]=e.insertBefore(m.types.functionDeclaration(t,u.params,u.body));r.skip(),c.properties[c.properties.length-1]=m.types.objectProperty(m.types.identifier("renderBody"),t)}p&&(Xe(e,m.types.unaryExpression("void",m.types.numericLiteral(0)),"let"),r=m.types.assignmentExpression("=",p,r)),e.replaceWith(m.types.ifStatement(l,m.types.expressionStatement(r),t&&nt(t)))[0].skip()}else if(o)p?(Xe(e,ot(l,c)),e.remove()):e.replaceWith(nt(l,c))[0].skip();else{if(u){const{walks:e,writes:t}=Ae(n);c.properties.pop(),c.properties.push(m.types.objectProperty(m.types.identifier("renderBody"),J("createRenderer",t||m.types.stringLiteral(""),e||m.types.stringLiteral(""),m.types.arrowFunctionExpression(u.params,u.body))))}ne("apply",t,void 0,m.types.expressionStatement(m.types.callExpression(l,[G(i,t)]))),c&&d&&ne("apply",t,e.node.extra.attrsReferences,m.types.expressionStatement(m.types.callExpression(d,[G(i,t),c]))),e.remove()}}}};function nt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return m.types.expressionStatement(ot(e,...r))}function ot(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return m.types.callExpression(e,r.filter(Boolean))}function st(e){const t=e.body;return 1===t.length&&m.types.isExpressionStatement(t[0])?t[0].expression:m.types.isBlockStatement(e)?e:m.types.blockStatement(t)}var at={translate:{enter(e){b()&&Me(e)},exit(e){const{node:t}=e,r=T(e.get("body")),n=Ge(e,!0),o=Ke(n),s=[t.name,n||m.types.nullLiteral()];if(b()?Me(e):s.unshift(Ie),o){n.properties.pop();let e=m.types.arrowFunctionExpression(o.params,st(o.body));if(v()){const{walks:t,writes:n}=Ae(r);e=J("createRenderer",n||m.types.stringLiteral(""),t||m.types.stringLiteral(""),e)}s.push(e)}const a=J("dynamicTag",...s);t.var?(Xe(e,a),e.remove()):b()?e.replaceWith(m.types.expressionStatement(a))[0].skip():e.remove()}}},it={translate:{enter(e){if(function(e){const t=Te(T(e));return Boolean(t.length>1||t[0])}(e))throw e.get("name").buildCodeFrameError("Dynamic @tags cannot be mixed with body content.")},exit(e){(0,f.assertNoVar)(e),De(e);const t=(0,f.findParentTag)(e);if(!t)throw e.get("name").buildCodeFrameError("@tags must be nested within another tag.");const r=t.node.extra;if(0===r.tagNameType)throw e.get("name").buildCodeFrameError("@tags cannot be nested under native tags.");const n=e.node.name.value.slice(1),o=r.nestedAttributeTags[n],s=Ge(e,!0)||m.types.objectExpression([]);if(o.dynamic)o.identifier||(o.identifier=t.scope.generateUidIdentifier(n),t.insertBefore(o.repeated?m.types.variableDeclaration("const",[m.types.variableDeclarator(o.identifier,m.types.arrayExpression([]))]):m.types.variableDeclaration("let",[m.types.variableDeclarator(o.identifier)])),t.pushContainer("attributes",m.types.markoAttribute(n,o.identifier))),e.replaceWith(m.types.expressionStatement(o.repeated?m.types.callExpression(m.types.memberExpression(o.identifier,m.types.identifier("push")),[s]):m.types.assignmentExpression("=",o.identifier,s)));else if(o.repeated){const r=t.get("attributes").find((e=>e.node.name===n));r?r.get("value").pushContainer("elements",s):t.pushContainer("attributes",m.types.markoAttribute(n,m.types.arrayExpression([s]))),e.remove()}else t.pushContainer("attributes",m.types.markoAttribute(n,s)),e.remove()}}};function lt(e){const{extra:t}=e.node;t.nestedAttributeTags={},t.hoistedControlFlows=0,dt(t,!1,!1,e)}function dt(e,t,r,n){let o=!1;for(const s of n.get("body").get("body"))s.isMarkoTag()&&pt(e,t,r,s)&&(o=!0);return o}function pt(e,t,r,n){if((0,f.isTransparentTag)(n)){if(dt(e,t||(0,f.isLoopTag)(n),!0,n))return(0,f.isTransparentTag)(n.parentPath.parentPath)||e.hoistedControlFlows++,!0}else if((0,f.isAttributeTag)(n)){const o=n.node.name.value.slice(1),s=e.nestedAttributeTags,a=s[o],i=a||(s[o]={dynamic:!1,repeated:!1});return i.dynamic||=r,i.repeated||=t||void 0!==a,!0}return!1}var ct={analyze:{enter(e){const t=(0,f.getTagDef)(e)?.analyzer?.hook;if(t)We(t,e);else switch(E(e)){case 0:et.analyze.enter(e);break;case 1:rt.analyze.enter(e)}},exit(e){const t=(0,f.getTagDef)(e),r=E(e),n=t?.analyzer?.hook;n?Ve(n,e):0!==r&&(lt(e),1===r)&&rt.analyze.exit(e)}},translate:{enter(e){const t=(0,f.getTagDef)(e),r=e.node.extra;if((0,f.assertNoArgs)(e),t?.translator)return t.translator.path&&e.hub.file.metadata.marko.watchFiles.push(t.translator.path),void We(t.translator.hook,e);for(const t of e.get("attributes"))if(t.isMarkoAttribute()){if(t.node.arguments)throw t.buildCodeFrameError(`Unsupported arguments on the "${t.node.name}" attribute.`);if(t.node.modifier){if(!(0,f.isNativeTag)(t.parentPath))throw t.buildCodeFrameError(`Unsupported modifier "${t.node.modifier}".`);t.node.name+=`:${t.node.modifier}`}}let{tagNameType:n}=r;if(r.tagNameDynamic){if(r.tagNameNullable&&!e.get("name").isIdentifier()){const t=e.scope.generateUidIdentifier("tagName"),[r]=e.insertBefore(m.types.variableDeclaration("const",[m.types.variableDeclarator(t,e.node.name)]));r.skip(),e.set("name",t)}2===n||b()||(n=2)}switch(n){case 0:et.translate.enter(e);break;case 1:rt.translate.enter(e);break;case 2:at.translate.enter(e);break;case 3:it.translate.enter(e)}},exit(e){const t=(0,f.getTagDef)(e)?.translator;if(t)return void Ve(t.hook,e);const{extra:r}=e.node;let{tagNameType:n}=r;switch(!r.tagNameDynamic||2===n||b()&&void 0!==n||(n=2),n){case 0:et.translate.exit(e);break;case 1:rt.translate.exit(e);break;case 2:at.translate.exit(e);break;case 3:it.translate.exit(e)}}}},ut="marko-core";function mt(e){return e.isMarkoTag()&&(0,f.getTagDef)(e)?.taglibId===ut}function ft(e,t){return mt(e)&&e.node.name.value===t}var yt={script:"escapeScript",style:"escapeStyle"},ht={analyze(e){const{node:t}=e,{confident:r,computed:n}=Qe(e);(!r||!t.escape&&n)&&(D(0,S(e),t,"placeholder"),function(e){let t=e.getPrevSibling();for(;t.node&&gt(t);)t=t.getPrevSibling();if((t.node||m.types.isProgram(e.parentPath))&&(!m.types.isMarkoTag(t)||!(0,f.isNativeTag)(t)))return e.node.extra.needsMarker=!0;let r=e.getNextSibling();for(;r.node&&gt(r);)r=r.getNextSibling();if((r.node||m.types.isProgram(e.parentPath))&&(!m.types.isMarkoTag(r)||!(0,f.isNativeTag)(r)))return e.node.extra.needsMarker=!0;e.node.extra.needsMarker=!1}(e))},translate(e){const t=b(),r=Le(e),n=e.node.extra,{confident:o,computed:s,valueReferences:a,reserve:i}=n,l=t||o&&(e.node.escape||!s),d=l?e.node.escape?yt[function(e){let{parentPath:t}=e;return t.isMarkoTag()&&(0,f.isNativeTag)(t)&&t.node.name.value||""}(e)]||"escapeXML":"toString":e.node.escape?"data":"html";o&&l?r`${Y()[d](s)}`:(n.needsMarker?we(e,37):(t||r` `,we(e,32)),t?r`${J(d,e.node.value)}`:ne("apply",T(e),a,m.types.expressionStatement(J(d,m.types.memberExpression(Ie,m.types.numericLiteral(i.id),!0),e.node.value)))),xe(e),e.remove()}};function gt(e){return m.types.isMarkoComment(e)||m.types.isMarkoTag(e)&&mt(e)&&["let","const","effect","lifecycle","attrs","get","id"].includes(e.node.name.value)}var bt={translate(e){if(b()){if(e.node.static)return;e.replaceWithMultiple(e.node.body)}else e.node.static?e.replaceWithMultiple(e.node.body):(ne("apply",T(e),e.node.extra?.bodyReferences,e.node.body),e.remove())}},vt=/^\[if |<!\[endif\]$/,xt={translate(e){if(b()){const{value:t}=e.node;vt.test(t)&&Le(e)`<!--${t}-->`}e.remove()}},wt={parse(e){const{node:t}=e;e.replaceWith((0,f.parseScript)(e.hub.file,t.rawValue,t.start).body[0])},parseOptions:{statement:!0,rawOpenTag:!0},autocomplete:[{displayText:'import <scope> from "<path>"',description:"Use to import external modules, follows the same syntax as JavaScript imports.",snippet:'import ${2} from "${1:path}"',descriptionMoreURL:"https://markojs.com/docs/syntax/#importing-external-files"}]},kt={parse(e){const{node:t}=e;e.replaceWith((0,f.parseScript)(e.hub.file,t.rawValue,t.start).body[0])},parseOptions:{statement:!0,rawOpenTag:!0},autocomplete:[{displayText:"export <value>"}]},Et={analyze(e){if(e.has("var")){const t=e.get("var"),r=t.getBindingIdentifiers(),n=S(e);I(n,t,2);for(const e in r){const t=r[e].extra.reserve;t.exportIdentifier=W(n,t,!0).apply}(Ne.node.extra??={}).attrs={bindings:r,var:t.node}}},translate(e){e.remove()},attributes:{},autocomplete:[{displayText:"attrs/{ ... }",description:"Use to receive the attributes passed into this template.",snippet:"attrs/{ $1 }$2"}]};function Ct(e){const t=e.body;return 1===t.length?t[0]:m.types.isBlockStatement(e)?e:m.types.blockStatement(t)}var St={analyze:{enter(e){D(0,S(e),e.node,"if",3),rt.analyze.enter(e)},exit(e){lt(e),jt(e)}},translate:{enter(e){const{node:t}=e,[r]=t.attributes;if((0,f.assertNoVar)(e),(0,f.assertNoParams)(e),!m.types.isMarkoAttribute(r)||!r.default)throw e.get("name").buildCodeFrameError("The '<if>' tag requires a default attribute like '<if=condition>'.");if(t.attributes.length>1){const r=t.attributes[1].loc?.start,n=t.attributes[t.attributes.length-1].loc?.end,o="The '<if>' tag only supports a default attribute.";throw null==r||null==n?e.get("name").buildCodeFrameError(o):e.hub.buildError({loc:{start:r,end:n}},o,Error)}we(e,37),xe(e),b()&&Me(e)},exit(e){Mt(e)}},attributes:{},autocomplete:[{snippet:"if=${1:condition}",description:"Use to display content only if the condition is met.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#if-else-if-else"}]},Tt=new WeakMap;function Lt(e,t){const r=Tt.get(e)??[],n=e.getNextSibling(),o=!(ft(n,"else")||ft(n,"else-if"));return r.push({tag:e,sectionId:t}),o||Tt.set(n,r),[o,r]}function jt(e){const t=S(e),r=S(e.get("body")),[n,o]=Lt(e,r);n&&(o[0].tag.node.extra.conditionalReferences=F(t,o.filter((e=>{let{tag:t}=e;return t.node.attributes[0]?.extra?.valueReferences})).map((e=>{let{tag:t}=e;return[t.node.attributes[0].extra,"valueReferences"]}))))}function Mt(e){const t=e.get("body"),r=T(t),[n,o]=Lt(e,r);if(b()&&(De(e),ie(t)),n)if(v()){const t=T(e),{extra:r}=o[0].tag.node;let n=m.types.nullLiteral();for(let e=o.length;e--;){const{tag:t,sectionId:s}=o[e],[a]=t.node.attributes,i=Se(s);re(t,((e,t)=>{let{apply:n,index:o}=e;return J("queueInBranch",Ie,m.types.numericLiteral(r.reserve.id),Se(s),n,m.types.numericLiteral(o),t)})),t.remove(),n=a?m.types.conditionalExpression(a.value,i,n):i}ne("apply",t,r.conditionalReferences,m.types.expressionStatement(J("setConditionalRenderer",Ie,m.types.numericLiteral(r.reserve.id),n)))}else{const t=e.getNextSibling();let r;for(let e=o.length;e--;){const{tag:t}=o[e],[n]=t.node.attributes,s=Ct(t.node.body);r=n?m.types.ifStatement(n.value,s,r):s,t.remove()}t.insertBefore(r)}}var Dt={analyze:{enter(e){rt.analyze.enter(e)},exit(e){jt(e)}},translate:{enter(e){const{node:t}=e,[r]=t.attributes;if((0,f.assertNoVar)(e),(0,f.assertNoParams)(e),!m.types.isMarkoAttribute(r)||!r.default)throw e.get("name").buildCodeFrameError("The '<else-if>' tag requires a default attribute like '<else-if=condition>'.");if(t.attributes.length>1){const r=t.attributes[1].loc?.start,n=t.attributes[t.attributes.length-1].loc?.end,o="The '<else-if>' tag only supports a default attribute.";throw null==r||null==n?e.get("name").buildCodeFrameError(o):e.hub.buildError({loc:{start:r,end:n}},o,Error)}},exit(e){Mt(e)}},attributes:{},autocomplete:[{snippet:"else-if=${1:condition}",description:"Use after an <if> or <else-if> tag to display content if those conditions do not match and this one does.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#if-else-if-else"}]},At={analyze:{enter(e){rt.analyze.enter(e)},exit(e){jt(e)}},translate:{enter(e){const{node:t}=e,[r]=t.attributes;if((0,f.assertNoVar)(e),(0,f.assertNoParams)(e),t.attributes.length>1||r&&"if"!==r.name){const r=t.attributes[1].loc?.start,n=t.attributes[t.attributes.length-1].loc?.end,o="The '<else>' tag only supports an if attribute.";throw null==r||null==n?e.get("name").buildCodeFrameError(o):e.hub.buildError({loc:{start:r,end:n}},o,Error)}},exit(e){Mt(e)}},attributes:{},autocomplete:[{description:"Use after an <if> or <else-if> tag to display content if those conditions do not match.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#if-else-if-else"}]};function _t(e){for(const t of e.get("attributes"))if(t.isMarkoSpreadAttribute())throw t.buildCodeFrameError(`The <${e.get("name")}> tag does not support ...spread attributes.`)}function Nt(e){if(e.node.body.body.length)throw e.get("name").buildCodeFrameError(`The <${e.get("name")}> tag does not support body content.`)}var It={translate(e){const{node:t}=e,[r]=t.attributes;if((0,f.assertNoParams)(e),Nt(e),!t.var)throw e.get("name").buildCodeFrameError("The 'const' tag requires a tag variable.");if(!r)throw e.get("name").buildCodeFrameError("The 'const' tag requires a default attribute.");if(t.attributes.length>1||!m.types.isMarkoAttribute(r)||!r.default&&"default"!==r.name)throw e.get("name").buildCodeFrameError("The 'const' tag only supports the 'default' attribute.");if(v()){const n=T(e),o=Object.values(e.get("var").getBindingIdentifiers());ne("apply",n,r.extra?.valueReferences,1===o.length?m.types.expressionStatement(m.types.callExpression(W(n,o[0].extra.reserve).apply,[Ie,r.value])):[m.types.variableDeclaration("const",[m.types.variableDeclarator(t.var,r.value)]),...o.map((e=>m.types.expressionStatement(m.types.callExpression(W(n,e.extra.reserve).apply,[m.types.identifier(e.name)]))))])}else Xe(e,r.value);e.remove()},attributes:{},autocomplete:[{description:"Use to create an constant binding.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#const"}]},$t={analyze(e){D(1,T(e),e.node,"cleanup"),(Ne.node.extra??{}).isInteractive=!0},translate(e){const{node:t}=e,[r]=t.attributes;if((0,f.assertNoParams)(e),Nt(e),!r)throw e.get("name").buildCodeFrameError("The 'effect' tag requires a default attribute.");if(t.attributes.length>1||!m.types.isMarkoAttribute(r)||!r.default&&"default"!==r.name)throw e.get("name").buildCodeFrameError("The 'effect' tag only supports the 'default' attribute.");const n=T(e);if(v()){const t=e.node.extra.reserve.id,{value:o}=r;let s=null;(m.types.isFunctionExpression(o)||m.types.isArrowFunctionExpression(o)&&m.types.isBlockStatement(o.body))&&(s=o.body.body,m.types.traverse(o.body,(e=>{m.types.isReturnStatement(e)&&(s=null)}))),ne("hydrate",n,r.extra?.valueReferences,s||m.types.expressionStatement(J("userEffect",Ie,m.types.numericLiteral(t),r.value)))}else ae(n,r.extra?.valueReferences);e.remove()},attributes:{},autocomplete:[{description:"Use to create a side effects.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#effect"}]},Ft={analyze:{enter(e){const t=function(e){return e.node.extra??={},m.types.isMarkoTag(e.parentPath?.parent)&&(0,f.getTagDef)(e.parentPath.parentPath)?.html?e.node.extra.isOnlyChild=1===e.parent.body.length:e.node.extra.isOnlyChild=!1}(e);D(0,S(e),t?e.parentPath.parent:e.node,"for",3),rt.analyze.enter(e)},exit(e){lt(e)}},translate:{enter(e){if(function(e){const t=e.node.attributes,r=e.node.body.params.length>0;if((0,f.assertNoVar)(e),Ut(t,"of")){if((0,f.assertAllowedAttributes)(e,["of","by"]),!r)throw e.buildCodeFrameError("Invalid 'for of' tag, missing |value, index| params.")}else if(Ut(t,"in")){if((0,f.assertAllowedAttributes)(e,["in","by"]),!r)throw e.buildCodeFrameError("Invalid 'for in' tag, missing |key, value| params.")}else{if(!Ut(t,"from")||!Ut(t,"to"))throw e.buildCodeFrameError("Invalid 'for' tag, missing an 'of', 'in' or 'to' attribute.");(0,f.assertAllowedAttributes)(e,["from","to","step","by"])}}(e),!b()&&Object.keys(e.node.extra.nestedAttributeTags).length)return void e.remove();const{extra:{isOnlyChild:t}}=e.node;t||(we(e,37),xe(e)),b()&&Me(e)},exit(e){b()?Bt.exit(e):Pt.exit(e)}},attributes:{of:{type:"expression",autocomplete:[{description:"Iterates over a list of items."}]},in:{type:"expression",autocomplete:[{description:"Iterates over the keys and values of an object."}]},to:{type:"number",autocomplete:[{description:"Iterates up to the provided number (inclusive)"}]},from:{type:"number",autocomplete:[{description:"Iterates starting from the provided number (inclusive)"}]},step:{type:"number",autocomplete:[{description:"The amount to increment during each interation (with from/to)"}]}},autocomplete:[{snippet:"for|${1:value, index}| of=${3:array}",description:"Use to iterate over lists, object properties, or between ranges.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#iterating-over-a-list"},{snippet:"for|${1:name, value}| in=${3:object}",descriptionMoreURL:"https://markojs.com/docs/core-tags/#iterating-over-an-objects-properties"},{snippet:"for|${1:index}| from=${2:number} to=${3:number} step=${4:number}",descriptionMoreURL:"https://markojs.com/docs/core-tags/#iterating-between-a-range-of-numbers"}]},Pt={exit(e){const t=T(e.get("body")),r=T(e),{node:n}=e,{attributes:o,body:{params:s},extra:{isOnlyChild:a}}=n,{extra:{reserve:i}}=a?e.parentPath.parent:e.node,l=Ut(o,"of"),d=Ut(o,"by");if(re(e,((e,t)=>{let{apply:r,index:n}=e;return J("queueForEach",Ie,m.types.numericLiteral(i.id),r,m.types.numericLiteral(n),t)})),l){const n=l.value,[o]=s;if(!m.types.isIdentifier(o))throw e.buildCodeFrameError("Invalid 'for of' tag, |value| parameter must be an identifier.");const a=Se(t);e.remove(),ne("apply",r,l.extra?.valueReferences,m.types.expressionStatement(J("setLoopOf",Ie,m.types.numericLiteral(i.id),n,a,d?d.value:m.types.nullLiteral(),W(t,o.extra.reserve).apply)))}}},Bt={exit(e){const t=e.get("body"),{node:r}=e,{attributes:n,body:{body:o,params:s}}=r,a=e.get("name"),i=Ut(n,"of"),l=Ut(n,"in"),d=Ut(n,"from"),p=Ut(n,"to"),c=m.types.blockStatement(o);let u;if(De(e),ie(t),l){const[e,t]=s;t&&c.body.unshift(m.types.variableDeclaration("const",[m.types.variableDeclarator(t,m.types.memberExpression(l.value,e,!0))])),u=m.types.forInStatement(m.types.variableDeclaration("const",[m.types.variableDeclarator(e)]),l.value,c)}else if(i){let t=i.value;const[r,n,o]=s;if(!r)throw a.buildCodeFrameError("Invalid 'for of' tag, missing |value, index| params.");if(u=[],n){const t=e.scope.generateUidIdentifierBasedOnNode(n,"i");u.push(m.types.variableDeclaration("let",[m.types.variableDeclarator(t,m.types.numericLiteral(0))])),c.body.unshift(m.types.variableDeclaration("let",[m.types.variableDeclarator(n,m.types.updateExpression("++",t))]))}o&&(m.types.isIdentifier(o)&&(t=o),u.push(m.types.variableDeclaration("const",[m.types.variableDeclarator(o,i.value)]))),u.push(m.types.forOfStatement(m.types.variableDeclaration("const",[m.types.variableDeclarator(r)]),t,c))}else if(d&&p){const t=Ut(n,"step")||{value:m.types.numericLiteral(1)},r=t?t.value:m.types.numericLiteral(1),[o]=s,a=e.scope.generateUidIdentifier("steps"),i=e.scope.generateUidIdentifier("step");o&&c.body.unshift(m.types.variableDeclaration("const",[m.types.variableDeclarator(o,m.types.binaryExpression("+",d.value,m.types.binaryExpression("*",i,r)))])),u=m.types.forStatement(m.types.variableDeclaration("let",[m.types.variableDeclarator(a,m.types.binaryExpression("/",m.types.binaryExpression("-",p.value,d.value),r)),m.types.variableDeclarator(i,m.types.numericLiteral(0))]),m.types.binaryExpression("<=",i,a),m.types.updateExpression("++",i),c)}c.body.push(m.types.expressionStatement(J("maybeFlush"))),e.replaceWithMultiple([].concat(u))}};function Ut(e,t){return e.find((e=>m.types.isMarkoAttribute(e)&&e.name===t))}var Rt={translate(e){(0,f.assertNoParams)(e),Nt(e),Me(e);const{node:t,hub:{file:r}}=e,[n]=t.attributes;let o;if(!t.var)throw e.get("name").buildCodeFrameError("<get> requires a variable to be defined, eg <get/NAME>.");if(void 0===n)o="$";else{if(!m.types.isMarkoAttribute(n)||!n.default||!m.types.isStringLiteral(n.value))throw e.get("name").buildCodeFrameError("The '<get>' tag requires default attribute that is a string that resolves to a Marko file like '<get/val=\"../file.marko\">' or '<get/val=\"<tag-name>\">'.");if(t.attributes.length>1){const r=t.attributes[1].loc?.start,n=t.attributes[t.attributes.length-1].loc?.end,o="The '<get>' tag only supports a default attribute.";throw null==r||null==n?e.get("name").buildCodeFrameError(o):e.hub.buildError({loc:{start:r,end:n}},o,Error)}const s=e.get("attributes")[0].get("value");if("."===n.value.value)o=r.metadata.marko.id;else{const e=(0,f.resolveTagImport)(s,s.node.value);if(!e)throw s.buildCodeFrameError("Unable to resolve template provided to '<get>' tag.");o=(0,f.getTemplateId)(r.markoOpts.optimize,h().resolve(r.opts.filename,"..",e))}}b()?e.replaceWith(m.types.variableDeclaration("const",[m.types.variableDeclarator(t.var,J("getInContext",m.types.stringLiteral(o)))])):e.remove()},autocomplete:[{displayText:'get/<name>="<from>"',description:"Gets a value provided from another template.",snippet:'get/${1:name}="${2:from}"',descriptionMoreURL:"https://markojs.com/docs/core-tags/#get"}]},Ot={analyze(){},translate:{enter(e){be(e),Le(e)`<!--`},exit(e){(0,f.assertNoVar)(e),(0,f.assertNoParams)(e),(0,f.assertNoAttributes)(e),(0,f.assertNoAttributeTags)(e),ve(e),Le(e)`-->`,e.remove()}},parseOptions:{text:!0},attributes:{},autocomplete:[{description:"Use to create an html comment that is not stripped from the output.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#html-comment"}]},zt={translate(e){const{node:t}=e,r=t.var,[n]=t.attributes;if((0,f.assertNoParams)(e),Nt(e),!r)throw e.get("name").buildCodeFrameError("The 'let' tag requires a tag variable.");if(!m.types.isIdentifier(r))throw e.get("var").buildCodeFrameError("The 'let' cannot be destructured.");if(!n)throw e.get("name").buildCodeFrameError("The 'let' tag requires a default attribute.");if(t.attributes.length>1||!m.types.isMarkoAttribute(n)||!n.default&&"default"!==n.name)throw e.get("name").buildCodeFrameError("The 'let' tag only supports the 'default' attribute.");if(v()){const t=T(e),o=r.extra.reserve,s=W(t,o);ne("apply",t,n.extra?.valueReferences,m.types.expressionStatement(m.types.callExpression(s.apply,[Ie,n.value]))),function(e,t){for(const r of e.constantViolations){let n;r.isUpdateExpression()?n=m.types.binaryExpression("++"===r.node.operator?"+":"-",e.identifier,m.types.numericLiteral(1)):r.isAssignmentExpression()&&(n="="===r.node.operator?r.node.right:m.types.binaryExpression(r.node.operator.slice(0,-1),e.identifier,r.node.right)),n&&r.parentPath.replaceWith(t(r,n))}}(e.scope.getBinding(o.name),((e,t)=>function(e,t,r,n){let{apply:o,index:s}=e;return J("queue",K(t,n),o,m.types.numericLiteral(s-1),r)}(s,o,t,T(e))))}else Xe(e,n.value);e.remove()},attributes:{},autocomplete:[{description:"Use to create a mutable binding.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#let"}]},qt={translate:{enter(e){b()&&Me(e);const{node:t}=e,[r]=t.attributes;if(!t.body.body.length)throw e.buildCodeFrameError("The '<set>' tag requires body content that the context is forwarded through.");if(!m.types.isMarkoAttribute(r)||!r.default)throw e.get("name").buildCodeFrameError("The '<set>' tag requires default attribute like '<set=val>'.");if(t.attributes.length>1){const r=t.attributes[1].loc?.start,n=t.attributes[t.attributes.length-1].loc?.end,o="The '<set>' tag only supports a default attribute.";throw null==r||null==n?e.get("name").buildCodeFrameError(o):e.hub.buildError({loc:{start:r,end:n}},o,Error)}e.insertBefore(m.types.expressionStatement(J("pushContext",m.types.stringLiteral(e.hub.file.metadata.marko.id),r.value)))},exit(e){(0,f.assertNoParams)(e),(0,f.assertNoVar)(e),b()&&De(e),e.insertAfter(m.types.expressionStatement(J("popContext"))),e.replaceWithMultiple(e.node.body.body)}},autocomplete:[{displayText:"set=<value>",description:"Sets a value which can be read from a child template.",snippet:"set=${1:value}",descriptionMoreURL:"https://markojs.com/docs/core-tags/#set"}]},Wt={translate(e){const{hub:{file:t}}=e;(0,f.assertNoVar)(e),(0,f.assertNoParams)(e),_t(e);let r="text/css";const n=e.get("attributes"),o=h().basename(t.opts.sourceFileName),s=n.find((e=>e.isMarkoAttribute()&&"type"===e.node.name));if(s){const e=s.get("value");if(!e.isStringLiteral())throw e.buildCodeFrameError('<style> "type" attribute can only be a string literal.');r=e.node.value}"text/css"===r&&(r="css");const a=e.get("body").get("body"),i=a[0];if(1!==a.length||!i.isMarkoText())throw(i.isMarkoText()?a[1]:a[0]).buildCodeFrameError("The '<style>' tag currently only supports static content.");const{resolveVirtualDependency:l}=x();if(l){const e=l(t.opts.filename,{type:r,code:i.node.value,startPos:i.node.start,endPos:i.node.end,path:`./${o}`,virtualPath:`./${o}.${r}`});Ne.pushContainer("body",m.types.importDeclaration([],m.types.stringLiteral(e)))}e.remove()},attributes:{type:{enum:["css","less","scss","text/css"]}}},Vt={translate:{enter(e){if(b()&&Me(e),!e.node.var)throw e.get("name").buildCodeFrameError("<tag> requires a variable to be defined, eg <tag/NAME>.")},exit(e){b()&&De(e),e.replaceWith(m.types.variableDeclaration("const",[m.types.variableDeclarator(e.node.var,m.types.arrowFunctionExpression(e.node.body.params,st(e.node.body)))]))}},attributes:{},autocomplete:[{displayText:"tag/<name>|<params>|",description:"Creates a reusable fragment within the template.",snippet:"tag/${1:name}|${2:param1, param2}|",descriptionMoreURL:"https://markojs.com/docs/core-tags/#tag"}]},Ht=new WeakMap,Jt={migrate:[e=>e.remove()]},Yt={taglibId:ut,"<import>":wt,"<export>":kt,"<attrs>":Et,"<if>":St,"<else-if>":Dt,"<else>":At,"<for>":Ft,"<let>":zt,"<const>":It,"<effect>":$t,"<html-comment>":Ot,"<tag>":Vt,"<set>":qt,"<get>":Rt,"<yield>":{translate(e){(0,f.assertNoVar)(e),(0,f.assertNoParams)(e),Nt(e),_t(e),Me(e);const{node:t,hub:{file:r}}=e,[n,o]=t.attributes;if(!m.types.isMarkoAttribute(n)||!n.default)throw e.get("name").buildCodeFrameError("The '<yield>' tag requires default attribute like '<yield=VALUE>'.");if(o&&"onnext"===o.name&&b()&&e.get("attributes")[1].remove(),t.attributes.length>1){const r=t.attributes[1].loc?.start,n=t.attributes[t.attributes.length-1].loc?.end,o="The '<yield>' tag only supports a default attribute.";throw null==r||null==n?e.get("name").buildCodeFrameError(o):e.hub.buildError({loc:{start:r,end:n}},o,Error)}let s=Ht.get(r);if(!s){const e=r.path;Ht.set(r,s=e.scope.generateDeclaredUidIdentifier("return")),e.pushContainer("body",m.types.returnStatement(s))[0].skip()}b()&&e.replaceWith(m.types.assignmentExpression("=",s,n.value))[0].skip()},autocomplete:[{displayText:"yield=<value>",description:"Provides a value for use in a parent template.",snippet:"yield=${1:value}",descriptionMoreURL:"https://markojs.com/docs/core-tags/#yield"}]},"<style>":Wt,"<await-reorderer>":Jt,"<init-widgets>":Jt,"<init-components>":Jt,"<static>":{parse(e){const{node:t,hub:{file:r}}=e,n=t.rawValue,o=n.replace(/^static\s*/,"").trim(),s=t.name.start+(n.length-o.length);let{body:a}=(0,f.parseScript)(r,o,s);1===a.length&&m.types.isBlockStatement(a[0])&&(a=a[0].body),e.replaceWith(m.types.markoScriptlet(a,!0))},"parse-options":{statement:!0,rawOpenTag:!0},autocomplete:[{displayText:"static <statement>",description:"A JavaScript statement which is only evaluated once your template is loaded.",descriptionMoreURL:"https://markojs.com/docs/syntax/#static-javascript"}]},"<__flush_here_and_after__>":{migrate:[e=>{e.replaceWithMultiple(e.node.body.body),Ne.scope.crawl()}]}},Zt=new WeakMap,Gt=new WeakSet;function Kt(e){for(const t of Ne.get("body"))if(!_e(t))return void t.insertBefore(e);Ne.unshiftContainer("body",e)}var Xt={Program:Be,ReferencedIdentifier:{migrate(e){const{name:t}=e.node;if(!e.scope.hasBinding(t))switch(e.node.name){case"input":Gt.has(Ne)||(Gt.add(Ne),Kt(m.types.markoTag(m.types.stringLiteral("attrs"),void 0,m.types.markoTagBody(),void 0,e.node)));break;case"out":if(!m.types.isMemberExpression(e.parent)||!m.types.isIdentifier(e.parent.property)||"global"!==e.parent.property.name)throw e.buildCodeFrameError("Only out.global is supported for compatibility.");{let t=Zt.get(Ne);t||(t=Ne.scope.generateUidIdentifier("$global"),Zt.set(Ne,t),Kt(m.types.markoTag(m.types.stringLiteral("get"),void 0,m.types.markoTagBody(),void 0,t))),e.parentPath.replaceWith(t)}}}},ImportDeclaration:Ue,MarkoDocumentType:Re,MarkoDeclaration:Oe,MarkoCDATA:ze,MarkoText:qe,MarkoTag:ct,MarkoPlaceholder:ht,MarkoScriptlet:bt,MarkoComment:xt},Qt=e=>Object.entries(Xt).reduce(((t,r)=>{let[n,o]=r;return e in o&&(t[n]=o[e]),t}),{}),er=Qt("analyze"),tr=Qt("translate"),rr=[["../../browser-shims/v6",{...Yt,migrate:Qt("migrate")}]],nr=r("../../node_modules/@marko/tags-api-preview/dist/components/return/index-browser.mjs"),or=r("./playground/components/hash-value.marko"),sr=r("../../node_modules/marko/dist/runtime/helpers/render-tag.js"),ar=r.n(sr),ir=r("../components/repl/index.marko"),lr=r("../../node_modules/@marko/tags-api-preview/dist/translate/track-rendering/index.mjs"),dr=r("../../node_modules/marko/dist/runtime/components/renderer.js"),pr=r.n(dr),cr=r("../../node_modules/marko/dist/runtime/components/registry/index-browser.js"),ur=r("../../node_modules/marko/dist/runtime/components/defineComponent.js"),mr=r.n(ur);const fr="Mtx/OLsr",yr=(0,u.t)(fr);(0,cr.r)(fr,(()=>yr));const hr={onCreate(){this.state={}}};yr._=pr()((function(e,t,r,o,s){(0,lr.begin)();try{var a=o,i=(0,nr.default)(a);ar()(or.Z,{default:[{name:"index.marko",path:"/components/index.marko",content:"<let/count=0/>\n<button onclick() { count++ }>\n  ${count}\n</button>"}],_return:i},t,r,"0");const{defaultChange:e,default:s}=i();ar()(ir.Z,{getTranslator:function(){return n},files:s,filesChange:e},t,r,"1")}finally{(0,lr.end)()}}),{t:fr},hr),yr.Component=mr()(hr,yr._),(0,s.register)("OIKmBXjW",i()),(0,s.register)("07hv1F0+",d()),(0,s.register)("mFesaajv",c()),(0,s.init)()},"../../browser-shims/compiler/dist/babel-types/index.js":(e,t,r)=>{e.exports=r("../../node_modules/@marko/compiler/dist/babel-types/index.js")},"../../browser-shims/compiler/index.js":(e,t,r)=>{t.types=r("../../browser-shims/compiler/dist/babel-types/index.js")},"../../browser-shims/fs.js":(e,t,r)=>{e.exports=r("../../node_modules/memfs/lib/index.js")},"../../browser-shims/module.js":(e,t,r)=>{const n=r("../../node_modules/path-browserify/index.js"),o=r("../../node_modules/resolve/index.js"),s=r("../../node_modules/resolve.exports/dist/index.js"),a={_nodeModulePaths:function(e){const t=[];for(;;){const r=n.dirname(e);if(t.push(n.join(e,"node_modules")),!r||r===e)break;e=r}return t},_resolveFilename:function(e,t){return o.sync(e,{basedir:n.dirname(t.filename),paths:t.paths,pathFilter(e,t,r){if(/^index(\.[^/\\]+)?$/.test(r))try{return s.legacy(e,a._resolveExportsOptions)}catch{}else try{return s.resolve(e,r,a._resolveExportsOptions)}catch{}return r}})},_resolveExportsOptions:{browser:!0}};e.exports=a},"../../browser-shims/process.js":e=>{e.exports={env:{},browser:!0,cwd:()=>"/"}},"../components/app-layout/components/layout-header/component-browser.js":(e,t,r)=>{var n=r("../components/app-layout/components/layout-header/events.js"),o="headspace--fixed",s="headspace--hidden";e.exports={onMount(){n.emit("create",this);var e,t=0,r=this.getEl("header").offsetHeight,o=(this.getEl("banner")||{offsetHeight:0}).offsetHeight,s=(e=()=>{var e=window.pageYOffset;e<=o?this.reset():!this.paused&&e>r&&(Math.abs(e-t)>=3||e>t&&t<=r)&&(e>t?this.hide():this.fix()),t=e},()=>window.requestAnimationFrame(e));s(),window.addEventListener("scroll",s)},reset(){this.removeClass(o),this.removeClass(s),n.emit("reset")},fix(){this.addClass(o),this.removeClass(s),n.emit("fix")},hide(){this.addClass(s),n.emit("hide")},addClass(e){this.getEl("header").classList.add(e)},removeClass(e){this.getEl("header").classList.remove(e)},pause(){this.paused=!0},resume(){setTimeout((()=>window.requestAnimationFrame((()=>{this.paused=!1}))))},toggleMenu(){n.emit("toggle-menu")}}},"../components/app-layout/components/layout-header/events.js":(e,t,r)=>{var n=r("../../node_modules/events/events.js");e.exports=new n},"../components/app-layout/components/layout-sidebar/component-browser.js":(e,t,r)=>{var n,o=r("../components/app-layout/components/layout-header/events.js"),s=[].forEach,a=[].filter,i=[].slice;e.exports={onMount(){this.preventOverscroll(),this.listenForHeaderChanges(),this.initScrollSpy()},initScrollSpy(){var e=[1,2,3,4,5,6].map((e=>".doc-content h"+e)).join(","),t=i.call(document.querySelectorAll(e)),r=!1;t.length&&this.subscribeTo(window).on("scroll",(()=>{r||(r=!0,setTimeout((()=>{var e,n,o=window.innerHeight/3;t.map((t=>{var r=t.getBoundingClientRect().top;(null==n||r<o&&Math.abs(r)<Math.abs(n))&&(n=r,e=t)}));var i=e.id,l=this.el.querySelector('a[href="#'+i+'"]')||this.el.querySelector("a.selected"),d=l,p=d.nextSibling;for(p&&s.call(p.querySelectorAll("a[href^=\\#]"),(e=>e.classList.remove("selected")));d;){var c=d.closest("ul"),u=c&&a.call(c.querySelectorAll(":scope > li > a[href^=\\#]"),(e=>e!==d));u&&u.forEach((e=>e.classList.remove("selected"))),d.classList.add("selected"),d=c&&c.previousElementSibling}this.scrollAnchorIntoView(l),r=!1}),50))}))},listenForHeaderChanges(){s.call(this.el.querySelectorAll("a[href^=\\#]"),(e=>{this.subscribeTo(e).on("click",(()=>{n.hide(),n.pause(),n.resume(),this.hide()}))}));var e=i.call(this.el.querySelectorAll("a.selected")).pop();e&&this.subscribeTo(e).on("click",(e=>{window.scrollTo(0,0),n.reset(),e.preventDefault()})),this.subscribeTo(o).on("reset",(()=>{this.el.classList.remove("no-header"),this.el.classList.remove("fixed"),setTimeout((()=>this.el.classList.remove("transition")),0)})).on("fix",(()=>{this.el.classList.remove("no-header"),this.el.classList.add("fixed"),setTimeout((()=>this.el.classList.add("transition")),0)})).on("hide",(()=>{this.el.classList.add("no-header"),this.el.classList.add("fixed"),setTimeout((()=>this.el.classList.add("transition")),0)})).on("toggle-menu",(()=>{this.el.classList.contains("show")?(this.el.classList.remove("show"),document.body.style.overflow=""):this.el.classList.add("show")})).on("create",(e=>{n=e,window.pageYOffset>n.el.offsetHeight&&(this.el.classList.add("no-header"),this.el.classList.add("fixed"))}))},preventOverscroll(){var e=this.getEl("sidebar");this.subscribeTo(document.body).on("wheel",(t=>{var r=t.deltaY,n=e.scrollTop+r,o=e.scrollHeight-e.offsetHeight,s=n<=0,a=n>=o;(r<0&&s||r>0&&a)&&(t.target===e||e.contains(t.target))&&(s&&0!=e.scrollTop?e.scrollTop=0:a&&e.scrollTop!=o&&(e.scrollTop=o),t.preventDefault())}))},scrollAnchorIntoView(e){for(var t,r=this.getEl("sidebar"),n=(e.offsetTop,r.scrollTop),o=r.offsetHeight,s=n+o,a=e.closest("li");(t=a.parentNode.closest("ul"))&&t.offsetHeight<o;)a=t;var i=a.offsetTop,l=a.offsetHeight;i>n&&i+l<s||(r.scrollTop=i+l/2-o/2)},hide(){this.el.classList.remove("show"),document.body.style.overflow=""}}},"../components/app-layout/components/layout-sidebar/components/version-switcher/component-browser.js":e=>{e.exports={switchVersion(e){var t=e.target.value;"current"!==t&&(e.target.value="current",window.location.href=t)}}},"../components/app-footer/ebay.svg":(e,t,r)=>{"use strict";r.p},"../components/app-footer/openjsf.svg":(e,t,r)=>{"use strict";r.p},"../components/app-footer/osi.svg":(e,t,r)=>{"use strict";r.p},"../components/app-layout/favicon.png":(e,t,r)=>{"use strict";r.p},"../logos/discord.svg":(e,t,r)=>{"use strict";r.p},"../logos/marko.svg":(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=r.p+"91bc26e5.svg"},"?98fd":()=>{},"?2e65":()=>{},"?6a61":()=>{},"?e376":()=>{},"?7dc1":()=>{},"?f84f":()=>{},"?378b":()=>{},"?4c42":()=>{},"?c86f":()=>{},"?d1e8":()=>{}},e=>{e.O(0,[323,519,103,641],(()=>("./playground/v6/index.marko?browser-entry",e(e.s="./playground/v6/index.marko?browser-entry")))),e.O()}]);
//# sourceMappingURL=664.f4deb1db.js.map