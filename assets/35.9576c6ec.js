"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[35],{"./playground/components/preview.marko":(e,n,t)=>{t.r(n),t.d(n,{default:()=>A});var o=t("../../node_modules/marko/dist/runtime/vdom/index.js"),s=t("../../node_modules/path-browserify/index.js"),r=t.n(s),l=t("../../node_modules/prettier/standalone.js"),i=t("../../node_modules/prettier/parser-html.js"),a=t.n(i),d=t("../../node_modules/prettier/parser-babel.js"),m=t.n(d),c=t("../utils/highlight.js"),u=t.n(c),p=t("../utils/compiler/index.js"),v=t("../../node_modules/memfs/lib/index.js"),h=t("../../node_modules/@marko/tags-api-preview/dist/transform/native-tag-var/index-browser.js"),_=t.n(h),f=t("../../node_modules/@marko/tags-api-preview/dist/transform/cached-function/index-browser.js"),w=t("../../node_modules/@marko/tags-api-preview/dist/util/replace-assignments/index.js"),g=t.n(w),j=t("../../node_modules/marko/dist/runtime/vdom/helpers/v-element.js"),k=t.n(j),b=t("../../node_modules/@marko/tags-api-preview/dist/components/_instance/index.marko"),y=t("../../node_modules/marko/dist/runtime/helpers/render-tag.js"),x=t.n(y),S=t("../../node_modules/@marko/tags-api-preview/dist/components/effect/index.js"),E=t.n(S),T=t("../../node_modules/@marko/tags-api-preview/dist/translate/track-rendering/index.js"),C=t("../../node_modules/marko/dist/runtime/components/renderer.js"),I=t.n(C),F=t("../../node_modules/marko/dist/runtime/components/registry/index-browser.js"),L=t("../../node_modules/marko/dist/runtime/components/defineComponent.js"),O=t.n(L);const M="fQaIe3sQ",N=(0,o.t)(M),A=N,D=k()("small",null,"6",null,1,0).t("Open the dev tools to view the full error.");(0,F.r)(M,(()=>N));const Q={onCreate(){this.state={}}};N._=I()((function(e,n,t,o,s){(0,T.begin)();try{var i,d=o,c=s,h=e=>i=e;const{type:w,files:j,selectedFile:k,onSelectError:y,onSyntaxError:S}=e,C=d.elId("@0"),I=r().join("/",C,k.path),F=r().join("/",C,j[0].path),L="0"in c?c[0]:c[0]=null,O=e=>d.setState("0",e),M="1"in c?c[1]:c[1]=null,N=e=>d.setState("1",e),A=/(.+?)(?:\((\d+),(\d+)\)|:(\d+)): (.*(?=\s+\d+ | ))/;L?(n.be("div",{class:"preview-error"},"0",o,null,1),n.be("h1",{class:"error-name"},"1",o,null,1),n.t(L.name,o),L.file&&(n.t(" :  ",o),n.be("a",null,"2",o,null,0,{onclick:t.d("click",(function(){y(L)}),!1)}),n.t(L.file.slice(1),o),n.t("(",o),n.t(L.line,o),n.t(",",o),n.t(L.column,o),n.t(")",o),n.ee()),n.ee(),n.be("div",null,"3",o,null,0),n.t(L.message,o),n.ee(),I!==L.file&&(L.codeFrame?(n.be("pre",null,"4",o,null,0),n.be("code",null,"5",o,null,0),n.t(L.codeFrame,o),n.ee(),n.ee()):n.n(D,o)),n.ee()):"preview"===w?x()(b.default,{renderBody:(e,n,t,o)=>{var s=t;const r=_()(t,"0");e.e("iframe",{class:"preview-output"},"@0",s,0,1),h(r)}},n,t,"7"):(n.be("div",{class:"preview-compiled"},"8",o,null,1),n.h(M,o),n.ee()),E()(o,(0,f.cache)((0,f.cached)(d,[L,w,j,C,F,I,S])||function(){const e=!L&&"preview"===w&&i(),n=setTimeout((async()=>{for(const e of j){const n=r().join("/",C,e.path);v.vol.mkdirSync(r().dirname(n),{recursive:!0}),v.vol.writeFileSync(n,e.content)}try{if("preview"===w||"html"===w){const n=await(0,p.g)({entry:F,markoOptions:{output:"vdom"}});if("preview"===w&&e){const{contentWindow:t,contentDocument:o}=e;o.open(),o.close(),t.__INTERNAL_MODULES__=window.__INTERNAL_MODULES__;const s=(0,t.eval)(n.js),r=await s.render({}),l=o.createElement("style");l.innerHTML=n.css,o.head.appendChild(l),r.appendTo(o.body)}else{const e=(0,eval)(n.js),t=await e.render({});g()(N,u()("html",(0,l.format)(String(t),{parser:"html",plugins:[a()]})))}}else{const e="compiled-html"===w?"html":"vdom",n=await(0,p.M)({entry:I,markoOptions:{output:e}});g()(N,u()("javascript",(0,l.format)(n.replaceAll(`${C}/`,""),{parser:"babel",plugins:[m()]})))}g()(O,null)}catch(e){g()(N,null);const n="SyntaxError"===e.name&&A.exec(e.message);if(n){let[t,o,s,l,i,a]=n;i&&(s=i,l=0),o=r().resolve(o),s=parseInt(s,10),l=parseInt(l,10)+1;const d=e.message.slice(t.length);g()(O,{name:e.name,file:o,message:a,line:s,column:l,codeFrame:d}),o===I&&S&&S(L)}else g()(O,e),console.error(e)}}),150);return()=>{clearTimeout(n);try{v.vol.rmdirSync(C,{recursive:!0})}catch(e){}}}))}finally{(0,T.end)()}}),{t:M},Q),N.Component=O()(Q,N._)}}]);
//# sourceMappingURL=35.9576c6ec.js.map