(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[664],{"../components/repl/index.marko":(e,t,r)=>{"use strict";r.d(t,{Z:()=>oe});var n=r("../../node_modules/marko/dist/runtime/vdom/index.js"),s=r("../../node_modules/@marko/tags-api-preview/dist/util/replace-assignments/index.mjs"),o=r("../../node_modules/@marko/tags-api-preview/dist/transform/cached-values/index-browser.mjs"),a=r("../../node_modules/@marko/tags-api-preview/dist/transform/native-tag-var/index-browser.mjs"),i=r("../../node_modules/@marko/tags-api-preview/dist/components/lifecycle/index.mjs"),l=r("../../node_modules/@marko/tags-api-preview/dist/components/_instance/index.marko"),c=r("../../node_modules/marko/dist/runtime/helpers/render-tag.js"),d=r.n(c),p=r("../../node_modules/marko/dist/runtime/helpers/class-value.js"),u=r.n(p),f=r("../../node_modules/@marko/tags-api-preview/dist/chunk-5R2Z7TR6.mjs"),m=r("../../node_modules/marko/dist/runtime/components/renderer.js"),y=r.n(m),h=r("../../node_modules/marko/dist/runtime/components/registry.js"),g=r("../../node_modules/marko/dist/runtime/components/defineComponent.js"),b=r.n(g);const v="6o3N4O4f",x=(0,n.t)(v),w=x;(0,h.r)(v,(()=>x));const k={onCreate(){this.state={}}};x._=y()((function(e,t,r,n,c,p){(0,f.begin)();try{var m=n,y=c;const{selectedIndexChange:p,filesChange:f,files:h,selectedIndex:g}=e,b=f||(e=>m.setState("0",e)),v=f?h:"0"in y?y[0]:y[0]=h,x=p||(e=>m.setState("1",e)),w=p?g:"1"in y?y[1]:y[1]=g,k=v[w];t.be("div",{class:"file-tabs"},"0",n,null,1);{const e="2"in y?y[2]:y[2]=1,c=e=>m.setState("2",e);let p=0;for(const e of v||[]){let n=p++;const c=`[${n}]`;d()(l.default,{renderBody:(t,r,p,f)=>{var m=r,y=p;const h="0"in f?f[0]:f[0]=!1,g=e=>p.setState("0",e),E=k===e,S=n>0;t.be("div",{class:u()(["file-tab",{selected:E}])},"2"+c,y,null,1,{onclick:m.d("click",(function(){E?(0,s.default)(g,!0):((0,s.default)(g,!1),(0,s.default)(x,n))}),!1)}),h&&E&&S?d()(l.default,{renderBody:(t,r,l,c)=>{var d=r,p=l;const u="0"in c?c[0]:c[0]=e.name,f=(0,o.cache)((0,o.cached)(l,[u,v])||function(){const t={...e,name:u,path:e.path.replace(e.name,u)};(0,s.default)(b,[...v.slice(0,n),t,...v.slice(n+1)]),(0,s.default)(g,!1)}),m=(0,a.default)(l,"0");var y=e=>l.setState("0",e);t.e("input",{type:"text",size:u.length,value:u},"@0",p,0,0,{pa:[y&&"value"],onblur:d.d("blur",f,!1),onkeydown:d.d("keydown",(function(e){"Enter"===e.code&&f()}),!1),oninput:d.d("input",(e=>{y(e.target.value)}),!1)}),(0,i.default)(p,{onMount:(0,o.cache)((0,o.cached)(l,[u])||function(){m().focus(),m().setSelectionRange(0,u.indexOf("."))})})}},t,m,"3"+c):t.t(e.name,y),S&&(t.be("button",{class:"file-close"},"4"+c,y,null,1,{onclick:m.d("click",(function(t){window.confirm(`Delete ${e.path}?`)&&(w>=n&&(0,s.default)(x,w-1),(0,s.default)(b,[...v.slice(0,n),...v.slice(n+1)])),t.stopPropagation()}),!1)}),t.t("×",y),t.ee()),t.ee()}},t,r,"1"+c)}t.be("button",{class:"new-file"},"5",n,null,1,{onclick:r.d("click",(function(){const t={name:`Component${e}.marko`,path:`/components/Component${e}.marko`,content:""},r=v.length;(0,s.default)(b,v.concat(t)),(0,s.default)(x,r),(0,s.default)(c,e+1)}),!1)}),t.t("+",n),t.ee()}t.ee()}finally{(0,f.end)()}}),{t:v},k),x.Component=b()(k,x._);var E=r("../../node_modules/marko/dist/runtime/helpers/self-iterator.js"),S=r.n(E),C=r("../../node_modules/marko/dist/runtime/helpers/dynamic-tag.js"),T=r.n(C),D=r("../../node_modules/marko/dist/runtime/vdom/helpers/v-element.js"),j=r.n(D);const I="QAUP5peK",A=(0,n.t)(I),L=A,_=j()("div",{class:"pane-divider"},"3",null,0,1);(0,h.r)(I,(()=>A));const M={};A._=y()((function(e,t,r,n,s,o){(0,f.begin)();try{const{actions:s,body:o}=e;t.be("div",{class:"pane"},"0",n,null,1),t.be("div",{class:"pane-actions"},"1",n,null,1),T()(t,s.renderBody,null,null,null,null,r,"2"),t.ee(),t.n(_,n),t.be("div",{class:"pane-body"},"4",n,null,1),T()(t,o.renderBody,null,null,null,null,r,"5"),t.ee(),t.ee()}finally{(0,f.end)()}}),{t:I,i:!0},M),A.Component=b()(M,A._);var $=r("../../node_modules/@marko/tags-api-preview/dist/components/effect/index.mjs");const N="rRMAwOPg",R=(0,n.t)(N),F=R;(0,h.r)(N,(()=>R));const P={onCreate(){this.state={}}};R._=y()((function(e,t,r,n,s,i){(0,f.begin)();try{var l=n;const{value:s,valueChange:i,renderBody:c,class:d}=e,p=(0,a.default)(l,"0");t.be("select",{class:u()(d)},"@0",n,null,1,{onchange:r.d("change",(function(e){i(e.target.value)}),!1)}),T()(t,c,null,null,null,null,r,"0"),t.ee(),(0,$.default)(n,(0,o.cache)((0,o.cached)(l,[s,c,i])||function(){p().value=s}))}finally{(0,f.end)()}}),{t:N},P),R.Component=b()(P,R._);var O=r("../../node_modules/lz-string/libs/lz-string.js"),U=r("../../node_modules/@marko/tags-api-preview/dist/translate/native-tag-handlers/index-browser.mjs"),B=r("../../node_modules/marko/dist/runtime/vdom/helpers/attrs.js"),z=r.n(B);const q="ftG9dvL8",W=(0,n.t)(q),V=W,H=j()("span",null,"1",null,1,0).t("Open in playground ");(0,h.r)(q,(()=>W));const Z={};W._=y()((function(e,t,r,n,s,o){(0,f.begin)();try{const{files:s,...o}=e;var a={};t.be("a",z()((0,U.default)({...o,href:`/playground/#${(0,O.compressToEncodedURIComponent)(JSON.stringify(s))}`,target:"_top",class:"playground-link"},r,"a",a)),"0",n,null,4,{...a}),t.n(H,n),t.t("↗",n),t.ee()}finally{(0,f.end)()}}),{t:q,i:!0},Z),W.Component=b()(Z,W._);var Y=r("../../node_modules/@marko/tags-api-preview/dist/components/return/index-browser.mjs");const K="dL815V5K",J=(0,n.t)(K),G=J;(0,h.r)(K,(()=>J));const X={onCreate(){this.state={}}};J._=y()((function(e,t,r,n,a,i){(0,f.begin)();try{var l=n,c=a;const{value:t,fallback:r}=e,i="0"in c?c[0]:c[0]=window.matchMedia(t).matches,d=e=>l.setState("0",e);(0,$.default)(n,(0,o.cache)((0,o.cached)(l,[t])||function(){const e=window.matchMedia(t),r=()=>(0,s.default)(d,!!e.matches);return e.addEventListener("change",r),(0,s.default)(d,!!e.matches),()=>e.removeEventListener("change",r)})),e._return&&e._return({value:i},1)}finally{(0,f.end)()}}),{t:K},X),J.Component=b()(X,J._);const Q="V970f081",ee=(0,n.t)(Q),te=ee;(0,h.r)(Q,(()=>ee));const re={onCreate(){this.state={}}};ee._=y()((function(e,t,r,n,i,c){(0,f.begin)();try{var p=n,m=i;const{left:c,right:f}=e,b="0"in m?m[0]:m[0]=.5,v=e=>p.setState("0",e),x="1"in m?m[1]:m[1]=!1,w=e=>p.setState("1",e);var y=(0,Y.default)(p);d()(G,{value:"(max-aspect-ratio: 1/1)",_return:y},t,r,"0");const{value:k}=y(),E=(0,a.default)(p,"0");t.be("div",{class:u()(["panes",x&&"resizing"])},"@0",n,null,1);var h={};t.be("div",z()((0,U.default)({...c,style:`flex-grow:${b}`},r,"div",h)),"1",n,null,4,{...h}),T()(t,c.renderBody,null,null,null,null,r,"2"),t.ee(),t.be("div",{class:"divider"},"3",n,null,1),t.e("div",{class:"inner"},"4",n,0,1,{onmousedown:r.d("mousedown",(function(e){(0,s.default)(w,!0),e.preventDefault(),e.stopPropagation()}),!1)}),t.ee();var g={};t.be("div",z()((0,U.default)({...f,style:"flex-grow:"+(1-b)},r,"div",g)),"5",n,null,4,{...g}),T()(t,f.renderBody,null,null,null,null,r,"6"),t.ee(),t.ee(),x&&d()(l.default,{renderBody:(e,t,r,n)=>{var a=r;(0,$.default)(a,(0,o.cache)((0,o.cached)(r,[k])||function(){const e=e=>{if(e.buttons||e.which){const t=E().getBoundingClientRect(),r=k?(e.clientY-t.top)/t.height:(e.clientX-t.left)/t.width;r>0&&(0,s.default)(v,Math.min(.8,Math.max(.2,r)))}else(0,s.default)(w,!1)};return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)}))}},t,r,"7")}finally{(0,f.end)()}}),{t:Q},re),ee.Component=b()(re,ee._);const ne="Y/QiYO60",se=(0,n.t)(ne),oe=se,ae=j()("option",{value:"preview"},"10",null,1,0).t("App Preview"),ie=j()("option",{value:"compiled-html"},"11",null,1,0).t("Compiled (HTML)"),le=j()("option",{value:"compiled-vdom"},"12",null,1,0).t("Compiled (DOM)");(0,h.r)(ne,(()=>se));const ce={onCreate(){this.state={}}};se._=y()((function(e,t,n,a,c,p){(0,f.begin)();try{var u=a,m=c;const{filesChange:p,getCompilerOptions:f,files:y}=e,h="0"in m?m[0]:m[0]=0,g=e=>u.setState("0",e),b="1"in m?m[1]:m[1]="preview",v=e=>u.setState("1",e),x="2"in m?m[2]:m[2]=!1,k=e=>u.setState("2",e),E=y[h];d()(te,{left:{class:"editor-container",renderBody:e=>{d()(L,{actions:{renderBody:e=>{d()(l.default,{renderBody:(e,t,r,n)=>{var a=t;d()(w,{files:y,filesChange:p,selectedIndex:h,selectedIndexChange:(0,o.cache)((0,o.cached)(r,[])||(e=>(0,s.default)(g,e)))},e,a,"3")}},e,n,"2")},[Symbol.iterator]:S()},body:{renderBody:e=>{d()(l.default,{renderBody:(e,t,n,a)=>{var c=t,u=n;const f="0"in a?a[0]:a[0]=null,m=e=>n.setState("0",e);f&&d()(l.default,{renderBody:(e,t,r,n)=>{var a=t;T()(e,f,(()=>({value:E.content,filename:E.path,valueChange:(0,o.cache)((0,o.cached)(r,[E,y,h])||function(e){const t={...E,content:e};(0,s.default)(p,[...y.slice(0,h),t,...y.slice(h+1)]),(0,s.default)(k,!0)})})),null,null,null,a,"6")}},e,c,"5"),(0,i.default)(u,{onMount:(0,o.cache)((0,o.cached)(n,[])||(async()=>{const e=await Promise.all([r.e(103),r.e(410),r.e(109),r.e(888),r.e(176)]).then(r.bind(r,"../components/repl/components/editor.marko"));await e.loading,(0,s.default)(m,e)}))})}},e,n,"4")},[Symbol.iterator]:S()}},e,n,"1")},[Symbol.iterator]:S()},right:{renderBody:e=>{d()(L,{actions:{renderBody:e=>{d()(l.default,{renderBody:(e,t,r,n)=>{var a=t,i=r;d()(F,{value:b,valueChange:(0,o.cache)((0,o.cached)(r,[])||function(e){(0,s.default)(v,e),(0,s.default)(k,!1)}),class:"preview-select",renderBody:e=>{e.n(ae,i),e.n(ie,i),e.n(le,i)}},e,a,"9"),d()(V,{files:y},e,a,"13")}},e,n,"8")},[Symbol.iterator]:S()},body:{renderBody:e=>{d()(l.default,{renderBody:(e,t,n,a)=>{var l=t,c=n;const d="0"in a?a[0]:a[0]=null,p=e=>n.setState("0",e);T()(e,d,(()=>({type:b,files:y,selectedFile:E,getCompilerOptions:f,debounce:x})),null,null,null,l,"15"),(0,i.default)(c,{onMount:(0,o.cache)((0,o.cached)(n,[])||(async()=>{(0,s.default)(p,await Promise.all([r.e(103),r.e(641),r.e(410),r.e(995),r.e(888),r.e(551),r.e(25)]).then(r.bind(r,"../components/repl/components/preview.marko")))}))})}},e,n,"14")},[Symbol.iterator]:S()}},e,n,"7")},[Symbol.iterator]:S()}},t,n,"0")}finally{(0,f.end)()}}),{t:ne},ce),se.Component=b()(ce,se._)},"./playground/components/hash-value.marko":(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var n=r("../../node_modules/marko/dist/runtime/vdom/index.js"),s=r("../../node_modules/lz-string/libs/lz-string.js"),o=r("../../node_modules/@marko/tags-api-preview/dist/transform/cached-values/index-browser.mjs"),a=r("../../node_modules/@marko/tags-api-preview/dist/util/replace-assignments/index.mjs"),i=r("../../node_modules/@marko/tags-api-preview/dist/components/lifecycle/index.mjs"),l=r("../../node_modules/@marko/tags-api-preview/dist/chunk-5R2Z7TR6.mjs"),c=r("../../node_modules/marko/dist/runtime/components/renderer.js"),d=r.n(c),p=r("../../node_modules/marko/dist/runtime/components/registry.js"),u=r("../../node_modules/marko/dist/runtime/components/defineComponent.js"),f=r.n(u);const m="41NMzc7K",y=(0,n.t)(m),h=y;(0,p.r)(m,(()=>y));const g={onCreate(){this.state={}}};y._=d()((function(e,t,r,n,c,d){(0,l.begin)();try{var p=n,u=c;const{value:t}=e,r="0"in u?u[0]:u[0]=function(){try{return JSON.parse((0,s.decompressFromEncodedURIComponent)(window.location.hash.slice(1)))}catch(e){console.error(e)}}()||t,l=e=>p.setState("0",e);(0,i.default)(n,{onMount:(0,o.cache)((0,o.cached)(p,[])||function(){window.addEventListener("hashchange",this.handler=()=>{try{this.isUpdating?this.isUpdating=!1:(0,a.default)(l,JSON.parse((0,s.decompressFromEncodedURIComponent)(window.location.hash.slice(1))))}catch(e){console.error(e)}})}),onUpdate:(0,o.cache)((0,o.cached)(p,[r])||function(){this.isUpdating=!0,window.location.hash=(0,s.compressToEncodedURIComponent)(JSON.stringify(r))}),onDestroy:(0,o.cache)((0,o.cached)(p,[])||function(){window.removeEventListener("hashchange",this.handler)})}),e._return&&e._return({value:r,valueChange:(0,o.cache)((0,o.cached)(p,[])||(e=>(0,a.default)(l,e)))},1)}finally{(0,l.end)()}}),{t:m},g),y.Component=f()(g,y._)},"./playground/v6/index.marko?browser-entry":(e,t,r)=>{"use strict";var n={};r.r(n),r.d(n,{analyze:()=>ln,taglibs:()=>dn,translate:()=>cn});var s=r("../../node_modules/marko/dist/runtime/components/index.js"),o=(r("../components/app-layout/favicon.png"),r("../logos/marko.svg"),r("../components/app-layout/components/layout-search/component-browser.js")),a=r("../components/app-layout/components/layout-header/component-browser.js"),i=r.n(a),l=r("../components/app-layout/components/layout-sidebar/components/version-switcher/component-browser.js"),c=r.n(l),d=r("../components/app-layout/components/layout-sidebar/component-browser.js"),p=r.n(d),u=(r("../components/app-footer/openjsf.svg"),r("../components/app-footer/osi.svg"),r("../components/app-footer/ebay.svg"),r("../logos/discord.svg"),r("../../node_modules/marko/dist/runtime/vdom/index.js")),f=r("../../browser-shims/compiler/index.js"),m=r("../../node_modules/@marko/babel-utils/dist/index.js"),y=r("../../node_modules/path-browserify/index.js"),h=r.n(y);function g(){return"html"===v().output}function b(){return!g()}function v(){return Ut.hub.file.markoOpts}function x(){return v().optimize}var w=/^<.*>$|\.marko$/;function k(e){const t=e.node.extra??={};if(void 0===t.tagNameType){const r=e.get("name");if(r.isStringLiteral()){if(t.tagNameType="@"===r.node.value[0]?3:(0,m.isNativeTag)(e)?0:1,1===t.tagNameType){const r=(0,m.loadFileForTag)(e),n=r?.ast.program;"class"===n?.extra.___featureType&&(t.tagNameType=2,t.___featureType="class")}t.tagNameNullable=t.tagNameNullable=!1}else{const e=[r];let n,s,o=!1;for(;(n=e.pop())&&2!==s;)if(n.isConditionalExpression())e.push(n.get("test")),e.push(n.get("consequent")),n.node.alternate&&e.push(n.get("alternate"));else if(n.isLogicalExpression())"||"===n.node.operator?e.push(n.get("left")):o=!0,e.push(n.get("right"));else if(n.isAssignmentExpression())e.push(n.get("right"));else if(n.isBinaryExpression())s="+"!==n.node.operator||void 0!==s?2:0;else if(n.isStringLiteral()||n.isTemplateLiteral())s=void 0!==s?2:0;else if(n.isNullLiteral())o=!0;else if(n.isIdentifier()){if("undefined"===n.node.name){o=!0;continue}const t=n.scope.getBinding(n.node.name);if(!t){s=2;continue}if("module"===t.kind){const e=t.path.parent;s=w.test(e.source.value)&&e.specifiers.some((e=>f.types.isImportDefaultSpecifier(e)))?void 0!==s&&1!==s?2:1:2;continue}const r=t.path;if(r.isMarkoTag()&&"local"===t.kind){const t=r.get("name").node.value;if("tag"===t){s=void 0!==s&&1!==s?2:1;continue}if("const"===t){e.push(r.get("attributes")[0].get("value"));continue}if("let"===t){s=2;continue}continue}s=2}else s=2;t.tagNameType=s,t.tagNameNullable=o,t.tagNameDynamic=!0}void 0===t.tagNameType&&(t.tagNameType=2)}return t.tagNameType}function E(e){const t=e.node.extra??={};let r=t.section;if(!r){const n=e.parentPath?S(e.parentPath):void 0,s=e.parentPath?.get("name"),o=e.isProgram()?"":Ut.scope.generateUid(s.toString()+"Body"),a=e.hub.file.path.node.extra??={},i=a.sections??=[];r=t.section={id:i.length,name:o,depth:n?n.depth+1:0,parent:n},i.push(r)}return r}function S(e){let t=e;for(;;){if("Program"===t.type||"MarkoTagBody"===t.type&&0!==k(t.parentPath))return E(t);t=t.parentPath}}function C(e){let t,r=e;for(;void 0===(t=r.node.extra?.section);)r=r.parentPath;return I(t,r),t}function T(e,t){return[r=>{const n=Ut.state[e]??={};return n[r.id]??=t&&t(r)},(t,r)=>{(Ut.state[e]??={})[t.id]=r}]}var[D]=T("scopeIdIdentifier",(e=>Ut.scope.generateUidIdentifier(`scope${e.id}_id`))),[j,I]=T("sectionPath"),[A]=T("scopeIdentifier",(()=>f.types.identifier("undefined"))),L=(e,t)=>{const r=A(e);return t||"undefined"!==r.name||(r.name=Ut.scope.generateUid(`scope${e.id}_`)),r};function _(e){const{sections:t}=Ut.node.extra;t?.forEach(e)}var M=class{constructor(e){this.compare=e}add(e,t){return e?Array.isArray(e)?N(this.compare,e,t):$(this.compare,e,t):t}addAll(e,t){if(e){if(Array.isArray(e)){if(t)if(Array.isArray(t))for(const r of t)N(this.compare,e,r);else N(this.compare,e,t);return e}return t?Array.isArray(t)?N(this.compare,[...t],e):$(this.compare,t,e):e}return Array.isArray(t)?[...t]:t}find(e,t){if(e){if(!Array.isArray(e))return 0===this.compare(e,t)?e:void 0;{let r=e.length,n=0;for(;n<r;){const s=n+r>>>1,o=e[s],a=this.compare(o,t);if(0===a)return o;a>0?r=s:n=s+1}}}}clone(e){return Array.isArray(e)?[...e]:e}size(e){return e?Array.isArray(e)?e.length:1:0}toArray(e,t){return e?Array.isArray(e)?e.map(t):[t(e)]:[]}*iterate(e){if(e)if(Array.isArray(e))for(const t of e)yield t;else yield e}};function $(e,t,r){const n=e(t,r);return 0===n?t:n<0?[t,r]:[r,t]}function N(e,t,r){const n=t.length;let s=n,o=0;for(;o<s;){const n=o+s>>>1,a=e(t[n],r);if(0===a)return t;a>0?s=n:o=n+1}let a=r;for(;o<n;){const e=a;a=t[o],t[o++]=e}return t[n]=a,t}var[R]=T("reservesByType",(()=>[void 0,void 0,void 0]));function F(e,t,r,n,s=n){const o=r.extra??={};if(o.reserve){const e=o.reserve;return e.name+="_"+n,e}const a=R(t),i=o.reserve={id:0,type:e,name:n,debugKey:s,section:t};return a[e]?i.id=a[e].push(i)-1:a[e]=[i],i}function P(e){return x()?f.types.numericLiteral(e.id):f.types.stringLiteral(e.debugKey+(0===e.type?`/${e.id}`:""))}var O=new M((function(e,t){return e.section.id-t.section.id||e.type-t.type||e.id-t.id})),U=new WeakMap,B=new M((function(e,t){const r=e.length,n=r-t.length;if(0!==n)return n;for(let n=0;n<r;n++){const r=O.compare(e[n],t[n]);if(0!==r)return r}return 0})),[z,q]=T("intersectionsBySection",(()=>[]));function W(e,t){const r=t.scope,n=t.getBindingIdentifiers();for(const t in n){const s=r.getBinding(t).referencePaths.concat(r.getBinding(t).constantViolations.filter((e=>e.isAssignmentExpression()&&"="!==e.node.operator))),o=F(1,e,n[t],t);for(const e of s){const t=Y(e.scope.path),r=Z(t||e),n=r.parentPath,s=t??r;if(s){const e=s.node.id?.name;e||n.isMarkoAttribute()&&!n.node.default&&((s.node.extra??={}).name=n.node.name),V(s,"references",o)}V(n,`${r.listKey||r.key}References`,o)}}}function V(e,t,r){const n=S(e),s=e.node.extra??={},o=s[t];o?o!==r&&(s[t]=X(G(n,O.add(O.clone(o),r))),ee(o)&&Q(G(n,o))):s[t]=r}function H(e,t){let r;for(const[n,s]of t){const t=n[s];ee(t)&&Q(G(e,t)),r=O.addAll(r,t),delete n[s]}return ee(r)&&(r=X(G(e,r))),r}function Z(e){let t=e;for(;!K(t.parentPath);)t=t.parentPath;return t}function Y(e){let t=e;if(!t.isProgram()){for(;!J(t);){if(K(t))return;t=t.parentPath}return t}}function K(e){switch(e.type){case"MarkoTag":case"MarkoTagBody":case"MarkoAttribute":case"MarkoSpreadAttribute":case"MarkoPlaceholder":case"MarkoScriptlet":return!0;default:return!1}}function J(e){switch(e.type){case"FunctionExpression":case"ArrowFunctionExpression":return!0;default:return!1}}function G(e,t){const r=z(e);let n=B.find(r,t);return n||(n=t,q(e,B.add(r,t))),n}function X(e){return U.set(e,(U.get(e)||0)+1),e}function Q(e){return U.set(e,U.get(e)-1),e}function ee(e){return Array.isArray(e)}function te(e){return e||0===e?e+"":""}var re=ie((e=>{let t="",r=0;for(let n=0,s=e.length;n<s;n++){let s;switch(e[n]){case"<":s="&lt;";break;case"&":s="&amp;";break;default:continue}t+=e.slice(r,n)+s,r=n+1}return r?t+e.slice(r):e})),ne=ie(oe("script")),se=ie(oe("style"));function oe(e){const t=`</${e}`,r=`<\\/${e}`;return e=>{let n="",s=0,o=e.indexOf(t,s);for(;-1!==o;)n+=e.slice(s,o)+r,s=o+1,o=e.indexOf(t,s);return s?n+e.slice(s):e}}function ae(e){const t=e.length;let r=0;do{switch(e[r]){case'"':return le(e,r+1,"'","&#39;");case"'":case">":case" ":case"\t":case"\n":case"\r":case"\f":return le(e,r+1,'"',"&#34;");default:r++}}while(r<t);return e}function ie(e){return t=>{if(!t&&0!==t)return"&zwj;";switch(typeof t){case"string":return e(t);case"boolean":return"true";case"number":return t+"";default:return e(t+"")}}}function le(e,t,r,n){let s=r,o=0;for(let a=t,i=e.length;a<i;a++)e[a]===r&&(s+=e.slice(o,a)+n,o=a+1);return s+(o?e.slice(o):e)+r}function ce(e,t){return fe(t)?"":e}var de=/^(--|ta|or|li|z)|n-c|i(do|nk|m|t)|w$|we/;function pe(e,t){return fe(t)?"":("number"==typeof t&&t&&!de.test(e)&&(t+="px"),`${e}:${t}`)}function ue(e,t,r){switch(typeof e){case"string":return e;case"object":if(null!==e){let n="",s="";if(Array.isArray(e))for(const o of e){const e=ue(o,t,r);""!==e&&(n+=s+e,s=t)}else for(const o in e){const a=r(o,e[o]);""!==a&&(n+=s+a,s=t)}return n}}return""}function fe(e){return null==e||!1===e}function me(e){return ge("class",ue(e," ",ce))}function ye(e){return ge("style",ue(e,";",pe))}function he(e,t){return fe(t)?"":function(e,t){switch(typeof t){case"string":return` ${e+be(t)}`;case"boolean":return` ${e}`;case"number":return` ${e}=${t}`;case"object":if(t instanceof RegExp)return` ${e}=${ae(t.source)}`;default:return` ${e+be(t+"")}`}}(e,t)}function ge(e,t){return t&&` ${e}=${ae(t)}`}function be(e){return e?`=${ae(e)}`:""}var{hasOwnProperty:ve}=Object.prototype;function xe(e,t){const r=e.depth,n=f.types.objectPattern([]);let s;for(const o of O.iterate(t)){if(o.name.includes("#"))continue;const t=P(o),a=f.types.identifier(o.name),i=t.value===a.name;let l=n;if(o.section!==e){s||(s=[n]);const e=r-o.section.depth;let t=s.length,a=s[t-1];for(;t<=e;t++){const e=f.types.objectPattern([]);a.properties.push(f.types.objectProperty(f.types.identifier("_"),e)),s.push(e),a=e}l=s[e]}l.properties.push(f.types.objectProperty(i?a:t,a,!1,i))}return n}function we(e,t){let r=Bt;const n=e.depth-t.depth;for(let e=0;e<n;e++)r=f.types.memberExpression(r,f.types.identifier("_"));if(n<0)throw new Error("Unable to find scope for reference.");return r}function ke(e,t){return f.types.memberExpression(we(e,t.section),P(t),!0)}Symbol("REGISTRY_ID"),Symbol("SCOPE"),Symbol("SERIALIZE"),String((function(e,t,r,n,s,o,a,i,l,c){for(e=(c="RUNTIME_ID$")+e,r=(t=document)[c+"w"]||(t[c+"w"]=t.createTreeWalker(t,128));n=r.nextNode();)0===n.data.indexOf(c)&&(r[n.data]=n);for(s=t.getElementById(e),o=(a=r[e]).parentNode;i=s.firstChild;)o.insertBefore(i,a);for((l=s.parentNode).removeChild(s.nextSibling),l.removeChild(s),i=r[e+"/"];l=a.nextSibling,o.removeChild(a)!==i;)a=l})).replace("RUNTIME_ID","M");var Ee=["createTemplate","createRenderer","value","intersection","closure","dynamicClosure","contextClosure","loopOf","loopIn","loopTo","conditional","bindFunction","bindRenderer"];function Se(e){const{output:t}=v();return(0,m.importNamed)(Ut.hub.file,function(e){const{optimize:t}=v();return`@marko/runtime-fluurt/${t?"dist":"dist/debug"}/${"html"===e?"html":"dom"}`}(t),e)}function Ce(e,...t){const r=f.types.callExpression(Se(e),function(e){const t=[];for(let r=e.length;r--;){const n=e[r];(n||t.length)&&(t[r]=n||f.types.unaryExpression("void",f.types.numericLiteral(0)))}return t}(t));return Ee.includes(e)&&(r.leadingComments=[{type:"CommentBlock",value:" @__PURE__ "}]),r}function Te(){return{escapeXML:re,toString:te,attr:he,classAttr:me,styleAttr:ye,escapeScript:ne,escapeStyle:se}}function De(e){const t=[],r=[];let n=e[0];for(let s=1;s<e.length;s++){let o=e[s];if("object"==typeof o){if(!f.types.isStringLiteral(o)){if(f.types.isTemplateLiteral(o)){let t=s+1;const r=o.expressions.length;Ie(e,t,o.quasis.length+r);for(let n=0;n<r;n++)e[t++]=o.quasis[n].value.raw,e[t++]=o.expressions[n];e[t]=o.quasis[r].value.raw;continue}r.push(o),t.push(n),n="";continue}o=o.value}n+=o}return r.length?(t.push(n),f.types.templateLiteral(t.map((e=>f.types.templateElement({raw:e}))),r)):n?f.types.stringLiteral(n):void 0}function je(e,t){e[e.length-1]+=t}function Ie(e,t,r){for(let n=e.length-1;n>=t;n--)e[n+r]=e[n]}var[Ae]=T("walks",(()=>[""])),[Le]=T("walkComment",(()=>[])),[_e]=T("steps",(()=>[])),Me={32:"get",33:"before",35:"after",36:"inside",37:"replace",38:"endChild",47:"beginChild",67:"next",97:"over",107:"out",117:"multiplier",91:"nextEnd",106:"overEnd",116:"outEnd",126:"multiplierEnd"};function $e(e){_e(C(e)).push(0)}function Ne(e){_e(C(e)).push(1)}function Re(e){_e(C(e)).push(0,1)}function Fe(e,t){const{reserve:r}=e.node.extra;if(t&&(!r||0!==r.type))throw e.buildCodeFrameError("Tried to visit a node that was not marked as needing to visit during analyze.");if(g())return;const n=C(e),s=_e(n),o=Ae(n),a=Le(n);let i="";if(s.length){const e=[];let t=0;for(const r of s)0===r?(t++,e.push(67)):(t--,t>=0?(e.length=e.lastIndexOf(67),e.push(97)):(e.length=e.lastIndexOf(107)+1,e.push(107),t=0));let r=e[0],n=0;for(const t of e)t!==r?(a.push(`${Me[r]}(${n})`),i+=Pe(r,n),r=t,n=1):n++;a.push(`${Me[r]}(${n})`),i+=Pe(r,n),s.length=0}void 0!==t&&(32!==t&&Ve(e)`<!>`,a.push(`${Me[t]}`),i+=String.fromCharCode(t)),je(o,i)}function Pe(e,t){switch(e){case 67:return Oe(t,e,20);case 97:case 107:return Oe(t,e,10);default:throw new Error(`Unexpected walk code: ${e}`)}}function Oe(e,t,r){let n="";if(e>=r){const t=Math.floor(e/r);n+=Oe(t,117,10),e-=t*r}return n+=String.fromCharCode(t+e),n}function Ue(e){const t=De(Ae(e))||f.types.stringLiteral("");return""!==t.value&&(t.leadingComments=[{type:"CommentBlock",value:" "+Le(e).join(", ")+" "}]),t}var[Be]=T("renderer",(e=>f.types.identifier(e.name))),[ze]=T("writes",(()=>[""])),[qe,We]=T("registerRenderer",(()=>!1));function Ve(e){const t=C(e);return(e,...r)=>{const n=r.length,s=ze(t);je(s,e[0]);for(let t=0;t<n;t++)s.push(r[t],e[t+1])}}function He(e){const t=C(e);return(e,...r)=>{const n=r.length,s=ze(t);s[0]+=e[n];for(let t=0;t<n;t++)s.unshift(e[t],r[t])}}function Ze(e){const t=ze(C(e)),r=De(t);if(t.length=0,t[0]="",r)return f.types.expressionStatement(Ce("write",r))}function Ye(e){const t=Ze(e);t&&e.insertBefore(t)[0].skip()}function Ke(e){const t=e.isProgram()?e:e.get("body"),r=Ze(t);r&&t.pushContainer("body",r)[0].skip()}function Je(e){const t=ze(e);return{setup:Ft(e),walks:Ue(e),writes:De(t)||f.types.stringLiteral(""),register:qe(e)}}function Ge(e){const t=C(e),{reserve:r}=e.node.extra;if(0!==r?.type)throw e.buildCodeFrameError("Tried to mark a node that was not determined to need a mark during analyze.");g()&&Ve(e)`${Ce("markResumeNode",D(t),P(r))}`}function Xe(e){for(const t of e.get("attributes"))if(t.isMarkoSpreadAttribute())throw t.buildCodeFrameError(`The <${e.get("name")}> tag does not support ...spread attributes.`)}function Qe(e){if(e.node.body.body.length)throw e.get("name").buildCodeFrameError(`The <${e.get("name")}> tag does not support body content.`)}var[et,tt]=T("returnId"),rt={translate(e){(0,m.assertNoVar)(e),(0,m.assertNoParams)(e),Qe(e),Xe(e);const t=C(e),{node:r,hub:{file:n}}=e,[s]=r.attributes;if(!f.types.isMarkoAttribute(s)||!s.default)throw e.get("name").buildCodeFrameError("The '<return>' tag requires default attribute like '<return=VALUE>'.");if(r.attributes.length>1){const t=r.attributes[1].loc?.start,n=r.attributes[r.attributes.length-1].loc?.end,s="The '<return>' tag only supports a default attribute.";throw null==t||null==n?e.get("name").buildCodeFrameError(s):e.hub.buildError({loc:{start:t,end:n}},s,Error)}if(g()){Ye(e);const r=n.path.scope.generateUidIdentifier("return");tt(t,r),e.replaceWith(f.types.variableDeclaration("const",[f.types.variableDeclarator(r,s.value)]))[0].skip()}else Dt(t,s.extra?.valueReferences,{identifier:Se("tagVarSignal"),hasDownstreamIntersections:()=>!0},s.value),e.remove()},autocomplete:[{displayText:"return=<value>",description:"Provides a value for use in a parent template.",snippet:"return=${1:value}",descriptionMoreURL:"https://markojs.com/docs/core-tags/#return"}]},[nt]=T("signals",(()=>new Map)),[st,ot]=T("queue");function at(e,t){ot(C(e.get("body")),t)}var[it]=T("closures",(()=>[])),lt=(e,t,r)=>{let n=e;for(;void 0!==n&&n!==t;)it(n).push(r),n=n.parent},[ct,dt]=T("forceResumeScope"),[pt]=T("serializedScopeProperties",(()=>new Map)),[ut,ft]=T("register");function mt(e,t){ft(C(e.get("body")),t)}var yt=()=>f.types.stringLiteral("SIGNAL NOT INITIALIZED");function ht(e,t){const r=nt(e);let n=r.get(t);if(!n){if(r.set(t,n={identifier:f.types.identifier(St(e,t)),reserve:t,section:e,values:[],intersection:void 0,render:[],effect:[],effectInlineReferences:void 0,subscribers:[],closures:new Map,hasDownstreamIntersections:()=>n.intersection||n.closures.size||n.values.some((e=>e.signal.hasDownstreamIntersections()))?(n.hasDownstreamIntersections=()=>!0,!0):(n.hasDownstreamIntersections=()=>!1,!1),build:yt}),g())return n;if(t){if(Array.isArray(t))Et(t,n),n.build=()=>Ce("intersection",f.types.numericLiteral(t.length),bt(n,[Bt],t));else if(t.section!==e){const r=ht(t.section,t);lt(e,t.section,n.identifier),r.closures.set(e,n),n.build=()=>{const r=st(e),s=we(e,t.section),o=s.object===Bt;return Ce(r&&o?"closure":"dynamicClosure",P(t),bt(n,[Bt,f.types.identifier(t.name)]),o?null:f.types.arrowFunctionExpression([Bt],s),vt(n),xt(n))}}}else n.build=()=>bt(n,[Bt])}return n}function gt(e,t=P(e)){const r=ht(e.section,e);return r.build=()=>{const n=bt(r,[Bt,f.types.identifier(e.name)]),s=vt(r),o=xt(r);return n.body.body.length>0||s||o?Ce("value",t,n,s,o):n},r.valueAccessor=t,r}function bt(e,t,r){const n=e.section;for(const t of e.values)e.render.push(f.types.expressionStatement(f.types.callExpression(t.signal.identifier,[t.scope,t.value])));return r&&e.render.unshift(f.types.variableDeclaration("const",[f.types.variableDeclarator(xe(n,r),Bt)])),f.types.arrowFunctionExpression(t,f.types.blockStatement(e.render))}function vt(e){let t=e.intersection;const r=e.section,n=Array.from(e.closures.entries()).sort((([e],[t])=>e.id-t.id));for(const[s,o]of n){const n=st(s),a=s.parent===r;n&&a?t=wt(t,n(o.identifier)):e.hasDynamicSubscribers||(e.hasDynamicSubscribers=!0)}return e.hasDynamicSubscribers&&(e.hasDynamicSubscribers=!0,t=wt(t,Ce("dynamicSubscribers",e.valueAccessor))),Array.isArray(t)?Ce("intersections",f.types.arrayExpression(t)):t}function xt(e){let t;for(const r of e.values)r.signal.hasDownstreamIntersections()&&(t=wt(t,r.intersectionExpression??f.types.identifier(r.signal.identifier.name)));return Array.isArray(t)?Ce("values",f.types.arrayExpression(t)):t}function wt(e,t){return e?Array.isArray(e)?(e.push(t),e):[e,t]:t}function kt(e,t){const r=Array.isArray(e)?e:Object.values(e);if(r.length){const e=Ut.scope.generateUidIdentifier("destructure"),n=r.map((e=>gt(e.extra?.reserve))),s=f.types.variableDeclaration("let",r.map((e=>f.types.variableDeclarator(e))));return{get identifier(){const e=Ut.scope.generateUidIdentifier("destructure");return Ut.pushContainer("body",[f.types.variableDeclaration("const",[f.types.variableDeclarator(e,this.build(!0))])]),e},build(o){return o&&!this.hasDownstreamIntersections()?f.types.arrowFunctionExpression([Bt,t],f.types.blockStatement(n.map(((e,t)=>f.types.expressionStatement(f.types.callExpression(e.identifier,[Bt,r[t]])))))):f.types.arrowFunctionExpression([Bt,e,zt],f.types.blockStatement([s,f.types.ifStatement(f.types.unaryExpression("!",zt),f.types.expressionStatement(f.types.assignmentExpression("=",t,e))),...n.map(((e,t)=>f.types.expressionStatement(f.types.callExpression(e.identifier,[Bt,r[t],zt]))))]))},hasDownstreamIntersections:()=>r.some((e=>{const t=e.extra.reserve;return ht(t.section,t).hasDownstreamIntersections()}))}}}function Et(e,t){if(Array.isArray(e))return void e.forEach((e=>Et(e,t)));const r=ht(t.section,e);r.intersection=wt(r.intersection,t.identifier)}function St(e,t){let r;if(t)if(Array.isArray(t)){r="expr";for(const e of t)r+=`_${e.name}`}else r=t.name;else r="setup";return r+=e.name.replace("_","$"),Ut.scope.generateUid(r)}function Ct(e){for(let t=e.length-1;t>=0;t--){const r=e[t];if(f.types.isArrowFunctionExpression(r)){const n=r.body.body;n&&(0===n.length?e[t]=f.types.nullLiteral():1===n.length&&f.types.isExpressionStatement(n[0])&&(r.body=n[0].expression))}}for(let t=e.length-1;f.types.isNullLiteral(e[t]);)e.length=t--}function Tt(e,t,r,n,s,o){const a=ht(t,r),i=a[e]??=[];if(Array.isArray(n)?i.push(...n):i.push(n),"effect"===e)if(Array.isArray(s))for(const e of s)!o&&f.types.isFunction(e)||jt(a,e);else!o&&f.types.isFunction(s)||jt(a,s)}function Dt(e,t,r,n,s=Bt,o){ht(e,t).values.push({signal:r,value:n,scope:s,intersectionExpression:o})}function jt(e,t){e.effectInlineReferences=O.addAll(e.effectInlineReferences,t.extra?.references)}function It(e,t){const{markoOpts:{optimize:r},opts:{filename:n}}=Ut.hub.file;let s="";if(t)if("string"==typeof t)s+=`_${t}`;else if(Array.isArray(t))for(const e of t)s+=`_${e.name}`;else s+=`_${t.name}`;return(0,m.getTemplateId)(r,`${n}_${e.id}${s}`)}function At(e,t){const r=Lt(e),n=Lt(t);for(let e=Math.max(r.length,n.length)-1;e>=0;e--){const t=(n[e]??-1)-(r[e]??-1);if(0!==t)return t}return 0}function Lt({reserve:e}){return e?Array.isArray(e)?e.map(_t).sort():[_t(e)]:[]}function _t(e){return 1e4*(0===e.type?1:0)+e.id}function Mt(e,t){Tt("effect",e,t,void 0,[])}function $t(e,t){const r=S(e),n=Ut.node.extra.intersectionsBySection?.[r.id]??[],s=Array.from(nt(r).values()),o=D(r),a=[];for(const e of n)for(const t of e)0!==t.type&&O.add(a,t);for(let t=s.length;t--;)if(s[t].effect.length){const n=s[t].reserve;O.addAll(a,n),e.pushContainer("body",f.types.expressionStatement(Ce("writeEffect",o,f.types.stringLiteral(It(r,n)))))}const i=new Set,l=pt(r),c=a.reduce(((e,t)=>{const n=P(t);return t.section.id===r.id?(e.push(f.types.objectProperty(n,f.types.identifier(t.name))),i.add(n.value)):(pt(t.section).set(n,f.types.identifier(t.name)),pt(r).set(f.types.stringLiteral("_"),Ce("serializedScope",D(t.section)))),e}),[]);t&&void 0!==et(r)&&c.push(f.types.objectProperty(f.types.stringLiteral("/"),t));for(const[e,t]of l)i.has(e.value)||(c.push(f.types.objectProperty(e,t,!f.types.isLiteral(e))),i.add(e.value));if(c.length||ct(r)){const t=ut(r);e.pushContainer("body",f.types.expressionStatement(Ce("writeScope",o,t?t(f.types.objectExpression(c)):f.types.objectExpression(c))))}e.get("body").length&&e.unshiftContainer("body",f.types.variableDeclaration("const",[f.types.variableDeclarator(o,Ce("nextScopeId"))]))}var Nt={FunctionExpression:{exit:Rt},ArrowFunctionExpression:{exit:Rt}};function Rt(e,{root:t,section:r}){const{node:n}=e,{extra:s}=n,o=s?.references,a=e.hub.file.path.scope.generateUidIdentifier(s?.name);o&&("BlockStatement"!==n.body.type&&(n.body=f.types.blockStatement([f.types.returnStatement(n.body)])),n.body.body.unshift(f.types.variableDeclaration("const",[f.types.variableDeclarator(xe(r,o),Bt)])));let i=e.parentPath;for(;i;){if(i.isFunction())return;if(i===t)return;i=i.parentPath}t.insertBefore(f.types.variableDeclaration("const",[f.types.variableDeclarator(a,n)])),n.params.unshift(Bt),e.replaceWith(Ce("bindFunction",Bt,a))}function Ft(e){return nt(e).get(void 0)?.identifier}var Pt={translate:{exit(e){Fe(e);const t=C(e),r=f.types.identifier("template"),n=f.types.identifier("walks"),s=f.types.identifier("setup"),o=f.types.identifier("attrs"),a=f.types.identifier("closures"),{attrs:i}=e.node.extra,{walks:l,writes:c,setup:d}=Je(t);if(function(e){const{sections:t}=Ut.node.extra;for(let r=t.length;r--;)e(t[r])}((r=>{const n=j(r),s=n.isProgram()?void 0:function(e,t=f.types.arrayPattern(e.map((e=>e.node)))){return kt(e.reduce(((e,t)=>Object.assign(e,t.getBindingIdentifiers())),{}),f.types.objectPattern([f.types.objectProperty(f.types.identifier("value"),t)]))}(n.get("params"));if(function(e){const t=[...nt(e).values()].sort(At);for(const r of t){let t;if(r.effect.length){const n=f.types.identifier(`${r.identifier.name}_effect`);r.effectInlineReferences&&r.effect.unshift(f.types.variableDeclaration("const",[f.types.variableDeclarator(xe(e,r.effectInlineReferences),Bt)])),t=f.types.variableDeclarator(n,Ce("register",f.types.stringLiteral(It(e,r.reserve)),f.types.arrowFunctionExpression([Bt],1===r.effect.length&&f.types.isExpressionStatement(r.effect[0])?r.effect[0].expression:f.types.blockStatement(r.effect)))),r.render.push(f.types.expressionStatement(Ce("queueEffect",Bt,n)))}const n=r.register?Ce("register",f.types.stringLiteral(It(e,r.reserve)),r.build()):r.build();f.types.isCallExpression(n)&&Ct(n.arguments);const s=f.types.variableDeclarator(r.identifier,n),o=Ut.pushContainer("body",t?[f.types.variableDeclaration("const",[t]),f.types.variableDeclaration("const",[s])]:f.types.variableDeclaration("const",[s]));for(const t of o)t.traverse(Nt,{root:t,section:e})}}(r),r!==t){const{walks:t,writes:n,setup:o,register:a}=Je(r),i=it(r),l=Be(r),c=Ce("createRenderer",n,t,o,i.length&&f.types.arrayExpression(i),void 0,void 0,void 0,void 0,s?.build());e.node.body.push(f.types.variableDeclaration("const",[f.types.variableDeclarator(l,a?Ce("register",f.types.stringLiteral(It(r,"renderer")),c):c)]))}})),i){const r=[];for(const e in i.bindings){const n=i.bindings[e],s=ht(t,n.extra.reserve).identifier;r.push(f.types.exportSpecifier(s,s))}e.node.body.push(f.types.exportNamedDeclaration(f.types.variableDeclaration("const",[f.types.variableDeclarator(o,f.types.isIdentifier(i.var)?ht(t,i.var.extra.reserve).identifier:kt(i.bindings,i.var)?.build())])),f.types.exportNamedDeclaration(null,r))}const p=it(t);e.node.body.push(f.types.exportNamedDeclaration(f.types.variableDeclaration("const",[f.types.variableDeclarator(r,c||f.types.stringLiteral(""))])),f.types.exportNamedDeclaration(f.types.variableDeclaration("const",[f.types.variableDeclarator(n,l||f.types.stringLiteral(""))])),f.types.exportNamedDeclaration(f.types.variableDeclaration("const",[f.types.variableDeclarator(s,f.types.isNullLiteral(d)||!d?f.types.functionExpression(null,[],f.types.blockStatement([])):d)]))),p.length&&e.node.body.push(f.types.exportNamedDeclaration(f.types.variableDeclaration("const",[f.types.variableDeclarator(a,f.types.arrayExpression(p))])));const{markoOpts:{optimize:u},opts:{filename:y}}=e.hub.file;e.node.body.push(f.types.exportDefaultDeclaration(Ce("createTemplate",Ce("createRenderer",r,n,s,p.length&&a,void 0,void 0,void 0,void 0,i&&o),f.types.stringLiteral((0,m.getTemplateId)(u,`${y}`)))))}}};function Ot(e){return e.isImportDeclaration()||e.isExportDeclaration()||e.isMarkoScriptlet({static:!0})}var Ut,Bt,zt,qt={translate:{exit(e){const t=C(e),r=e.scope.generateUidIdentifier("tagVar");Ke(e),$t(e,r);const n=et(t);void 0!==n&&e.pushContainer("body",f.types.returnStatement(n));const s=[];for(const t of e.get("body"))Ot(t)?t.isMarkoScriptlet()&&t.replaceWithMultiple(t.node.body):(s.push(t.node),t.remove());const o=e.scope.generateUidIdentifier("renderer"),{attrs:a}=e.node.extra,{markoOpts:{optimize:i},opts:{filename:l}}=e.hub.file;e.pushContainer("body",[f.types.variableDeclaration("const",[f.types.variableDeclarator(o,Ce("createRenderer",f.types.arrowFunctionExpression([a?a.var:f.types.identifier("input"),r],f.types.blockStatement(s))))]),f.types.exportDefaultDeclaration(Ce("createTemplate",o,f.types.stringLiteral((0,m.getTemplateId)(i,`${l}`))))])}}},Wt=new WeakMap,Vt={migrate:{enter(e){Wt.set(e,Ut),Ut=e},exit(){Ut.scope.crawl(),Ut=Wt.get(Ut)}},analyze:{enter(e){Wt.set(e,Ut),Ut=e,E(e)},exit(){_((e=>{let t=0;for(const r of R(e))if(r)for(const e of r)e.id=t,t+=1})),function(){const e=(Ut.node.extra??={}).intersectionsBySection={};_((t=>{e[t.id]=z(t).filter((e=>U.get(e)>0))}))}(),Ut=Wt.get(Ut)}},translate:{enter(e){if(Wt.set(e,Ut),Ut=e,Bt=b()?e.scope.generateUidIdentifier("scope"):null,zt=b()?e.scope.generateUidIdentifier("clean"):null,"hydrate"===v().output)return e.skip(),e.node.body=[f.types.importDeclaration([],f.types.stringLiteral(e.hub.file.opts.filename))],void((e.node.extra.hasInteractiveChild||e.node.extra.isInteractive)&&e.node.body.push(f.types.expressionStatement(Ce("init"))))},exit(e){g()?qt.translate.exit(e):Pt.translate.exit(e),Ut=Wt.get(Ut)}}},Ht={translate:{exit(e){const t=e.get("source"),r=t.node.value;t.node.value=(0,m.resolveTagImport)(t,r)||r}}},Zt={translate(e){g()&&Ve(e)`<!${e.node.value}>`,e.remove()}},Yt=new WeakMap;function Kt(e,t){return Yt.get(e.node)?.(e,t)}var Jt={translate:{exit(e){if(b()){const t="="===e.node.operator?e.node.right:f.types.binaryExpression(e.node.operator.slice(0,-1),e.node.left,e.node.right),r=Kt(e,t);r&&e.replaceWith(r)}}}},Gt={translate:{exit(e){if(b()){const t=Kt(e,f.types.binaryExpression("++"===e.node.operator?"+":"-",e.node.argument,f.types.numericLiteral(1)));t&&e.replaceWith(e.node.prefix||e.parentPath.isExpressionStatement()?t:f.types.sequenceExpression([t,e.node.argument]))}}}},Xt={translate(e){g()&&Ve(e)`<?${e.node.value}?>`,e.remove()}},Qt={translate(e){g()&&Ve(e)`<![CDATA[${e.node.value}]]>`,e.remove()}},er={translate(e){const t=e.container.slice(e.key+1);let r=!1;if(g())for(const e of t){if(f.types.isMarkoPlaceholder(e)){r=!0;break}if(f.types.isMarkoTag(e)||f.types.isMarkoText(e))break}Ve(e)`${e.node.value}${r?"<!>":""}`,Re(e),e.remove()}};function tr(e,t){if(!e)return!1;const{node:r}=t,n=nr(e)?e.default:e;return sr(n)?n(t,f.types):n.enter&&n.enter(t,f.types),r!==t.node}function rr(e,t){if(!e)return!1;const{node:r}=t,n=nr(e)?e.default:e;return!sr(n)&&n.exit&&n.exit(t,f.types),r!==t.node}function nr(e){return Boolean(e.default)}function sr(e){return"function"==typeof e}function or(e){const{extra:t}=e.node;t.nestedAttributeTags={},t.hoistedControlFlows=0,ar(t,!1,!1,e)}function ar(e,t,r,n){let s=!1;for(const o of n.get("body").get("body"))o.isMarkoTag()&&ir(e,t,r,o)&&(s=!0);return s}function ir(e,t,r,n){if((0,m.isTransparentTag)(n)){if(ar(e,t||(0,m.isLoopTag)(n),!0,n))return(0,m.isTransparentTag)(n.parentPath.parentPath)||e.hoistedControlFlows++,!0}else if((0,m.isAttributeTag)(n)){const s=n.node.name.value.slice(1),o=e.nestedAttributeTags,a=o[s],i=a||(o[s]={dynamic:!1,repeated:!1});return i.dynamic||=r,i.repeated||=t||void 0!==a,!0}return!1}var lr=/^[0-9A-Z_$]+$/i;function cr(e,t=!1){const{node:r}=e;let n=f.types.objectExpression([]);const s=n.extra={};for(const e of r.attributes){const t=e.value;f.types.isMarkoSpreadAttribute(e)?n.properties.push(f.types.spreadElement(t)):n.properties.push(f.types.objectProperty((o=e.name,lr.test(o)?f.types.identifier(o):f.types.stringLiteral(o)),t))}var o;if(t){const{body:t,params:s}=r.body;let o=r.extra.hoistedControlFlows;if(o)for(const t of e.get("body").get("body"))if(e.insertBefore(t.node),t.remove(),(t.isConditional()||t.isLoop())&&! --o)break;t.length&&n.properties.push(f.types.objectMethod("method",f.types.identifier("renderBody"),s.length?[f.types.objectPattern([f.types.objectProperty(f.types.identifier("value"),f.types.arrayPattern(s))])]:[],f.types.blockStatement(t)))}if(n.properties.length&&1===n.properties.length){const[e]=n.properties;f.types.isSpreadElement(e)&&(n=e.argument,n.extra=s)}return n}function dr(e){if(f.types.isObjectExpression(e)){const t=e.properties[e.properties.length-1];if(f.types.isObjectMethod(t)&&"renderBody"===t.key.name)return t}}function pr(e,t,r="const"){const{node:{var:n}}=e;n&&(e.get("var").remove(),e.insertBefore(f.types.variableDeclaration(r,[f.types.variableDeclarator(f.types.cloneDeep(n),t)])),e.hub.file.path.scope.crawl())}function ur(e){let{extra:t}=e.node;if(t||(t=e.node.extra={}),void 0===t.confident){const r=e.get("value"),{confident:n,value:s}=r.evaluate();t.computed=s,t.confident=n}return t}var fr={analyze:{enter(e){const{node:t}=e,r=e.get("attributes");let n=e.has("var")?S(e):void 0;if(r.some(mr));else for(const t of r){const r=t.node,{name:s}=r;yr(s)?(n??=S(e),(Ut.node.extra??{}).isInteractive=!0):ur(t).confident||(n??=S(e))}const s=t.var?t.var.name:t.name.value;void 0!==n&&F(0,n,t,s,`#${e.get("name").evaluate().value}`)}},translate:{enter(e){const{extra:t}=e.node,r=g(),n=e.get("name"),s=e.get("attributes"),o=(0,m.getTagDef)(e),a=s.some((e=>e.isMarkoSpreadAttribute())),i=Ve(e),l=C(e);if(r&&t.tagNameNullable&&Ye(e),e.has("var"))if(r)pr(e,f.types.arrowFunctionExpression([],f.types.blockStatement([f.types.throwStatement(f.types.newExpression(f.types.identifier("Error"),[f.types.stringLiteral("Cannot reference DOM node from server")]))])));else{const r=e.node.var.name,n=e.scope.getBinding(r).referencePaths;let s;for(const e of n){const n=C(e);e.parentPath?.isCallExpression()?e.parentPath.replaceWith(f.types.expressionStatement(ke(n,t.reserve))):(s??=f.types.identifier(r+"_getter"),e.replaceWith(Ce("bindFunction",we(n,t.reserve.section),s)))}s&&Ut.pushContainer("body",f.types.variableDeclaration("const",[f.types.variableDeclarator(s,f.types.arrowFunctionExpression([Bt],f.types.memberExpression(Bt,P(t.reserve),!0)))]))}let c;if(t.reserve&&(c=P(t.reserve),Fe(e,32)),i`<${n.node}`,a){const t=Ce("attrs",Bt,cr(e));r?i`${t}`:e.insertBefore(f.types.expressionStatement(t))}else for(const e of s){const t=e.node.name,n=e.node.extra??{},s=e.get("value"),{confident:o,computed:a,valueReferences:p}=n;switch(t){case"class":case"style":{const e=`${t}Attr`;o?i`${Te()[e](a)}`:r?i`${Ce(e,s.node)}`:Tt("render",l,p,f.types.expressionStatement(Ce(e,f.types.memberExpression(Bt,c,!0),s.node)));break}default:o?i`${Te().attr(t,a)}`:r?yr(t)?Mt(l,p):i`${Ce("attr",f.types.stringLiteral(t),s.node)}`:yr(t)?Tt("effect",l,p,f.types.expressionStatement(Ce("on",f.types.memberExpression(Bt,c,!0),f.types.stringLiteral("-"===(d=t).charAt(2)?d.slice(3):d.charAt(2).toLowerCase()+d.slice(3)),s.node)),s.node):Tt("render",l,p,f.types.expressionStatement(Ce("attr",f.types.memberExpression(Bt,c,!0),f.types.stringLiteral(t),s.node)))}}var d;if(o&&o.parseOptions?.openTagOnly)switch(o.htmlType){case"svg":case"math":i`/>`;break;default:i`>`}else i`>`;r&&t.tagNameNullable&&e.insertBefore(f.types.ifStatement(n.node,Ze(e)))[0].skip(),$e(e)},exit(e){const{extra:t}=e.node,r=g(),n=(0,m.getTagDef)(e)?.parseOptions?.openTagOnly;r&&t.tagNameNullable&&Ke(e),e.insertBefore(e.node.body.body).forEach((e=>e.skip())),n||Ve(e)`</${e.node.name}>`,r&&t.tagNameNullable&&e.insertBefore(f.types.ifStatement(e.node.name,Ze(e)))[0].skip(),t.reserve&&Ge(e),Ne(e),e.remove()}}};function mr(e){return"MarkoSpreadAttribute"===e.type}function yr(e){return/^on[A-Z-]/.test(e)}var hr={analyze:{enter(e){!function(e){e.has("var")&&W(S(e),e.get("var"));const t=e.get("body");t.get("body").length&&t.get("params").length&&W(S(t),t)}(e);const t=e.get("body");t.get("body").length&&E(t),(0,m.getTagDef)(e)?.template&&F(0,S(e),e.node,"#childScope");const r=(0,m.loadFileForTag)(e),n=r?.ast.program.extra;(n?.isInteractive||n?.hasInteractiveChild)&&((Ut.node.extra??{}).hasInteractiveChild=!0)},exit(e){const t=(0,m.getTagDef)(e),r=t?.template,n=S(e);r&&(e.node.extra.attrsReferences=H(n,e.node.attributes.filter((e=>e.extra?.valueReferences)).map((e=>[e.extra,"valueReferences"]))))}},translate:{enter(e){Fe(e),g()&&Ye(e)},exit(e){g()?function(e){const t=e.get("body"),{node:r}=e;let n;if(Ke(e),$t(t),f.types.isStringLiteral(r.name)){const{file:t}=e.hub,s=r.name.value,o=gr(e);n=f.types.memberExpression((0,m.importDefault)(t,o,s),f.types.identifier("_"))}else n=r.name;const s=r.var,o=cr(e,!0),a=dr(o);if(r.extra.tagNameNullable){let t,r=vr(n,cr(e));if(a){t=e.scope.generateUidIdentifier("renderBody");const[r]=e.insertBefore(f.types.variableDeclaration("const",[f.types.variableDeclarator(t,Ce("createRenderer",f.types.arrowFunctionExpression(a.params.length?[f.types.objectPattern([f.types.objectProperty(f.types.identifier("value"),f.types.arrayPattern(a.params))])]:[],a.body)))]));r.skip(),o.properties[o.properties.length-1]=f.types.objectProperty(f.types.identifier("renderBody"),t)}s&&(pr(e,f.types.unaryExpression("void",f.types.numericLiteral(0)),"let"),r=f.types.assignmentExpression("=",s,r)),e.replaceWith(f.types.ifStatement(n,f.types.expressionStatement(r),t&&br(t)))[0].skip()}else if(s){const t=C(e);pr(e,vr(n,o,Ce("register",Ce("createRenderer",f.types.arrowFunctionExpression([],f.types.blockStatement([]))),f.types.stringLiteral(It(t,r.var.extra?.reserve)),D(t)))),function(e){dt(e,!0)}(t),e.remove()}else e.replaceWith(br(n,o))[0].skip()}(e):function(e){const t=C(e),r=C(e.get("body")),{node:n}=e,s=Ve(e),o=n.extra.reserve,{file:a}=e.hub,i=n.name.value,l=gr(e),c=(0,m.loadFileForTag)(e).ast.program,d=(0,m.importNamed)(a,l,"setup",i);let p;c.extra.attrs&&(p=(0,m.importNamed)(a,l,"attrs",`${i}_attrs`)),s`${(0,m.importNamed)(a,l,"template",`${i}_template`)}`,function(e,t){const r=Ae(C(e));Le(C(e)).push(`${Me[47]}`,t.name,Me[38]),je(r,String.fromCharCode(47)),r.push(t,String.fromCharCode(38))}(e,(0,m.importNamed)(a,l,"walks",`${i}_walks`)),c.extra.closures&&it(t).push(Ce("childClosures",(0,m.importNamed)(a,l,"closures",`${i}_closures`),P(o)));let u=cr(e);if(r!==t&&(u??=f.types.objectExpression([]),u.properties.push(f.types.objectProperty(f.types.identifier("renderBody"),Ce("bindRenderer",Bt,Be(r))))),n.var){const e=gt(n.var.extra.reserve);e.register=!0,Tt("render",t,void 0,f.types.expressionStatement(Ce("setTagVar",Bt,P(o),e.identifier)))}Tt("render",t,void 0,f.types.expressionStatement(f.types.callExpression(d,[ke(t,o)]))),u&&p&&Dt(t,e.node.extra.attrsReferences,{identifier:p,hasDownstreamIntersections:()=>!0},u,ke(t,o),Ce("inChild",P(o),f.types.identifier(p.name))),e.remove()}(e)}}};function gr(e){const{node:t,hub:{file:r}}=e,n=f.types.isStringLiteral(t.name);let s;if(n){const t=(0,m.getTagDef)(e),n=t?.template;s=n&&(0,m.resolveRelativePath)(r,n)}if(!s)throw e.get("name").buildCodeFrameError(`Unable to find entry point for custom tag <${n?t.name.value:t.name}>.`);const o=r.metadata.marko.tags;return o.includes(s)||o.push(s),s}function br(e,...t){return f.types.expressionStatement(vr(e,...t))}function vr(e,...t){return f.types.callExpression(e,t.filter(Boolean))}function xr(e){const t=e.body;return 1===t.length&&f.types.isExpressionStatement(t[0])?t[0].expression:f.types.isBlockStatement(e)?e:f.types.blockStatement(t)}var wr={analyze:{enter(e){F(0,S(e),e.node,"dynamicTagName","#text"),hr.analyze.enter(e)},exit(e){e.node.extra.attrsReferences=H(S(e),e.node.attributes.filter((e=>e.extra?.valueReferences)).map((e=>[e.extra,"valueReferences"]))),V(e,"attrsReferences",e.node.extra.reserve)}},translate:{enter(e){Fe(e,37),Re(e),g()&&Ye(e)},exit(e){const{node:t}=e;let r=t.name;if(f.types.isStringLiteral(r)){const{file:t}=e.hub,n=gr(e);r=(0,m.importDefault)(t,n,r.value)}if("class"===e.node.extra?.___featureType)if((0,m.importDefault)(e.hub.file,`marko/src/runtime/helpers/tags-compat-${g()?"html":"dom"}.js`,"marko_tags_compat"),g()){const t=(0,m.importNamed)(e.hub.file,"marko/src/runtime/helpers/tags-compat-html.js","serialized5to6");Ut.pushContainer("body",f.types.expressionStatement(f.types.callExpression(t,[f.types.identifier(r.name),f.types.stringLiteral((0,m.getTemplateId)(x(),(0,m.loadFileForTag)(e).metadata.marko.id))])))}else Ut.pushContainer("body",f.types.expressionStatement(Ce("register",f.types.stringLiteral((0,m.getTemplateId)(x(),(0,m.loadFileForTag)(e).metadata.marko.id)),f.types.identifier(r.name))));if(g()){Ke(e),$t(e.get("body"));const n=cr(e,!0),s=f.types.isObjectExpression(n)&&!n.properties.length,o=dr(n),a=[r,s?f.types.nullLiteral():n];o&&(n.properties.pop(),a.push(Ce("createRenderer",f.types.arrowFunctionExpression(o.params.length?[f.types.objectPattern([f.types.objectProperty(f.types.identifier("value"),f.types.arrayPattern(o.params))])]:[],xr(o.body)))));const i=Ut.scope.generateUidIdentifier("dynamicScope"),l=Ce("dynamicTag",...a);t.var?(pr(e,l),e.remove()):e.replaceWith(f.types.variableDeclaration("const",[f.types.variableDeclarator(i,l)]))[0].skip();const c=C(e);Ve(e)`${Ce("markResumeControlEnd",D(c),P(t.extra.reserve))}`,pt(c).set(f.types.stringLiteral(P(t.extra.reserve).value+"!"),i),pt(c).set(f.types.stringLiteral(P(t.extra.reserve).value+"("),f.types.isIdentifier(r)?f.types.identifier(r.name):r)}else{const n=C(e),s=C(e.get("body")),o=n!==s&&Be(s),a=t.extra?.reserve,i=ht(n,a);i.build=()=>Ce("conditional",P(a),bt(i,[Bt]),vt(i),xt(i)),i.hasDownstreamIntersections=()=>!0,Dt(n,t.extra?.nameReferences,i,o?f.types.logicalExpression("||",r,o):r);const l=cr(e,!0);if(!f.types.isObjectExpression(l)||l.properties.length||o){const r=f.types.arrowFunctionExpression([],l),s=Ut.scope.generateUidIdentifier(e.get("name").toString()+"_input");let i=!1;Dt(n,t.extra?.attrsReferences,{get identifier(){return i||(Ut.pushContainer("body",f.types.variableDeclaration("const",[f.types.variableDeclarator(s,Ce("dynamicTagAttrs",P(a),o))])),i=!0),s},hasDownstreamIntersections:()=>!0},r)}e.remove()}}}},kr={analyze:{enter(e){const t=e.get("body");t.get("body").length&&E(t)}},translate:{enter(e){if(C(e.get("body")),function(e){const t=ze(C(e));return Boolean(t.length>1||t[0])}(e))throw e.get("name").buildCodeFrameError("Dynamic @tags cannot be mixed with body content.")},exit(e){(0,m.assertNoVar)(e),Ke(e);const t=(0,m.findParentTag)(e);if(!t)throw e.get("name").buildCodeFrameError("@tags must be nested within another tag.");const r=t.node.extra;if(0===r.tagNameType)throw e.get("name").buildCodeFrameError("@tags cannot be nested under native tags.");const n=e.node.name.value.slice(1),s=r.nestedAttributeTags[n],o=cr(e,!0);if(s.dynamic)s.identifier||(s.identifier=t.scope.generateUidIdentifier(n),t.insertBefore(s.repeated?f.types.variableDeclaration("const",[f.types.variableDeclarator(s.identifier,f.types.arrayExpression([]))]):f.types.variableDeclaration("let",[f.types.variableDeclarator(s.identifier)])),t.pushContainer("attributes",f.types.markoAttribute(n,s.identifier))),e.replaceWith(f.types.expressionStatement(s.repeated?f.types.callExpression(f.types.memberExpression(s.identifier,f.types.identifier("push")),[o]):f.types.assignmentExpression("=",s.identifier,o)));else if(s.repeated){const r=t.get("attributes").find((e=>e.node.name===n));r?r.get("value").pushContainer("elements",o):t.pushContainer("attributes",f.types.markoAttribute(n,f.types.arrayExpression([o]))),e.remove()}else t.pushContainer("attributes",f.types.markoAttribute(n,o)),e.remove()}}},Er={analyze:{enter(e){const t=(0,m.getTagDef)(e),r=k(e),n=t?.analyzer?.hook;if(n)tr(n,e);else switch(r){case 0:fr.analyze.enter(e);break;case 1:hr.analyze.enter(e);break;case 3:kr.analyze.enter(e);break;case 2:wr.analyze.enter(e)}},exit(e){const t=(0,m.getTagDef)(e),r=k(e),n=t?.analyzer?.hook;if(n)rr(n,e);else if(0!==r)switch(or(e),r){case 1:hr.analyze.exit(e);break;case 3:break;case 2:wr.analyze.exit(e)}}},translate:{enter(e){const t=(0,m.getTagDef)(e),r=e.node.extra;if((0,m.assertNoArgs)(e),t?.translator)return t.translator.path&&e.hub.file.metadata.marko.watchFiles.push(t.translator.path),void tr(t.translator.hook,e);for(const t of e.get("attributes"))if(t.isMarkoAttribute()){if(t.node.arguments)throw t.buildCodeFrameError(`Unsupported arguments on the "${t.node.name}" attribute.`);if(t.node.modifier){if(!(0,m.isNativeTag)(t.parentPath))throw t.buildCodeFrameError(`Unsupported modifier "${t.node.modifier}".`);t.node.name+=`:${t.node.modifier}`}}if(r.tagNameDynamic&&r.tagNameNullable&&!e.get("name").isIdentifier()&&g()){const t=e.scope.generateUidIdentifier("tagName"),[r]=e.insertBefore(f.types.variableDeclaration("const",[f.types.variableDeclarator(t,e.node.name)]));r.skip(),e.set("name",t)}switch(r.tagNameType){case 0:fr.translate.enter(e);break;case 1:hr.translate.enter(e);break;case 2:wr.translate.enter(e);break;case 3:kr.translate.enter(e)}},exit(e){const t=(0,m.getTagDef)(e)?.translator;if(t)rr(t.hook,e);else switch(e.node.extra.tagNameType){case 0:fr.translate.exit(e);break;case 1:hr.translate.exit(e);break;case 2:wr.translate.exit(e);break;case 3:kr.translate.exit(e)}}}},Sr="marko-core";function Cr(e){return e.isMarkoTag()&&(0,m.getTagDef)(e)?.taglibId===Sr}function Tr(e,t){return Cr(e)&&e.node.name.value===t}var Dr={script:"escapeScript",style:"escapeStyle"},jr={analyze(e){const{node:t}=e,{confident:r,computed:n}=ur(e);(!r||!t.escape&&n)&&(F(0,S(e),t,"placeholder","#text"),function(e){let t=e.getPrevSibling();for(;t.node&&Ir(t);)t=t.getPrevSibling();if((t.node||f.types.isProgram(e.parentPath))&&(!f.types.isMarkoTag(t)||!(0,m.isNativeTag)(t)))return e.node.extra.needsMarker=!0;let r=e.getNextSibling();for(;r.node&&Ir(r);)r=r.getNextSibling();if((r.node||f.types.isProgram(e.parentPath))&&(!f.types.isMarkoTag(r)||!(0,m.isNativeTag)(r)))return e.node.extra.needsMarker=!0;e.node.extra.needsMarker=!1}(e))},translate(e){const t=g(),r=Ve(e),n=e.node.extra,{confident:s,computed:o,valueReferences:a,reserve:i}=n,l=t||s&&(e.node.escape||!o),c=l?e.node.escape?Dr[function({parentPath:e}){return e.isMarkoTag()&&(0,m.isNativeTag)(e)&&e.node.name.value||""}(e)]||"escapeXML":"toString":e.node.escape?"data":"html";s&&l?r`${Te()[c](o)}`:(n.needsMarker?Fe(e,37):(t||r` `,Fe(e,32)),t?(r`${Ce(c,e.node.value)}`,Ge(e)):Tt("render",C(e),a,f.types.expressionStatement("data"===c?Ce("data",f.types.memberExpression(Bt,P(i),!0),e.node.value):Ce("html",Bt,e.node.value,P(i))))),Re(e),e.remove()}};function Ir(e){return f.types.isMarkoComment(e)||f.types.isMarkoTag(e)&&Cr(e)&&["let","const","effect","lifecycle","attrs","get","id"].includes(e.node.name.value)}var Ar={translate(e){if(g()){if(e.node.static)return;e.replaceWithMultiple(e.node.body)}else e.node.static?e.replaceWithMultiple(e.node.body):(Tt("render",C(e),e.node.extra?.bodyReferences,e.node.body),e.remove())}},Lr=/^\[if |<!\[endif\]$/,_r={translate(e){if(g()){const{value:t}=e.node;Lr.test(t)&&Ve(e)`<!--${t}-->`}e.remove()}},Mr={parse(e){const{node:t}=e;e.replaceWith((0,m.parseStatements)(e.hub.file,t.rawValue,t.start,t.end)[0])},parseOptions:{rootOnly:!0,rawOpenTag:!0,openTagOnly:!0,ignoreAttributes:!0,relaxRequireCommas:!0},autocomplete:[{displayText:'import <scope> from "<path>"',description:"Use to import external modules, follows the same syntax as JavaScript imports.",snippet:'import ${2} from "${1:path}"',descriptionMoreURL:"https://markojs.com/docs/syntax/#importing-external-files"}]},$r={parse(e){const{node:t}=e;e.replaceWith((0,m.parseStatements)(e.hub.file,t.rawValue,t.start,t.end)[0])},parseOptions:{rootOnly:!0,rawOpenTag:!0,openTagOnly:!0,ignoreAttributes:!0,relaxRequireCommas:!0},autocomplete:[{displayText:"export <value>"}]},Nr={analyze(e){if(e.has("var")){const t=e.get("var"),r=t.getBindingIdentifiers();W(S(e),t),(Ut.node.extra??={}).attrs={bindings:r,var:t.node}}},translate(e){const t=Ut.node.extra?.attrs?.bindings;if(t)for(const e in t)gt(t[e].extra.reserve);e.remove()},attributes:{},autocomplete:[{displayText:"attrs/{ ... }",description:"Use to receive the attributes passed into this template.",snippet:"attrs/{ $1 }$2"}]};function Rr(e){const t=e.body;return 1===t.length?t[0]:f.types.isBlockStatement(e)?e:f.types.blockStatement(t)}var Fr={analyze:{enter(e){F(0,S(e),e.node,"if","#text"),hr.analyze.enter(e)},exit(e){or(e),Ur(e)}},translate:{enter(e){const{node:t}=e,[r]=t.attributes;if((0,m.assertNoVar)(e),(0,m.assertNoParams)(e),!f.types.isMarkoAttribute(r)||!r.default)throw e.get("name").buildCodeFrameError("The '<if>' tag requires a default attribute like '<if=condition>'.");if(t.attributes.length>1){const r=t.attributes[1].loc?.start,n=t.attributes[t.attributes.length-1].loc?.end,s="The '<if>' tag only supports a default attribute.";throw null==r||null==n?e.get("name").buildCodeFrameError(s):e.hub.buildError({loc:{start:r,end:n}},s,Error)}Fe(e,37),Re(e),g()&&Ye(e)},exit(e){Br(e)}},attributes:{},autocomplete:[{snippet:"if=${1:condition}",description:"Use to display content only if the condition is met.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#if-else-if-else"}]},Pr=new WeakMap;function Or(e,t){const r=Pr.get(e)??[],n=e.getNextSibling(),s=!(Tr(n,"else")||Tr(n,"else-if"));return r.push({tag:e,section:t}),s||Pr.set(n,r),[s,r]}function Ur(e){const t=S(e),r=S(e.get("body")),[n,s]=Or(e,r);if(n){const e=s[0].tag.node.extra,r=H(t,s.filter((({tag:e})=>e.node.attributes[0]?.extra?.valueReferences)).map((({tag:e})=>[e.node.attributes[0].extra,"valueReferences"])));e.conditionalReferences=r,e.isStateful=!!r,e.singleNodeOptimization=s.every((({tag:e})=>1===e.node.body.body.length))}}function Br(e){const t=e.get("body"),r=C(e),n=C(t),[s,o]=Or(e,n),a=o[0].tag.node.extra,i=a.isStateful,l=a.singleNodeOptimization;if(g()&&(i&&(l||He(t)`${Ce("markResumeScopeStart",D(n))}`,mt(e,(e=>f.types.assignmentExpression("=",L(n),e))),pt(n).set(f.types.stringLiteral("_"),Ce("serializedScope",D(r)))),Ke(e),$t(t)),s){const{extra:t}=o[0].tag.node;if(b()){let e=f.types.nullLiteral();for(let r=o.length;r--;){const{tag:n,section:s}=o[r],[a]=n.node.attributes,l=Be(s);at(n,(e=>Ce("inConditionalScope",e,P(t.reserve)))),i&&We(s,!0),n.remove(),e=a?f.types.conditionalExpression(a.value,l,e):l}const n=ht(r,t.reserve);n.build=()=>Ce("conditional",P(t.reserve),bt(n,[Bt])),n.hasDownstreamIntersections=()=>o.some((e=>it(e.section).length>0)),Dt(r,t.conditionalReferences,n,e)}else{const n=Ve(e),s=e.getNextSibling(),a=e.scope.generateUidIdentifier("ifScopeId"),c=L(o[0].section),d=e.scope.generateUidIdentifier("ifRenderer");let p;for(let e=o.length;e--;){const{tag:t,section:r}=o[e];L(r,!0).name=c.name,i&&(t.node.body.body.push(f.types.expressionStatement(Ce("register",f.types.assignmentExpression("=",d,Ce("createRenderer",f.types.arrowFunctionExpression([],f.types.blockStatement([])))),f.types.stringLiteral(It(r,"renderer"))))),l&&t.node.body.body.push(f.types.expressionStatement(f.types.assignmentExpression("=",a,D(r)))));const[n]=t.node.attributes,s=Rr(t.node.body);p=n?f.types.ifStatement(n.value,s,p):s,t.remove()}i?(s.insertBefore([f.types.variableDeclaration("let",[l&&f.types.variableDeclarator(a),f.types.variableDeclarator(c),f.types.variableDeclarator(d)].filter(Boolean)),p]),l?n`${Ce("markResumeControlSingleNodeEnd",D(r),P(t.reserve),a)}`:n`${Ce("markResumeControlEnd",D(r),P(t.reserve))}`,pt(r).set(f.types.stringLiteral(P(t.reserve).value+"!"),c),pt(r).set(f.types.stringLiteral(P(t.reserve).value+"("),d)):s.insertBefore(p)}}}var zr={analyze:{enter(e){hr.analyze.enter(e)},exit(e){Ur(e)}},translate:{enter(e){const{node:t}=e,[r]=t.attributes;if((0,m.assertNoVar)(e),(0,m.assertNoParams)(e),!f.types.isMarkoAttribute(r)||!r.default)throw e.get("name").buildCodeFrameError("The '<else-if>' tag requires a default attribute like '<else-if=condition>'.");if(t.attributes.length>1){const r=t.attributes[1].loc?.start,n=t.attributes[t.attributes.length-1].loc?.end,s="The '<else-if>' tag only supports a default attribute.";throw null==r||null==n?e.get("name").buildCodeFrameError(s):e.hub.buildError({loc:{start:r,end:n}},s,Error)}},exit(e){Br(e)}},attributes:{},autocomplete:[{snippet:"else-if=${1:condition}",description:"Use after an <if> or <else-if> tag to display content if those conditions do not match and this one does.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#if-else-if-else"}]},qr={analyze:{enter(e){hr.analyze.enter(e)},exit(e){Ur(e)}},translate:{enter(e){const{node:t}=e,[r]=t.attributes;if((0,m.assertNoVar)(e),(0,m.assertNoParams)(e),t.attributes.length>1||r&&"if"!==r.name){const r=t.attributes[1].loc?.start,n=t.attributes[t.attributes.length-1].loc?.end,s="The '<else>' tag only supports an if attribute.";throw null==r||null==n?e.get("name").buildCodeFrameError(s):e.hub.buildError({loc:{start:r,end:n}},s,Error)}},exit(e){Br(e)}},attributes:{},autocomplete:[{description:"Use after an <if> or <else-if> tag to display content if those conditions do not match.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#if-else-if-else"}]},Wr={translate(e){const{node:t}=e,[r]=t.attributes;if((0,m.assertNoParams)(e),Qe(e),!t.var)throw e.get("name").buildCodeFrameError("The 'const' tag requires a tag variable.");if(!r)throw e.get("name").buildCodeFrameError("The 'const' tag requires a default attribute.");if(t.attributes.length>1||!f.types.isMarkoAttribute(r)||!r.default&&"value"!==r.name)throw e.get("name").buildCodeFrameError("The 'const' tag only supports the 'default' attribute.");if(b()){const t=C(e),s=r.extra?.valueReferences;Dt(t,s,(n=e.get("var")).isIdentifier()?gt(n.node.extra.reserve):kt(Object.values(n.getBindingIdentifiers()),n.node),r.value)}else pr(e,r.value);var n;e.remove()},attributes:{},autocomplete:[{description:"Use to create an constant binding.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#const"}]},Vr={analyze(e){F(1,S(e),e.node,"cleanup"),(Ut.node.extra??{}).isInteractive=!0},translate:{exit(e){const{node:t}=e,[r]=t.attributes;if((0,m.assertNoParams)(e),Qe(e),!r)throw e.get("name").buildCodeFrameError("The 'effect' tag requires a default attribute.");if(t.attributes.length>1||!f.types.isMarkoAttribute(r)||!r.default&&"value"!==r.name)throw e.get("name").buildCodeFrameError("The 'effect' tag only supports the 'default' attribute.");const n=C(e);if(b()){const{value:t}=r;let s=null;(f.types.isFunctionExpression(t)||f.types.isArrowFunctionExpression(t)&&f.types.isBlockStatement(t.body))&&(s=t.body.body,f.types.traverse(t.body,(e=>{f.types.isReturnStatement(e)&&(s=null)}))),Tt("effect",n,r.extra?.valueReferences,s||f.types.expressionStatement(Ce("userEffect",Bt,P(e.node.extra.reserve),r.value)),t,!!s)}else Mt(n,r.extra?.valueReferences);e.remove()}},attributes:{},autocomplete:[{description:"Use to create a side effects.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#effect"}]},Hr={analyze:{enter(e){hr.analyze.enter(e),F(1,S(e),e.node,"cleanup"),(Ut.node.extra??{}).isInteractive=!0},exit(e){hr.analyze.exit(e);const t=S(e);e.node.extra.attrsReferences=H(t,e.node.attributes.filter((e=>e.extra?.valueReferences)).map((e=>[e.extra,"valueReferences"])))}},translate:{exit(e){const{node:t}=e;(0,m.assertNoParams)(e),Qe(e);const r=C(e);if(b()){const n=cr(e);Tt("effect",r,t.extra.attrsReferences,f.types.expressionStatement(Ce("lifecycle",Bt,P(e.node.extra.reserve),n)),t.attributes.map((e=>e.value)))}else Mt(r,t.extra.attrsReferences);e.remove()}},attributes:{},autocomplete:[{description:"Use to create a side effects.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#effect"}]},Zr={translate(e){const{node:t}=e,{var:r}=t,n=Ce("nextTagId");if((0,m.assertNoArgs)(e),(0,m.assertNoAttributes)(e),Qe(e),(0,m.assertNoParams)(e),!t.var)throw e.get("name").buildCodeFrameError("The 'id' tag requires a tag variable.");if(!f.types.isIdentifier(r))throw e.get("var").buildCodeFrameError("The 'id' tag cannot be destructured");if(g())e.replaceWith(f.types.variableDeclaration("const",[f.types.variableDeclarator(t.var,n)]));else{const t=gt(r.extra.reserve);Dt(C(e),void 0,t,n),e.remove()}},attributes:{},autocomplete:[{displayText:"id/<name>",description:"Use to create a unique identifier.",snippet:"id/${1:name}",descriptionMoreURL:"https://markojs.com/docs/core-tags/#id"}]},Yr={analyze:{enter(e){const t=function(e){return e.node.extra??={},f.types.isMarkoTag(e.parentPath?.parent)&&(0,m.getTagDef)(e.parentPath.parentPath)?.html?e.node.extra.isOnlyChild=1===e.parent.body.length:e.node.extra.isOnlyChild=!1}(e),r=t?e.parentPath.parent:void 0,n=r?.name?.value;F(0,S(e),t?r:e.node,"for",t?`#${n}`:"#text"),hr.analyze.enter(e)},exit(e){or(e);const t=S(e);e.node.extra.attrsReferences=H(t,e.node.attributes.filter((e=>f.types.isMarkoAttribute(e)&&void 0!==e.extra?.valueReferences)).map((e=>[e.extra,"valueReferences"]))),e.node.extra.isStateful=!!e.node.extra.attrsReferences&&!Object.keys(e.node.extra.nestedAttributeTags).length,e.node.extra.singleNodeOptimization=1===e.node.body.body.length}},translate:{enter(e){!function(e){const t=e.node.attributes,r=e.node.body.params.length>0;if((0,m.assertNoVar)(e),Gr(t,"of")){if((0,m.assertAllowedAttributes)(e,["of","by"]),!r)throw e.buildCodeFrameError("Invalid 'for of' tag, missing |value, index| params.")}else if(Gr(t,"in")){if((0,m.assertAllowedAttributes)(e,["in","by"]),!r)throw e.buildCodeFrameError("Invalid 'for in' tag, missing |key, value| params.")}else{if(!Gr(t,"to"))throw e.buildCodeFrameError("Invalid 'for' tag, missing an 'of', 'in' or 'to' attribute.");(0,m.assertAllowedAttributes)(e,["from","to","step","by"])}}(e);const{extra:{isOnlyChild:t}}=e.node;t||(Fe(e,37),Re(e)),g()&&Ye(e)},exit(e){g()?Jr.exit(e):Kr.exit(e)}},attributes:{of:{type:"expression",autocomplete:[{description:"Iterates over a list of items."}]},in:{type:"expression",autocomplete:[{description:"Iterates over the keys and values of an object."}]},to:{type:"number",autocomplete:[{description:"Iterates up to the provided number (inclusive)"}]},from:{type:"number",autocomplete:[{description:"Iterates starting from the provided number (inclusive)"}]},step:{type:"number",autocomplete:[{description:"The amount to increment during each interation (with from/to)"}]}},autocomplete:[{snippet:"for|${1:value, index}| of=${3:array}",description:"Use to iterate over lists, object properties, or between ranges.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#iterating-over-a-list"},{snippet:"for|${1:name, value}| in=${3:object}",descriptionMoreURL:"https://markojs.com/docs/core-tags/#iterating-over-an-objects-properties"},{snippet:"for|${1:index}| from=${2:number} to=${3:number} step=${4:number}",descriptionMoreURL:"https://markojs.com/docs/core-tags/#iterating-between-a-range-of-numbers"}]},Kr={exit(e){const t=e.get("body"),r=C(e),n=C(t),{node:s}=e,{attributes:o,extra:{isOnlyChild:a,attrsReferences:i}}=s,{extra:{reserve:l}}=a?e.parentPath.parent:e.node,c=Object.values(t.getBindingIdentifiers());at(e,(e=>Ce("inLoopScope",e,P(l)))),e.remove();const d=Be(n),p=Gr(o,"of"),u=Gr(o,"to"),m=Gr(o,"in"),y=[];let h;if(p)h="loopOf",y.push(p.value);else if(m)h="loopIn",y.push(m.value);else{if(!u)throw e.get("name").buildCodeFrameError("Invalid <for> tag. Expected either an 'of', 'to', or 'in' attribute.");{const e=Gr(o,"from"),t=Gr(o,"step");h="loopTo",y.push(u.value,e?e.value:f.types.numericLiteral(0),t?t.value:f.types.numericLiteral(1))}}const g=Gr(o,"by");g&&y.push(g.value);const b=ht(r,l);b.build=()=>Ce(h,P(l),d),b.hasDownstreamIntersections=()=>{for(const e of c)if(ht(n,e.extra.reserve).hasDownstreamIntersections())return!0;return it(n).length>0},Dt(r,i,b,f.types.arrayExpression(y))}},Jr={exit(e){const t=e.get("body"),r=C(e),n=C(t),{node:s}=e,{attributes:o,body:{body:a,params:i},extra:{isStateful:l,singleNodeOptimization:c,isOnlyChild:d}}=s,{extra:{reserve:p}}=d?e.parentPath.parent:s,u=e.get("name"),m=Gr(o,"of"),y=Gr(o,"in"),h=Gr(o,"to"),g=Gr(o,"by"),b=f.types.blockStatement(a),v=Ve(e),x=[];let w,k=f.types.identifier("NOO");if(l&&(c||He(t)`${Ce("markResumeScopeStart",D(n))}`,mt(e,(e=>{const t=Ut.scope.generateUidIdentifier("s");return f.types.callExpression(f.types.arrowFunctionExpression([t],f.types.sequenceExpression([f.types.callExpression(f.types.memberExpression(L(n),f.types.identifier("set")),[k,t]),t])),[e])})),pt(n).set(f.types.stringLiteral("_"),Ce("serializedScope",D(r)))),g&&l){const e=Ut.scope.generateUidIdentifier("by");x.push(f.types.variableDeclaration("const",[f.types.variableDeclarator(e,g.value)])),w=[],k=f.types.callExpression(e,w)}if(y){const[e,t]=i;k=e,t&&b.body.unshift(f.types.variableDeclaration("const",[f.types.variableDeclarator(t,f.types.memberExpression(y.value,e,!0))])),x.push(f.types.forInStatement(f.types.variableDeclaration("const",[f.types.variableDeclarator(e)]),y.value,b))}else if(m){let t=m.value,[r,n,s]=i;if(!r)throw u.buildCodeFrameError("Invalid 'for of' tag, missing |value, index| params.");if(!f.types.isIdentifier(r)&&w){const e=Ut.scope.generateUidIdentifier("v");b.body.unshift(f.types.variableDeclaration("const",[f.types.variableDeclarator(r,e)])),r=e}if(n||l){n??=Ut.scope.generateUidIdentifier("i");const t=e.scope.generateUidIdentifierBasedOnNode(n,"i");x.push(f.types.variableDeclaration("let",[f.types.variableDeclarator(t,f.types.numericLiteral(0))])),b.body.unshift(f.types.variableDeclaration("let",[f.types.variableDeclarator(n,f.types.updateExpression("++",t))]))}s&&(f.types.isIdentifier(s)&&(t=s),x.push(f.types.variableDeclaration("const",[f.types.variableDeclarator(s,m.value)]))),w?w.push(r,n):k=n,x.push(f.types.forOfStatement(f.types.variableDeclaration("const",[f.types.variableDeclarator(r)]),t,b))}else if(h){const t=Gr(o,"step")?.value??f.types.numericLiteral(1),r=Gr(o,"from")?.value??f.types.numericLiteral(0);let[n]=i;const s=e.scope.generateUidIdentifier("steps"),a=e.scope.generateUidIdentifier("i"),c=e.scope.generateUidIdentifier("step"),d=e.scope.generateUidIdentifier("from");(n||l)&&(n??=Ut.scope.generateUidIdentifier("i"),k=n,b.body.unshift(f.types.variableDeclaration("const",[f.types.variableDeclarator(n,f.types.binaryExpression("+",d,f.types.binaryExpression("*",a,c)))]))),x.push(f.types.forStatement(f.types.variableDeclaration("let",[f.types.variableDeclarator(d,f.types.logicalExpression("??",r,f.types.numericLiteral(0))),f.types.variableDeclarator(c,f.types.logicalExpression("??",t,f.types.numericLiteral(1))),f.types.variableDeclarator(s,f.types.binaryExpression("/",f.types.binaryExpression("-",h.value,d),c)),f.types.variableDeclarator(a,f.types.numericLiteral(0))]),f.types.binaryExpression("<=",a,s),f.types.updateExpression("++",a),b))}if(l){const t=e.scope.generateUidIdentifier("forScopeIds"),s=L(n);x.unshift(f.types.variableDeclaration("const",[c&&f.types.variableDeclarator(t,f.types.arrayExpression([])),f.types.variableDeclarator(s,f.types.newExpression(f.types.identifier("Map"),[]))].filter(Boolean))),c?(b.body.push(f.types.expressionStatement(f.types.callExpression(f.types.memberExpression(t,f.types.identifier("push")),[D(n)]))),v`${Ce("markResumeControlSingleNodeEnd",D(r),P(p),t)}`):v`${Ce("markResumeControlEnd",D(r),P(p))}`,pt(r).set(f.types.stringLiteral(P(p).value+"("),f.types.conditionalExpression(f.types.memberExpression(s,f.types.identifier("size")),s,f.types.identifier("undefined")))}Ke(e),$t(t),b.body.push(f.types.expressionStatement(Ce("maybeFlush"))),e.replaceWithMultiple(x)}};function Gr(e,t){return e.find((e=>f.types.isMarkoAttribute(e)&&e.name===t))}var Xr={analyze:{enter(e){0===S(e).id&&((Ut.node.extra??={}).closures=!0),hr.analyze.enter(e)},exit:hr.analyze.exit},translate(e){(0,m.assertNoParams)(e),Qe(e),g()&&Ye(e);const{node:t,hub:{file:r}}=e,[n]=t.attributes;let s;if(!t.var)throw e.get("name").buildCodeFrameError("<get> requires a variable to be defined, eg <get/NAME>.");if(void 0===n)s="$";else{if(!f.types.isMarkoAttribute(n)||!n.default||!f.types.isStringLiteral(n.value))throw e.get("name").buildCodeFrameError("The '<get>' tag requires default attribute that is a string that resolves to a Marko file like '<get/val=\"../file.marko\">' or '<get/val=\"<tag-name>\">'.");if(t.attributes.length>1){const r=t.attributes[1].loc?.start,n=t.attributes[t.attributes.length-1].loc?.end,s="The '<get>' tag only supports a default attribute.";throw null==r||null==n?e.get("name").buildCodeFrameError(s):e.hub.buildError({loc:{start:r,end:n}},s,Error)}const o=e.get("attributes")[0].get("value");if("."===n.value.value)s=r.metadata.marko.id;else{const e=(0,m.resolveTagImport)(o,o.node.value);if(!e)throw o.buildCodeFrameError("Unable to resolve template provided to '<get>' tag.");s=(0,m.getTemplateId)(r.markoOpts.optimize,h().resolve(r.opts.filename,"..",e))}}g()?e.replaceWith(f.types.variableDeclaration("const",[f.types.variableDeclarator(t.var,Ce("getInContext",f.types.stringLiteral(s)))])):(!function(e,t){const r=t.section,n=ht(r,t);it(r).push(n.identifier),n.build=()=>Ce("contextClosure",P(t),f.types.stringLiteral(e),bt(n,[Bt,f.types.identifier(t.name)]))}(s,Object.values(e.get("var").getBindingIdentifiers())[0].extra.reserve),e.remove())},autocomplete:[{displayText:'get/<name>="<from>"',description:"Gets a value provided from another template.",snippet:'get/${1:name}="${2:from}"',descriptionMoreURL:"https://markojs.com/docs/core-tags/#get"}]},Qr={analyze:{enter(e){F(0,S(e),e.node,"put","#text"),hr.analyze.enter(e)},exit(e){hr.analyze.exit(e)}},translate:{enter(e){const{node:t}=e,[r]=t.attributes;if(!t.body.body.length)throw e.buildCodeFrameError("The '<put>' tag requires body content that the context is forwarded through.");if(!f.types.isMarkoAttribute(r)||!r.default)throw e.get("name").buildCodeFrameError("The '<put>' tag requires default attribute like '<put=val>'.");if(t.attributes.length>1){const r=t.attributes[1].loc?.start,n=t.attributes[t.attributes.length-1].loc?.end,s="The '<put>' tag only supports a default attribute.";throw null==r||null==n?e.get("name").buildCodeFrameError(s):e.hub.buildError({loc:{start:r,end:n}},s,Error)}if(g())Ye(e),e.insertBefore(f.types.expressionStatement(Ce("pushContext",f.types.stringLiteral(e.hub.file.metadata.marko.id),r.value)));else{Fe(e,37),Re(e);const n=C(e.get("body")),s=Be(n);!function(e,t,r,n,s){const o=t.section,a=P(t),i=f.types.stringLiteral(`${t.id}:`),l=gt(t,i);Dt(o,r,l,n),l.hasDynamicSubscribers=!0,l.hasDownstreamIntersections=()=>!0,Tt("render",t.section,void 0,f.types.expressionStatement(Ce("initContextProvider",Bt,a,i,f.types.stringLiteral(e),s)))}(e.hub.file.metadata.marko.id,t.extra.reserve,r.extra?.valueReferences,r.value,s)}},exit(e){(0,m.assertNoParams)(e),(0,m.assertNoVar)(e),g()&&(Ke(e),$t(e.get("body")),e.insertAfter(f.types.expressionStatement(Ce("popContext")))),e.replaceWithMultiple(e.node.body.body)}},autocomplete:[{displayText:"put=<value>",description:"Sets a value which can be read from a child template.",snippet:"put=${1:value}",descriptionMoreURL:"https://markojs.com/docs/core-tags/#put"}]},en={migrate:[e=>e.remove()]},tn={taglibId:Sr,"<import>":Mr,"<export>":$r,"<attrs>":Nr,"<if>":Fr,"<else-if>":zr,"<else>":qr,"<for>":Yr,"<let>":{translate(e){const{node:t}=e,r=t.var,n=t.attributes.find((e=>f.types.isMarkoAttribute(e)&&(e.default||"value"===e.name)))??f.types.markoAttribute("value",f.types.identifier("undefined"));if((0,m.assertNoParams)(e),Qe(e),!r)throw e.get("name").buildCodeFrameError("The 'let' tag requires a tag variable.");if(!f.types.isIdentifier(r))throw e.get("var").buildCodeFrameError("The 'let' cannot be destructured.");if(b()){const t=C(e),s=r.extra.reserve,o=gt(s),a=n.extra?.valueReferences;if(a){let r;Dt(t,a,{get identifier(){return r||(r=e.scope.generateUidIdentifier(o.identifier.name+"_init"),Ut.pushContainer("body",f.types.variableDeclaration("const",[f.types.variableDeclarator(r,Ce("initValue",P(s),o.identifier))]))),r},hasDownstreamIntersections:()=>o.hasDownstreamIntersections()},n.value)}else Dt(t,a,o,n.value);!function(e,t){for(const r of e.constantViolations)Yt.set(r.node,t)}(e.scope.getBinding(s.name),((e,t)=>function(e,t,r){return Ce("queueSource",we(r,e.section),e.identifier,t)}(o,t,C(e))))}else pr(e,n.value);e.remove()},attributes:{},autocomplete:[{description:"Use to create a mutable binding.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#let"}]},"<const>":Wr,"<effect>":Vr,"<lifecycle>":Hr,"<id>":Zr,"<html-comment>":{analyze(){},translate:{enter(e){$e(e),Ve(e)`<!--`},exit(e){(0,m.assertNoVar)(e),(0,m.assertNoParams)(e),(0,m.assertNoAttributes)(e),(0,m.assertNoAttributeTags)(e),Ne(e),Ve(e)`-->`,e.remove()}},parseOptions:{text:!0},attributes:{},autocomplete:[{description:"Use to create an html comment that is not stripped from the output.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#html-comment"}]},"<tag>":{translate:{enter(e){if(g()&&Ye(e),!e.node.var)throw e.get("name").buildCodeFrameError("<tag> requires a variable to be defined, eg <tag/NAME>.")},exit(e){g()&&Ke(e),e.replaceWith(f.types.variableDeclaration("const",[f.types.variableDeclarator(e.node.var,Ce("createRenderer",f.types.arrowFunctionExpression(e.node.body.params,xr(e.node.body))))]))}},attributes:{},autocomplete:[{displayText:"tag/<name>|<params>|",description:"Creates a reusable fragment within the template.",snippet:"tag/${1:name}|${2:param1, param2}|",descriptionMoreURL:"https://markojs.com/docs/core-tags/#tag"}]},"<put>":Qr,"<get>":Xr,"<return>":rt,"<style>":{translate(e){const{hub:{file:t}}=e;(0,m.assertNoParams)(e),Xe(e);let r="text/css";const n=e.get("attributes"),s=h().basename(t.opts.sourceFileName),o=n.find((e=>e.isMarkoAttribute()&&"type"===e.node.name)),a=n.find((e=>e.isMarkoAttribute()&&"class"===e.node.name));if(o&&a)throw a.buildCodeFrameError('<style> must only use "type" or "class" and not both.');if(o){const e=o.get("value");if(!e.isStringLiteral())throw e.buildCodeFrameError('<style> "type" attribute can only be a string literal.');r=e.node.value}else if(a){const e=a.get("value");if(!e.isStringLiteral())throw e.buildCodeFrameError('<style> "class" attribute can only be a string literal.');r=e.node.value}"text/css"===r&&(r="css"),e.node.var&&!r.startsWith("module")&&(r="module."+r);const i=e.get("body").get("body"),l=i[0];if(1!==i.length||!l.isMarkoText())throw(l.isMarkoText()?i[1]:i[0]).buildCodeFrameError("The '<style>' tag currently only supports static content.");const{resolveVirtualDependency:c}=v();if(c){const n=c(t.opts.filename,{type:r,code:l.node.value,startPos:l.node.start,endPos:l.node.end,path:`./${s}`,virtualPath:`./${s}.${r}`});e.node.var?f.types.isIdentifier(e.node.var)?Ut.pushContainer("body",f.types.importDeclaration([f.types.importDefaultSpecifier(e.node.var)],f.types.stringLiteral(n))):Ut.pushContainer("body",f.types.variableDeclaration("const",[f.types.variableDeclarator(e.node.var,(0,m.importDefault)(t,n,"style"))])):Ut.pushContainer("body",f.types.importDeclaration([],f.types.stringLiteral(n)))}e.remove()},attributes:{type:{enum:["css","less","scss","text/css"]}}},"<await-reorderer>":en,"<init-widgets>":en,"<init-components>":en,"<static>":{parse(e){const{node:t,hub:{file:r}}=e,n=t.rawValue,s=n.replace(/^static\s*/,"").trim(),o=t.name.start+(n.length-s.length);let a=(0,m.parseStatements)(r,s,o,o+s.length);1===a.length&&f.types.isBlockStatement(a[0])&&(a=a[0].body),e.replaceWith(f.types.markoScriptlet(a,!0))},"parse-options":{rootOnly:!0,rawOpenTag:!0,openTagOnly:!0,ignoreAttributes:!0},autocomplete:[{displayText:"static <statement>",description:"A JavaScript statement which is only evaluated once your template is loaded.",descriptionMoreURL:"https://markojs.com/docs/syntax/#static-javascript"}]},"<__flush_here_and_after__>":{migrate:[e=>{e.replaceWithMultiple(e.node.body.body),Ut.scope.crawl()}]}},rn=new WeakMap,nn=new WeakSet;function sn(e){for(const t of Ut.get("body"))if(!Ot(t))return void t.insertBefore(e);Ut.unshiftContainer("body",e)}var on={Program:Vt,AssignmentExpression:Jt,UpdateExpression:Gt,ReferencedIdentifier:{migrate(e){const{name:t}=e.node;if(!e.scope.hasBinding(t))switch(e.node.name){case"input":nn.has(Ut)||(nn.add(Ut),sn(f.types.markoTag(f.types.stringLiteral("attrs"),void 0,f.types.markoTagBody(),void 0,e.node)));break;case"out":if(!f.types.isMemberExpression(e.parent)||!f.types.isIdentifier(e.parent.property)||"global"!==e.parent.property.name)throw e.buildCodeFrameError("Only out.global is supported for compatibility.");{let t=rn.get(Ut);t||(t=Ut.scope.generateUidIdentifier("$global"),rn.set(Ut,t),sn(f.types.markoTag(f.types.stringLiteral("get"),void 0,f.types.markoTagBody(),void 0,t))),e.parentPath.replaceWith(t)}}}},ImportDeclaration:Ht,MarkoDocumentType:Zt,MarkoDeclaration:Xt,MarkoCDATA:Qt,MarkoText:er,MarkoTag:Er,MarkoPlaceholder:jr,MarkoScriptlet:Ar,MarkoComment:_r},an=e=>Object.entries(on).reduce(((t,[r,n])=>(e in n&&(t[r]=n[e]),t)),{}),ln=an("analyze"),cn=an("translate"),dn=[["../../browser-shims/v6",{...tn,migrate:an("migrate")}]],pn=r("../../node_modules/@marko/tags-api-preview/dist/transform/cached-values/index-browser.mjs"),un=r("../../node_modules/@marko/tags-api-preview/dist/components/return/index-browser.mjs"),fn=r("./playground/components/hash-value.marko"),mn=r("../../node_modules/marko/dist/runtime/helpers/render-tag.js"),yn=r.n(mn),hn=r("../components/repl/index.marko"),gn=r("../../node_modules/@marko/tags-api-preview/dist/chunk-5R2Z7TR6.mjs"),bn=r("../../node_modules/marko/dist/runtime/components/renderer.js"),vn=r.n(bn),xn=r("../../node_modules/marko/dist/runtime/components/registry.js"),wn=r("../../node_modules/marko/dist/runtime/components/defineComponent.js"),kn=r.n(wn);const En="Mtx/OLsr",Sn=(0,u.t)(En);(0,xn.r)(En,(()=>Sn));const Cn={onCreate(){this.state={}}};Sn._=vn()((function(e,t,r,s,o,a){(0,gn.begin)();try{var i=s,l=(0,un.default)(i);yn()(fn.Z,{value:(0,pn.cache)((0,pn.cached)(i,[])||[{name:"index.marko",path:"/components/index.marko",content:"<let/count=0/>\n<button onClick() { count++ }>\n  ${count}\n</button>"}]),_return:l},t,r,"0");const{valueChange:e,value:o}=l();yn()(hn.Z,{getCompilerOptions:(0,pn.cache)((0,pn.cached)(i,[])||function(){return{translator:n,optimize:!1}}),files:o,filesChange:e},t,r,"1")}finally{(0,gn.end)()}}),{t:En},Cn),Sn.Component=kn()(Cn,Sn._),(0,s.register)("HkYzEWAp",o.Z),(0,s.register)("OIKmBXjW",i()),(0,s.register)("07hv1F0+",c()),(0,s.register)("mFesaajv",p()),(0,s.init)()},"../../browser-shims/compiler/dist/babel-types/index.js":(e,t,r)=>{e.exports=r("../../node_modules/@marko/compiler/dist/babel-types/index.js")},"../../browser-shims/compiler/index.js":(e,t,r)=>{t.types=r("../../browser-shims/compiler/dist/babel-types/index.js")},"../../browser-shims/fs.js":(e,t,r)=>{e.exports=r("../../node_modules/memfs/lib/index.js")},"../../browser-shims/module.js":(e,t,r)=>{const n=r("../../node_modules/path-browserify/index.js"),s=r("../../node_modules/resolve/index.js"),o=r("../../node_modules/resolve.exports/dist/index.js"),a={_nodeModulePaths:function(e){const t=[];for(;;){const r=n.dirname(e);if(t.push(n.join(e,"node_modules")),!r||r===e)break;e=r}return t},_resolveFilename:function(e,t){return s.sync(e,{basedir:n.dirname(t.filename),paths:t.paths,extensions:[".js",".json",".marko",".mjs"],pathFilter(e,t,r){if(/^index(\.[^/\\]+)?$/.test(r))try{return o.legacy(e,a._resolveExportsOptions)}catch{}else try{return o.resolve(e,r,a._resolveExportsOptions)}catch{}return r}})},_resolveExportsOptions:{browser:!0}};e.exports=a},"../../browser-shims/process.js":e=>{e.exports={env:{},browser:!0,versions:{node:"1000.0.0"},cwd:()=>"/"}},"../components/app-layout/components/layout-header/component-browser.js":(e,t,r)=>{var n=r("../components/app-layout/components/layout-header/events.js"),s="headspace--fixed",o="headspace--hidden";e.exports={onMount(){n.emit("create",this);var e,t=0,r=this.getEl("header").offsetHeight,s=(this.getEl("banner")||{offsetHeight:0}).offsetHeight,o=(e=()=>{var e=window.pageYOffset;e<=s?this.reset():!this.paused&&e>r&&(Math.abs(e-t)>=3||e>t&&t<=r)&&(e>t?this.hide():this.fix()),t=e},()=>window.requestAnimationFrame(e));o(),window.addEventListener("scroll",o)},reset(){this.removeClass(s),this.removeClass(o),n.emit("reset")},fix(){this.addClass(s),this.removeClass(o),n.emit("fix")},hide(){this.addClass(o),n.emit("hide")},addClass(e){this.getEl("header").classList.add(e)},removeClass(e){this.getEl("header").classList.remove(e)},pause(){this.paused=!0},resume(){setTimeout((()=>window.requestAnimationFrame((()=>{this.paused=!1}))))},toggleMenu(){n.emit("toggle-menu")}}},"../components/app-layout/components/layout-header/events.js":(e,t,r)=>{var n=r("../../node_modules/events/events.js");e.exports=new n},"../components/app-layout/components/layout-search/component-browser.js":(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=class{async onMount(){const{init:e}=await Promise.all([r.e(857),r.e(499)]).then(r.bind(r,"../components/app-layout/components/layout-search/doc-search.js"));e(this.getEl("container"))}}},"../components/app-layout/components/layout-sidebar/component-browser.js":(e,t,r)=>{var n,s=r("../components/app-layout/components/layout-header/events.js"),o=[].forEach,a=[].filter,i=[].slice;e.exports={onMount(){this.preventOverscroll(),this.listenForHeaderChanges(),this.initScrollSpy()},initScrollSpy(){var e=[1,2,3,4,5,6].map((e=>".doc-content h"+e)).join(","),t=i.call(document.querySelectorAll(e)),r=!1;t.length&&this.subscribeTo(window).on("scroll",(()=>{r||(r=!0,setTimeout((()=>{var e,n,s=window.innerHeight/3;t.map((t=>{var r=t.getBoundingClientRect().top;(null==n||r<s&&Math.abs(r)<Math.abs(n))&&(n=r,e=t)}));var i=e.id,l=this.el.querySelector('a[href="#'+i+'"]')||this.el.querySelector("a.selected"),c=l,d=c.nextSibling;for(d&&o.call(d.querySelectorAll("a[href^=\\#]"),(e=>e.classList.remove("selected")));c;){var p=c.closest("ul"),u=p&&a.call(p.querySelectorAll(":scope > li > a[href^=\\#]"),(e=>e!==c));u&&u.forEach((e=>e.classList.remove("selected"))),c.classList.add("selected"),c=p&&p.previousElementSibling}this.scrollAnchorIntoView(l),r=!1}),50))}))},listenForHeaderChanges(){o.call(this.el.querySelectorAll("a[href^=\\#]"),(e=>{this.subscribeTo(e).on("click",(()=>{n.hide(),n.pause(),n.resume(),this.hide()}))}));var e=i.call(this.el.querySelectorAll("a.selected")).pop();e&&this.subscribeTo(e).on("click",(e=>{window.scrollTo(0,0),n.reset(),e.preventDefault()})),this.subscribeTo(s).on("reset",(()=>{this.el.classList.remove("no-header"),this.el.classList.remove("fixed"),setTimeout((()=>this.el.classList.remove("transition")),0)})).on("fix",(()=>{this.el.classList.remove("no-header"),this.el.classList.add("fixed"),setTimeout((()=>this.el.classList.add("transition")),0)})).on("hide",(()=>{this.el.classList.add("no-header"),this.el.classList.add("fixed"),setTimeout((()=>this.el.classList.add("transition")),0)})).on("toggle-menu",(()=>{this.el.classList.contains("show")?(this.el.classList.remove("show"),document.body.style.overflow=""):this.el.classList.add("show")})).on("create",(e=>{n=e,window.pageYOffset>n.el.offsetHeight&&(this.el.classList.add("no-header"),this.el.classList.add("fixed"))}))},preventOverscroll(){var e=this.getEl("sidebar");this.subscribeTo(document.body).on("wheel",(t=>{var r=t.deltaY,n=e.scrollTop+r,s=e.scrollHeight-e.offsetHeight,o=n<=0,a=n>=s;(r<0&&o||r>0&&a)&&(t.target===e||e.contains(t.target))&&(o&&0!=e.scrollTop?e.scrollTop=0:a&&e.scrollTop!=s&&(e.scrollTop=s),t.preventDefault())}))},scrollAnchorIntoView(e){for(var t,r=this.getEl("sidebar"),n=(e.offsetTop,r.scrollTop),s=r.offsetHeight,o=n+s,a=e.closest("li");(t=a.parentNode.closest("ul"))&&t.offsetHeight<s;)a=t;var i=a.offsetTop,l=a.offsetHeight;i>n&&i+l<o||(r.scrollTop=i+l/2-s/2)},hide(){this.el.classList.remove("show"),document.body.style.overflow=""}}},"../components/app-layout/components/layout-sidebar/components/version-switcher/component-browser.js":e=>{e.exports={switchVersion(e){var t=e.target.value;"current"!==t&&(e.target.value="current",window.location.href=t)}}},"../components/app-footer/ebay.svg":(e,t,r)=>{"use strict";r.p},"../components/app-footer/openjsf.svg":(e,t,r)=>{"use strict";r.p},"../components/app-footer/osi.svg":(e,t,r)=>{"use strict";r.p},"../components/app-layout/favicon.png":(e,t,r)=>{"use strict";r.p},"../logos/discord.svg":(e,t,r)=>{"use strict";r.p},"../logos/marko.svg":(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});const n=r.p+"91bc26e5.svg"},"?98fd":()=>{},"?2e65":()=>{},"?6a61":()=>{},"?e376":()=>{},"?7dc1":()=>{},"?f84f":()=>{},"?378b":()=>{},"?4c42":()=>{},"?c95a":()=>{},"?c86f":()=>{},"?d1e8":()=>{}},e=>{e.O(0,[323,470,103,641],(()=>("./playground/v6/index.marko?browser-entry",e(e.s="./playground/v6/index.marko?browser-entry")))),e.O()}]);
//# sourceMappingURL=664.a7dd8b14.js.map