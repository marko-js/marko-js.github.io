"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[81],{"../components/repl/components/preview.marko":(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});var o=n("../../node_modules/marko/dist/runtime/vdom/index.js"),s=n("../../node_modules/path-browserify/index.js"),l=n.n(s),r=n("../../node_modules/prettier/standalone.mjs"),a=n("../../node_modules/prettier/plugins/babel.mjs"),i=n("../../node_modules/prettier/plugins/estree.mjs"),d=n("../utils/highlight.js"),m=n.n(d),c=n("../utils/compiler/index.js"),u=n("../../node_modules/memfs/lib/index.js"),p=n("../../node_modules/@marko/tags-api-preview/dist/transform/cached-values/index-browser.mjs"),h=n("../../node_modules/@marko/tags-api-preview/dist/transform/native-tag-var/index-browser.mjs"),v=n("../../node_modules/@marko/tags-api-preview/dist/util/replace-assignments/index.mjs"),f=n("../../node_modules/marko/dist/runtime/vdom/helpers/const-element.js"),w=n.n(f),k=n("../../node_modules/marko/dist/runtime/helpers/class-value.js"),g=n.n(k),j=n("../../node_modules/@marko/tags-api-preview/dist/components/_instance/index.marko"),b=n("../../node_modules/marko/dist/runtime/helpers/render-tag.js"),_=n.n(b),y=n("../../node_modules/@marko/tags-api-preview/dist/components/effect/index.mjs"),x=n("../../node_modules/@marko/tags-api-preview/dist/chunk-5R2Z7TR6.mjs"),S=n("../../node_modules/marko/dist/runtime/components/renderer.js"),T=n.n(S),C=n("../../node_modules/marko/dist/runtime/components/registry.js"),F=n("../../node_modules/marko/dist/runtime/components/defineComponent.js"),A=n.n(F);const E="ptzHKVod",O=(0,o.t)(E),I=O,H=/(.+?)(?:\((\d+),(\d+)\)|:(\d+)): (.*(?=\s+\d+ | ))/,R=w()("small",null,1).t("Open the dev tools to view the full error.");(0,C.r)(E,(()=>O));const z={onCreate(){this.state={}}};O._=T()((function(e,t,n,o,s,d){(0,x.begin)();try{var f,w=o,k=s,b=e=>f=e;const{type:d,files:x,selectedFile:S,getCompilerOptions:T,debounce:C,onSelectError:F,onSyntaxError:A}=e,E=w.elId("@0"),O=(0,p.cache)((0,p.cached)(w,[E,S.path])||l().join("/",E,S.path)),I=(0,p.cache)((0,p.cached)(w,[E,x[0].path])||l().join("/",E,x[0].path)),z="0"in k?k[0]:k[0]=null,B=e=>w.setState("0",e),G="1"in k?k[1]:k[1]=null,K=e=>w.setState("1",e);t.be("div",{class:g()(["preview-error",z&&"preview-error-active"])},"0",o,null,1),z&&(t.be("h1",{class:"error-name"},"1",o,null,1),t.t(z.name,o),z.file&&(t.t(" :  ",o),t.be("a",null,"2",o,null,0,{onclick:n.d("click",(function(){F(z)}),!1)}),t.t(z.file.slice(1),o),t.t("(",o),t.t(z.line,o),t.t(",",o),t.t(z.column,o),t.t(")",o),t.ee()),t.ee(),t.be("pre",null,"3",o,null,0),t.be("code",null,"4",o,null,0),t.t(z.message.replaceAll(E,""),o),t.ee(),t.ee(),O!==z.file&&(z.codeFrame?(t.be("pre",null,"5",o,null,0),t.be("code",null,"6",o,null,0),t.t(z.codeFrame,o),t.ee(),t.ee()):t.n(R,o))),t.ee(),"preview"===d?_()(j.default,{renderBody:(e,t,n,o)=>{var s=n;const l=(0,h.default)(n,"0");e.e("div",{class:"preview-output"},"@0",s,0,1),b(l)}},t,n,"8"):(t.be("div",{class:"preview-compiled"},"9",o,null,1),t.h(G,o),t.ee()),(0,y.default)(o,(0,p.cache)((0,p.cached)(w,[C,x,E,d,I,T,O,A])||function(){let e,t;async function n(){for(const e of x){const n=l().join("/",E,e.path);u.vol.mkdirSync(l().dirname(n),{recursive:!0}),u.vol.writeFileSync(n,e.content)}try{if("preview"===d||"html"===d){const o=await(0,c.l)({entry:I,markoOptions:{output:"vdom",...T?T():{}}}),s=(0,window.eval)(o.js),p=f().attachShadow({mode:"open"}),h=document.createElement("style");h.innerHTML=o.css,p.appendChild(h),T?.().translator?s.default.mount({},p):(await s.render({})).appendTo(p)}else{const w=d.startsWith("compiled-html")?"html":"vdom",k=await(0,c.w)({entry:O,markoOptions:{output:w,...T?T():{}}});(0,v.default)(K,m()("javascript",await(0,r.GP)(k.replaceAll(`${E}/`,""),{parser:"babel",plugins:[a.A,i.Ay]})))}(0,v.default)(B,null)}catch(g){function j(){const e="SyntaxError"===g.name&&H.exec(g.message);if(e){let[t,n,o,s,r,a]=e;r&&(o=r,s=0),n=l().resolve(n),o=parseInt(o,10),s=parseInt(s,10)+1;const i=g.message.slice(t.length),d=(0,v.default)(B,{name:g.name,file:n,message:a,line:o,column:s,codeFrame:i});n===O&&A&&A(d)}else(0,v.default)(B,g),console.error(g)}C?t=setTimeout(j,1e3):j()}}return C?e=setTimeout(n,100):n(),()=>{clearTimeout(e),clearTimeout(t);try{u.vol.rmdirSync(E,{recursive:!0})}catch(e){}}}))}finally{(0,x.end)()}}),{t:E},z),O.Component=A()(z,O._)}}]);
//# sourceMappingURL=81.d98ad4c1.js.map