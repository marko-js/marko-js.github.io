"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[420],{"../../node_modules/@marko/runtime-tags/dist/translator/index.js":(e,t,r)=>{var s,n=Object.create,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,p=(e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of i(t))l.call(e,n)||n===r||o(e,n,{get:()=>t[n],enumerable:!(s=a(t,n))||s.enumerable});return e},d=(e,t,r)=>(r=null!=e?n(c(e)):{},p(!t&&e&&e.__esModule?r:o(r,"default",{value:e,enumerable:!0}),e)),u={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(u,{analyze:()=>_c,getRuntimeEntryFiles:()=>qc,internalEntryBuilder:()=>Ee,preferAPI:()=>zc,tagDiscoveryDirs:()=>Rc,taglibs:()=>Wc,transform:()=>Uc,translate:()=>Vc}),e.exports=(s=u,p(o({},"__esModule",{value:!0}),s));var f={name:r("../../node_modules/@marko/runtime-tags/package.json").name,taglibId:"marko-core"},m=r("../../browser-shims/compiler/index.js"),y=r("../../browser-shims/compiler/babel-utils.js");function g(e){for(const t of e.get("attributes"))if(t.isMarkoSpreadAttribute())throw t.buildCodeFrameError(`The \`${e.get("name").node.value}\` tag does not support \`...spread\` attributes.`)}function b(e){if(e.node.body.body.length)throw e.get("name").buildCodeFrameError(`The \`${e.get("name").node.value}\` tag does not support body content.`)}var h,v,x={migrate:[e=>{(0,y.assertNoArgs)(e),(0,y.assertNoParams)(e),(0,y.assertNoAttributes)(e),b(e),(0,y.assertNoAttributeTags)(e),(0,y.diagnosticDeprecate)(e,{label:"The `attrs` tag is deprecated, prefer destructuring `input` via the `const` tag.",fix(){const t=e.node.var;if(!t||"Identifier"===t.type&&"input"===t.name)e.remove();else{const r=m.types.markoTag(m.types.stringLiteral("const"),[m.types.markoAttribute("value",m.types.identifier("input"))],m.types.markoTagBody([]));r.var=t,e.replaceWith(r)}}})}],attributes:{},autocomplete:[{displayText:"attrs/{ ... }",description:"Use to receive the attributes passed into this template.",snippet:"attrs/{ $1 }$2"}]},w=r("../../browser-shims/compiler/index.js"),S=r("../../browser-shims/compiler/babel-utils.js"),A=((h=A||{}).ClosureScopes="ClosureScopes:",h.ClosureSignalIndex="ClosureSignalIndex:",h.ConditionalRenderer="ConditionalRenderer:",h.ConditionalScope="ConditionalScope:",h.ControlledHandler="ControlledHandler:",h.ControlledType="ControlledType:",h.ControlledValue="ControlledValue:",h.DynamicPlaceholderLastChild="DynamicPlaceholderLastChild:",h.EventAttributes="EventAttributes:",h.Getter="Getter:",h.LifecycleAbortController="LifecycleAbortController:",h.LoopScopeArray="LoopScopeArray:",h.LoopScopeMap="LoopScopeMap:",h.Promise="Promise:",h.TagVariableChange="TagVariableChange:",h),k=((v=k||{}).Owner="_",v.BranchAccessor="#BranchAccessor",v.CatchContent="#CatchContent",v.PlaceholderBranch="#PlaceholderBranch",v.PlaceholderContent="#PlaceholderContent",v.TagVariable="#TagVariable",v.TagVariableChange="#TagVariableChange",v.ClosestBranchId="#ClosestBranchId",v),E=r("../../browser-shims/compiler/babel-utils.js");function T(e){let{extra:t}=e;if(t||(t=e.extra={}),void 0===t.confident){const r=(0,E.computeNode)(e);r?(t.computed=r.value,t.confident=!0,t.nullable=null==r.value):(t.computed=void 0,t.confident=!1,t.nullable=M(e))}return t}function M(e){switch(e.type){case"ArrayExpression":case"ArrowFunctionExpression":case"BigIntLiteral":case"BinaryExpression":case"BooleanLiteral":case"ClassExpression":case"FunctionExpression":case"NewExpression":case"NumericLiteral":case"ObjectExpression":case"RegExpLiteral":case"StringLiteral":case"TemplateLiteral":case"UpdateExpression":return!1;case"AssignmentExpression":switch(e.operator){case"=":return M(e.right);case"*=":case"/=":case"%=":case"+=":case"-=":case"<<=":case">>=":case">>>=":case"&=":case"^=":case"|=":case"**=":return!1;case"||=":case"??=":return M(e.right)||M(e.left);case"&&=":return M(e.left)&&M(e.right);default:return!0}case"AwaitExpression":return M(e.argument);case"ConditionalExpression":return M(e.consequent)&&M(e.alternate);case"LogicalExpression":switch(e.operator){case"||":case"??":return M(e.right)||M(e.left);case"&&":return M(e.left)&&M(e.right);default:return!0}case"ParenthesizedExpression":return M(e.expression);case"SequenceExpression":return M(e.expressions[e.expressions.length-1]);case"UnaryExpression":return"void"===e.operator;default:return!0}}var C=r("../../browser-shims/compiler/index.js"),j=r("../../browser-shims/compiler/babel-utils.js");function I(e,t){switch(e.type){case"ObjectPattern":for(const r of e.properties)switch(r.type){case"ObjectProperty":"AssignmentPattern"===r.value.type?I(r.value.left,t):I(r.value,t);break;case"RestElement":I(r.argument,t)}break;case"ArrayPattern":for(const r of e.elements)if(null!=r)switch(r.type){case"RestElement":I(r.argument,t);break;case"AssignmentPattern":I(r.left,t);break;default:I(r,t)}break;case"Identifier":t(e)}}var P=r("../../browser-shims/compiler/index.js"),L=r("../../browser-shims/compiler/babel-utils.js"),O=r("../../browser-shims/compiler/babel-utils.js");function B(){return"translate"===(0,O.getFile)().___compileStage}var $=r("../../browser-shims/compiler/index.js"),N=Symbol("skip");function F(e,t,r){const s=e[t];if(s)if(Array.isArray(s))for(let e=s.length;e--;)F(s,e,r);else{const n=$.types.VISITOR_KEYS[s.type];for(let e=n.length;e--;)F(s,n[e],r);const o=r(s,e,t);o&&(e[t]=o)}}function D(e,t){if(e)if(Array.isArray(e)){for(const r of e)if(D(r,t))return!0}else{switch(t(e)){case!0:return!0;case N:return!1}for(const r of $.types.VISITOR_KEYS[e.type])if(D(e[r],t))return!0}return!1}function R(e,t,r,s){if(t)if(Array.isArray(t))for(const n of t)R(e,n,r,s);else if(e(t,r,s)!==N)for(const s of $.types.VISITOR_KEYS[t.type])R(e,t[s],t,r)}var z=new WeakMap;function U(e=""){const t=(0,L.getFile)();let r=z.get(t);if(!r){const{cache:e}=t.markoOpts,{filename:s}=t.opts,n=`uid-counts:${s}`;r=e.get(n),r?B()&&(r=new Map(r)):(r=function(e){const t=new Map,r=e.path,s=e=>{const r=/^$(.*?)([1-9]\d*)?$/.exec(e);if(r){const e=r[1],s=r[2]?+r[2]+1:1;t.set(e,Math.max(t.get(e)||0,s))}};for(const e in r.scope.globals)s(e);return R(((e,t,r)=>{"Identifier"===e.type&&P.types.isBinding(e,t,r)&&s(e.name)}),r.node),t}(t),B()||e.set(n,r)),z.set(t,r)}e=e.replace(/^[^a-z$_]|[^a-z$_0-9]/gi,"")||"temp",e=/^\$?(.*?)\d*$/.exec(e)?.[1]||e;const s=(r.get(e)||0)+1,n=`$${s>1?e+s:e}`;return r.set(e,s),n}function _(e){return P.types.identifier(U(e))}var V=new WeakMap;function W(e){const t=(0,L.getFile)();let r=V.get(t);if(!r){const{cache:e}=t.markoOpts,{filename:s}=t.opts,n=`uid-shared:${s}`;r=e.get(n),r?B()&&(r=new Map(r)):(r=new Map,B()||e.set(n,r)),V.set(t,r)}let s=r.get(e);return s||(s=U(e),r.set(e,s)),s}function q(e){return!!V.get((0,L.getFile)())?.has(e)}var G=(e=>(e.ClosureScopes="a",e.ClosureSignalIndex="b",e.ConditionalRenderer="c",e.ConditionalScope="d",e.ControlledHandler="e",e.ControlledType="f",e.ControlledValue="g",e.DynamicPlaceholderLastChild="h",e.EventAttributes="i",e.Getter="j",e.LifecycleAbortController="k",e.LoopScopeArray="l",e.LoopScopeMap="m",e.Promise="n",e.TagVariableChange="o",e))(G||{}),H=(e=>(e.Owner="_",e.BranchAccessor="a",e.CatchContent="b",e.PlaceholderBranch="c",e.PlaceholderContent="d",e.TagVariable="e",e.TagVariableChange="f",e.ClosestBranchId="g",e))(H||{}),J=r("../../browser-shims/compiler/babel-utils.js");function Z(){return"html"===X().output}function K(){return!Z()}function X(){return(0,J.getFile)().markoOpts}function Y(){return X().optimize}function Q(){return Y()?G:A}function ee(){return Y()?H:k}function te(e){let t=e;do{t=t.parentPath}while(t&&!ne(t));return t}function re(e){let t=e;for(;!ne(t.parentPath);)t=t.parentPath;return t}function se(e){let t,r=e;if(!r.isProgram()){for(;!ne(r);){if(oe(r))t=r;else switch(r.type){case"CallExpression":case"NewExpression":t=void 0}r=r.parentPath}return t}}function ne(e){switch(e.type){case"MarkoTag":case"MarkoTagBody":case"MarkoAttribute":case"MarkoSpreadAttribute":case"MarkoPlaceholder":case"MarkoScriptlet":return!0;default:return!1}}function oe(e){switch(e.type){case"FunctionDeclaration":return!e.node.declare;case"FunctionExpression":case"ArrowFunctionExpression":case"ObjectMethod":return!0;default:return!1}}function ae(e){let t=e;for(;t;){const{parent:e,node:r}=t;switch(e.type){case"CallExpression":return e.callee===r;case"TSNonNullExpression":t=t.parentPath;break;default:return!1}}return!1}r("../../browser-shims/compiler/index.js");var ie=class{constructor(e){this.compare=e}add(e,t){return e?Array.isArray(e)?ye(this.compare,e,t):ge(this.compare,e,t):t}union(e,t){return e?Array.isArray(e)?t?Array.isArray(t)?function(e,t,r){const s=t.length,n=r.length;let o=0,a=0;const i=[];for(;o<s&&a<n;){const s=t[o],n=r[a],c=e(s,n);0===c?(o++,a++,i.push(s)):c<0?(o++,i.push(s)):(a++,i.push(n))}if(s===n&&o===s)return t;for(;o<s;)i.push(t[o++]);for(;a<n;)i.push(r[a++]);return i}(this.compare,e,t):ye(this.compare,e,t):e:t?Array.isArray(t)?ye(this.compare,[...t],e):ge(this.compare,t,e):e:t}find(e,t){if(e){if(Array.isArray(e))return fe(this.compare,e,t);if(0===this.compare(e,t))return e}}findIndex(e,t){if(e){if(Array.isArray(e))return me(this.compare,e,t);if(0===this.compare(e,t))return 0}return-1}isSuperset(e,t){if(!t)return!0;if(!Array.isArray(t))return-1!==this.findIndex(e,t);if(!Array.isArray(e))return!1;const r=t.length,s=e.length;if(r>s)return!1;for(let n=r;n--;){const r=this.findIndex(e,t[n]);if(-1===r||s-r<=n)return!1}return!0}};function ce(e,t){return e?Array.isArray(e)?(e.push(t),e):[e,t]:t}function le(e,t){return e?t?Array.isArray(e)?e.concat(t):Array.isArray(t)?[e,...t]:[e,t]:e:t}function pe(e,t){if(e){if(Array.isArray(e)){const r=e.length;let s,n=0;for(;n<r;){let o=e[n++];if(t(o)){for(s=o;n<r;)if(o=e[n++],t(o)){for(s=[s,o];n<r;)o=e[n++],t(o)&&s.push(o);return s}return s}}return s}if(t(e))return e}}function de(e,t){if(e)if(Array.isArray(e)){let r=0;for(const s of e)t(s,r++)}else t(e,0)}function ue(e,t){if(e){if(Array.isArray(e))return e.find(t);if(t(e,0))return e}}function fe(e,t,r){let s=t.length,n=0;for(;n<s;){const o=n+s>>>1,a=t[o],i=e(a,r);if(0===i)return a;i>0?s=o:n=o+1}}function me(e,t,r){let s=t.length,n=0;for(;n<s;){const o=n+s>>>1,a=e(t[o],r);if(0===a)return o;a>0?s=o:n=o+1}return-1}function ye(e,t,r){const s=t.length;let n=s,o=0;for(;o<n;){const s=o+n>>>1,a=e(t[s],r);if(0===a)return t;a>0?n=s:o=s+1}const a=new Array(s+1);for(let e=0;e<o;e++)a[e]=t[e];let i=r;for(;o<s;){const e=i;i=t[o],a[o++]=e}return a[s]=i,a}function ge(e,t,r){const s=e(t,r);return 0===s?t:s<0?[t,r]:[r,t]}var be=r("../../browser-shims/compiler/index.js"),he=r("../../browser-shims/compiler/index.js"),ve=r("../../browser-shims/compiler/babel-utils.js"),xe=d(r("../../node_modules/path-browserify/index.js"));function we(e){if(e.downstreamExpressions.size)return!0;for(const t of e.aliases)if(we(t))return!0;for(const t of e.propertyAliases.values())if(we(t))return!0;return!1}var Se=r("../../browser-shims/compiler/index.js"),Ae=r("../../browser-shims/compiler/babel-utils.js"),ke=Symbol(),Ee={build(e){const t=e[ke];if(!t)throw e.path.buildCodeFrameError("Unable to build hydrate code, no files were visited before finalizing the build");const r=t.imports.map((e=>Se.types.importDeclaration([],Se.types.stringLiteral(e))));return t.init&&(r.unshift(Se.types.importDeclaration([Se.types.importSpecifier(Se.types.identifier("init"),Se.types.identifier("init"))],Se.types.stringLiteral(`${f.name}/${e.markoOpts.optimize?"":"debug/"}dom`))),r.push(Se.types.expressionStatement(Se.types.callExpression(Se.types.identifier("init"),[])))),r},visit(e,t,r){const s=t[ke]||={imports:[],init:!1},{analyzedTags:n}=e.metadata.marko;s.imports.push((0,Ae.resolveRelativePath)(t,e.opts.filename)),s.init||=e.path.node.extra.hasInteractiveChild||e.path.node.extra.isInteractive||!1;for(const e of n||[])r(e)}};function Te(e){const t={};for(const r of e.attributes)"MarkoAttribute"===r.type&&(t[r.name]=r.value);return t}var Me=r("../../browser-shims/compiler/babel-utils.js");function Ce(e){return e.node.name.value}var{taglibId:je}=f;function Ie(e){if(e.isMarkoTag()){const t=(0,Me.getTagDef)(e);if(t)switch(t.taglibId){case je:case"@marko/translator-interop-class-tags":return!0;case"marko-html":switch(t.name){case"script":case"style":return!0}}}return!1}function Pe(e,t){return Ie(e)&&Ce(e)===t}function Le(e){if(Ie(e))switch(Ce(e)){case"if":case"else-if":case"else":return!0}return!1}var Oe=r("../../browser-shims/compiler/index.js"),Be=r("../../browser-shims/compiler/babel-utils.js");function $e(e,t){return t?e:""}function Ne(e,t){return t||0===t?`${e}:${t&&"number"==typeof t&&!/^(--|ta|or|li|z)|cou|nk|it|ag|we|do|w$/.test(e)?t+"px":t}`:""}function Fe(e,t,r){let s,n="",o="";if(e)if("object"!=typeof e)n+=e;else if(Array.isArray(e))for(const a of e)s=Fe(a,t,r),s&&(n+=o+s,o=t);else for(const a in e)s=r(a,e[a]),s&&(n+=o+s,o=t);return n}function De(e){return/^on[A-Z-]/.test(e)}function Re(e){return"-"===e[2]?e.slice(3):e.slice(2).toLowerCase()}function ze(e){return e?e+"":0===e?"0":""}Symbol();var Ue=/[<&]/g,_e=e=>"&"===e?"&amp;":"&lt;";function Ve(e){return e?(t=e+"",Ue.test(t)?t.replace(Ue,_e):t):0===e?"0":"&zwj;";var t}var We=/<\/script/g;function qe(e){return e?(t=e+"",We.test(t)?t.replace(We,"\\x3C/script"):t):0===e?"0":"";var t}var Ge=/<\/style/g;function He(e){return e?(t=e+"",Ge.test(t)?t.replace(Ge,"\\3C/style"):t):0===e?"0":"";var t}var Je=Symbol(),{hasOwnProperty:Ze}={},Ke=function*(){}().constructor,Xe=async function*(){}().constructor;function Ye(e){const t=e[0];return'"'===t||t>="0"&&t<="9"?"["+e+"]":"."+e}function Qe(e){const{next:t}=e;e.next=function(e){return this[Je]=1,t.call(this,e)}}function et(e){return st("class",Fe(e," ",$e))}function tt(e){return st("style",Fe(e,";",Ne))}function rt(e,t){return function(e){return null==e||!1===e}(t)?"":function(e,t){switch(typeof t){case"string":return" "+e+it(t);case"boolean":return" "+e;case"number":return" "+e+"="+t;case"object":if(t instanceof RegExp)return" "+e+it(t.source)}return" "+e+it(t+"")}(e,t)}function st(e,t){return t&&" "+e+it(t)}Qe(Ke.prototype),Qe(Xe.prototype),(()=>{const e=new Map;for(const t of Object.getOwnPropertyNames(Symbol)){const r=Symbol[t];"symbol"==typeof r&&e.set(r,"Symbol."+t)}})(),new Map([[AggregateError,"AggregateError"],[Array,"Array"],[Array.from,"Array.from"],[Array.isArray,"Array.isArray"],[Array.of,"Array.of"],[ArrayBuffer,"ArrayBuffer"],[ArrayBuffer.isView,"ArrayBuffer.isView"],[Atomics.add,"Atomics.add"],[Atomics.and,"Atomics.and"],[Atomics.compareExchange,"Atomics.compareExchange"],[Atomics.exchange,"Atomics.exchange"],[Atomics.isLockFree,"Atomics.isLockFree"],[Atomics.load,"Atomics.load"],[Atomics.notify,"Atomics.notify"],[Atomics.or,"Atomics.or"],[Atomics.store,"Atomics.store"],[Atomics.sub,"Atomics.sub"],[Atomics.wait,"Atomics.wait"],[BigInt,"BigInt"],[BigInt.asIntN,"BigInt.asIntN"],[BigInt.asUintN,"BigInt.asUintN"],[BigInt64Array,"BigInt64Array"],[BigInt64Array.from,"BigInt64Array.from"],[BigInt64Array.of,"BigInt64Array.of"],[BigUint64Array,"BigUint64Array"],[BigUint64Array.from,"BigUint64Array.from"],[BigUint64Array.of,"BigUint64Array.of"],[Boolean,"Boolean"],[console.assert,"console.assert"],[console.clear,"console.clear"],[console.count,"console.count"],[console.countReset,"console.countReset"],[console.debug,"console.debug"],[console.dir,"console.dir"],[console.dirxml,"console.dirxml"],[console.error,"console.error"],[console.group,"console.group"],[console.groupCollapsed,"console.groupCollapsed"],[console.groupEnd,"console.groupEnd"],[console.info,"console.info"],[console.log,"console.log"],[console.table,"console.table"],[console.time,"console.time"],[console.timeEnd,"console.timeEnd"],[console.timeLog,"console.timeLog"],[console.timeStamp,"console.timeStamp"],[console.trace,"console.trace"],[console.warn,"console.warn"],[DataView,"DataView"],[Date,"Date"],[Date.now,"Date.now"],[Date.parse,"Date.parse"],[Date.UTC,"Date.UTC"],[decodeURI,"decodeURI"],[decodeURIComponent,"decodeURIComponent"],[encodeURI,"encodeURI"],[encodeURIComponent,"encodeURIComponent"],[Error,"Error"],[EvalError,"EvalError"],[Float32Array,"Float32Array"],[Float32Array.from,"Float32Array.from"],[Float32Array.of,"Float32Array.of"],[Float64Array,"Float64Array"],[Float64Array.from,"Float64Array.from"],[Float64Array.of,"Float64Array.of"],[Function,"Function"],[globalThis.atob,"atob"],[globalThis.btoa,"btoa"],[globalThis.clearImmediate,"clearImmediate"],[globalThis.clearInterval,"clearInterval"],[globalThis.clearTimeout,"clearTimeout"],[globalThis.crypto?.getRandomValues,"crypto.getRandomValues"],[globalThis.crypto?.randomUUID,"crypto.randomUUID"],[globalThis.fetch,"fetch"],[globalThis.performance?.now,"performance.now"],[globalThis.queueMicrotask,"queueMicrotask"],[globalThis.setImmediate,"setImmediate"],[globalThis.setInterval,"setInterval"],[globalThis.setTimeout,"setTimeout"],[globalThis.structuredClone,"structuredClone"],[globalThis.URL,"URL"],[globalThis.URLSearchParams,"URLSearchParams"],[globalThis.WritableStream,"WritableStream"],[Int16Array,"Int16Array"],[Int16Array.from,"Int16Array.from"],[Int16Array.of,"Int16Array.of"],[Int32Array,"Int32Array"],[Int32Array.from,"Int32Array.from"],[Int32Array.of,"Int32Array.of"],[Int8Array,"Int8Array"],[Int8Array.from,"Int8Array.from"],[Int8Array.of,"Int8Array.of"],[Intl.Collator,"Intl.Collator"],[Intl.DateTimeFormat,"Intl.DateTimeFormat"],[Intl.DisplayNames,"Intl.DisplayNames"],[Intl.getCanonicalLocales,"Intl.getCanonicalLocales"],[Intl.ListFormat,"Intl.ListFormat"],[Intl.Locale,"Intl.Locale"],[Intl.NumberFormat,"Intl.NumberFormat"],[Intl.PluralRules,"Intl.PluralRules"],[Intl.RelativeTimeFormat,"Intl.RelativeTimeFormat"],[Intl.Segmenter,"Intl.Segmenter"],[Intl.supportedValuesOf,"Intl.supportedValuesOf"],[isFinite,"isFinite"],[isNaN,"isNaN"],[JSON.parse,"JSON.parse"],[JSON.stringify,"JSON.stringify"],[Map,"Map"],[Map.groupBy,"Map.groupBy"],[Math.abs,"Math.abs"],[Math.acos,"Math.acos"],[Math.acosh,"Math.acosh"],[Math.asin,"Math.asin"],[Math.asinh,"Math.asinh"],[Math.atan,"Math.atan"],[Math.atan2,"Math.atan2"],[Math.atanh,"Math.atanh"],[Math.cbrt,"Math.cbrt"],[Math.ceil,"Math.ceil"],[Math.clz32,"Math.clz32"],[Math.cos,"Math.cos"],[Math.cosh,"Math.cosh"],[Math.exp,"Math.exp"],[Math.expm1,"Math.expm1"],[Math.floor,"Math.floor"],[Math.fround,"Math.fround"],[Math.hypot,"Math.hypot"],[Math.imul,"Math.imul"],[Math.log,"Math.log"],[Math.log10,"Math.log10"],[Math.log1p,"Math.log1p"],[Math.log2,"Math.log2"],[Math.max,"Math.max"],[Math.min,"Math.min"],[Math.pow,"Math.pow"],[Math.random,"Math.random"],[Math.round,"Math.round"],[Math.sign,"Math.sign"],[Math.sin,"Math.sin"],[Math.sinh,"Math.sinh"],[Math.sqrt,"Math.sqrt"],[Math.tan,"Math.tan"],[Math.tanh,"Math.tanh"],[Math.trunc,"Math.trunc"],[Number,"Number"],[Number.isFinite,"Number.isFinite"],[Number.isInteger,"Number.isInteger"],[Number.isNaN,"Number.isNaN"],[Number.isSafeInteger,"Number.isSafeInteger"],[Number.parseFloat,"Number.parseFloat"],[Number.parseInt,"Number.parseInt"],[Object,"Object"],[Object.assign,"Object.assign"],[Object.create,"Object.create"],[Object.defineProperties,"Object.defineProperties"],[Object.defineProperty,"Object.defineProperty"],[Object.entries,"Object.entries"],[Object.freeze,"Object.freeze"],[Object.fromEntries,"Object.fromEntries"],[Object.getOwnPropertyDescriptor,"Object.getOwnPropertyDescriptor"],[Object.getOwnPropertyDescriptors,"Object.getOwnPropertyDescriptors"],[Object.getOwnPropertyNames,"Object.getOwnPropertyNames"],[Object.getOwnPropertySymbols,"Object.getOwnPropertySymbols"],[Object.getPrototypeOf,"Object.getPrototypeOf"],[Object.is,"Object.is"],[Object.isExtensible,"Object.isExtensible"],[Object.isFrozen,"Object.isFrozen"],[Object.isSealed,"Object.isSealed"],[Object.keys,"Object.keys"],[Object.preventExtensions,"Object.preventExtensions"],[Object.seal,"Object.seal"],[Object.setPrototypeOf,"Object.setPrototypeOf"],[Object.values,"Object.values"],[parseFloat,"parseFloat"],[parseInt,"parseInt"],[Promise,"Promise"],[Proxy,"Proxy"],[RangeError,"RangeError"],[ReferenceError,"ReferenceError"],[Reflect.apply,"Reflect.apply"],[Reflect.construct,"Reflect.construct"],[Reflect.defineProperty,"Reflect.defineProperty"],[Reflect.deleteProperty,"Reflect.deleteProperty"],[Reflect.get,"Reflect.get"],[Reflect.getOwnPropertyDescriptor,"Reflect.getOwnPropertyDescriptor"],[Reflect.getPrototypeOf,"Reflect.getPrototypeOf"],[Reflect.has,"Reflect.has"],[Reflect.isExtensible,"Reflect.isExtensible"],[Reflect.ownKeys,"Reflect.ownKeys"],[Reflect.preventExtensions,"Reflect.preventExtensions"],[Reflect.set,"Reflect.set"],[Reflect.setPrototypeOf,"Reflect.setPrototypeOf"],[RegExp,"RegExp"],[Set,"Set"],[String,"String"],[String.fromCharCode,"String.fromCharCode"],[String.fromCodePoint,"String.fromCodePoint"],[String.raw,"String.raw"],[Symbol,"Symbol"],[Symbol.for,"Symbol.for"],[SyntaxError,"SyntaxError"],[TypeError,"TypeError"],[Uint16Array,"Uint16Array"],[Uint16Array.from,"Uint16Array.from"],[Uint16Array.of,"Uint16Array.of"],[Uint32Array,"Uint32Array"],[Uint32Array.from,"Uint32Array.from"],[Uint32Array.of,"Uint32Array.of"],[Uint8Array,"Uint8Array"],[Uint8Array.from,"Uint8Array.from"],[Uint8Array.of,"Uint8Array.of"],[Uint8ClampedArray,"Uint8ClampedArray"],[Uint8ClampedArray.from,"Uint8ClampedArray.from"],[Uint8ClampedArray.of,"Uint8ClampedArray.of"],[URIError,"URIError"],[WeakMap,"WeakMap"],[WeakSet,"WeakSet"]]),new Map([[Atomics,"Atomics"],[console,"console"],[globalThis,"globalThis"],[globalThis.crypto,"crypto"],[Intl,"Intl"],[JSON,"JSON"],[Math,"Math"],[Reflect,"Reflect"]]),Symbol("Scope ID"),Symbol("Pending Contexts"),Symbol(),globalThis.setImmediate||globalThis.setTimeout||globalThis.queueMicrotask,Symbol("selectedValue");var nt=/'|&(?=#?\w+;)/g,ot=/"|&(?=#?\w+;)/g,at=/["'>\s]|&#?\w+;|\/$/g;function it(e){return e?at.test(e)?e[at.lastIndex-1]===(at.lastIndex=0,'"')?"='"+function(e){return nt.test(e)?e.replace(nt,ct):e}(e)+"'":'="'+function(e){return ot.test(e)?e.replace(ot,lt):e}(e)+'"':"="+e:""}function ct(e){return"'"===e?"&#39;":"&amp;"}function lt(e){return'"'===e?"&#34;":"&amp;"}Symbol();var pt=r("../../browser-shims/compiler/index.js");function dt(e){return/^[a-z_$][a-z0-9_$]*$/i.test(e)}function ut(e){return dt(e)?pt.types.identifier(e):/^(?:0|[1-9][0-9]*)$/.test(e)?pt.types.numericLiteral(parseInt(e,10)):pt.types.stringLiteral(e)}function ft(e,t){return pt.types.objectProperty(ut(e),t)}function mt(e,t,r){const s=ut(t),n="Identifier"!==s.type;return r?pt.types.optionalMemberExpression(e,s,n,!0):pt.types.memberExpression(e,s,n)}var yt=new Set(["awaitTag","conditional","conditionalClosure","createTry","dynamicTag","createRenderer","createContent","createTemplate","dynamicClosure","dynamicClosureRead","intersection","loopClosure","loopIn","loopOf","loopTo","state","value"]);function gt(e){const{output:t}=X();return mt((0,Be.importStar)((0,Be.getFile)(),function(e){const{optimize:t}=X();return`${f.name}/${t?"":"debug/"}${"html"===e?"html":"dom"}`}(t),"$"),e)}function bt(e,...t){const r=Oe.types.callExpression(gt(e),function(e){const t=[];for(let r=e.length;r--;){const s=e[r];(s||t.length)&&(t[r]=s||Oe.types.unaryExpression("void",Oe.types.numericLiteral(0)))}return t}(t));return K()&&yt.has(e)&&(r.leadingComments=[{type:"CommentBlock",value:" @__PURE__ "}]),r}function ht(){return{escapeXML:Ve,toString:ze,attr:rt,classAttr:et,styleAttr:tt,escapeScript:qe,escapeStyle:He}}function vt(){const e=X();return`marko/src/runtime/helpers/tags-compat/${Z()?"html":"dom"}${e.optimize?"":"-debug"}.${"esm"===e.modules?"mjs":"js"}`}var xt=r("../../browser-shims/compiler/index.js"),wt=r("../../browser-shims/compiler/babel-utils.js"),St=(r("../../browser-shims/compiler/index.js"),new WeakMap),At=new WeakMap,kt=new WeakMap,Et={};function Tt(e,t,r){let s=e;for(;s!==t&&s.parent;)Ct(s,r),s=s.parent}function Mt(e,t,r,s){if(r){let n=e;for(;n!==t&&n.parent;)Bt(n,r,s),n=n.parent}}function Ct(e,t){t?It(e,Rt(e,t)):!0!==e.serializeReason&&(St.delete(e),Gt(e,!0))}function jt(e,t,r){It(e,zt(t,r))}function It(e,t){!0!==e.serializeReasons.get(t)&&(Ht(e,t,!0),At.get(e)?.delete(t))}function Pt(e,t,r){return!0===e.serializeReasons.get(zt(t,r))}function Lt(e,t,r,s){const n=zt(t,s);r&&!0!==e.serializeReasons.get(n)&&Ot(e,n,r)}function Ot(e,t,r){if(!0===r)It(e,t);else{let s,n=At.get(e);n?s=n.get(t):(n=new Map,At.set(e,n)),n.set(t,s?le(s,r):r)}}function Bt(e,t,r){if(t)if(r)Nt(e,Rt(e,r),t);else{const r=e.serializeReason;!0!==r&&(!0===t?Ct(e):Gt(e,qt(r,t)))}}function $t(e,t,r,s){r&&Nt(e,zt(t,s),r)}function Nt(e,t,r){const s=e.serializeReasons.get(t);!0!==s&&(!0===r?It(e,t):Ht(e,t,qt(s,r)))}function Ft(e,t){return t?e.serializeReasons.get(Rt(e,t)):e.serializeReason}function Dt(e,t,r){return e.serializeReasons.get(zt(t,r))}function Rt(e,t){const r=Et[t]||=new WeakMap;let s=r.get(e);return s||r.set(e,s=Symbol("symbol"==typeof t?`Symbol(${t.description})`:t)),s}function zt(e,t){const r=t?Et[t]||=new WeakMap:kt;let s=r.get(e);return s||r.set(e,s=Symbol((t?"symbol"==typeof t?`Symbol(${t.description})`:t:"")+e.name)),s}function Ut(e){const t=At.get(e);if(t){At.delete(e);for(const[r,s]of t){const t=Vt(s);t&&Ht(e,r,qt(e.serializeReasons.get(r),t))}}const r=Vt(St.get(e));r&&Gt(e,qt(e.serializeReason,r)),St.delete(e)}function _t(e){if(mo(e))return Wt(e.referencedBindings)}function Vt(e){if(e){if(Array.isArray(e)){let t;for(const r of e){const e=_t(r);if(!0===e)return!0;t=Kn.union(t,e)}return t}return _t(e)}}function Wt(e){if(e){let t;if(Array.isArray(e)){for(const{serializeSources:r}of e){if(!0===r)return r;t=Kn.union(t,r)}return t}return e.serializeSources}}function qt(e,t){return!0===e||!0===t||Kn.union(e,t)}function Gt(e,t){e.serializeReason=t}function Ht(e,t,r){e.serializeReasons.set(t,r)}var Jt=r("../../browser-shims/compiler/babel-utils.js"),Zt=e=>{const t=new WeakMap;return[()=>{let r=t.get((0,Jt.getProgram)());return r||t.set((0,Jt.getProgram)(),r=e()),r},e=>{t.set((0,Jt.getProgram)(),e)}]};function Kt(e,t){return[r=>{const s=(0,Jt.getProgram)().state[e]??={};return s[r.id]??=t&&t(r)},(t,r)=>{((0,Jt.getProgram)().state[e]??={})[t.id]=r}]}var Xt=r("../../browser-shims/compiler/index.js"),Yt=r("../../browser-shims/compiler/babel-utils.js"),Qt=/^<.*>$|\.marko$/;function er(e){const t=e.node.extra??={};if(void 0===t.tagNameType){const r=e.get("name");if(r.isStringLiteral()?(t.tagNameType="@"===r.node.value[0]?3:(0,Yt.isNativeTag)(e)?0:1,t.tagNameNullable=t.tagNameNullable=!1):r.isIdentifier()?(function(e,t){const r=[e];let s,n,o,a=!1;for(;(s=r.pop())&&2!==n;)if(s.isConditionalExpression())r.push(s.get("consequent")),s.node.alternate&&r.push(s.get("alternate"));else if(s.isLogicalExpression())"||"===s.node.operator?r.push(s.get("left")):a=!0,r.push(s.get("right"));else if(s.isAssignmentExpression())r.push(s.get("right"));else if(s.isBinaryExpression())n="+"!==s.node.operator||void 0!==n?2:0;else if(s.isStringLiteral()||s.isTemplateLiteral())n=void 0!==n?2:0;else if(s.isNullLiteral())a=!0;else if(s.isIdentifier()){if("undefined"===s.node.name){a=!0;continue}const t=s.scope.getBinding(s.node.name);if(!t){n=2;continue}if("module"===t.kind){const r=t.path.parent;if(Qt.test(r.source.value)&&r.specifiers.some((e=>Xt.types.isImportDefaultSpecifier(e)))){const t=(0,Yt.resolveTagImport)(e,r.source.value)||r.source.value;0===n||o&&o!==t?(n=2,o=void 0):(n=1,o=t)}else n=2;continue}const i=t.path;if(i.isMarkoTag()&&"local"===t.kind){const e=i.get("name").node.value;if("const"===e){r.push(i.get("attributes")[0].get("value"));continue}if("let"===e){n=2;continue}continue}n=2}else n=2;t.tagNameType=n,t.tagNameNullable=a,t.tagNameDynamic=!0,1===n&&o&&(t.tagNameImported=o)}(r,t),0===t.tagNameType&&(t.tagNameType=2)):r.isTemplateLiteral()&&!r.node.expressions.length?t.tagNameType=0:t.tagNameType=2,void 0===t.tagNameType&&(t.tagNameType=2),1===t.tagNameType){const r=(0,Yt.loadFileForTag)(e);r?"class"===r.ast.program.extra.featureType&&(t.tagNameType=2,t.featureType="class",((0,Yt.getProgram)().node.extra??={}).needsCompat=!0):t.tagNameType=2}}return t.tagNameType}var tr=new ie((function(e,t){return e.id-t.id}));function rr(e){const t=e.node.extra??={};let r=t.section;if(!r&&("Program"===e.type||e.get("body").length)){const s=e.parentPath?sr(e.parentPath):void 0,n=e.parentPath?.get("name"),o=e.isProgram()?"":U(n.toString()+"_content"),a=e.hub.file.path.node.extra??={},i=a.sections??=[];r=t.section={id:i.length,name:o,loc:n?.node.loc||void 0,depth:s?s.depth+1:0,parent:s,sectionAccessor:void 0,params:void 0,referencedClosures:void 0,referencedHoists:void 0,bindings:void 0,hoisted:void 0,isHoistThrough:void 0,serializeReason:void 0,serializeReasons:new Map,content:dr(e),upstreamExpression:void 0,downstreamBinding:void 0,hasAbortSignal:!1,isBranch:!1},i.push(r)}return r}function sr(e){let t=e;for(;;){if("Program"===t.type||"MarkoTagBody"===t.type&&!t.node.attributeTags&&!br(t.parentPath))return rr(t);t=t.parentPath}}function nr(e){return e.node.extra?.section}function or(e){let t,r=e;for(;void 0===(t=r.node.extra?.section);)r=r.parentPath;return t}var[ar]=Kt("scopeIdIdentifier",(e=>_(`scope${e.id}_id`))),[ir,cr]=Kt("parentIsOwner",(()=>!1)),[lr]=Kt("scopeIdentifier",(()=>xt.types.identifier("undefined")));function pr(e){const{sections:t}=(0,wt.getProgram)().node.extra;t?.forEach(e)}function dr(e){const t=e.get("body"),r={startType:null,endType:null,singleChild:!0};for(let e=t.length;e--;){const s=ur(t[e],"endType",r);if(null!==s){r.endType=s,1===s&&(r.singleChild=!1);for(let s=0;s<e;s++){const e=ur(t[s],"startType");if(null!==e)return r.startType=e,r.singleChild=!1,r}return r.startType=ur(t[e],"startType"),r}}return null}function ur(e,t,r){switch(e.type){case"MarkoText":return 4;case"MarkoPlaceholder":return 2;case"MarkoScriptlet":case"MarkoComment":case"ImportDeclaration":case"ExportAllDeclaration":case"ExportNamedDeclaration":return null;case"MarkoTag":{const s=e;if(Ie(s))switch(s.node.name.value){case"html-comment":return 0;case"html-script":case"html-style":return 3;case"for":case"if":case"await":case"try":return 1;default:return null}else{if((0,wt.isNativeTag)(s))return 3;if((0,wt.isAttributeTag)(s))return null;if(xt.types.isStringLiteral(s.node.name)){const e=(0,wt.loadFileForTag)(s)?.ast.program.extra.section;if(e)return e.content?(r&&!e.content.singleChild&&"endType"===t&&(r.startType=e.content.startType,r.singleChild=!1),e.content[t]):null}}}}return 1}var fr=e=>{if(e.isBranch)return!1;const{downstreamBinding:t}=e;return!t||!!Dt(t.section,t)};function mr(e,t){return e.parent?.id===t.section.id}function yr(e,t){return!function(e,t){return e.isBranch&&mr(e,t)}(e,t)}function gr(e,t){do{if(t===e)return!0}while(t=t.parent);return!1}function br(e){if(Ie(e))switch(e.node.name.value){case"html-comment":case"html-script":case"html-style":return!0;default:return!1}return 0===er(e)}var hr=r("../../browser-shims/compiler/index.js"),vr=r("../../browser-shims/compiler/babel-utils.js"),xr=d(r("../../node_modules/path-browserify/index.js"));var wr=/[\\^$.*+?()[\]{}|]/g,Sr=r("../../browser-shims/compiler/index.js"),Ar=r("../../browser-shims/compiler/babel-utils.js"),kr=r("../../browser-shims/compiler/index.js"),Er=r("../../browser-shims/compiler/babel-utils.js");function Tr(e){const t="MarkoTagBody"===e.parent.type?e.parentPath.parentPath:e.parentPath;if("MarkoTag"===t.type)return t}var Mr=r("../../browser-shims/compiler/index.js");function Cr(e,t){if(!e)return!1;const{node:r}=t,s=Ir(e)?e.default:e;return Pr(s)?s(t,Mr.types):s.enter&&s.enter(t,Mr.types),r!==t.node}function jr(e,t){if(!e)return!1;const{node:r}=t,s=Ir(e)?e.default:e;return!Pr(s)&&s.exit&&s.exit(t,Mr.types),r!==t.node}function Ir(e){return Boolean(e.default)}function Pr(e){return"function"==typeof e}function Lr({html:e,dom:t}){return{enter(r){Cr(Z()?e:t,r)},exit(r){jr(Z()?e:t,r)}}}var Or=r("../../browser-shims/compiler/index.js"),Br=r("../../browser-shims/compiler/index.js"),$r=r("../../browser-shims/compiler/babel-utils.js"),Nr=r("../../browser-shims/compiler/index.js");function Fr(e){switch(e.type){case"FunctionDeclaration":case"FunctionExpression":case"ArrowFunctionExpression":return e;default:return Nr.types.functionExpression(null,e.params,e.body,e.async,e.generator)}}function Dr(){return W("content")}function Rr(e,t){return e?!0===e?t:Br.types.logicalExpression("&&",bt("serializeIf",Br.types.identifier(W("serialize")),Br.types.numericLiteral(xn((0,$r.getProgram)().node.extra.inputSerializeReasons,e))),t):void 0}function zr(e){return bt("serializeGuard",Br.types.identifier(W("serialize")),Br.types.numericLiteral(xn((0,$r.getProgram)().node.extra.inputSerializeReasons,e)))}var Ur={translate:{exit(e){ds(e),an(e),F(e.node,"body",_r);const t=[];for(const s of e.get("body"))(r=s).isImportDeclaration()||r.isExportDeclaration()||r.isMarkoScriptlet({static:!0})?s.isMarkoScriptlet()&&(s.node.target&&"server"!==s.node.target?s.remove():s.replaceWithMultiple(s.node.body)):(t.push(s.node),s.remove());var r;const s=q("serialize")&&W("serialize"),n=q("content")&&Dr(),o=Br.types.arrowFunctionExpression(s?[Br.types.identifier("input"),Br.types.identifier(s)]:[Br.types.identifier("input")],Br.types.blockStatement(t)),a=Br.types.exportDefaultDeclaration(bt("createTemplate",Br.types.stringLiteral(e.hub.file.metadata.marko.id),n?Br.types.identifier(n):o));n?e.node.body.push(Br.types.variableDeclaration("const",[Br.types.variableDeclarator(Br.types.identifier(n),o)]),a):e.node.body.push(a)}}};function _r(e,t){return function(e){switch(e.type){case"Identifier":case"MemberExpression":{const{extra:t}=e;if(t&&!(t.read&&!t.read.binding.declared||t.binding&&!t.binding.declared))return ao(e)}}}(e)||function(e,t){switch(e.type){case"ClassMethod":{const t=Wr(e);return t&&Br.types.classProperty(e.key,t)}case"ClassPrivateMethod":{const t=Wr(e);return t&&Br.types.classPrivateProperty(e.key,t)}case"ObjectMethod":{const t=Wr(e);return t&&Br.types.objectProperty(e.key,t)}case"FunctionDeclaration":{const{extra:r}=e;if(go(r)){let s=Vr.get(t);s||Vr.set(t,s=[]),s.push({id:e.id.name,registerId:r.registerId})}break}case"ArrowFunctionExpression":case"FunctionExpression":return Wr(e);case"BlockStatement":case"MarkoScriptlet":!function(e){const t=Vr.get(e);if(t)for(const{id:r,registerId:s}of t)e.push(Br.types.expressionStatement(bt("register",Br.types.identifier(r),Br.types.stringLiteral(s))))}(e.body)}}(e,t)}var Vr=new WeakMap;function Wr(e){const{extra:t}=e;if(go(t))return bt("register",Fr(e),Br.types.stringLiteral(t.registerId),(t.referencedBindingsInFunction||t.referencesScope)&&ar(t.section))}var qr=r("../../browser-shims/compiler/index.js");function Gr(e){const t=[],r=[];let s=e[0];for(let n=1;n<e.length;n++){let o=e[n];if("object"==typeof o){if(!qr.types.isStringLiteral(o)){if(qr.types.isTemplateLiteral(o)){let t=n+1;const r=o.expressions.length;Jr(e,t,o.quasis.length+r);for(let s=0;s<r;s++)e[t++]=o.quasis[s].value.raw,e[t++]=o.expressions[s];e[t]=o.quasis[r].value.raw;continue}r.push(o),t.push(s),s="";continue}o=o.value}s+=o}return r.length?1!==r.length||s||t[0]?(t.push(s),qr.types.templateLiteral(t.map((e=>qr.types.templateElement({raw:e}))),r)):r[0]:s?qr.types.stringLiteral(s):void 0}function Hr(e,t){e[e.length-1]+=t}function Jr(e,t,r){for(let s=e.length-1;s>=t;s--)e[s+r]=e[s]}r("../../browser-shims/compiler/index.js");var[Zr]=Kt("walks",(()=>[""])),[Kr]=Kt("walkComment",(()=>[])),[Xr]=Kt("steps",(()=>[])),Yr={32:"get",36:"inside",37:"replace",38:"endChild",47:"beginChild",48:"beginChildWithVar",49:"dynamicTagWithVar",67:"next",97:"over",107:"out",117:"multiplier",91:"nextEnd",106:"overEnd",116:"outEnd",126:"multiplierEnd"};function Qr(e){Xr(or(e)).push(0)}function es(e){Xr(or(e)).push(1)}function ts(e){Xr(or(e)).push(0,1)}function rs(e,t){if(Z())return;const r=or(e),s=Xr(r),n=Zr(r),o=Kr(r);let a="";if(s.length){const e=[];let t=0;for(const r of s)0===r?(t++,e.push(67)):(t--,t>=0?(e.length=e.lastIndexOf(67),e.push(97)):(e.length=e.lastIndexOf(107)+1,e.push(107),t=0));let r=e[0],n=0;for(const t of e)t!==r?(o.push(`${Yr[r]}(${n})`),a+=ss(r,n),r=t,n=1):n++;o.push(`${Yr[r]}(${n})`),a+=ss(r,n),s.length=0}void 0!==t&&(32!==t&&cs(e)`<!>`,o.push(`${Yr[t]}`),a+=String.fromCharCode(t)),Hr(n,a)}function ss(e,t){switch(e){case 67:return ns(t,e,20);case 97:case 107:return ns(t,e,10);default:throw new Error(`Unexpected walk code: ${e}`)}}function ns(e,t,r){let s="";if(e>=r){const t=Math.floor(e/r);s+=ns(t,117,10),e-=t*r}return s+=String.fromCharCode(t+e),s}function os(e){const t=1===e.content?.startType?String.fromCharCode(68):"",r=1===e.content?.endType?String.fromCharCode(68):"",s=Gr([t,...Zr(e),r]);return s&&""!==s.value&&(s.leadingComments=[{type:"CommentBlock",value:" "+Kr(e).join(", ")+" "}]),s}var[as]=Kt("writes",(()=>[""])),[is]=Kt("trailerWrites",(()=>[""]));function cs(e,t){const r=or(e),s=t?is:as;return(e,...t)=>{const n=t.length,o=s(r);Hr(o,e[0]);for(let r=0;r<n;r++)o.push(t[r],e[r+1])}}function ls(e){const t=or(e),r=as(t),s=is(t),n=Gr(r),o=Gr(s);return r.length=0,r[0]="",s.length=0,s[0]="",n&&o?Or.types.expressionStatement(Or.types.sequenceExpression([bt("write",n),bt("writeTrailers",o)])):n?Or.types.expressionStatement(bt("write",n)):o?Or.types.expressionStatement(bt("writeTrailers",o)):void 0}function ps(e){const t=ls(e);t&&e.insertBefore(t)[0].skip()}function ds(e){const t=e.isProgram()?e:e.get("body"),r=ls(t);r&&t.node.body.push(r)}function us(e){const t=1===e.content?.startType?"<!>":"",r=1===e.content?.endType?"<!>":"",s=as(e);return{setup:cn(e),walks:os(e),writes:Gr([t,...s,r])}}function fs(e,t,r){if(0!==t.type)throw e.buildCodeFrameError("Tried to mark a node that was not determined to need a mark during analyze.");if(Z()&&r){const s=or(e);cs(e)`${bt("markResumeNode",ar(s),ro(t),!0===r?void 0:zr(r))}`}}var ms=new WeakSet,[ys,gs]=Kt("returnValue"),bs={analyze(e){(0,Er.assertNoArgs)(e),(0,Er.assertNoVar)(e),(0,Er.assertNoParams)(e),b(e),(0,Er.assertAllowedAttributes)(e,["value","valueChange"]);const t=Tr(e);if(t){if((0,Er.isNativeTag)(t))throw e.get("name").buildCodeFrameError("The `return` tag can not be used in a native tag.");if(function(e){if(Ie(e))switch(Ce(e)){case"if":case"else-if":case"else":case"for":case"await":case"try":return!0}return!1}(t))throw e.get("name").buildCodeFrameError(`The \`return\` tag can not be used under an \`${t.get("name").toString()}\` tag.`)}if(ms.has(e.parentPath))throw e.get("name").buildCodeFrameError(`Cannot have multiple \`return\` tags ${"Program"===e.parent.type?"for the template":"within a tag's body content"}.`);ms.add(e.parentPath);const r=Te(e.node);if(!r.value)throw e.get("name").buildCodeFrameError("The `return` tag requires a value.");r.valueChange&&Ct(sr(e),ee().TagVariableChange)},translate:Lr({html:{exit(e){const t=or(e),r=Te(e.node);if(ps(e),r.valueChange&&function(e,t,r){const s=Ft(e,t);s&&Ms(e).set(t,{expression:r,reason:s})}(t,ee().TagVariableChange,r.valueChange),r.value){const s=_("return");gs(t,s),e.replaceWith(kr.types.variableDeclaration("const",[kr.types.variableDeclarator(s,r.value)]))[0].skip()}}},dom:{exit(e){const t=or(e),r=Te(e.node);r.value&&Ks(t,r.value.extra?.referencedBindings,{identifier:gt("tagVarSignal"),hasDownstreamIntersections:()=>!0},r.value),r.valueChange&&Ks(t,r.valueChange.extra?.referencedBindings,{identifier:gt("setTagVarChange"),hasDownstreamIntersections:()=>!1},r.valueChange),e.remove()}}}),parseOptions:{openTagOnly:!0},autocomplete:[{displayText:"return=<value>",description:"Provides a value for use in a parent template.",snippet:"return=${1:value}",descriptionMoreURL:"https://markojs.com/docs/core-tags/#return"}]},hs=r("../../browser-shims/compiler/index.js");function vs(e){return e.declared||!e.upstreamAlias?hs.types.identifier(e.name):void 0!==e.property?mt(vs(e.upstreamAlias),e.property,e.upstreamAlias.nullable):vs(e.upstreamAlias)}var xs=r("../../browser-shims/compiler/index.js");function ws(e){if(1===e.length&&xs.types.isExpressionStatement(e[0])){const{expression:t}=e[0];switch(t.type){case"ObjectExpression":case"AssignmentExpression":return Ss(t);default:return t}}return xs.types.blockStatement(e)}function Ss(e){switch(e.type){case"ObjectExpression":case"AssignmentExpression":return xs.types.parenthesizedExpression(e);default:return e}}var[As]=Kt("signals",(()=>new Map)),[ks,Es]=Kt("queue");function Ts(e,t){Es(nr(e.get("body")),t)}var[Ms]=Kt("serializedScopeProperties",(()=>new Map));function Cs(e,t,r,s){const n=Dt(e,t,s);n&&Ms(e).set((s||"")+so(t),{expression:r,reason:n})}var js=new WeakSet;function Is(e,t,r){js.add(e),Ms(e).set(t,{expression:r,reason:!0})}var[Ps,Ls]=Kt("sectionWriteScopeBuilder");function Os(e,t){const r=Ps(e);Ls(e,r?e=>t(r(e)):t)}var Bs=new WeakMap,[$s]=Kt("htmlScopeStatements",(()=>[])),[Ns]=Kt("hoistFunctionsIdsMap",(()=>new Map));function Fs(e){const t=Ns(e.section);let r=t.get(e);return r||t.set(e,r=_(`get${e.name}`)),r}var Ds=()=>Sr.types.stringLiteral("SIGNAL NOT INITIALIZED");function Rs(e,t,r=function(e){let t;if(e)if(Array.isArray(e)){t="expr";for(const r of e)t+=`_${r.name}`}else t=e.name;else t="setup";return t}(t)){const s=As(e);let n=s.get(t);if(!n){const o=t?!Array.isArray(t)&&t.section===e&&t.export:!e.parent&&(0,Ar.getProgram)().node.extra.domExports?.setup;if(s.set(t,n={identifier:o?Sr.types.identifier(o):_(r+e.name.replace("_","$")),referencedBindings:t,section:e,values:[],intersection:void 0,render:[],renderReferencedBindings:void 0,effect:[],effectReferencedBindings:void 0,subscribers:[],hasDownstreamIntersections:()=>{let r=!!n.intersection;if(!r)for(const e of n.values)if(e.signal.hasDownstreamIntersections()){r=!0;break}if(!r&&!Array.isArray(t)&&t){for(const s of t.aliases)if(Rs(e,s).hasDownstreamIntersections()){r=!0;break}if(!r)for(const[,s]of t.propertyAliases)if(Rs(e,s).hasDownstreamIntersections()){r=!0;break}}return n.hasDownstreamIntersections=()=>r,r},build:Ds,export:!!o}),Z())return n;t?Array.isArray(t)?(qs(t,n),n.build=()=>{const{id:e,scopeOffset:r}=Wn.get(t);return bt("intersection",Sr.types.numericLiteral(e),Us(n),r||t.length>2?Sr.types.numericLiteral(t.length-1):void 0,r&&ro(r))}):t.section!==e&&Kn.find(e.referencedClosures,t)&&(n.build=()=>{const r=Us(n);return!ks(e)||yr(e,t)?bt("dynamicClosureRead",ro(t),r,mr(e,t)?void 0:Sr.types.arrowFunctionExpression([gn],An(e,t.section))):ks(e)(t,r)}):n.build=()=>Us(n)}return n}function zs(e,t="value"){const r=Rs(e.section,e);r.build=()=>{const s=Us(r),n=!e.upstreamAlias&&(3===e.type||2===e.type),o=!(e.upstreamAlias&&!e.property)&&(e.downstreamExpressions.size||"ArrowFunctionExpression"===s.type&&s.body.body.length>0)||r.intersection,a=n||r.intersection;return o||a||e.hoists.size?bt(t,ro(e,"state"===t),s):s},r.valueAccessor=ro(e);for(const t of e.aliases)zs(t);for(const t of e.propertyAliases.values())zs(t);return r}function Us(e){const t=e.section,r=e.referencedBindings,s=[gn],n=Array.isArray(r),o=r&&!n,a=o&&r.section===t;let i=!e.render.length;if(o&&(e.renderReferencedBindings||r.aliases.size||r.propertyAliases.size)){const e=Sr.types.identifier(r.name);r.loc&&(e.loc=r.loc,e.start=r.loc.start.index,e.end=r.loc.end.index),s.push(e)}if(a){for(const t of r.aliases){const s=Rs(t.section,t);e.render.push(Sr.types.expressionStatement(Sr.types.callExpression(s.identifier,[gn,Sr.types.identifier(r.name),...Ws(s)])))}for(const[t,s]of r.propertyAliases){const n=Rs(s.section,s);e.render.push(Sr.types.expressionStatement(Sr.types.callExpression(n.identifier,[gn,mt(Sr.types.identifier(r.name),t,r.nullable),...Ws(n)])))}}for(const t of e.values)e.render.push(Sr.types.expressionStatement(Sr.types.callExpression(t.signal.identifier,[t.scope,t.value,...Ws(t.signal)])));if(de(e.intersection,(t=>{e.render.push(Sr.types.expressionStatement(Sr.types.callExpression(t,[gn])))})),a){let t,s;de(r.closureSections,(n=>{r.sources&&(yr(n,r)?(t||(t=[],s=_(e.identifier.name+"_closure"),e.render.push(Sr.types.expressionStatement(Sr.types.callExpression(s,[gn])))),t.push(Rs(n,r).identifier)):e.render.push(Sr.types.expressionStatement(Sr.types.callExpression(Rs(n,r).identifier,[gn]))))})),s&&(e.prependStatements||=[]).push(Sr.types.variableDeclaration("const",[Sr.types.variableDeclarator(s,bt("dynamicClosure",...t))]))}if(e.effect.length){const t=Sr.types.identifier(`${e.identifier.name}_effect`);e.render.push(Sr.types.expressionStatement(Sr.types.callExpression(t,[gn])))}if(n&&e.renderReferencedBindings&&e.render.unshift(Sr.types.variableDeclaration("const",[Sr.types.variableDeclarator(Sn(t,e.renderReferencedBindings),gn)])),i&&1===e.render.length){const t=e.render[0];if("ExpressionStatement"===t.type){const{expression:e}=t;if("CallExpression"===e.type){const t=e.arguments;if(s.length>=t.length){for(let e=t.length;e--;){const r=s[e],n=t[e];if("Identifier"!==n.type||r.name!==n.name){i=!1;break}}if(i)return e.callee}}}}return Sr.types.arrowFunctionExpression(s,Sr.types.blockStatement(e.render))}var _s=new WeakSet,Vs=[];function Ws(e){return e.extraArgs?(_s.has(e)||(_s.add(e),F(e,"extraArgs",ln)),e.extraArgs):Vs}function qs(e,t){if(Array.isArray(e))return void e.forEach((e=>qs(e,t)));const r=Rs(t.section,e);r.intersection=ce(r.intersection,t.identifier)}function Gs(e){for(let t=e.length;t--;){const r=e[t];if(r)if(Sr.types.isArrowFunctionExpression(r)&&Sr.types.isBlockStatement(r.body)){const s=r.body.body;0===s.length?e[t]=Sr.types.numericLiteral(0):1===s.length&&Sr.types.isExpressionStatement(s[0])&&(r.body=Ss(s[0].expression))}else(Sr.types.isNullLiteral(r)||Sr.types.isUnaryExpression(r)&&"void"===r.operator)&&(e[t]=Sr.types.numericLiteral(0));else e[t]=Sr.types.numericLiteral(0)}for(let t=e.length-1;Sr.types.isNumericLiteral(e[t])&&0===e[t].value;)e.length=t--;return e}function Hs(e,t,r,s,n){const o=Rs(t,r),a=o[e]??=[],i="effect"===e?Js:Zs;if(Array.isArray(s)?a.push(...s):a.push(s),!1!==n)if(n)for(const e of n)i(o,e);else i(o,r)}function Js(e,t){e.effectReferencedBindings=Kn.union(e.effectReferencedBindings,t)}function Zs(e,t){e.renderReferencedBindings=Kn.union(e.renderReferencedBindings,t)}function Ks(e,t,r,s,n=gn){const o=Rs(e,t);Zs(o,t),o.values.push({signal:r,value:s,scope:n})}function Xs(e,t,r){const{markoOpts:s,opts:{filename:n}}=(0,Ar.getFile)();let o="";if(t)if("string"==typeof t)o+=`_${t}`;else if(Array.isArray(t))for(const e of t)o+=`_${e.name}`;else o+=`_${t.name}`;return(0,Ar.getTemplateId)(s,n,`${e.id}${o}${r?"/"+r:""}`)}var Ys=new WeakMap;function Qs(e,t){const{markoOpts:r,opts:{filename:s}}=(0,Ar.getFile)();let n=Ys.get(e);n||Ys.set(e,n=new Set);const o=(0,Ar.getTemplateId)(r,s,`${e.id}/${t}`);let a=0,i=o;for(;n.has(i);)i=o+"_"+ ++a;return n.add(i),i}function en(e){de(e.hoisted,(t=>{for(const r of t.hoists.values()){const s=[0===t.type?Sr.types.stringLiteral(Q().Getter+so(t)):ro(t)];let n=e;for(;n&&n!==r.section;){const e=n.parent;e&&s.push(oo(n)),n=e}const o=Fs(r);(0,Ar.getProgram)().node.body.push(Sr.types.variableDeclaration("const",[Sr.types.variableDeclarator(o,r.downstreamExpressions.size?bt("register",Sr.types.stringLiteral(Xs(r.section,r,"hoist")),bt("hoist",...s)):bt("hoist",...s))])),r.downstreamExpressions.size&&Ks(r.section,void 0,zs(r),Sr.types.callExpression(o,[gn]))}}));const t=[...As(e).values()].sort(rn);for(const r of t){F(r,"render",ln);for(const e of r.values)F(e,"value",ln);let t;if(r.effect.length){F(r,"effect",pn);const s=Sr.types.identifier(`${r.identifier.name}_effect`),n=r.effectReferencedBindings,o=D(r.effect,hn);t=Sr.types.variableDeclarator(s,bt("effect",Sr.types.stringLiteral(Xs(e,r.referencedBindings)),Sr.types.arrowFunctionExpression(n?o?[gn,Sn(e,n)]:[Sn(e,n)]:o?[gn]:[],ws(r.effect))))}let s=r.build();Sr.types.isCallExpression(s)&&Gs(s.arguments),r.register&&(s=bt("registerBoundSignal",Sr.types.stringLiteral(Xs(e,r.referencedBindings,"var")),s));const n=Sr.types.variableDeclarator(r.identifier,s);let o=e.parent||r.referencedBindings||!Sr.types.isFunctionExpression(s)&&!Sr.types.isArrowFunctionExpression(s)?Sr.types.variableDeclaration("const",[n]):Sr.types.functionDeclaration(r.identifier,s.params,Sr.types.isExpression(s.body)?Sr.types.blockStatement([Sr.types.expressionStatement(s.body)]):s.body);r.export&&(o=Sr.types.exportNamedDeclaration(o));const a=r.prependStatements||[];t&&a.push(Sr.types.variableDeclaration("const",[t])),a.push(o),(0,Ar.getProgram)().node.body.push(...a)}}function tn(e){const t=Fr(e);return"FunctionDeclaration"===t.type?[t,Sr.types.returnStatement(t.id)]:[Sr.types.returnStatement(t)]}function rn(e,t){const r=sn(e),s=sn(t);for(let e=Math.max(r.length,s.length)-1;e>=0;e--){const t=(s[e]??-1)-(r[e]??-1);if(0!==t)return t}return 0}function sn({referencedBindings:e}){return e?Array.isArray(e)?e.map(nn).sort():[nn(e)]:[]}function nn(e){return 1e4*(0===e.type?1:0)+e.id}function on(e,t){Hs("effect",e,t,void 0,!1)}function an(e){const t=nr(e);if(!t)return;const r=e.node.body,s=Array.from(As(t).values()),n=ar(t);de(t.referencedClosures,(e=>{if(e.sources&&yr(t,e)){const r=Rs(e.section,e);let s=Bs.get(r);s||(Bs.set(r,s=_(r.identifier.name+"_closures")),$s(e.section).push(Sr.types.variableDeclaration("const",[Sr.types.variableDeclarator(s,Sr.types.newExpression(Sr.types.identifier("Set"),[]))])),Cs(e.section,e,s,Q().ClosureScopes)),Cs(t,e,Sr.types.numericLiteral(function(e,t){let r=0;return ue(e.closureSections,(s=>s===t||(yr(s,e)&&r++,!1))),r}(e,t)),Q().ClosureSignalIndex),Os(t,(e=>bt("writeSubscribe",s,e)))}}));const o=new Set;de(t.hoisted,(e=>{for(const r of e.hoists.values()){r.downstreamExpressions.size&&$s(r.section).push(Sr.types.variableDeclaration("const",[Sr.types.variableDeclarator(Sr.types.identifier(r.name),bt("hoist",ar(r.section),Sr.types.stringLiteral(Xs(r.section,r,"hoist"))))]));let e=t;for(;e&&e!==r.section;){const t=e.parent;if(!e.sectionAccessor&&!o.has(e)){const r=_(`${e.name}_subscribers`);o.add(e),$s(t).push(Sr.types.variableDeclaration("const",[Sr.types.variableDeclarator(r,Sr.types.newExpression(Sr.types.identifier("Set"),[]))])),Os(e,(e=>bt("writeSubscribe",r,e))),Is(t,no(e),r)}e=t}}e.hoists.size&&0!==e.type&&Cs(t,e,vs(e))}));for(let e=s.length;e--;)if(s[e].effect.length){const o=s[e].referencedBindings;r.push(Sr.types.expressionStatement(bt("writeEffect",n,Sr.types.stringLiteral(Xs(t,o)))))}const a=Ms(t),i=[],c=!!js.has(t)||t.serializeReason;if(de(t.bindings,(e=>{if(0===e.type)return;const r=Dt(t,e);if(!r)return;const s=so(e);a.delete(s),i.push(ft(s,c&&(c===r||!0!==c&&!0!==r&&0===Un(c,r))?vs(e):Rr(r,vs(e))))})),t.parent){const e=ee().Owner,r=Ft(t,e);if(r){const s=bt("ensureScopeWithId",ar(t.parent));a.delete(e),i.push(ft(e,c&&(c===r||!0!==c&&!0!==r&&0===Un(c,r))?s:Rr(r,s)))}}for(const[e,{expression:t,reason:r}]of a)i.push(ft(e,Rr(r,t)));const l=Ps(t);if(c){for(const e of i)"Identifier"===e.key.type&&"Identifier"===e.value.type&&e.key.name===e.value.name&&(e.shorthand=!0);const s=[n,Sr.types.objectExpression(i)];if(!Y()){let r;de(t.bindings,(e=>{if(0===e.type)return;if(!Dt(t,e))return;let s=e,n="";for(;!s.loc&&!s.declared&&s.upstreamAlias;)void 0!==s.property&&(n=Ye(s.property)+n),s=s.upstreamAlias;const o=s.loc&&Sr.types.stringLiteral(`${s.loc.start.line}:${s.loc.start.column+1}`);(r||=[]).push(ft(so(e),s!==e?Sr.types.arrayExpression(o?[Sr.types.stringLiteral(s.name+n),o]:[Sr.types.stringLiteral(s.name+n)]):o||Sr.types.numericLiteral(0)))})),s.push(Sr.types.stringLiteral(e.hub.file.opts.filenameRelative),t.loc&&null!=t.loc.start.line?Sr.types.stringLiteral(`${t.loc.start.line}:${t.loc.start.column+1}`):Sr.types.numericLiteral(0)),r&&s.push(Sr.types.objectExpression(r))}let o=l?l(bt("writeScope",...s)):bt("writeScope",...s);!0!==c&&(o=Sr.types.logicalExpression("&&",zr(c),o)),r.push(Sr.types.expressionStatement(o))}!t.isBranch&&(t.hasAbortSignal||t.referencedClosures||ue(t.bindings,(e=>1===e.type)))&&r.push(Sr.types.expressionStatement(bt("resumeClosestBranch",n)));const p=$s(t);(r.length||p.length)&&r.unshift(Sr.types.variableDeclaration("const",[Sr.types.variableDeclarator(n,bt("nextScopeId"))]),...p);const d=ys(t);void 0!==d&&r.push(Sr.types.returnStatement(d))}function cn(e){return As(e).get(void 0)?.identifier}function ln(e){return un(e)||dn(e)||mn(e)}function pn(e){return un(e)||dn(e)}function dn(e){switch(e.type){case"Identifier":case"MemberExpression":return ao(e)}}function un(e){switch(e.type){case"UpdateExpression":{const{extra:t}=e.argument;if(yo(t)){const{buildAssignment:r}=Rs(t.assignment.section,t.assignment);if(r){const s=r(t.section,Sr.types.binaryExpression("++"===e.operator?"+":"-",e.argument,Sr.types.numericLiteral(1)));return e.prefix?s:Sr.types.sequenceExpression([s,e.argument])}}break}case"AssignmentExpression":switch(e.left.type){case"Identifier":{const{extra:t}=e.left;if(yo(t)){const{buildAssignment:r}=Rs(t.assignment.section,t.assignment);if(r)return r(t.section,"="===e.operator?e.right:Sr.types.binaryExpression(e.operator.slice(0,-1),e.left,e.right))}break}case"ArrayPattern":case"ObjectPattern":{let t,r;if(I(e.left,(e=>{const{extra:s}=e;if(yo(s)){const n=Rs(s.assignment.section,s.assignment);n?.buildAssignment&&(e.name=U(e.name),(t||=[]).push(Sr.types.identifier(e.name)),(r||=[]).push(n.buildAssignment(s.section,Sr.types.identifier(e.name))))}})),t&&r){const s=U("result");return Sr.types.callExpression(Sr.types.arrowFunctionExpression([Sr.types.identifier(s),...t],Sr.types.sequenceExpression([Sr.types.assignmentExpression("=",e.left,Sr.types.identifier(s)),...r,Sr.types.identifier(s)])),[e.right])}break}}}}var fn=new WeakMap;function mn(e){switch(e.type){case"ClassMethod":{const t=yn(e);return t&&Sr.types.classProperty(e.key,t)}case"ClassPrivateMethod":{const t=yn(e);return t&&Sr.types.classPrivateProperty(e.key,t)}case"ObjectMethod":{const t=yn(e);return t&&Sr.types.objectProperty(e.key,t)}case"ArrowFunctionExpression":case"FunctionExpression":return yn(e);case"FunctionDeclaration":{const t=yn(e);if(t)return Sr.types.variableDeclaration("const",[Sr.types.variableDeclarator(e.id,t)]);break}}}function yn(e){const{extra:t}=e;if(go(t)){const r=t.name,s=t.referencesScope,n=t.referencedBindingsInFunction;let o=fn.get((0,Ar.getProgram)().node);return o||fn.set((0,Ar.getProgram)().node,o=[]),o.push({id:r,node:e,registerId:t.registerId,section:t.section,referencesScope:s,referencedBindings:n}),s||n?Sr.types.callExpression(Sr.types.identifier(r),[gn]):Sr.types.identifier(r)}}var gn,bn={translate:{exit(e){rs(e);const t=nr(e),{walks:r,writes:s,setup:n}=us(t),o=e.node.extra.domExports,a=hr.types.identifier(o.template),i=hr.types.identifier(o.walks),c=hr.types.identifier(o.setup),l=e.node.params[0].extra?.binding,p=l&&we(l)?zs(l):void 0,d=function(e){const{filename:t}=e.opts,r=e.markoOpts.fileSystem,s=function(e){const t=e.lastIndexOf(xr.default.sep)+1,r=e.indexOf(".",t);if(-1===r)return e.slice(t);const s=e.lastIndexOf("."),n=r-1;if("]"===e[n]){const o=e.lastIndexOf("[",n);if(o>t)return e.slice(t,o)+e.slice(r,s)}return e.slice(t,s)}(t),n=new RegExp(`^(${o=s,o.replace(wr,"\\$&")}\\.${"index"===s?"|":""})style\\.\\w+$`);var o;for(const e of r.readdirSync(xr.default.dirname(t)).sort())if(n.test(e))return`./${e}`}(e.hub.file);d&&(0,vr.importDefault)(e.hub.file,d),function(e){const{sections:t}=(0,wt.getProgram)().node.extra;for(let r=t.length;r--;)e(t[r])}((r=>{if(r!==t){const t=r.params&&zs(r.params),{walks:o,writes:a,setup:i}=us(r),c=hr.types.identifier(r.name),l=r.referencedClosures?hr.types.arrowFunctionExpression([gn],ws((n=e=>{const t=Rs(r,e);return hr.types.expressionStatement(hr.types.callExpression(yr(r,e)?t.identifier:hr.types.memberExpression(t.identifier,hr.types.identifier(ee().Owner)),[gn]))},(s=r.referencedClosures)?Array.isArray(s)?s.map(n):[n(s)]:[]))):void 0,p=ir(r)?bt("createRenderer",...Gs([a,o,i,t?.identifier,l])):bt(fr(r)?"registerContent":"createContent",hr.types.stringLiteral(Xs(r,"renderer")),...Gs([a,o,i,t?.identifier,l,r.hoisted||r.isHoistThrough?oo(r):void 0]));en(r),e.node.body.push(hr.types.variableDeclaration("const",[hr.types.variableDeclarator(c,p)]))}var s,n})),en(t),function(){const e=fn.get((0,Ar.getProgram)().node),t=[];if(e){for(const r of e){let e;const s=r.referencedBindings?r.referencesScope?[gn,Sr.types.assignmentPattern(Sn(r.section,r.referencedBindings),gn)]:[Sn(r.section,r.referencedBindings)]:r.referencesScope?[gn]:void 0;e=s?Sr.types.functionDeclaration(Sr.types.identifier(r.id),s,Sr.types.blockStatement(tn(r.node))):"FunctionDeclaration"===r.node.type&&r.node.id?.name===r.id?r.node:Sr.types.functionDeclaration(Sr.types.identifier(r.id),r.node.params,"BlockStatement"===r.node.body.type?r.node.body:Sr.types.blockStatement([Sr.types.returnStatement(r.node.body)]),r.node.generator,r.node.async),t.push(e)}for(const r of e)t.push(Sr.types.expressionStatement(bt("register",Sr.types.stringLiteral(r.registerId),Sr.types.identifier(r.id))));(0,Ar.getProgram)().node.body.push(...t)}}(),n||e.node.body.unshift(hr.types.exportNamedDeclaration(hr.types.variableDeclaration("const",[hr.types.variableDeclarator(c,hr.types.arrowFunctionExpression([],hr.types.blockStatement([])))]))),e.node.body.unshift(hr.types.exportNamedDeclaration(hr.types.variableDeclaration("const",[hr.types.variableDeclarator(a,s||hr.types.stringLiteral(""))])),hr.types.exportNamedDeclaration(hr.types.variableDeclaration("const",[hr.types.variableDeclarator(i,r||hr.types.stringLiteral(""))]))),e.node.body.push(hr.types.exportDefaultDeclaration(bt("createTemplate",hr.types.stringLiteral(e.hub.file.metadata.marko.id),a,i,c,p?.identifier)))}}};function hn(e){return e===gn}var vn={migrate:{enter(e){e.node.params=[he.types.identifier("input")]},exit(e){e.scope.crawl()}},analyze:{enter(e){rr(e),On(e,2);const t=e.node.extra??={},r=e.node.params[0].extra?.binding;r&&(r.nullable=!1),t.domExports={template:U("template"),walks:U("walks"),setup:U("setup"),input:void 0};for(const r of e.get("body"))if(Pe(r,"return")){const{value:e}=Te(r.node);e&&(t.returnValueExpr=e.extra??={});break}},exit(e){!function(){const e=Cn(),t=Xn(),r=Yn(),s=Rn();if(s.size)for(const[e,r]of s){const s=e.extra;let n=t.get(s),{isEffect:o}=s;for(const e of r){const r=e?.extra;if(mo(r)){o||=r.isEffect;const e=t.get(r);e&&(n=le(n,e),t.delete(r))}}t.set(s,n),s.isEffect=o}const n=new Map;for(const[e,r]of t)mo(e)&&(e.referencedBindings=co(e,r,n),de(e.referencedBindings,(t=>{t.downstreamExpressions.add(e)})));for(const[e,t]of r)e.referencedBindingsInFunction=co(e,t,n),de(e.referencedBindingsInFunction,(e=>jt(e.section,e)));for(const t of e)0===t.type||t.upstreamAlias||io(e,t);for(const t of e){const{name:e,section:r}=t;0!==t.type&&(Jn(t),t.hoists.size&&jt(t.section,t),de(t.assignmentSections,(e=>Tt(e,r,ee().Owner))),ue(r.bindings,(({name:e})=>e===t.name))&&(t.name=U(e))),r.bindings=Kn.add(r.bindings,t);for(const{referencedBindings:e,isEffect:r,section:s}of t.downstreamExpressions)s!==t.section&&(t.closureSections=tr.add(t.closureSections,s),s.referencedClosures=Kn.add(s.referencedClosures,t),Mt(s,t.section,t.serializeSources,ee().Owner)),r&&de(e,(e=>jt(e.section,e)))}let o;pr((e=>{e.isHoistThrough&&Ct(e),de(e.referencedHoists,(t=>{Tt(e,t.section,ee().Owner)})),e.parent&&e.isBranch&&e.sectionAccessor&&e.upstreamExpression&&(function(e,t,r){if(t)if(r)!function(e,t,r){const s=e.serializeReasons.get(t);if(!0!==s)if(!0===r)It(e,t);else{const n=Wt(r);!0===n?It(e,t):Ht(e,t,qt(s,n))}}(e,Rt(e,r),t);else{const r=e.serializeReason;if(!0!==r)if(!0===t)Ct(e);else{const s=Wt(t);!0===s?Ct(e):Gt(e,qt(r,s))}}}(e,!(!e.isHoistThrough&&!e.hoisted)||function(e){if(e.isBranch)return pe(e.referencedClosures,(t=>mr(e,t)))}(e),Mn),function(e,t,r){if(t)if(r)Ot(e,Rt(e,r),t);else if(!0!==e.serializeReason)if(!0===t)Ct(e);else{const r=St.get(e);St.set(e,r?le(r,t):t)}}(e,e.upstreamExpression,Mn),Lt(e.parent,e.sectionAccessor.binding,e.upstreamExpression))})),pr(Ut),pr((e=>{const t=n.get(e);if(t)for(const r of t){const t=r.length;for(let s=0;s<t-1;s++)for(let n=s+1;n<t;n++){const t=r[s],o=r[n];Pt(e,t)||Kn.isSuperset(t.sources,o.sources)||$t(e,t,o.serializeSources),Pt(e,o)||Kn.isSuperset(o.sources,t.sources)||$t(e,o,t.serializeSources)}}de(e.referencedClosures,(t=>{if(!Pt(t.section,t)){const r=t.section;let s,n=e;for(;n!==r;){const e=!n.upstreamExpression||_t(n.upstreamExpression);if(!0===e){s=!0;break}s=qt(s,e),n=n.parent}$t(t.section,t,s)}t.sources&&Bt(t.section,Dt(t.section,t)),t.serializeSources&&yr(e,t)&&($t(t.section,t,t.serializeSources,Q().ClosureScopes),$t(e,t,t.serializeSources,Q().ClosureSignalIndex))}))})),pr((e=>{!function(e){let t=e.serializeReason;if(!0!==t){for(const[,r]of e.serializeReasons){if(!0===r){t=!0;break}t=qt(t,r)}Gt(e,t)}}(e),e.serializeReason&&!0!==e.serializeReason&&(o=o?ye(Un,o,e.serializeReason):[e.serializeReason]);for(const[,t]of e.serializeReasons)!0!==t&&(o=o?ye(Un,o,t):[t])}));const a=(0,j.getProgram)().node.extra;a.returnSerializeReason=a.returnValueExpr&&_t(a.returnValueExpr),a.inputSerializeReasons=o,pr((e=>{let t=0;const r=n.get(e)||[],{id:s,bindings:o}=e,a=({section:e})=>e.id===s;let i,c=0;for(de(pe(o,a),((s,n)=>{for(s.id=(c=n)+t;t<r.length&&(i=r[t]).filter(a).at(-1)===s;)Wn.set(i,{id:n+ ++t,scopeOffset:Vn(i,e)})}));t<r.length;)i=r[t],Wn.set(i,{id:c+ ++t,scopeOffset:Vn(i,e)})})),s.clear(),t.clear(),r.clear()}();const t=e.node.extra,r=e.node.params[0].extra?.binding;r&&we(r)&&(t.domExports.input=wn(r,e))}},translate:{enter(e){if(gn=K()?_("scope"):null,K()&&_("clean"),"hydrate"===X().output){const t=e.hub.file,r=new Set([(0,ve.resolveRelativePath)(t,t.opts.filename)]);return Ee.visit(t,t,(function e(s){if(!r.has(s)){r.add(s);const n=(0,ve.loadFileForImport)(t,s);n&&Ee.visit(n,t,(r=>e(function(e,t,r){return t===e?(0,ve.resolveRelativePath)(t,r):(0,ve.resolveRelativePath)(e,"."===r[0]?xe.default.join(t.opts.filename,"..",r):r)}(t,n,r))))}})),e.node.body=Ee.build(t),void e.skip()}},exit(e){if(Z()?Ur.translate.exit(e):bn.translate.exit(e),e.node.extra?.needsCompat){const t=vt(),r=[void 0];for(const s of e.node.body)"ImportDeclaration"===s.type&&s.source.value===t?r[0]=s:r.push(s);r[0]??=he.types.importDeclaration([],he.types.stringLiteral(t)),e.node.body=r}}}};function xn(e,t){const r=me(Un,e,t);if(-1===r)throw new Error("Unable to resolve serialize reason against input");return r}function wn(e,t){const r={id:e.export??=U(e.name),binding:e,props:void 0};if(!e.aliases.size&&!e.downstreamExpressions.size){r.props={};for(const[s,n]of e.propertyAliases)r.props[s]=wn(n,t)}return r}function Sn(e,t){const r=e.depth,s=be.types.objectPattern([]);let n;return de(t,(t=>{const o=t.name;if(!dt(o))return;const a=so(t),i=a===o;let c=s;if(t.section!==e){n||(n=[s]);const e=r-t.section.depth;let o=n.length,a=n[o-1];for(;o<=e;o++){const e=be.types.objectPattern([]);a.properties.push(be.types.objectProperty(be.types.identifier(ee().Owner),e)),n.push(e),a=e}c=n[e]}c.properties.push(be.types.objectProperty(ut(a),be.types.identifier(o),!1,i))})),s}function An(e,t){let r=gn??be.types.identifier("undefined");const s=e.depth-t.depth;for(let e=0;e<s;e++)r=be.types.memberExpression(r,be.types.identifier(ee().Owner));if(s<0)throw new Error("Unable to find scope for reference.");return r}function kn(e,t){const r=ut(so(t));return be.types.memberExpression(An(e,t.section),r,"Identifier"!==r.type)}function En(e,t){return e.start=t.start,e.loc=t.loc,e.end=t.end,e}var Tn=Symbol("hoist is invoked"),Mn=Symbol("branch serialize reason"),[Cn]=Zt((()=>new Set)),[jn,In]=Zt((()=>0));function Pn(e,t,r,s,n,o=null,a=!1){const i=jn(),c={id:i,name:e,type:t,loc:o,section:r,property:n,declared:a,closureSections:void 0,assignmentSections:void 0,excludeProperties:void 0,serializeSources:void 0,sources:void 0,aliases:new Set,hoists:new Map,propertyAliases:new Map,upstreamAlias:s,downstreamExpressions:new Set,scopeOffset:void 0,export:void 0,nullable:!0};if(n){a&&(s.nullable=!1);const e=s.propertyAliases.get(n);e?(c.property=void 0,c.upstreamAlias=e,e.aliases.add(c)):s.propertyAliases.set(n,c)}else s&&s.aliases.add(c);return In(i+1),Cn().add(c),c}function Ln(e,t,r){const s=e.node.var;if(s){const n=sr(e),o=eo(r);return Fn(s,r?r.type:t,e.scope,n,o,void 0),s.extra?.binding}}function On(e,t,r){const s=e.node.params;if(e.node.body.length&&s.length){const n=sr(e),o=eo(r),a=o||((e.node.extra??={}).binding=Pn(U("params"),t,n,o,void 0));n.params=a;for(let r=0;r<s.length;r++)Fn(s[r],t,e.scope,n,a,r+"");return a}}function Bn(e,t){const r=t.section,s=sr(e),n=function(e,t){let r=e;for(t.depth<e.depth&&(r=t,t=e);r;){if(t===r||!t.parent)return r;(t=t.parent).depth<r.depth&&(r=r.parent)}throw new Error("No common section")}(s,r),o=e.node.extra??={};let a=t.hoists.get(n);if(!a){t.hoists.set(n,a=Pn(U("hoisted_"+e.node.name),5,n,void 0,void 0,t.loc,!0)),r.hoisted=Kn.add(r.hoisted,t);let s=r.parent;for(;s&&s!==n;)s.isHoistThrough=!0,s=s.parent}ae(e)?(o.read=po(a,void 0),o.section=s,o[Tn]=!0):Dn(e,a),s.referencedHoists=Kn.add(s.referencedHoists,a)}function $n(e,t){const r=sr(e);Nn(e),I(e.node,(e=>{if(e.name===t.name){const s=e.extra??={};t.assignmentSections=tr.add(t.assignmentSections,r),s.assignment=t,s.section=r}}))}function Nn(e){const t=se(e);t&&((t.node.extra??={}).referencesScope=!0)}function Fn(e,t,r,s,n,o){switch(e.type){case"Identifier":!function(e,t){const{referencePaths:r,constantViolations:s}=e;for(const e of r){const r=sr(e);gr(t.section,r)?Dn(e,t):Bn(e,t)}for(const e of s)if(e.isUpdateExpression())$n(e.get("argument"),t);else if(e.isAssignmentExpression()&&($n(e.get("left"),t),"="!==e.node.operator)){const r=e.get("left");r.isIdentifier()&&Dn(r,t)}}(r.getBinding(e.name),(e.extra??={}).binding=Pn(e.name,t,s,n,o,e.loc,!0));break;case"ObjectPattern":{const a=(o?n.propertyAliases.get(o):n)||((e.extra??={}).binding=Pn(U(o||"pattern"),t,s,n,o,e.loc));for(const n of e.properties)if("RestElement"===n.type)Fn(n.argument,t,r,s,a,o);else{let e;if("Identifier"===n.key.type)e=n.key.name;else{if("StringLiteral"!==n.key.type)throw new Error("computed keys not supported in object pattern");e=n.key.value}Fn(n.value,t,r,s,a,e)}break}case"ArrayPattern":{const a=(o?n.propertyAliases.get(o):n)||((e.extra??={}).binding=Pn(U(o||"pattern"),t,s,n,o,e.loc));let i=-1;for(const n of e.elements)i++,n&&("RestElement"===n.type?Fn(n.argument,t,r,s,a,o):Fn(n,t,r,s,a,`${i}`));break}case"AssignmentPattern":Fn(e.left,t,r,s,n,o)}}function Dn(e,t){let r=e,s=t,n=t.name;for(;;){const{parent:e}=r;if(!C.types.isMemberExpression(e))break;const t=uo(e);if(void 0===t)break;if(s.propertyAliases.has(t))r=r.parentPath,s=s.propertyAliases.get(t),n=s.name;else{if(ae(r.parentPath)&&!fo(t))break;r=r.parentPath,s=Pn(n+=`_${t.replace(/[^a-zA-Z0-9_$]/g,"_")}`,s.type,s.section,s,t)}}const o=se(r),a=re(o||r),{section:i}=function(e,t,r){const s=e.node.extra??={},n=Xn();return s.section=sr(e),n.set(s,ce(n.get(s),{binding:t,node:r})),s}(a,s,r.node);if(o){const e=Yn(),t=o.node.extra??={};t.section=i,e.set(t,ce(e.get(t),{binding:s,node:r.node}))}}var[Rn]=Zt((()=>new Map));function zn(e,t,r){const s=t.extra??={};return s.section=e,Rn().set(t,r),s}function Un(e,t){return Array.isArray(e)?Array.isArray(t)?_n(e,t):-1:Array.isArray(t)?1:Kn.compare(e,t)}function _n(e,t){const r=e.length,s=r-t.length;if(0!==s)return s;for(let s=0;s<r;s++){const r=Kn.compare(e[s],t[s]);if(0!==r)return r}return 0}function Vn(e,t){let r;for(const s of e)s.section===t&&de(s.sources,(e=>{e.scopeOffset&&(!r||r.id<e.scopeOffset.id)&&(r=e.scopeOffset)}));return r}var Wn=new WeakMap;function qn(e,t){Hn.set(e,t||!1)}var Gn=new WeakSet,Hn=new WeakMap;function Jn(e){if(Gn.has(e))return;switch(Gn.add(e),e.type){case 1:return e.sources=e,void(e.serializeSources=!0);case 2:return e.sources=e,void(e.serializeSources=e)}let t,r=e;for(;t=r.upstreamAlias;)r=t;r!==e?(Gn.has(r)||(Gn.add(r),Zn(r)),e.sources=r.sources,e.serializeSources=r.serializeSources):Zn(e)}function Zn(e){const t=Hn.get(e);if(Hn.delete(e),void 0===t||!0===t)e.serializeSources=!0,e.sources=e;else if(t){const r=new Set;let s,n=!0;de(t,(e=>{mo(e)&&de(e.referencedBindings,(e=>{r.has(e)||(r.add(e),Jn(e),s=Kn.union(s,e.sources),n&&=!0!==e.serializeSources)}))})),s&&(e.sources=s,e.serializeSources=!n||s)}}var Kn=new ie((function(e,t){return(e.section.id-t.section.id||e.type!==t.type&&(0===e.type||0===t.type))&&e.type-t.type||e.id-t.id})),[Xn]=Zt((()=>new Map)),[Yn]=Zt((()=>new Map));function Qn(e){if(Array.isArray(e))for(const t of e)(t.extra??={}).pruned=!0;else(e.extra??={}).pruned=!0}function eo(e){return e&&(e.property?e:e.upstreamAlias||e)}function to(e,t=[]){if(e.arguments)for(const r of e.arguments)t.push(r);for(const r of e.attributes)t.push(r.value);for(const r of e.body.attributeTags?e.body.body:e.attributeTags)switch(r.type){case"MarkoTag":to(r,t);break;case"MarkoScriptlet":for(const e of r.body)t.push(e)}return t}function ro(e,t){return Y()?C.types.numericLiteral(e.id):C.types.stringLiteral(e.name+(t||0===e.type?`/${e.id}`:""))}function so(e,t){return Y()?e.id+"":e.name+(t||0===e.type?`/${e.id}`:"")}function no(e){return e.sectionAccessor?e.sectionAccessor.prefix+so(e.sectionAccessor.binding):Q().ClosureScopes+e.id}function oo(e){const t=no(e);return t?"number"==typeof t?C.types.numericLiteral(t):C.types.stringLiteral(t):void 0}function ao(e){const{extra:t}=e;if(!t)return;let r,{binding:s,read:n}=t;if(n&&(void 0===n.props?(s=n.binding,n=void 0):s=void 0),s)"Identifier"===e.type?5===s.type?r=e.extra?.[Tn]?C.types.callExpression(Fs(s),[An(e.extra.section,s.section)]):C.types.identifier(so(s)):s.name!==e.name&&(e.name=s.name):r=C.types.identifier(s.name);else if(n&&(r=mt(C.types.identifier(n.binding.name),Array.isArray(n.props)?n.props[0]:n.props),Array.isArray(n.props)))for(let e=1;e<n.props.length;e++)r=mt(r,n.props[e]);return r&&En(r,e)}function io(e,t){let r=!t.downstreamExpressions.size;t.hoists.size&&(r=!1);for(const s of t.aliases)io(e,s)?t.aliases.delete(s):r=!1;for(const[s,n]of t.propertyAliases)io(e,n)?t.propertyAliases.delete(s):r=!1;return r&&e.delete(t),r}function co(e,t,r){let s;if(Array.isArray(t))for(const e of t){let{binding:r}=e;if(e.node){const s=(e.node.extra??={}).read??=lo(t,r,void 0);({binding:r}=(e.node.extra??={}).read=s)}s=Kn.add(s,r)}else t&&(t.node&&((t.node.extra??={}).read=po(t.binding,void 0)),s=t.binding);if(Array.isArray(s)){const t=r.get(e.section)||[],n=fe(_n,t,s);n?s=n:r.set(e.section,ye(_n,t,s))}return s}function lo(e,t,r){const{upstreamAlias:s}=t;if(s&&Array.isArray(e)){const o=(n=t).property??n.upstreamAlias?.property,a=void 0===o?r:ce(r,o);for(const{binding:r}of e)if(r!==t){let t=s;for(;t;){if(r===t)return lo(e,t,a);t=t.upstreamAlias}}}var n;return po(t,r)}function po(e,t){return{binding:e,props:t}}function uo(e){switch(e.property.type){case"StringLiteral":return e.property.value;case"NumericLiteral":return""+e.property.value;case"Identifier":if(e.computed)return;return e.property.name}}function fo(e){return/^on[-A-Z][a-zA-Z0-9_$]|[a-zA-Z_$][a-zA-Z0-9_$]*Change$/.test(e)}function mo(e){return!(!e||e.pruned||!e.section)}function yo(e){return mo(e)&&void 0!==e.assignment}function go(e){return mo(e)&&void 0!==e.registerId}var bo=Symbol("await tag dom binding"),ho={analyze(e){(0,S.assertNoVar)(e),(0,S.assertNoArgs)(e),g(e),(0,S.assertNoAttributeTags)(e);const{node:t}=e,r=e.get("body"),s=sr(e),[n]=t.attributes;if((e.node.extra??={})[bo]=Pn("#text",0,s),!n)throw e.get("name").buildCodeFrameError("The `await` tag requires a value.");if(t.attributes.length>1||!w.types.isMarkoAttribute(n)||"value"!==n.name)throw e.get("name").buildCodeFrameError("The `await` tag only supports the `value` attribute.");if(!t.body.body.length)throw e.get("name").buildCodeFrameError("The `await` tag requires body content.");if(t.body.params.length&&(t.body.params.length>1||w.types.isSpreadElement(t.body.params[0])))throw e.get("name").buildCodeFrameError("The `await` tag only supports a single parameter.");const o=rr(r),a=T(n.value);sr(e);const i=On(r,3);i&&qn(i,a),o.upstreamExpression=n.value.extra},translate:Lr({html:{enter(e){const t=nr(e.get("body"));t?(cr(t,!0),ps(e)):e.remove()},exit(e){const{node:t}=e,[r]=t.attributes,s=t.extra[bo],n=e.get("body"),o=or(e),a=nr(n),i=a&&Ft(a);ds(e),an(n),e.replaceWith(w.types.expressionStatement(bt("fork",ar(o),ro(s),r.value,w.types.arrowFunctionExpression(t.body.params,ws(t.body.body)),i?!0===i?void 0:zr(i):w.types.numericLiteral(0))))[0].skip()}},dom:{enter(e){const t=nr(e.get("body"));t?(cr(t,!0),rs(e,37),ts(e)):e.remove()},exit(e){const{node:t}=e,r=t.extra[bo],s=or(e),n=nr(e.get("body")),o=Rs(s,r,"await");o.build=()=>bt("awaitTag",ro(r),w.types.identifier(n.name)),Ks(s,n.upstreamExpression?.referencedBindings,o,e.node.attributes[0].value),e.remove()}}}),attributes:{},autocomplete:[{description:"Use to consume asynchronous an data.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#await"}],types:f.name+"/tag-types/await.d.marko"},vo=r("../../browser-shims/compiler/index.js"),xo=r("../../browser-shims/compiler/babel-utils.js"),wo={parse(e){const{node:t,hub:{file:r}}=e,s=t.rawValue,n=s.replace(/^client\s*/,"").trim(),o=t.name.start+(s.length-n.length);let a=(0,xo.parseStatements)(r,n,o,o+n.length);1===a.length&&vo.types.isBlockStatement(a[0])&&(a=a[0].body),e.replaceWith(vo.types.markoScriptlet(a,!0,"client"))},parseOptions:{statement:!0,rawOpenTag:!0},autocomplete:[{displayText:"client <statement>",description:"A JavaScript statement which is only evaluated once your template is loaded on the client.",descriptionMoreURL:"https://markojs.com/docs/syntax/#client-javascript"}]},So=r("../../browser-shims/compiler/index.js"),Ao=r("../../browser-shims/compiler/babel-utils.js"),ko=r("../../browser-shims/compiler/index.js");function Eo(e,t,r="const"){const{node:{var:s}}=e;s&&e.insertBefore(ko.types.variableDeclaration(r,[ko.types.variableDeclarator(s,t)]))}var To={analyze(e){(0,Ao.assertNoArgs)(e),(0,Ao.assertNoParams)(e),b(e);const{node:t}=e,[r]=t.attributes;if(!t.var)throw e.get("name").buildCodeFrameError("The `const` tag requires a tag variable.");if(!r)throw e.get("name").buildCodeFrameError("The `const` tag requires a value.");if(t.attributes.length>1||!So.types.isMarkoAttribute(r)||!r.default&&"value"!==r.name)throw e.get("name").buildCodeFrameError("The `const` tag only supports the `value` attribute.");const s=T(r.value),n=So.types.isIdentifier(r.value)?e.scope.getBinding(r.value.name)?.identifier.extra?.binding:void 0;n&&(s.pruned=!0);const o=Ln(e,4,n);o&&(s.nullable||(o.nullable=!1),qn(o,s))},translate:{exit(e){const{node:t}=e,[r]=t.attributes,{value:s}=r;if(K()){const r=or(e),n=t.var.extra?.binding;if(n&&!n.upstreamAlias){const e=zs(n);Ks(r,s.extra?.referencedBindings,e,s)}}else Eo(e,s);e.remove()}},parseOptions:{openTagOnly:!0},attributes:{},autocomplete:[{description:"Use to create an constant binding.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#const"}],types:f.name+"/tag-types/const.d.marko"},Mo=r("../../browser-shims/compiler/index.js"),Co=r("../../browser-shims/compiler/babel-utils.js"),jo={analyze(e){const[t]=e.node.attributes;if((0,Co.assertNoVar)(e),(0,Co.assertNoArgs)(e),(0,Co.assertNoParams)(e),b(e),e.node.attributes.length>1||1===e.node.attributes.length&&(!Mo.types.isMarkoAttribute(t)||!t.default&&"value"!==t.name))throw e.get("name").buildCodeFrameError("The `debug` tag only supports the `value` attribute.")},translate:{exit(e){const t=or(e),[r]=e.node.attributes,s=r?.value.extra?.referencedBindings,n=En(Mo.types.debuggerStatement(),e.node);Z()?e.insertBefore(n):Hs("render",t,s,n),e.remove()}},parseOptions:{openTagOnly:!0},attributes:{},autocomplete:[{description:"Debug on value change.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#debug"}],types:f.name+"/tag-types/debug.d.marko"},Io=(r("../../browser-shims/compiler/index.js"),r("../../browser-shims/compiler/babel-utils.js")),Po=r("../../browser-shims/compiler/index.js"),Lo=r("../../browser-shims/compiler/babel-utils.js"),Oo=new WeakMap;function Bo(e){let t=Oo.get(e);return t||(t=U(e.name),Oo.set(e,t)),Po.types.identifier(t)}function $o(e){if(e.node.extra?.attributeTags)return e.node.extra.attributeTags;const t=e.node.body.attributeTags?e.get("body").get("body"):e.get("attributeTags");if(!t.length)return;const r=(e.node.extra??={}).attributeTags={},s={},n=new Map;for(const e of t)if(e.isMarkoTag())if((0,Lo.isAttributeTag)(e)){const t=Ce(e);r[t]||=No(t,[t]),(s[t]||=[]).push(e),$o(e)}else{const t=(0,Lo.isLoopTag)(e);let o;for(const a of Fo(e,s)){const s=r[a];if(s)if(o){if(o!==s.group)for(const e of s.group)r[e].group=o,o.push(e)}else o=s.group;let i=r[a];i||(i=r[a]=No(a,[]),o=i.group,o.push(a)),i.dynamic=!0,t&&(i.repeated=!0),n.set(e,a)}}for(const[e,t]of n)(e.node.extra??={}).attributeTagGroup=r[t].group;for(const e in s){const t=r[e];if(!t.repeated){const r=s[e];r.length>1&&(t.repeated=!t.dynamic||Do(r))}}return r}function No(e,t){return{name:e.slice(1),dynamic:!1,repeated:!1,group:t}}function Fo(e,t,r=new Set){const s=e.node.body.attributeTags?e.get("body").get("body"):e.get("attributeTags");for(const e of s)if(e.isMarkoTag())if((0,Lo.isAttributeTag)(e)){const s=Ce(e);r.add(s),(t[s]||=[]).push(e),$o(e)}else Fo(e,t,r);return r}function Do(e){let t;const r=new Set;for(const s of e){const e=Tr(s);if(r.has(e)||!Le(e))return!0;const n=Ro(e);if(n&&n!==(t||=n))return!0;r.add(e)}return!1}function Ro(e){if("if"===Ce(e))return e;let t=e.getPrevSibling();for(;t.node;){if(t.isMarkoTag()&&"if"===Ce(t))return t;t=t.getPrevSibling()}}var zo=r("../../browser-shims/compiler/index.js"),Uo=r("../../browser-shims/compiler/babel-utils.js"),_o=r("../../browser-shims/compiler/index.js"),Vo=r("../../browser-shims/compiler/babel-utils.js"),Wo=(r("../../browser-shims/compiler/index.js"),r("../../browser-shims/compiler/babel-utils.js")),qo=r("../../browser-shims/compiler/index.js"),Go=r("../../browser-shims/compiler/babel-utils.js"),Ho=new Set(["background-size","baseline-shift","border-bottom-left-radius","border-bottom-right-radius","border-bottom-width","border-left-width","border-right-width","border-top-left-radius","border-top-right-radius","border-top-width","bottom","column-gap","column-rule-width","column-width","cx","cy","flex-basis","font-size","grid-auto-columns","grid-auto-rows","height","left","letter-spacing","margin-bottom","margin-left","margin-right","margin-top","max-height","max-width","min-height","min-width","offset-distance","outline-offset","outline-width","padding-bottom","padding-left","padding-right","padding-top","perspective","r","right","row-gap","rx","ry","shape-margin","stroke-dashoffset","stroke-width","text-indent","top","vertical-align","width","word-spacing","x","y"]),Jo=Symbol("native tag binding"),Zo=Symbol("skip native tag mark"),Ko=Symbol("node getter id"),Xo=new WeakMap,Yo={transform:{enter(e){if("textarea"===Ce(e)&&e.node.body.body.length){const t=[];for(const r of e.node.body.body){if(!("MarkoText"===r.type||"MarkoPlaceholder"===r.type&&r.escape))throw e.hub.file.hub.buildError(r,"Unexpected content in textarea, only text and placeholders are supported.",SyntaxError);t.push(r.value)}e.node.attributes.push(qo.types.markoAttribute("value",Gr(t)||na())),e.node.body.body=[]}}},analyze:{enter(e){(0,Go.assertNoArgs)(e),(0,Go.assertNoParams)(e),(0,Go.assertNoAttributeTags)(e);const{node:t}=e;if(t.var&&!qo.types.isIdentifier(t.var))throw e.get("var").buildCodeFrameError("Tag variables on native elements cannot be destructured.");const r=Ce(e),s={},{attributes:n}=e.node;let o,a,i,c=!1,l=!1;for(let e=n.length;e--;){const t=n[e],d=t.value.extra??={};if(qo.types.isMarkoAttribute(t)){if(s[t.name]){Qn(t.value);continue}s[t.name]=t,De(t.name)||(p=t.name,/^(?:value|checked(?:Value)?|open)Change/.test(p))?(d.isEffect=!0,l=!0):T(t.value).confident||(c=!0)}else qo.types.isMarkoSpreadAttribute(t)&&(d.isEffect=!0,l=!0,c=!0);a?a.push(t.value):qo.types.isMarkoSpreadAttribute(t)?(a=[t.value],o=Qo(r,s)):i=ce(i,d)}var p;if(function(e,t){const r=[t.open||t.openChange,t.checked||t.checkedChange,t.checkedValue||t.checkedValueChange,t.valueChange].filter(Boolean);if(r.length>1)throw e.get("name").buildCodeFrameError(`The attributes ${r.map((e=>`"${e.name}"`)).join(", ")} are mutually exclusive.`)}(e,s),t.var||l||c){const n=t.extra??={},c=sr(e),p=n[Jo]=Pn("#"+("StringLiteral"===t.name.type?t.name.value:qo.types.toIdentifier(e.get("name"))),0,c);if((0,Go.getProgram)().node.extra.isInteractive||=l,a){if(o&&!o.attrs.every(Boolean)){for(const e of o.attrs)e&&a.push(e.value);o=void 0}zn(c,e.node,a)}else o=Qo(r,s);if(o&&zn(c,o.attrs.find(Boolean).value,o.attrs.map((e=>e?.value))),(l||a)&&jt(c,p),t.var){jt(c,p);for(const r of e.scope.getBinding(t.var.name).referencePaths){const e=sr(r);Nn(r),gr(c,e)?(Tt(e,c,ee().Owner),n[Ko]||ae(r)||(n[Ko]=Qs(c,p.name))):Bn(r,p)}}Lt(c,p,ce(i,n))}}},translate:Lr({html:{enter(e){const t=Ce(e),r=e.node.extra,s=r[Jo],n=(0,Go.getTagDef)(e),o=cs(e),a=or(e);if(r.tagNameNullable&&ps(e),e.node.var){const t=r[Ko];Eo(e,bt("nodeRef",t&&ar(a),t&&qo.types.stringLiteral(t)))}const i=s&&ro(s);o`<${e.node.name}`;const c=ea(t,e.node),{staticAttrs:l,staticControllable:p,skipExpression:d}=c;let u,{spreadExpression:f}=c;if(p){const{helper:e,attrs:r}=p;if("select"!==t&&"textarea"!==t){const t=r.map((e=>e?.value));o`${bt(e,ar(a),i,...t)}`}on(a,void 0)}if("select"===t){if(p)Xo.set(e.node,{value:p.attrs[0]?.value||na(),valueChange:p.attrs[1]?.value||na()});else if(f){const t=_("select_input");e.insertBefore(qo.types.variableDeclaration("const",[qo.types.variableDeclarator(t,f)])),Xo.set(e.node,{value:qo.types.memberExpression(t,qo.types.identifier("value")),valueChange:qo.types.memberExpression(t,qo.types.identifier("valueChange"))}),f=t}}else if("textarea"===t){let t,r;if(p)t=p.attrs[0]?.value,r=p.attrs[1]?.value;else if(f){const s=_("textarea_input");e.insertBefore(qo.types.variableDeclaration("const",[qo.types.variableDeclarator(s,f)])),t=qo.types.memberExpression(s,qo.types.identifier("value")),r=qo.types.memberExpression(s,qo.types.identifier("valueChange")),f=s}(t||r)&&(u=bt("controllable_textarea_value",ar(or(e)),ro(s),t,r))}for(const e of l){const{name:r,value:s}=e,{confident:n,computed:i}=s.extra||{},c=s.extra?.referencedBindings;if("option"!==t||"value"!==r)switch(r){case"class":case"style":{const e=`${r}Attr`;n?o`${ht()[e](i)}`:o`${bt(e,s)}`;break}default:n?o`${ht().attr(r,i)}`:De(r)?on(a,c):o`${bt("attr",qo.types.stringLiteral(r),s)}`}else o`${bt("optionValueAttr",s)}`}if(f&&(on(a,r.referencedBindings),d?o`${bt("partialAttrs",f,d,i,ar(a),e.node.name)}`:o`${bt("attrs",f,i,ar(a),e.node.name)}`),n&&n.parseOptions?.openTagOnly)switch(n.htmlType){case"svg":case"math":o`/>`;break;default:o`>`}else o`>`;r.tagNameNullable&&e.insertBefore(qo.types.ifStatement(e.node.name,ls(e)))[0].skip(),u&&o`${u}`},exit(e){const t=e.node.extra,r=t[Jo],s=(0,Go.getTagDef)(e)?.parseOptions?.openTagOnly,n=Xo.get(e.node),o=Ce(e),a=or(e);t.tagNameNullable&&ds(e),n?(cs(e)`</${e.node.name}>`,ds(e),e.insertBefore(qo.types.expressionStatement(bt("controllable_select_value",ar(or(e)),ro(r),n.value,n.valueChange,qo.types.arrowFunctionExpression([],qo.types.blockStatement(e.node.body.body)))))):e.insertBefore(e.node.body.body).forEach((e=>e.skip()));const i=r&&!t[Zo]&&Dt(a,r);s||n||cs(e,!i&&("html"===o||"body"===o))`</${e.node.name}>`,t.tagNameNullable&&e.insertBefore(qo.types.ifStatement(e.node.name,ls(e)))[0].skip(),i&&fs(e,r,i),e.remove()}},dom:{enter(e){const t=Ce(e),r=e.node.extra,s=r[Jo],n=(0,Go.getTagDef)(e),o=cs(e),a=or(e);if(e.node.var){const t=e.node.var.name,n=e.scope.getBinding(t),o=r[Ko];let i;o&&(i=_(`get_${t}`),(0,Go.getProgram)().node.body.push(qo.types.variableDeclaration("const",[qo.types.variableDeclarator(i,bt("nodeRef",qo.types.stringLiteral(o),qo.types.stringLiteral(Q().Getter+ro(s).value)))])));for(const t of n.referencePaths){const r=or(t);gr(a,r)&&(ae(t)?t.parentPath.replaceWith(qo.types.expressionStatement(kn(r,s))):i?t.replaceWith(qo.types.callExpression(i,[An(r,or(e))])):t.replaceWith(qo.types.expressionStatement(qo.types.memberExpression(An(a,r),qo.types.stringLiteral(Q().Getter+ro(s).value),!0))))}}const i=s&&ro(s);i&&rs(e,32),o`<${e.node.name}`;const c=ea(t,e.node),{staticAttrs:l,staticControllable:p,skipExpression:d}=c,{spreadExpression:u}=c;if(p){const{helper:e,attrs:t}=p,r=t.find(Boolean),s=r.value.extra?.referencedBindings,n=t.map((e=>e?.value));Hs("render",a,s,qo.types.expressionStatement(bt(e,gn,i,...n))),Hs("effect",a,void 0,qo.types.expressionStatement(bt(`${e}_effect`,gn,i)))}for(const e of l){const{name:t,value:r}=e,{confident:s,computed:n}=r.extra||{},c=r.extra?.referencedBindings;switch(t){case"class":case"style":{const e=`${t}Attr`;if(s)o`${ht()[e](n)}`;else{const s=qo.types.memberExpression(gn,i,!0),l={staticItems:void 0,dynamicItems:void 0,dynamicValues:void 0};let p;if(ta(r,l),l.dynamicItems)p=qo.types.expressionStatement(bt(e,s,r));else if(l.staticItems&&o`${ht()[e](n)}`,l.dynamicValues){const e=Object.keys(l.dynamicValues);if(1===e.length){const[r]=e,n=l.dynamicValues[r];p=qo.types.expressionStatement(bt(`${t}Item`,s,qo.types.stringLiteral(r),"style"===t&&Ho.has(t)?bt("styleItemValue",n):n))}else{const r=[];for(const s of e){const e=l.dynamicValues[s];r.push(qo.types.objectProperty(ut(s),"style"===t&&Ho.has(t)?bt("styleItemValue",e):e))}p=qo.types.expressionStatement(bt(`${t}Items`,s,qo.types.objectExpression(r)))}}p&&Hs("render",a,c,p)}break}default:s?o`${ht().attr(t,n)}`:De(t)?Hs("effect",a,c,qo.types.expressionStatement(bt("on",qo.types.memberExpression(gn,i,!0),qo.types.stringLiteral(Re(t)),r))):Hs("render",a,c,qo.types.expressionStatement(bt("attr",qo.types.memberExpression(gn,i,!0),qo.types.stringLiteral(t),r)))}}if(u&&(Hs("render",a,r.referencedBindings,d?qo.types.expressionStatement(bt("partialAttrs",gn,i,u,d)):qo.types.expressionStatement(bt("attrs",gn,i,u))),Hs("effect",a,r.referencedBindings,qo.types.expressionStatement(bt("attrsEvents",gn,i)),!1)),n&&n.parseOptions?.openTagOnly)switch(n.htmlType){case"svg":case"math":o`/>`;break;default:o`>`}else o`>`;Qr(e)},exit(e){const t=(0,Go.getTagDef)(e)?.parseOptions?.openTagOnly;e.insertBefore(e.node.body.body).forEach((e=>e.skip())),t||cs(e)`</${e.node.name}>`,es(e),e.remove()}}})};function Qo(e,t){switch(e){case"input":if(t.checked||t.checkedChange)return{special:!1,helper:"controllable_input_checked",attrs:[t.checked,t.checkedChange]};if(t.checkedValue||t.checkedValueChange)return{special:!0,helper:"controllable_input_checkedValue",attrs:[t.checkedValue,t.checkedValueChange,t.value]};if(t.value||t.valueChange)return{special:!1,helper:"controllable_input_value",attrs:[t.value,t.valueChange]};break;case"select":if(t.value||t.valueChange)return{special:!0,helper:"controllable_select_value",attrs:[t.value,t.valueChange]};break;case"textarea":if(t.value||t.valueChange)return{special:!0,helper:"controllable_textarea_value",attrs:[t.value,t.valueChange]};break;case"details":case"dialog":if(t.open||t.openChange)return{special:!1,helper:"controllable_detailsOrDialog_open",attrs:[t.open,t.openChange]}}}function ea(e,t){const r={},{attributes:s}=t,n=new Set;let o,a,i,c,l;for(let t=s.length;t--;){const o=s[t],{value:a}=o;if(qo.types.isMarkoSpreadAttribute(o)){if(!i&&(i=[],l=Qo(e,r),l&&!l.attrs.every(Boolean))){for(const e of l.attrs)e&&(i.push(ft(e.name,e.value)),n.delete(e));l=void 0}i.push(qo.types.spreadElement(a))}else r[o.name]||(r[o.name]=o,i?i.push(ft(o.name,o.value)):n.add(o))}if(i||(l=Qo(e,r),!1!==l?.special||l.attrs[1]||(l=void 0)),l)for(const e of l.attrs)e&&n.delete(e);const p=[...n].reverse();if(i){if(i.reverse(),l)for(const e of l.attrs)e&&(c||=[]).push(ft(e.name,qo.types.numericLiteral(1)));for(const{name:e}of p)(c||=[]).push(ft(e,qo.types.numericLiteral(1)));c&&(a=qo.types.objectExpression(c)),o=ba(i)}return{staticAttrs:p,staticControllable:l,spreadExpression:o,skipExpression:a}}function ta(e,t){switch(e.type){case"ObjectExpression":sa(e,t);break;case"ArrayExpression":ra(e,t);break;default:(t.dynamicItems||=[]).push(e)}}function ra(e,t){for(const r of e.elements)if(r)switch(r.type){case"ArrayExpression":ra(r,t);break;case"ObjectExpression":sa(r,t);break;case"SpreadElement":"ArrayExpression"===r.argument.type?ra(r.argument,t):(t.dynamicItems||=[]).push(r);break;default:{const e=T(r);e.confident?(t.staticItems||=[]).push(e.computed):(t.dynamicItems||=[]).push(r);break}}}function sa(e,t){let r,s;for(const n of e.properties){if("ObjectProperty"!==n.type||n.computed){(s||=[]).push(n);continue}let e;if("Identifier"===n.key.type)e=n.key.name;else{const t=T(n.key);if(!t.confident){(s||=[]).push(n);continue}e=t.computed+""}const o=n.value,a=T(o);a.confident?(r||={})[e]=a.computed:(t.dynamicValues||={})[e]=o}r&&(t.staticItems||=[]).push(r),s&&(t.dynamicItems||=[]).push(qo.types.objectExpression(s))}function na(){return qo.types.unaryExpression("void",qo.types.numericLiteral(0))}var oa=Symbol("only child in parent"),aa=Symbol("potential only child node ref");function ia(e,t=1){const r=e.node.extra;if(void 0!==r[oa])return r[oa];const s=Tr(e);return s&&(0,Wo.getTagDef)(s)?.html?r[oa]=e.parent.body.length===t:r[oa]=!1}function ca(e,t,r=1){if(ia(e,r)){const r=Tr(e).node,s=r.name?.value;return(r.extra??={})[Jo]??=Pn("#"+s,0,t)}return(e.node.extra??={})[aa]??=Pn("#text",0,t)}var la={analyze(e){const t=e.node.body.attributeTags;let r;switch((0,Vo.assertNoVar)(e),(0,Vo.assertNoArgs)(e),g(e),pa(e.node)){case"of":r=["of"];break;case"in":r=["in"];break;case"to":r=["to","from","step"];break;default:throw e.buildCodeFrameError("Invalid `for` tag, missing an `of=`, `in=`, `to=` attribute.")}if(t||r.push("by"),(0,Vo.assertAllowedAttributes)(e,r),t)return;const s=e.get("body"),n=rr(s);if(!n)return void Qn(to(e.node));const o=sr(e),a=ca(e,o),i=On(s,3),c=zn(o,e.node,to(e.node));i&&qn(i,c),n.sectionAccessor={binding:a,prefix:Q().LoopScopeMap},n.upstreamExpression=c,n.isBranch=!0},translate:Lr({html:{enter(e){if(e.node.body.attributeTags)return;const t=nr(e.get("body"));t?(cr(t,!0),ia(e)||(rs(e,37),ts(e)),ps(e)):e.remove()},exit(e){if(e.node.body.attributeTags)return;const t=e.get("body"),r=or(e),s=nr(t),{node:n}=e,o=ia(e),a=ca(e,r),i=Te(n),c=pa(n),l=n.body.params,p=[],d=n.body.body,u=null===s.content||s.content.singleChild&&4!==s.content.startType,f=Ft(s,Mn),m=Dt(r,a);ds(e),an(t);const y=ua(c,i),g=f?function(e,t){if(t)switch(e){case"of":return"resumeSingleNodeForOf";case"in":return"resumeSingleNodeForIn";case"to":return"resumeSingleNodeForTo"}else switch(e){case"of":return"resumeForOf";case"in":return"resumeForIn";case"to":return"resumeForTo"}}(c,u):da(c);y.push(_o.types.arrowFunctionExpression(l,_o.types.blockStatement(d))),f&&(m&&o&&(Tr(e).node.extra[Zo]=!0),y.push(i.by||_o.types.numericLiteral(0),ar(r),ro(a),!0===f?!0!==m||o?_o.types.numericLiteral(1):void 0:zr(f),m?!0===m?o?_o.types.numericLiteral(1):void 0:zr(m):_o.types.numericLiteral(0)),o&&y.push(_o.types.numericLiteral(1))),p.push(_o.types.expressionStatement(bt(g,...y)));for(const t of e.replaceWithMultiple(p))t.skip()}},dom:{enter(e){if(e.node.body.attributeTags)return;const t=nr(e.get("body"));t?(cr(t,!0),ia(e)||(rs(e,37),ts(e))):e.remove()},exit(e){if(e.node.body.attributeTags)return;const t=e.get("body"),r=or(e),s=nr(t),{node:n}=e,o=n.extra,{referencedBindings:a}=o,i=ca(e,r);Ts(e,((e,t)=>bt("loopClosure",ro(e),ro(i),t)));const c=pa(n),l=Rs(r,i,"for");l.build=()=>bt(function(e){switch(e){case"of":return"loopOf";case"in":return"loopIn";case"to":return"loopTo"}}(c),ro(i),_o.types.identifier(s.name));const p=n.body.params;l.hasDownstreamIntersections=()=>{for(const e of p){const t=e.extra?.binding;if(t)for(const{referencedBindings:e}of t.downstreamExpressions)if(Rs(s,e).hasDownstreamIntersections())return!0}return!1};const d=Te(n),u=ua(c,d);d.by&&u.push(d.by),Ks(r,a,l,_o.types.arrayExpression(u)),e.remove()}}}),parseOptions:{controlFlow:!0},attributes:{of:{type:"expression",autocomplete:[{description:"Iterates over a list of items."}]},in:{type:"expression",autocomplete:[{description:"Iterates over the keys and values of an object."}]},to:{type:"number",autocomplete:[{description:"Iterates up to the provided number (inclusive)"}]},from:{type:"number",autocomplete:[{description:"Iterates starting from the provided number (inclusive)"}]},step:{type:"number",autocomplete:[{description:"The amount to increment during each interation (with from/to)"}]}},autocomplete:[{snippet:"for|${1:value, index}| of=${3:array}",description:"Use to iterate over lists, object properties, or between ranges.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#iterating-over-a-list"},{snippet:"for|${1:name, value}| in=${3:object}",descriptionMoreURL:"https://markojs.com/docs/core-tags/#iterating-over-an-objects-properties"},{snippet:"for|${1:index}| to=${2:number}",descriptionMoreURL:"https://markojs.com/docs/core-tags/#iterating-between-a-range-of-numbers"}]};function pa(e){for(const t of e.attributes)if("MarkoAttribute"===t.type)switch(t.name){case"of":case"in":case"to":return t.name}}function da(e){switch(e){case"of":return"forOf";case"in":return"forIn";case"to":return"forTo"}}function ua(e,t){switch(e){case"in":return[t.in];case"of":return[t.of];case"to":return[t.to,t.from||_o.types.numericLiteral(0),t.step||_o.types.numericLiteral(1)]}}var fa=new WeakSet;function ma(e,t,r=[],s="content"){const n=new Set,o=[],a=e.node.extra?.attributeTags;if(a){for(const e in a){const s=a[e];va(t,s.name)&&(n.add(s.name),s.dynamic&&(r.push(zo.types.variableDeclaration("let",[zo.types.variableDeclarator(Bo(s))])),o.push(ft(s.name,Bo(s)))))}const i=e.node.body.attributeTags?e.get("body").get("body"):e.get("attributeTags");for(let e=0;e<i.length;e++){const n=i[e];if(n.isMarkoTag())if((0,Uo.isAttributeTag)(n)){const c=a[Ce(n)];if(c.dynamic)e=ga(i,e,a,r,t,s);else{const e=ma(n,t?.[c.name]?.props,r,s);if(c.repeated){const t=xa(c.name,o);t?t.value=bt("attrTags",t.value,ba(e.properties)):o.push(ft(c.name,bt("attrTag",ba(e.properties))))}else o.push(ft(c.name,bt("attrTag",ba(e.properties))))}}else e=ga(i,e,a,r,t,s)}}if(!n.has(s)&&va(t,s)){n.add(s);const t=function(e){const t=e.node.extra?.section;if(t){if(Z()){const r=fr(t);return bt(r?"registerContent":"createContent",zo.types.stringLiteral(Xs(t,"renderer")),zo.types.arrowFunctionExpression(e.node.params,zo.types.blockStatement(e.node.body)),r?ar(or(function(e){let t=e;for(;(0,Uo.isAttributeTag)(t)||(0,Uo.isTransparentTag)(t);)t=Tr(t);return t}(e.parentPath))):void 0)}return zo.types.callExpression(zo.types.identifier(t.name),[gn])}}(e.get("body"));if(t){const e=zo.types.objectProperty(zo.types.identifier(s),t);fa.add(e),o.push(e)}}const{attributes:i}=e.node;for(let e=i.length;e--;){const r=i[e],{value:s}=r;zo.types.isMarkoSpreadAttribute(r)?o.push(zo.types.spreadElement(s)):!n.has(r.name)&&va(t,r.name)&&(n.add(r.name),o.push(ft(r.name,s)))}return o.reverse(),{properties:o,statements:r}}function ya(e){for(const t of e)if(fa.has(t))return t}function ga(e,t,r,s,n,o="content"){const a=e[t];if(a.isMarkoTag())if((0,Uo.isAttributeTag)(a)){const e=r[Ce(a)];if(va(n,e.name)&&e.dynamic){const t=ma(a,n?.[e.name]?.props,s,o);e.repeated?s.push(zo.types.expressionStatement(zo.types.assignmentExpression("=",Bo(e),bt("attrTags",Bo(e),ba(t.properties))))):s.push(zo.types.expressionStatement(zo.types.assignmentExpression("=",Bo(e),bt("attrTag",ba(t.properties)))))}}else switch(Ce(a)){case"if":return function(e,t,r,s,n,o){const a=e[t],i=[];let c=zo.types.ifStatement(wa(a),zo.types.blockStatement(i));s.push(c),ha(a,r,i,n,o);let l=t+1;for(;l<e.length;){const t=e[l];if(t.isMarkoTag())switch(Ce(t)){case"else-if":case"else":{const e=wa(t),s=[];if(ha(t,r,s,n,o),e){c.alternate=c=zo.types.ifStatement(e,zo.types.blockStatement(s)),l++;continue}c.alternate=zo.types.blockStatement(s);break}}break}return l-1}(e,t,r,s,n,o);case"for":return function(e,t,r,s,n,o){const a=e[t],i=[];return ha(a,r,i,n,o),s.push(function(e,t,r,s){return _o.types.expressionStatement(bt(da(e),...ua(e,t),_o.types.arrowFunctionExpression(r,_o.types.blockStatement(s))))}(pa(a.node),Te(a.node),a.node.body.params,i)),t}(e,t,r,s,n,o)}return t}function ba(e){return 1===e.length&&zo.types.isSpreadElement(e[0])?e[0].argument:zo.types.objectExpression(e)}function ha(e,t,r,s,n){const o=e.node.body.attributeTags?e.get("body").get("body"):e.get("attributeTags");for(let e=0;e<o.length;e++)e=ga(o,e,t,r,s,n)}function va(e,t){return!e||!!e[t]}function xa(e,t){for(const r of t)if("ObjectProperty"===r.type)switch(r.key.type){case"StringLiteral":if(r.key.value===e)return r;break;case"Identifier":if(r.key.name===e)return r}return!1}function wa({node:{attributes:e}}){return 1===e.length?e[0].value:void 0}var Sa={analyze(e){if((0,Io.assertNoArgs)(e),!e.node.var)throw e.get("name").buildCodeFrameError("The `define` tag requires a tag variable.");const t=e.get("body"),r=rr(t),s=Ln(e,4);r&&s&&(r.downstreamBinding=s.propertyAliases.get("content")||s),On(t,3),$o(e);const n=zn(sr(e),e.node,to(e.node));s&&qn(s,n)},translate:{enter(e){Z()&&ps(e)},exit(e){const{node:t}=e,r=ma(e);if(Z())ds(e),an(e.get("body")),e.insertBefore(r.statements),Eo(e,ba(r.properties));else{const s=or(e),n=t.extra?.referencedBindings,o=zs(e.get("var").node.extra.binding);r.statements.length&&Hs("render",s,n,r.statements),Ks(s,n,o,ba(r.properties))}e.remove()}},attributes:{},autocomplete:[{description:"Use to create a constant object binding that can be rendered.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#define"}],types:f.name+"/tag-types/define.d.marko"},Aa=r("../../browser-shims/compiler/index.js"),ka=r("../../browser-shims/compiler/babel-utils.js"),Ea={migrate:[e=>{(0,ka.assertNoArgs)(e),(0,ka.assertNoParams)(e),b(e),(0,ka.assertNoAttributeTags)(e),g(e),(0,ka.assertAllowedAttributes)(e,["value"]),(0,ka.diagnosticDeprecate)(e,{label:"The 'effect' tag has been replaced by the 'script' tag.",fix(){const{node:t}=e;e.replaceWith(Aa.types.markoTag(En(Aa.types.stringLiteral("script"),t.name),t.attributes,t.body,t.arguments,t.var,t.attributeTags))}})}],attributes:{},types:f.name+"/tag-types/effect.d.marko"},Ta=r("../../browser-shims/compiler/babel-utils.js"),Ma={parse(e){const{node:t}=e;e.replaceWith((0,Ta.parseStatements)(e.hub.file,t.rawValue,t.start,t.end)[0])},parseOptions:{statement:!0,rawOpenTag:!0},autocomplete:[{displayText:"export <value>"}]},Ca=r("../../browser-shims/compiler/index.js"),ja=r("../../browser-shims/compiler/babel-utils.js"),Ia=Symbol("comment tag binding"),Pa=Symbol("node getter id"),La={analyze(e){(0,ja.assertNoArgs)(e),(0,ja.assertNoParams)(e),(0,ja.assertNoAttributes)(e);const t=e.node.var;let r=!1,s=!1;if(t){if(!Ca.types.isIdentifier(t))throw e.get("var").buildCodeFrameError("The `html-comment` tag variable cannot be destructured.");r=!0;for(const r of e.scope.getBinding(t.name).referencePaths)if(!ae(r)){s=!0;break}}const n=[];for(const t of e.get("body").get("body"))if(t.isMarkoPlaceholder())n.push(t.node.value),r=!0;else if(!t.isMarkoText())throw t.buildCodeFrameError("Invalid child. Only text is allowed inside an html comment.");if(r){const r=sr(e),o=zn(r,e.node,n),a=o[Ia]=Pn("#comment",0,r);s&&(o[Pa]=Qs(r,"comment")),t?jt(r,a):Lt(r,a,o)}e.skip()},translate:{enter(e){const t=e.node.extra,r=t[Ia];if(e.node.var){const s=t[Pa];if(Z())Eo(e,bt("nodeRef",s&&ar(or(e)),s&&Ca.types.stringLiteral(s)));else{const t=e.node.var.name,n=e.scope.getBinding(t).referencePaths;let o;s&&(o=_(`get_${t}`),(0,ja.getProgram)().node.body.push(Ca.types.variableDeclaration("const",[Ca.types.variableDeclarator(o,bt("nodeRef",Ca.types.stringLiteral(s),ro(r)))])));for(const t of n){const s=or(t);ae(t)?t.parentPath.replaceWith(Ca.types.expressionStatement(kn(s,r))):o&&t.replaceWith(Ca.types.callExpression(o,[An(s,or(e))]))}}}r&&rs(e,32),Qr(e),cs(e)`<!--`},exit(e){const t=or(e),r=e.node.extra,s=r[Ia],n=cs(e);if(Z())for(const t of e.node.body.body)Ca.types.isMarkoText(t)?n`${t.value}`:Ca.types.isMarkoPlaceholder(t)&&n`${bt("escapeXML",t.value)}`;else{const t=[],o=[];let a="";for(const r of e.node.body.body)Ca.types.isMarkoText(r)?a+=r.value:Ca.types.isMarkoPlaceholder(r)&&(t.push(Ca.types.templateElement({raw:a})),o.push(r.value),a="");0===o.length?n`${a}`:(t.push(Ca.types.templateElement({raw:a})),Hs("render",or(e),r.referencedBindings,Ca.types.expressionStatement(bt("data",Ca.types.memberExpression(gn,ro(s),!0),Ca.types.templateLiteral(t,o)))))}es(e),n`-->`,s&&fs(e,s,Dt(t,s)),e.remove()}},parseOptions:{text:!0},attributes:{},autocomplete:[{description:"Use to create an html comment that is not stripped from the output.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#html-comment"}]},Oa=r("../../browser-shims/compiler/index.js"),Ba=r("../../browser-shims/compiler/babel-utils.js"),$a=Symbol("script tag node binding"),Na=Symbol("node getter id"),Fa={analyze(e){(0,Ba.assertNoArgs)(e),(0,Ba.assertNoParams)(e);const{node:t}=e;if(t.var&&!Oa.types.isIdentifier(t.var))throw e.get("var").buildCodeFrameError("Tag variables on native elements cannot be destructured.");const r={},{attributes:s}=e.node;let n,o,a=!1,i=!1;for(let e=s.length;e--;){const t=s[e],c=t.value.extra??={};if(Oa.types.isMarkoAttribute(t)){if(r[t.name]){Qn(t.value);continue}r[t.name]=t,De(t.name)?(c.isEffect=!0,a=!0):T(t.value).confident||(i=!0)}else Oa.types.isMarkoSpreadAttribute(t)&&(c.isEffect=!0,a=!0,i=!0);n?n.push(t.value):Oa.types.isMarkoSpreadAttribute(t)?n=[t.value]:o=ce(o,c)}const c=[];let l=!1;for(const t of e.node.body.body)if(Oa.types.isMarkoPlaceholder(t))c.push(t.value),l=!0;else if(!Oa.types.isMarkoText(t))throw e.hub.buildError(t,"Invalid child. Only text is allowed inside an html-script.");if(t.var||a||i||l){const r=t.extra??={},s=sr(e),i=r[$a]=Pn("#script",0,s);if((0,Ba.getProgram)().node.extra.isInteractive||=a,n&&zn(s,e.node,n),c.length>1&&zn(s,c[0],c.slice(1)),(a||n)&&jt(s,i),t.var){jt(s,i);for(const n of e.scope.getBinding(t.var.name).referencePaths){const e=sr(n);Nn(n),gr(s,e)?(Tt(e,s,ee().Owner),r[Na]||ae(n)||(r[Na]=Qs(s,"#script"))):Bn(n,i)}}Lt(s,i,ce(o,r))}},translate:{enter(e){const t=e.node.extra,r=t[$a],s=Z(),n=cs(e),o=or(e);if(e.node.var){const n=t[Na];if(s)Eo(e,bt("nodeRef",n&&ar(o),n&&Oa.types.stringLiteral(n)));else{const t=e.node.var.name,s=e.scope.getBinding(t).referencePaths;let o;n&&(o=_(`get_${t}`),(0,Ba.getProgram)().node.body.push(Oa.types.variableDeclaration("const",[Oa.types.variableDeclarator(o,bt("nodeRef",Oa.types.stringLiteral(n),ro(r)))])));for(const t of s){const s=or(t);ae(t)?t.parentPath.replaceWith(Oa.types.expressionStatement(kn(s,r))):o&&t.replaceWith(Oa.types.callExpression(o,[An(s,or(e))]))}}}const a=r&&ro(r);a&&rs(e,32),n`<script`;const i=function(e){const t={},{attributes:r}=e,s=new Set;let n,o,a,i;for(let e=r.length;e--;){const n=r[e],{value:o}=n;Oa.types.isMarkoSpreadAttribute(n)?(a||(a=[]),a.push(Oa.types.spreadElement(o))):t[n.name]||(t[n.name]=n,a?a.push(ft(n.name,n.value)):s.add(n))}const c=[...s].reverse();if(a){a.reverse();for(const{name:e}of c)(i||=[]).push(ft(e,Oa.types.numericLiteral(1)));i&&(o=Oa.types.objectExpression(i)),n=ba(a)}return{staticAttrs:c,spreadExpression:n,skipExpression:o}}(e.node),{staticAttrs:c,skipExpression:l,spreadExpression:p}=i;for(const e of c){const{name:t,value:r}=e,{confident:i,computed:c}=r.extra||{},l=r.extra?.referencedBindings;switch(t){case"class":case"style":{const e=`${t}Attr`;i?n`${ht()[e](c)}`:s?n`${bt(e,r)}`:Hs("render",o,l,Oa.types.expressionStatement(bt(e,Oa.types.memberExpression(gn,a,!0),r)));break}default:i?n`${ht().attr(t,c)}`:s?De(t)?on(o,l):n`${bt("attr",Oa.types.stringLiteral(t),r)}`:De(t)?Hs("effect",o,l,Oa.types.expressionStatement(bt("on",Oa.types.memberExpression(gn,a,!0),Oa.types.stringLiteral(Re(t)),r))):Hs("render",o,l,Oa.types.expressionStatement(bt("attr",Oa.types.memberExpression(gn,a,!0),Oa.types.stringLiteral(t),r)))}}p&&(s?(on(o,t.referencedBindings),l?n`${bt("partialAttrs",p,l,a,ar(o),Oa.types.stringLiteral("script"))}`:n`${bt("attrs",p,a,ar(o),Oa.types.stringLiteral("script"))}`):(Hs("render",o,t.referencedBindings,l?Oa.types.expressionStatement(bt("partialAttrs",gn,a,p,l)):Oa.types.expressionStatement(bt("attrs",gn,a,p))),Hs("effect",o,t.referencedBindings,Oa.types.expressionStatement(bt("attrsEvents",gn,a)),!1))),n`>`,Qr(e)},exit(e){const t=or(e),r=e.node.extra[$a],s=cs(e),n=ro(r);if(Z())for(const t of e.node.body.body)Oa.types.isMarkoText(t)?s`${t.value}`:Oa.types.isMarkoPlaceholder(t)&&s`${bt("escapeScript",t.value)}`;else{const t=[],r=[];let o,a="";for(const s of e.node.body.body)Oa.types.isMarkoText(s)?a+=s.value:Oa.types.isMarkoPlaceholder(s)&&(o||=s,t.push(Oa.types.templateElement({raw:a})),r.push(s.value),a="");o?(t.push(Oa.types.templateElement({raw:a})),Hs("render",or(e),o.value.extra?.referencedBindings,Oa.types.expressionStatement(bt("textContent",Oa.types.memberExpression(gn,n,!0),Oa.types.templateLiteral(t,r))))):s`${a}`}s`</script>`,r&&fs(e,r,Dt(t,r)),es(e),e.remove()}},"@async":"#html-async","@crossorigin":"#html-crossorigin","@defer":"#html-defer","@integrity":"#html-integrity","@nomodule":"#html-nomodule","@nonce":"#html-nonce","@referrerpolicy":"#html-referrerpolicy","@src":"#html-src","@type":"#html-type","attribute-groups":["html-attributes"],parseOptions:{text:!0,preserveWhitespace:!0}},Da=r("../../browser-shims/compiler/index.js"),Ra=r("../../browser-shims/compiler/babel-utils.js"),za=Symbol("style tag node binding"),Ua=Symbol("node getter id"),_a={analyze(e){(0,Ra.assertNoArgs)(e),(0,Ra.assertNoParams)(e);const{node:t}=e;if(t.var&&!Da.types.isIdentifier(t.var))throw e.get("var").buildCodeFrameError("Tag variables on native elements cannot be destructured.");const r={},{attributes:s}=e.node;let n,o,a=!1,i=!1;for(let e=s.length;e--;){const t=s[e],c=t.value.extra??={};if(Da.types.isMarkoAttribute(t)){if(r[t.name]){Qn(t.value);continue}r[t.name]=t,De(t.name)?(c.isEffect=!0,a=!0):T(t.value).confident||(i=!0)}else Da.types.isMarkoSpreadAttribute(t)&&(c.isEffect=!0,a=!0,i=!0);n?n.push(t.value):Da.types.isMarkoSpreadAttribute(t)?n=[t.value]:o=ce(o,c)}const c=[];let l=!1;for(const t of e.node.body.body)if(Da.types.isMarkoPlaceholder(t))c.push(t.value),l=!0;else if(!Da.types.isMarkoText(t))throw e.hub.buildError(t,"Invalid child. Only text is allowed inside an html-style.");if(t.var||a||i||l){const r=t.extra??={},s=sr(e),i=r[za]=Pn("#style",0,s);if((0,Ra.getProgram)().node.extra.isInteractive||=a,n&&zn(s,e.node,n),c.length>1&&zn(s,c[0],c.slice(1)),(a||n)&&jt(s,i),t.var){jt(s,i);for(const n of e.scope.getBinding(t.var.name).referencePaths){const e=sr(n);Nn(n),gr(s,e)?(Tt(e,s,ee().Owner),r[Ua]||ae(n)||(r[Ua]=Qs(s,"#style"))):Bn(n,i)}}Lt(s,i,ce(o,r))}},translate:{enter(e){const t=e.node.extra,r=t[za],s=Z(),n=cs(e),o=or(e);if(e.node.var){const n=t[Ua];if(s)Eo(e,bt("nodeRef",n&&ar(o),n&&Da.types.stringLiteral(n)));else{const t=e.node.var.name,s=e.scope.getBinding(t).referencePaths;let o;n&&(o=_(`get_${t}`),(0,Ra.getProgram)().node.body.push(Da.types.variableDeclaration("const",[Da.types.variableDeclarator(o,bt("nodeRef",Da.types.stringLiteral(n),ro(r)))])));for(const t of s){const s=or(t);ae(t)?t.parentPath.replaceWith(Da.types.expressionStatement(kn(s,r))):o&&t.replaceWith(Da.types.callExpression(o,[An(s,or(e))]))}}}const a=r&&ro(r);a&&rs(e,32),n`<style`;const i=function(e){const t={},{attributes:r}=e,s=new Set;let n,o,a,i;for(let e=r.length;e--;){const n=r[e],{value:o}=n;Da.types.isMarkoSpreadAttribute(n)?(a||(a=[]),a.push(Da.types.spreadElement(o))):t[n.name]||(t[n.name]=n,a?a.push(ft(n.name,n.value)):s.add(n))}const c=[...s].reverse();if(a){a.reverse();for(const{name:e}of c)(i||=[]).push(ft(e,Da.types.numericLiteral(1)));i&&(o=Da.types.objectExpression(i)),n=ba(a)}return{staticAttrs:c,spreadExpression:n,skipExpression:o}}(e.node),{staticAttrs:c,skipExpression:l,spreadExpression:p}=i;for(const e of c){const{name:t,value:r}=e,{confident:i,computed:c}=r.extra||{},l=r.extra?.referencedBindings;switch(t){case"class":case"style":{const e=`${t}Attr`;i?n`${ht()[e](c)}`:s?n`${bt(e,r)}`:Hs("render",o,l,Da.types.expressionStatement(bt(e,Da.types.memberExpression(gn,a,!0),r)));break}default:i?n`${ht().attr(t,c)}`:s?De(t)?on(o,l):n`${bt("attr",Da.types.stringLiteral(t),r)}`:De(t)?Hs("effect",o,l,Da.types.expressionStatement(bt("on",Da.types.memberExpression(gn,a,!0),Da.types.stringLiteral(Re(t)),r))):Hs("render",o,l,Da.types.expressionStatement(bt("attr",Da.types.memberExpression(gn,a,!0),Da.types.stringLiteral(t),r)))}}p&&(s?(on(o,t.referencedBindings),l?n`${bt("partialAttrs",p,l,a,ar(o),Da.types.stringLiteral("style"))}`:n`${bt("attrs",p,a,ar(o),Da.types.stringLiteral("style"))}`):(Hs("render",o,t.referencedBindings,l?Da.types.expressionStatement(bt("partialAttrs",gn,a,p,l)):Da.types.expressionStatement(bt("attrs",gn,a,p))),Hs("effect",o,t.referencedBindings,Da.types.expressionStatement(bt("attrsEvents",gn,a)),!1))),n`>`,Qr(e)},exit(e){const t=or(e),r=e.node.extra[za],s=cs(e),n=ro(r);if(Z())for(const t of e.node.body.body)Da.types.isMarkoText(t)?s`${t.value}`:Da.types.isMarkoPlaceholder(t)&&s`${bt("escapeStyle",t.value)}`;else{const t=[],r=[];let o,a="";for(const s of e.node.body.body)Da.types.isMarkoText(s)?a+=s.value:Da.types.isMarkoPlaceholder(s)&&(o||=s,t.push(Da.types.templateElement({raw:a})),r.push(s.value),a="");o?(t.push(Da.types.templateElement({raw:a})),Hs("render",or(e),o.value.extra?.referencedBindings,Da.types.expressionStatement(bt("textContent",Da.types.memberExpression(gn,n,!0),Da.types.templateLiteral(t,r))))):s`${a}`}s`</style>`,r&&fs(e,r,Dt(t,r)),es(e),e.remove()}},"@disabled":"#html-disabled","@media":"#html-media","@nonce":"#html-nonce","@type":"#html-type","attribute-groups":["html-attributes"],parseOptions:{text:!0,preserveWhitespace:!0}},Va=r("../../browser-shims/compiler/index.js"),Wa=r("../../browser-shims/compiler/babel-utils.js"),qa={analyze(e){(0,Wa.assertNoArgs)(e),(0,Wa.assertNoParams)(e),(0,Wa.assertNoAttributes)(e),b(e),(0,Wa.assertNoAttributeTags)(e);const{node:t}=e;if(!t.var)throw e.get("name").buildCodeFrameError("The `id` tag requires a tag variable.");if(!Va.types.isIdentifier(t.var))throw e.get("var").buildCodeFrameError("The `id` tag cannot be destructured");const r=Ln(e,4);r&&qn(r,!1)},translate:{exit(e){const{node:t}=e,r=Z()?bt("nextTagId"):bt("nextTagId",gn);if(Z())e.replaceWith(Va.types.variableDeclaration("const",[Va.types.variableDeclarator(t.var,r)]));else{const s=zs(t.var.extra.binding);Ks(or(e),void 0,s,r),e.remove()}}},parseOptions:{openTagOnly:!0},attributes:{},autocomplete:[{displayText:"id/<name>",description:"Use to create a unique identifier.",snippet:"id/${1:name}",descriptionMoreURL:"https://markojs.com/docs/core-tags/#id"}],types:f.name+"/tag-types/id.d.marko"},Ga=r("../../browser-shims/compiler/index.js"),Ha=r("../../browser-shims/compiler/babel-utils.js"),Ja=r("../../browser-shims/compiler/index.js"),Za=new WeakMap,Ka={analyze(e){if(function(e){switch((0,Ha.assertNoVar)(e),(0,Ha.assertNoArgs)(e),(0,Ha.assertNoParams)(e),function(e){if(!e.node.body.body.length&&!e.node.attributeTags.length)throw e.get("name").buildCodeFrameError(`The \`${Ce(e)}\` tag requires body content.`)}(e),g(e),Ce(e)){case"if":ei(e);break;case"else-if":ei(e),Qa(e);break;case"else":!function(e){const{node:t}=e,[r]=t.attributes;if(t.attributes.length>1||r&&"if"!==r.name){const r=t.attributes[1].loc?.start,s=t.attributes[t.attributes.length-1].loc?.end,n=`The \`${Ce(e)}\` tag only supports an \`if=\` attribute.`;throw null==r||null==s?e.get("name").buildCodeFrameError(n):e.hub.buildError({loc:{start:r,end:s}},n,Error)}}(e),Qa(e)}}(e),!e.node.body.attributeTags&&si(e)){const t=ti(e),[r]=t[0],s=sr(r),n=r.node.extra??={},o=[],a={binding:ca(r,s,t.length),prefix:Q().ConditionalScope};let i=!0;for(const[e,r]of t)r&&(i&&=null===r.content||r.content?.singleChild&&4!==r.content.startType,r.isBranch=!0,r.upstreamExpression=n,r.sectionAccessor=a),e.node.attributes.length&&o.push(e.node.attributes[0].value);zn(s,r.node,o),n.singleNodeOptimization=i}},translate:Lr({html:{enter(e){if(e.node.body.attributeTags)return;const t=nr(e.get("body"));ni(e)&&!ia(e)&&(rs(e,37),ts(e)),ps(e),t&&cr(t,!0)},exit(e){if(e.node.body.attributeTags)return;const t=e.get("body");if(nr(t)&&(ds(e),an(t)),si(e)){const t=ti(e),[s]=t[0],n=or(s),o=s.node.extra.singleNodeOptimization,a=ca(s,n),i=ia(s),c=Dt(n,a),l=e.getNextSibling();let p,d;for(let e=t.length;e--;){const[s,n]=t[e],o=s.node.body.body;if(n){const t=Ft(n,Mn);t&&(!0!==p&&(p=!0===t||(p?ye(Un,p,t):[t])),o.push(Ga.types.returnStatement(Ga.types.numericLiteral(e))))}const[a]=s.node.attributes,i=(r=o,Array.isArray(r)?1===r.length?r[0]:Ja.types.blockStatement(r):r);d=a?Ga.types.ifStatement(a.value,i,d):i,s.remove()}if(p){i&&c&&(Tr(s).node.extra[Zo]=!0);const e=Ga.types.arrowFunctionExpression([],Ga.types.blockStatement([d]));d=Ga.types.expressionStatement(o?bt("resumeSingleNodeConditional",e,ar(n),ro(a),!0===p?!0!==c||i?Ga.types.numericLiteral(1):void 0:ri(p),c?!0===c?i?Ga.types.numericLiteral(1):void 0:zr(c):Ga.types.numericLiteral(0),i&&Ga.types.numericLiteral(1)):bt("resumeConditional",e,ar(n),ro(a),!0===p?!0===c?void 0:Ga.types.numericLiteral(1):ri(p),c?!0===c?void 0:zr(c):Ga.types.numericLiteral(0)))}l.insertBefore(d)}var r}},dom:{enter(e){if(e.node.body.attributeTags)return;const t=nr(e.get("body"));t&&cr(t,!0),ni(e)&&!ia(e)&&(rs(e,37),ts(e))},exit(e){if(!e.node.body.attributeTags&&si(e)){const t=ti(e),[r]=t[0],s=or(r),n=t[0][0].node.extra,o=ca(r,s),a=[];let i=Ga.types.numericLiteral(t.length);for(let e=t.length;e--;){const[r,s]=t[e],[n]=r.node.attributes,c=Ga.types.numericLiteral(s?e:-1);s&&(a.push(Ga.types.identifier(s.name)),Ts(r,((t,r)=>bt("conditionalClosure",ro(t),ro(o),Ga.types.numericLiteral(e),r)))),r.remove(),i=n?Ga.types.conditionalExpression(n.value,c,i):c}const c=Rs(s,o,"if");c.build=()=>bt("conditional",ro(o),...a.reverse()),Ks(s,n.referencedBindings,c,i)}}}}),parseOptions:{controlFlow:!0},autocomplete:[{snippet:"if=${1:condition}",description:"Use to display content only if the condition is met.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#if-else-if-else"}]},Xa={...Ka,autocomplete:[{snippet:"else-if=${1:condition}",description:"Use after an <if> or <else-if> tag to display content if those conditions do not match and this one does.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#if-else-if-else"}]},Ya={...Ka,autocomplete:[{description:"Use after an <if> or <else-if> tag to display content if those conditions do not match.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#if-else-if-else"}]};function Qa(e){let t=e.getPrevSibling();for(;t.node&&t.isMarkoComment();)t=t.getPrevSibling();if(!Le(t)||"else"!==Ce(t)&&!t.node.attributes.length)throw e.buildCodeFrameError(`The \`<${Ce(e)}>\` must have a preceding \`<if=cond>\`, \`<else-if=cond>\`, or \`<else if=cond>\`.`)}function ei(e){const{node:t}=e,[r]=t.attributes;if(!Ga.types.isMarkoAttribute(r)||!r.default)throw e.get("name").buildCodeFrameError(`The \`${Ce(e)}\` tag requires a value.`);if(t.attributes.length>1){const r=t.attributes[1].loc?.start,s=t.attributes[t.attributes.length-1].loc?.end,n=`The \`${Ce(e)}\` tag only supports the \`value\` attribute.`;throw null==r||null==s?e.get("name").buildCodeFrameError(n):e.hub.buildError({loc:{start:r,end:s}},n,Error)}}function ti(e){let t=Za.get(e);if(!t){let r=e;t=[];do{for(Za.set(r,t),t.push([r,rr(r.get("body"))]);(r=r.getNextSibling()).isMarkoComment(););}while(Pe(r,"else")||Pe(r,"else-if"))}return t}function ri(e){let t=zr(e[0]);for(let r=1;r<e.length;r++)t=Ga.types.logicalExpression("||",t,zr(e[r]));return t}function si(e){const t=ti(e);return t[t.length-1][0]===e}function ni(e){return Pe(e,"if")}var oi=r("../../browser-shims/compiler/babel-utils.js"),ai={parse(e){const{node:t}=e;e.replaceWith((0,oi.parseStatements)(e.hub.file,t.rawValue,t.start,t.end)[0])},parseOptions:{statement:!0,rawOpenTag:!0},autocomplete:[{displayText:'import <scope> from "<path>"',description:"Use to import external modules, follows the same syntax as JavaScript imports.",snippet:'import ${2} from "${1:path}"',descriptionMoreURL:"https://markojs.com/docs/syntax/#importing-external-files"}]},ii=r("../../browser-shims/compiler/index.js"),ci=r("../../browser-shims/compiler/babel-utils.js"),li={analyze(e){const{node:t}=e,r=t.var;let s,n;for(const r of t.attributes)if(ii.types.isMarkoAttribute(r))if("value"===r.name)s=r;else{if("valueChange"!==r.name){const t=r.loc?.start,s=r.loc?.end,n="The `let` tag only supports the `value` attribute and its change handler.";throw null==t||null==s?e.get("name").buildCodeFrameError(n):e.hub.buildError({loc:{start:t,end:s}},n,Error)}n=r}if((0,ci.assertNoArgs)(e),(0,ci.assertNoParams)(e),b(e),g(e),!r)throw e.get("name").buildCodeFrameError("The `let` tag requires a tag variable.");if(!ii.types.isIdentifier(r))throw e.get("var").buildCodeFrameError("The `let` tag variable cannot be destructured.");if(n&&(0,ci.computeNode)(n.value))throw e.get("attributes").find((e=>e.node===n)).get("value").buildCodeFrameError("The `let` tag `valueChange` attribute must be a function.");const o=sr(e),a=Ln(e,1);qn(a,zn(o,e.node,[s?.value,n?.value])),n&&jt(o,a,Q().TagVariableChange)},translate:{exit(e){const{node:t}=e,r=t.var,s=t.attributes.find((e=>ii.types.isMarkoAttribute(e)&&(e.default||"value"===e.name)))??ii.types.markoAttribute("value",ii.types.identifier("undefined")),n=t.attributes.find((e=>ii.types.isMarkoAttribute(e)&&"valueChange"===e.name)),o=or(e),a=r.extra.binding;if(K()){const t=zs(a,"state");Ks(o,e.node.extra.referencedBindings,t,s.value),n&&(t.extraArgs=[n.value]),t.buildAssignment=(e,r)=>{const s=An(e,t.section);return ii.types.callExpression(t.identifier,[s,r])}}else Eo(e,s.value,"let"),n&&Cs(o,a,n.value,Q().TagVariableChange);e.remove()}},parseOptions:{openTagOnly:!0},attributes:{},autocomplete:[{description:"Use to create a mutable binding.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#let"}],types:f.name+"/tag-types/let.d.marko"},pi=r("../../browser-shims/compiler/index.js"),di=r("../../browser-shims/compiler/babel-utils.js"),ui=Symbol("lifecycle attrs reference"),fi={analyze(e){(0,di.assertNoArgs)(e),(0,di.assertNoVar)(e),(0,di.assertNoParams)(e),b(e);const{node:t}=e,r=sr(e);if(zn(r,e.node,to(e.node))[ui]=Pn(U("lifecycle"),4,r),0===t.attributes.length)throw e.get("name").buildCodeFrameError("The `lifecycle` tag requires at least one attribute.");for(const r of t.attributes){if(pi.types.isMarkoSpreadAttribute(r))throw e.get("name").buildCodeFrameError("The `lifecycle` tag does not support `...spread` attributes.");(r.value.extra??={}).isEffect=!0}((0,di.getProgram)().node.extra??={}).isInteractive=!0},translate:{exit(e){const{node:t}=e,r=or(e),s=t.extra,{referencedBindings:n}=s,o=s[ui];if(K()){const t=ma(e);t.statements.push(pi.types.expressionStatement(bt("lifecycle",gn,ro(o),ba(t.properties)))),Hs("effect",r,n,t.statements)}else on(r,n);e.remove()}},parseOptions:{openTagOnly:!0},attributes:{},autocomplete:[{description:"Use to create a side effects.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#effect"}],types:f.name+"/tag-types/lifecycle.d.marko"},mi=r("../../browser-shims/compiler/index.js"),yi=r("../../browser-shims/compiler/babel-utils.js"),gi={analyze(e){const[t]=e.node.attributes;if((0,yi.assertNoArgs)(e),(0,yi.assertNoVar)(e),(0,yi.assertNoParams)(e),b(e),!t)throw e.get("name").buildCodeFrameError("The `log` tag requires a value.");if(e.node.attributes.length>1||!mi.types.isMarkoAttribute(t)||!t.default&&"value"!==t.name)throw e.get("name").buildCodeFrameError("The `log` tag only supports the `value` attribute.")},translate:{exit(e){const t=or(e),[r]=e.node.attributes,{value:s}=r,n=s.extra?.referencedBindings,o=mi.types.expressionStatement(mi.types.callExpression(mi.types.memberExpression(mi.types.identifier("console"),mi.types.identifier("log")),[s]));Z()?e.insertBefore(o):Hs("render",t,n,o),e.remove()}},parseOptions:{openTagOnly:!0},attributes:{},autocomplete:[{description:"Use to log a value to the console.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#log"}],types:f.name+"/tag-types/log.d.marko"},bi=r("../../browser-shims/compiler/index.js"),hi=r("../../browser-shims/compiler/babel-utils.js"),vi=" For a native html `script` tag use the `html-script` core tag instead.",xi={parse(e){const{node:t}=e,{body:r}=t.body;if(r.length){let s="";for(const t of r){if("MarkoText"!==t.type)throw e.hub.file.hub.buildError(t,"Unexpected content in `script` tag. Only javascript and typescript is supported."+vi,SyntaxError);s+=t.value}const n=r[0]?.start,o=r[r.length-1]?.end,a=(0,hi.parseStatements)(e.hub.file,s,n,o),i=bi.types.arrowFunctionExpression([],bi.types.blockStatement(a),D(a,wi));t.attributes.push(bi.types.markoAttribute("value",i)),t.body.body=[]}},analyze(e){const{node:t}=e;if((0,hi.assertNoArgs)(e),(0,hi.assertNoParams)(e),b(e),(0,hi.assertNoAttributeTags)(e),t.var)throw e.hub.buildError(t.var,"The `script` tag does not support a tag variable reference."+vi);let r=!1;for(const s of t.attributes){if("MarkoAttribute"!==s.type||"value"!==s.name)throw e.hub.buildError(s,"The `script` tag does not support html attributes."+vi);if(r)throw e.hub.buildError(s,"Invalid duplicate value attribute.");r=!0,(s.value.extra??={}).isEffect=!0,((0,hi.getProgram)().node.extra??={}).isInteractive=!0}r||Qn(to(t))},translate:{exit(e){const{node:t}=e,[r]=t.attributes;if(!r)return void e.remove();const s=or(e),{value:n}=r,o=n.extra?.referencedBindings;if(K()){const{value:e}=r,t=bi.types.isFunctionExpression(e)||bi.types.isArrowFunctionExpression(e);let n=null;if(t&&!e.async&&!e.generator)if(bi.types.isBlockStatement(e.body)){let t=!1;for(const r of e.body.body)if(bi.types.isDeclaration(r)){t=!0;break}n=t?e.body:e.body.body}else n=bi.types.expressionStatement(e.body);Hs("effect",s,o,n||bi.types.expressionStatement(bi.types.callExpression(e,t?[]:[gn])))}else on(s,o);e.remove()}},html:!1,parseOptions:{text:!0,preserveWhitespace:!0},attributes:{},autocomplete:[{description:"Use to create a side effects.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#script"}],types:f.name+"/tag-types/script.d.marko"};function wi(e){switch(e.type){case"ForOfStatement":return e.await;case"FunctionDeclaration":case"FunctionExpression":case"ArrowFunctionExpression":case"ClassMethod":case"ObjectMethod":case"ClassPrivateMethod":return N;case"AwaitExpression":return!0;default:return!1}}var Si=r("../../browser-shims/compiler/index.js"),Ai=r("../../browser-shims/compiler/babel-utils.js"),ki={parse(e){const{node:t,hub:{file:r}}=e,s=t.rawValue,n=s.replace(/^server\s*/,"").trim(),o=t.name.start+(s.length-n.length);let a=(0,Ai.parseStatements)(r,n,o,o+n.length);1===a.length&&Si.types.isBlockStatement(a[0])&&(a=a[0].body),e.replaceWith(Si.types.markoScriptlet(a,!0,"server"))},parseOptions:{statement:!0,rawOpenTag:!0},autocomplete:[{displayText:"server <statement>",description:"A JavaScript statement which is only evaluated once your template is loaded on the server.",descriptionMoreURL:"https://markojs.com/docs/syntax/#server-javascript"}]},Ei=r("../../browser-shims/compiler/index.js"),Ti=r("../../browser-shims/compiler/babel-utils.js"),Mi={parse(e){const{node:t,hub:{file:r}}=e,s=t.rawValue,n=s.replace(/^static\s*/,"").trim(),o=t.name.start+(s.length-n.length);let a=(0,Ti.parseStatements)(r,n,o,o+n.length);1===a.length&&Ei.types.isBlockStatement(a[0])&&(a=a[0].body),e.replaceWith(Ei.types.markoScriptlet(a,!0))},parseOptions:{statement:!0,rawOpenTag:!0},autocomplete:[{displayText:"static <statement>",description:"A JavaScript statement which is only evaluated once your template is loaded.",descriptionMoreURL:"https://markojs.com/docs/syntax/#static-javascript"}]},Ci=r("../../browser-shims/compiler/index.js"),ji=r("../../browser-shims/compiler/babel-utils.js"),Ii=d(r("../../node_modules/magic-string/dist/magic-string.cjs.js")),Pi=d(r("../../node_modules/path-browserify/index.js")),Li=/^style((?:\.[a-zA-Z0-9$_-]+)+)?/,Oi=" For a native html `style` tag use the `html-style` core tag instead.",Bi={analyze(e){(0,ji.assertNoArgs)(e),(0,ji.assertNoParams)(e),(0,ji.assertNoAttributeTags)(e);const{node:t}=e,r=Li.exec(t.rawValue||"")?.[1]?.slice(1);for(const s of t.attributes)if(null!=s.start||"MarkoAttribute"!==s.type||"class"!==s.name||"StringLiteral"!==s.value.type||s.value.value!==r)throw e.hub.buildError(s.value,"The `style` does not support html attributes."+Oi);for(const r of t.body.body)if("MarkoText"!==r.type)throw e.hub.buildError(r,"The `style` tag currently only supports static content."+Oi);if(t.body.body.length>1)throw e.hub.buildError(t.name,"The `style` tag currently only supports static content."+Oi)},translate(e){const{node:t,hub:{file:r}}=e,{filename:s,sourceMaps:n}=r.opts;let o=Li.exec(t.rawValue||"")?.[1]||".css";t.var&&!/\.module\./.test(o)&&(o=".module"+o);const a=t.body.body[0],{resolveVirtualDependency:i}=X(),c=(0,ji.getStart)(r,a),l=(0,ji.getEnd)(r,a);let p,d=a.value;if(i&&n&&null!==c&&null!==l){const e=new Ii.default(r.code,{filename:s});e.remove(0,c),e.remove(l,r.code.length),p=e.generateMap({source:s,includeContent:!0}),"inline"!==n&&"both"!==n||(d+=`\n/*# sourceMappingURL=${p.toUrl()}*/`,"inline"===n&&(p=void 0))}const u=i?.(s,{virtualPath:`./${Pi.default.basename(s)+o}`,code:d,map:p});u&&(t.var?Ci.types.isIdentifier(t.var)?(0,ji.getProgram)().node.body.push(Ci.types.importDeclaration([Ci.types.importDefaultSpecifier(t.var)],Ci.types.stringLiteral(u))):(0,ji.getProgram)().node.body.push(Ci.types.variableDeclaration("const",[Ci.types.variableDeclarator(t.var,(0,ji.importDefault)(r,u,"style"))])):(0,ji.getProgram)().node.body.push(Ci.types.importDeclaration([],Ci.types.stringLiteral(u)))),e.remove()},parseOptions:{html:!1,text:!0,rawOpenTag:!0,preserveWhitespace:!0},attributes:{}},$i=r("../../browser-shims/compiler/index.js"),Ni=r("../../browser-shims/compiler/babel-utils.js"),Fi=Symbol("try tag dom binding"),Di={analyze(e){(0,Ni.assertNoVar)(e),(0,Ni.assertNoArgs)(e),(0,Ni.assertNoParams)(e),(0,Ni.assertNoAttributes)(e),g(e),$o(e);const t=sr(e);if(zn(t,e.node,to(e.node))[Fi]=Pn("#text",0,t),!e.node.body.body.length)throw e.get("name").buildCodeFrameError("The `try` tag requires body content.");rr(e.get("body"))},translate:Lr({html:{enter(e){if(!nr(e.get("body")))return void e.remove();const t=nr(e.get("body"));cr(t,!0),ps(e)},exit(e){const{node:t}=e,r=or(e),s=t.extra,n=e.get("body"),o=ma(e),a=s[Fi],i=ya(o.properties);i&&o.properties.splice(o.properties.indexOf(i),1),ds(e),an(n),e.insertBefore(o.statements),e.replaceWith($i.types.expressionStatement(bt("tryContent",ar(r),ro(a),i?.value,ba(o.properties))))[0].skip()}},dom:{enter(e){const t=nr(e.get("body"));cr(t,!0),rs(e,37),ts(e)},exit(e){const{node:t}=e,r=t.extra,s=r[Fi],n=r.referencedBindings,o=ma(e),a=ya(o.properties);a&&o.properties.splice(o.properties.indexOf(a),1);const i=or(e),c=nr(e.get("body")),l=Rs(i,s,"try");l.build=()=>bt("createTry",ro(s),$i.types.identifier(c.name)),o.statements.length&&Hs("render",i,n,o.statements),(0,Ni.getProgram)().node.body.push($i.types.expressionStatement(bt("enableCatch"))),Ks(i,n,l,ba(o.properties)),l.hasDownstreamIntersections=()=>!0,e.remove()}}}),attributes:{},autocomplete:[{description:"Used to capture errors and display placeholders for nested content.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#try"}],types:f.name+"/tag-types/try.d.marko"},Ri={taglibId:f.taglibId,"<attrs>":x,"<await>":ho,"<client>":wo,"<const>":To,"<debug>":jo,"<define>":Sa,"<effect>":Ea,"<else-if>":Xa,"<else>":Ya,"<export>":Ma,"<for>":la,"<html-comment>":La,"<html-script>":Fa,"<html-style>":_a,"<id>":qa,"<if>":Ka,"<import>":ai,"<let>":li,"<lifecycle>":fi,"<log>":gi,"<return>":bs,"<script>":xi,"<server>":ki,"<static>":Mi,"<style>":Bi,"<try>":Di},zi={translate:{enter(e){throw e.buildCodeFrameError("CDATA sections are not supported in Marko.")}}},Ui={translate:{exit(e){e.remove()}}},_i={translate:{enter(e){throw e.buildCodeFrameError("XML declarations sections are not supported in Marko.")}}},Vi={translate:{exit(e){Z()&&cs(e)`<!${e.node.value}>`,e.remove()}}},Wi=r("../../browser-shims/compiler/index.js"),qi=r("../../browser-shims/compiler/babel-utils.js"),Gi={analyze(e){if(e!==se(e))return;const t=te(e);if(t&&(t.isMarkoPlaceholder()||t.isMarkoScriptlet()&&"server"===t.node.target))return;if(Hi(t)&&((0,qi.isNativeTag)(t.parentPath)&&/^on[A-Z-]/.test(t.node.name)||Pe(t.parentPath,"script")||Pe(t.parentPath,"lifecycle")||Pe(t.parentPath,"for")))return;const{node:r}=e,s=or(e),n=r.extra??={},{markoOpts:o,opts:{filename:a}}=(0,qi.getFile)(),i=n.name=U(e.node.id?.name||(Hi(t)?t.node.default?Wi.types.toIdentifier(t.parentPath.has("var")?t.parentPath.get("var"):t.parentPath.get("name")):t.node.name:Wi.types.isVariableDeclarator(e.parent)&&Wi.types.isIdentifier(e.parent.id)?e.parent.id.name:Wi.types.isObjectMethod(r)&&Wi.types.isIdentifier(r.key)?r.key.name:"anonymous"));n.section=s,n.registerId=(0,qi.getTemplateId)(o,a,`${s.id}/${i.slice(1)}`)}};function Hi(e){return!!e&&e.isMarkoAttribute()}var Ji=r("../../browser-shims/compiler/babel-utils.js"),Zi={analyze(e){const{node:t}=e,{source:r}=t,{value:s}=r,n=(0,Ji.resolveTagImport)(e,s);if(n){t.extra??={},t.extra.tagImport=n;const r=e.hub.file.metadata.marko.tags;r.includes(n)||r.push(n)}},translate:{exit(e){const{node:t}=e,{extra:r}=t,s=r?.tagImport;s&&(t.source.value=s)}}},Ki=r("../../browser-shims/compiler/index.js");function Xi(e){const t=e.parentPath.isMarkoTagBody()&&e.parentPath.parentPath;if(t&&Ie(t))switch(t.node.name.value){case"html-comment":case"html-script":case"html-style":return!0}return!1}r("../../browser-shims/compiler/index.js");var Yi=Symbol("placeholder node binding"),Qi=Symbol("placeholder has sibling text"),ec={analyze(e){if(Xi(e))return;const{node:t}=e,r=T(t.value),{confident:s,computed:n}=r;if(!s||!t.escape&&!tc(n)){const s=sr(e),n=(t.extra??={})[Yi]=Pn("#text",0,s);!function(e){const t=e.node.extra;let r=e.getPrevSibling();for(;r.node;){const e=ur(r,"endType");if(null!==e){if(4===e||1===e||2===e)return t[Qi]=1;break}r=r.getPrevSibling()}if(!r.node&&Ki.types.isProgram(e.parentPath))return t[Qi]=1;let s=e.getNextSibling();for(;s.node;){const e=ur(s,"startType");if(null!==e){if(4===e||1===e||2===e)return t[Qi]=2;break}s=s.getNextSibling()}if(!s.node&&Ki.types.isProgram(e.parentPath))return t[Qi]=2;t[Qi]=0}(e),Lt(s,n,r)}},translate:{exit(e){if(Xi(e))return;const{node:t}=e,{value:r}=t,s=T(r),{confident:n,computed:o}=s;if(n&&tc(o))return void e.remove();const a=Z(),i=cs(e),c=t.extra||{},l=c[Yi],p=a||n&&t.escape,d=p?t.escape?"escapeXML":"toString":t.escape?"data":"html",u=or(e),f=l&&Dt(u,l),m=c[Qi];n&&p?i`${ht()[d](o)}`:(1===m?(a&&f&&(!0===f?i`<!>`:i`${bt("commentSeparator",zr(f))}`),rs(e,37)):2===m?rs(e,37):(a||i` `,rs(e,32)),a?(i`${bt(d,r)}`,l&&fs(e,l,f)):Hs("render",or(e),s.referencedBindings,Ki.types.expressionStatement("data"===d?bt("data",Ki.types.memberExpression(gn,ro(l),!0),r):bt("html",gn,r,ro(l))))),ts(e),e.remove()}}};function tc(e){return null==e||!1===e}var rc=r("../../browser-shims/compiler/index.js"),sc=new WeakMap,nc={migrate(e){const{name:t}=e.node;if(!e.scope.hasBinding(t)&&"out"===t){if(!rc.types.isMemberExpression(e.parent)||!rc.types.isIdentifier(e.parent.property)||"global"!==e.parent.property.name)throw e.buildCodeFrameError("Only `out.global` is supported for compatibility.");e.parentPath.replaceWith(rc.types.identifier("$global"))}},analyze(e){const{name:t}=e.node;e.scope.hasBinding(t)||("$global"===t?Nn(e):"$signal"===t&&(sr(e).hasAbortSignal=!0,Nn(e)))},translate(e){const{name:t}=e.node;if(!e.scope.hasBinding(t))switch(t){case"$global":Z()?e.replaceWith(rc.types.callExpression(gt("$global"),[])):e.replaceWith(rc.types.memberExpression(gn,rc.types.identifier("$global")));break;case"$signal":if(Z())e.replaceWith(rc.types.callExpression(rc.types.arrowFunctionExpression([],rc.types.blockStatement([rc.types.throwStatement(rc.types.newExpression(rc.types.identifier("Error"),[rc.types.stringLiteral("Cannot use $signal in a server render.")]))])),[]));else{const t=or(e),r=re(e);let s,n=sc.get(t);n?s=n.get(r):(n=new Map,sc.set(t,n)),s||(s=n.size,n.set(r,s),Hs("render",t,r.node.extra?.referencedBindings,rc.types.expressionStatement(rc.types.callExpression(gt("resetAbortSignal"),[gn,rc.types.numericLiteral(s)])),!1)),e.replaceWith(rc.types.callExpression(gt("getAbortSignal"),[gn,rc.types.numericLiteral(s)]))}}}},oc={analyze(e){if(!e.node.static)throw e.buildCodeFrameError("Scriptlets are not supported when using the tags api.");zn(sr(e),e.node,e.node.body)},translate:{exit(e){const{node:t}=e,r=Z();t.target&&t.target!==(r?"server":"client")?e.remove():r||(F(t,"body",mn),e.replaceWithMultiple(t.body))}}},ac=r("../../browser-shims/compiler/index.js"),ic=r("../../browser-shims/compiler/babel-utils.js"),cc=(r("../../browser-shims/compiler/index.js"),r("../../browser-shims/compiler/babel-utils.js")),lc={analyze:{enter(e){(0,cc.assertNoVar)(e),(0,cc.assertNoArgs)(e);const t=e.get("body");if(rr(t),On(t,3),!(0,cc.findParentTag)(e))throw e.get("name").buildCodeFrameError("@tags must be nested within another tag.")}},translate:{enter(e){Z()&&ps(e)},exit(e){Z()&&(ds(e),an(e.get("body")))}}},pc=r("../../browser-shims/compiler/index.js"),dc=r("../../browser-shims/compiler/babel-utils.js"),uc=d(r("../../node_modules/path-browserify/index.js")),fc=Symbol("custom tag child scope"),mc=Symbol("custom tag scope offset"),yc=Symbol("custom tag child serialize reasons"),gc={analyze:{enter(e){if((0,dc.assertAttributesOrSingleArg)(e),$o(e),!(0,dc.getTagTemplate)(e)){const t=Ce(e);if(t&&e.scope.hasBinding(t))throw e.get("name").buildCodeFrameError(`Local variables must be in a dynamic tag unless they are PascalCase. Use \`<\${${t}}/>\` or rename to \`${t.charAt(0).toUpperCase()+t.slice(1)}\`.`);throw e.get("name").buildCodeFrameError("Unable to find entry point for custom tag.")}const t=sr(e),r=e.get("body"),s=e.node.extra??={},n=s[fc]=Pn("#childScope",0,t),o=new Set([s]);rr(r),On(r,3);const a=(0,dc.loadFileForTag)(e);if(!a)throw e.get("name").buildCodeFrameError("Unable to resolve file for tag.");const i=Ln(e,4);if(i&&(i.scopeOffset=s[mc]=Pn("#scopeOffset",0,t)),a.opts.filename===e.hub.file.opts.filename){if(zn(t,e.node,to(e.node)),i){const e=(0,dc.getProgram)().node.extra.returnValueExpr;qn(i,e),Lt(t,n,e)}}else{const r=a.ast.program,c=r.extra,l=r.params[0].extra?.binding,p={};if(hc(s,t,e,c?.domExports.input,o,p),i){const e=wc(c.returnSerializeReason,l,p);qn(i,e),Lt(t,n,e)}if(c.inputSerializeReasons){const e=s[yc]=[];for(const r of c.inputSerializeReasons){const s=Symbol();e.push(s),Lt(t,n,wc(r,l,p),s)}}(0,dc.getProgram)().node.extra.hasInteractiveChild=c?.isInteractive||c?.hasInteractiveChild||!1}Lt(t,n,function(e){let t,r;for(const s of e)r?r.push(s):t?r=[t,s]:t=s;return r||t}(o))}},translate:{enter(e){rs(e),Z()&&ps(e)},exit(e){Z()?function(e){const t=e.get("body"),{node:r}=e,s=r.extra;let n;if(ds(e),an(t),pc.types.isStringLiteral(r.name)){const t=bc(e);n=Sc(e.hub.file,t)?pc.types.identifier(Dr()):(0,dc.importDefault)(e.hub.file,t,Ce(e))}else n=r.name;const o=r.var,a=or(e),i=(0,dc.loadFileForTag)(e).ast.program.extra,c=i.domExports?.input,{properties:l,statements:p}=c?ma(e,c.props):{properties:[],statements:[]},d=s[fc],u=Dt(a,d),f=s[yc];let m;if(f)if(1===f.length){const e=Dt(a,d,f[0]);m=e?1==e?pc.types.numericLiteral(1):zr(e):void 0}else{const e=[];let t=!1,r=!1;for(let s=0;s<f.length;s++){const n=Dt(a,d,f[s]);n?(t||=!0!==n,e.push(pc.types.objectProperty(pc.types.numericLiteral(s),!0===n?pc.types.numericLiteral(1):zr(n)))):r=!0}e.length&&(m=t||r?pc.types.objectExpression(e):pc.types.numericLiteral(1))}if(u){const t=_(d?.name);e.insertBefore(pc.types.variableDeclaration("const",[pc.types.variableDeclarator(t,bt("peekNextScopeId"))])),Cs(a,d,bt("writeExistingScope",t)),o&&p.push(pc.types.expressionStatement(bt("setTagVar",ar(a),ro(e.node.extra[mc]),t,pc.types.stringLiteral(Xs(a,r.var.extra?.binding,"var")))))}if(r.extra.tagNameNullable){const t=ya(l);let r;if(t){const s=t.value;t.value=r=_("content");const[n]=e.insertBefore(pc.types.variableDeclaration("const",[pc.types.variableDeclarator(r,s)]));n.skip()}let s=kc(n,ba(l),m);o&&(Eo(e,pc.types.unaryExpression("void",pc.types.numericLiteral(0)),"let"),s=pc.types.assignmentExpression("=",o,s)),p.push(pc.types.ifStatement(n,pc.types.expressionStatement(s),r&&Ac(r)))}else o?Eo(e,kc(n,ba(l),m)):p.push(Ac(n,ba(l),m));for(const t of e.replaceWithMultiple(p))t.skip()}(e):function(e){const t=or(e),{node:r}=e,s=r.extra[fc],n=cs(e),{file:o}=e.hub,a=pc.types.isIdentifier(r.name)?r.name.name:pc.types.isStringLiteral(r.name)?r.name.value:"tag",i=bc(e),c=(0,dc.loadFileForTag)(e),l=c.ast.program.extra.domExports,p=xc(o,i,l.setup,a),d=l.input;if(d&&vc(e,d,`${Ce(e)||"tag"}_input`,{circular:c.opts.filename===o.opts.filename,tagSection:t,relativePath:i,childScopeBinding:s,attrTagCallsByTag:void 0}),n`${(0,dc.importNamed)(o,i,l.template,`${a}_template`)}`,function(e,t){const r=Zr(or(e));Kr(or(e)).push(`${Yr[e.node.var?48:47]}`,t.name,Yr[38]),Hr(r,String.fromCharCode(e.node.var?48:47)),r.push(t,String.fromCharCode(38))}(e,(0,dc.importNamed)(o,i,l.walks,`${a}_walks`)),r.var){const e=zs(r.var.extra.binding);e.register=!0,e.buildAssignment=(e,t)=>pc.types.callExpression(gt("tagVarSignalChange"),[kn(e,s),t]),Hs("render",t,void 0,pc.types.expressionStatement(bt("setTagVar",gn,ro(s),e.identifier)))}Hs("render",t,void 0,pc.types.expressionStatement(pc.types.callExpression(p,[kn(t,s)]))),e.remove()}(e)}}};function bc(e){const{node:t,hub:{file:r}}=e;let s;if(pc.types.isStringLiteral(t.name)){const t=(0,dc.getTagTemplate)(e);s=t&&(0,dc.resolveRelativePath)(r,t)}else t.extra?.tagNameImported&&(s=t.extra.tagNameImported);if(!s){const t=Ce(e);if(t&&e.scope.hasBinding(t))throw e.get("name").buildCodeFrameError(`Local variables must be in a dynamic tag unless they are PascalCase. Use \`<\${${t}}/>\` or rename to \`${t.charAt(0).toUpperCase()+t.slice(1)}\`.`);throw e.get("name").buildCodeFrameError("Unable to find entry point for custom tag.")}return s}function hc(e,t,r,s,n,o){if(!s)return void Qn(to(r.node));if(!s.props||r.node.arguments?.length)return void(o.value=zn(t,r.node,to(r.node)));const a=o.known={},i=$o(r),c=new Set;if(i){const o=new Map,l=(e,t)=>{const r=to(t.node),s=o.get(e);s?s.referenceNodes=s.referenceNodes.concat(r):o.set(e,{firstTag:t,referenceNodes:r})};for(const e in i)c.add(i[e].name);const p=r.node.body.attributeTags?r.get("body").get("body"):r.get("attributeTags");for(const r of p)if(r.isMarkoTag())if((0,dc.isAttributeTag)(r)){const o=i[Ce(r)],c=s.props[o.name];c?c.props&&!o.dynamic?hc(e,t,r,c,n,a[o.name]={}):l(o.group,r):Qn(to(r.node))}else{const e=r.node.extra.attributeTagGroup;let t=!1;for(const r of e)if(s.props[i[r].name]){t=!0;break}t?l(e,r):Qn(to(r.node))}for(const[e,{firstTag:{node:r},referenceNodes:s}]of o){const o=zn(t,r,s),c={value:o};n.add(o);for(const t of e)a[i[t].name]=c}}if(!c.has("content")){const e=nr(r.get("body"));e&&(c.add("content"),a.content={value:void 0},e.downstreamBinding=(s.props.content||s.props).binding)}const{attributes:l}=r.node;let p;for(let e=l.length;e--;){const t=l[e];if(pc.types.isMarkoAttribute(t)){if(c.has(t.name)||!s.props[t.name]){Qn(t.value);continue}c.add(t.name)}if(p)p.push(t.value);else if(pc.types.isMarkoSpreadAttribute(t))p=[t.value];else{const e=t.value.extra??={};a[t.name]={value:e},n.add(e)}}p&&(o.value=zn(t,r.node,p))}function vc(e,t,r,s){if(e.node.arguments?.length){const[n]=e.node.arguments,o=xc(e.hub.file,s.relativePath,t.id,r);return void Ks(s.tagSection,e.node.extra?.referencedBindings,Ec(o),pc.types.isSpreadElement(n)?pc.types.memberExpression(n.argument,pc.types.numericLiteral(0),!0):n,kn(s.tagSection,s.childScopeBinding))}if(!t.props||s.circular){const n=e.node.extra?.referencedBindings,o=xc(e.hub.file,s.relativePath,t.id,r),a=ma(e);a.statements.length&&Hs("render",s.tagSection,n,a.statements);let i=ba(a.properties);if((0,dc.isAttributeTag)(e)){const t=Ce(e),r=e.parentPath,n=$o(r)?.[t]?.repeated;if(n){let e=(s.attrTagCallsByTag||=new Map).get(r);e||s.attrTagCallsByTag.set(r,e=new Map);const n=e.get(t);if(n)return void(n.expression=bt("attrTags",n.expression,i));e.set(t,i=pc.types.parenthesizedExpression(bt("attrTag",i)))}else i=bt("attrTag",i)}return void Ks(s.tagSection,n,Ec(o),i,kn(s.tagSection,s.childScopeBinding))}const n=new Set,o=$o(e);if(o){const a=e.get("attributeTags"),i=new Map,c=(e,r)=>{const s=a[r];let n=i.get(e)?.statements;return n||(n=[],i.set(e,{referencedBindings:s.node.extra?.referencedBindings,statements:n})),ga(a,r,o,n,t.props)};for(const e in o)n.add(o[e].name);for(let e=0;e<a.length;e++){const n=a[e];if(n.isMarkoTag())if((0,dc.isAttributeTag)(n)){const a=o[Ce(n)],i=t.props[a.name];i&&(a.dynamic?e=c(a.group,e):vc(n,i,`${r}_${a.name}`,s))}else n.node.extra?.attributeTagGroup&&(e=c(n.node.extra.attributeTagGroup,e))}for(const[n,{referencedBindings:a,statements:c}]of i){const i=[];for(const c of n){const n=o[c],l=t.props[n.name];if(!l)continue;const p=xc(e.hub.file,s.relativePath,l.id,`${r}_${n.name}`);i.push(pc.types.variableDeclarator(Bo(n))),Ks(s.tagSection,a,Ec(p),Bo(n),kn(s.tagSection,s.childScopeBinding))}Hs("render",s.tagSection,a,[pc.types.variableDeclaration("let",i),...c])}}const a=e.node.body.extra?.section;if(a&&!n.has("content")&&(n.add("content"),t.props.content)){const n=(0,dc.importNamed)(e.hub.file,s.relativePath,t.props.content.id,`${r}_content`);Ks(s.tagSection,void 0,Ec(n),pc.types.callExpression(pc.types.identifier(a.name),[gn]),kn(s.tagSection,s.childScopeBinding))}const{attributes:i}=e.node,c=[];let l;for(let e=i.length;e--;){const r=i[e];if(pc.types.isMarkoAttribute(r)){if(!t.props[r.name]||n.has(r.name))continue;if(n.add(r.name),l){l.push(ft(r.name,r.value));continue}c.push(r)}else l?l.push(pc.types.spreadElement(r.value)):l=[pc.types.spreadElement(r.value)]}for(const n of c.reverse()){const o=t.props[n.name],a=xc(e.hub.file,s.relativePath,o.id,`${r}_${n.name}`);Ks(s.tagSection,n.value.extra?.referencedBindings,Ec(a),n.value,kn(s.tagSection,s.childScopeBinding))}const p=new Set(Object.keys(t.props));for(const e of n)p.delete(e);if(p.size){const n=e.node.extra?.referencedBindings;let o=Tc;if(l){const e=_(`${r}_spread`);l.reverse(),o=t=>mt(e,t),Hs("render",s.tagSection,n,[pc.types.variableDeclaration("const",[pc.types.variableDeclarator(e,ba(l))])])}for(const a of p){const i=t.props[a],c=xc(e.hub.file,s.relativePath,i.id,`${r}_${a}`);Ks(s.tagSection,n,Ec(c),o(a),kn(s.tagSection,s.childScopeBinding))}}}function xc(e,t,r,s){return Sc(e,t)?pc.types.identifier(r):(0,dc.importNamed)(e,t,r,s)}function wc(e,t,r){if(e)return!0===e||function(e,t){if(e){if(Array.isArray(e)){const r=e.length;let s,n=0;for(;n<r;){let o=t(e[n++]);if(o){for(s=o;n<r;)if(o=t(e[n++]),o){for(s=[s,o];n<r;)o=t(e[n++]),o&&s.push(o);return s}return s}}return s}return t(e)}}(e,(e=>function(e,t,r){if(r){let s=r;if(e!==t){const r=[t.property];let n=t;for(;e!==(n=n.upstreamAlias);)r.push(n.property);for(let e=r.length;e--;){const t=s.known?.[r[e]];if(!t)break;s=t}}return s.value}}(t,e,r)))}function Sc(e,t){const{filename:r}=e.opts;return t===r||"."===t[0]&&uc.default.resolve(r,"..",t)===r}function Ac(e,...t){return pc.types.expressionStatement(kc(e,...t))}function kc(e,...t){return pc.types.callExpression(e,t.filter(Boolean))}function Ec(e){return{identifier:e,hasDownstreamIntersections:Mc}}function Tc(){return pc.types.unaryExpression("void",pc.types.numericLiteral(0))}function Mc(){return!0}var Cc=r("../../browser-shims/compiler/index.js"),jc=r("../../browser-shims/compiler/babel-utils.js"),Ic=Symbol("dynamic tag dom binding"),Pc=Symbol("custom tag scope offset"),Lc={analyze:{enter(e){(0,jc.assertAttributesOrArgs)(e),$o(e);const t=sr(e),r=zn(t,e.node,[e.node.name,...to(e.node)]),s=e.get("body"),n="class"===r.featureType,o=!!e.node.var,a=r[Ic]=Pn("#text",0,t);o&&(Ln(e,4),e.node.var.extra.binding.scopeOffset=r[Pc]=Pn("#scopeOffset",0,t)),rr(s),On(s,3),Lt(t,a,n||o||r)}},translate:{enter(e){rs(e,e.node.var?49:37),ts(e),Z()&&ps(e)},exit(e){const{node:t}=e,r=t.extra,s=r[Ic],n=or(e),o="class"===r.featureType;let a=t.name;Cc.types.isStringLiteral(a)&&(a=(0,jc.importDefault)(e.hub.file,bc(e),a.value)),o&&(Z()?(0,jc.getProgram)().node.body.push(Cc.types.markoScriptlet([Cc.types.expressionStatement(Cc.types.callExpression((0,jc.importNamed)(e.hub.file,vt(),"s"),[Cc.types.identifier(a.name),Cc.types.stringLiteral((0,jc.loadFileForTag)(e).metadata.marko.id)]))],!0)):(0,jc.getProgram)().node.body.push(Cc.types.expressionStatement(bt("register",Cc.types.stringLiteral((0,jc.loadFileForTag)(e).metadata.marko.id),Cc.types.identifier(a.name)))));const{properties:i,statements:c}=ma(e,void 0,void 0,o?"renderBody":"content"),l=[];let p=!1;if(t.arguments)p=!0,l.push(...t.arguments),i.length&&l.push(ba(i));else{const e=ya(i);e?(i.splice(i.indexOf(e),1),l.push(ba(i),e.value)):l.push(ba(i))}if(Z()){ds(e),an(e.get("body"));const r=Dt(n,s),o=r?!0===r?void 0:zr(r):Cc.types.numericLiteral(0),i=p?bt("dynamicTag",ar(n),ro(s),a,Cc.types.arrayExpression(l),Cc.types.numericLiteral(0),Cc.types.numericLiteral(1),o):bt("dynamicTag",ar(n),ro(s),a,l[0],l[1]||(o?Cc.types.numericLiteral(0):void 0),o?Cc.types.numericLiteral(0):void 0,o);if(t.var){const r=_(e.get("name").toString()+"_scope");c.push(Cc.types.variableDeclaration("const",[Cc.types.variableDeclarator(r,bt("peekNextScopeId"))])),c.push(Cc.types.variableDeclaration("const",[Cc.types.variableDeclarator(t.var,i)]),Cc.types.expressionStatement(bt("setTagVar",ar(n),ro(e.node.extra[Pc]),r,Cc.types.stringLiteral(Xs(n,t.var.extra?.binding,"var")))))}else c.push(Cc.types.expressionStatement(i));for(const t of e.replaceWithMultiple(c))t.skip()}else{const t=or(e),n=nr(e.get("body")),o=Rs(t,s,"dynamicTag");let i;if(e.node.var&&(i=zs(e.node.var.extra.binding),i.register=!0,i.buildAssignment=(e,t)=>Cc.types.callExpression(gt("tagVarSignalChange"),[Cc.types.memberExpression(An(i.section,e),Cc.types.stringLiteral(Q().ConditionalScope+so(s)),!0),t])),o.build=()=>bt("dynamicTag",ro(s),n&&Cc.types.identifier(n.name),i?Cc.types.arrowFunctionExpression([],i.identifier):void 0,p&&Cc.types.numericLiteral(1)),l.length){const e=p?Cc.types.arrayExpression(l):l[0];Cc.types.isObjectExpression(e)&&!e.properties.length||(o.extraArgs=[Cc.types.arrowFunctionExpression([],c.length?Cc.types.blockStatement(c.concat(Cc.types.returnStatement(e))):e)])}o.hasDownstreamIntersections=()=>!0,Ks(t,r.referencedBindings,o,a),e.remove()}}}},Oc=/^[A-Z][a-zA-Z0-9_$]*$/,Bc=new WeakMap,$c={transform:{enter(e){const{node:t}=e,{name:r,attributes:s}=e.node;let n=!1;if(ac.types.isStringLiteral(r)){const s=r.value;e.scope.getBinding(s)&&Oc.test(s)&&(t.name=En(ac.types.identifier(s),r),n=!0)}for(let t=0;t<s.length;t++){const r=s[t];ac.types.isMarkoAttribute(r)&&r.bound&&(r.bound=!1,s.splice(++t,0,Nc(e,r)),n=!0)}n&&e.scope.crawl()}},analyze:{enter(e){const t=(0,ic.getTagDef)(e),r=er(e),s=t?.analyzer?.hook;if(s)Cr(s,e);else if(0!==r)switch(r){case 1:gc.analyze.enter(e);break;case 3:lc.analyze.enter(e);break;case 2:Lc.analyze.enter(e)}else Yo.analyze.enter(e)},exit(e){const t=(0,ic.getTagDef)(e)?.analyzer?.hook;t&&jr(t,e)}},translate:{enter(e){const t=(0,ic.getTagDef)(e),r=e.node.extra;if(t?.translator)return t.translator.path&&e.hub.file.metadata.marko.watchFiles.push(t.translator.path),void Cr(t.translator.hook,e);for(const t of e.get("attributes"))if(t.isMarkoAttribute()){if(t.node.arguments)throw t.buildCodeFrameError(`Unsupported arguments on the \`${t.node.name}\` attribute.`);if(t.node.modifier){if(!(0,ic.isNativeTag)(t.parentPath))throw t.buildCodeFrameError(`Unsupported modifier \`${t.node.modifier}\`.`);t.node.name+=`:${t.node.modifier}`}}if(r.tagNameDynamic&&r.tagNameNullable&&!e.get("name").isIdentifier()&&Z()){const t=_("tagName"),[r]=e.insertBefore(ac.types.variableDeclaration("const",[ac.types.variableDeclarator(t,e.node.name)]));r.skip(),e.set("name",t)}switch(r.tagNameType){case 0:Yo.translate.enter(e);break;case 1:gc.translate.enter(e);break;case 2:Lc.translate.enter(e);break;case 3:lc.translate.enter(e)}},exit(e){const t=(0,ic.getTagDef)(e)?.translator;if(t)jr(t.hook,e);else switch(e.node.extra.tagNameType){case 0:Yo.translate.exit(e);break;case 1:gc.translate.exit(e);break;case 2:Lc.translate.exit(e);break;case 3:lc.translate.exit(e)}}}};function Nc(e,t){const r=t.name+"Change";if(ac.types.isIdentifier(t.value)){const s=e.scope.getBinding(t.value.name);if(!s)return ac.types.markoAttribute(r,Fc(t.value));const n=Bc.get(s.identifier);if(!n){const e=ac.types.markoAttribute(r,Fc(t.value));return Bc.set(s.identifier,e),e}if("Identifier"===n.type)return ac.types.markoAttribute(r,En(ac.types.identifier(n.name),t.value));const o=ne(s.path)?s.path:te(s.path);if(!o?.isMarkoTag()&&!o?.isMarkoTagBody())throw e.hub.buildError(t.value,"Unable to bind to value.");const a=U(r),i=ac.types.markoTag(ac.types.stringLiteral("const"),[ac.types.markoAttribute("value",n.value,null,null,!0)],ac.types.markoTagBody([]),null,ac.types.identifier(a));return Bc.set(s.identifier,n.value=ac.types.identifier(a)),o.isMarkoTag()?o.insertAfter(i):o.unshiftContainer("body",i),ac.types.markoAttribute(r,En(ac.types.identifier(a),t.value))}if(ac.types.isMemberExpression(t.value)){const e=t.value.property;if(!ac.types.isPrivateName(t.value.property))return ac.types.markoAttribute(r,ac.types.memberExpression(ac.types.cloneNode(t.value.object),"Identifier"===e.type?En(ac.types.identifier(e.name+"Change"),e):ac.types.binaryExpression("+",ac.types.cloneNode(e),ac.types.stringLiteral("Change")),"Identifier"!==e.type))}throw e.hub.buildError(t.value,"Attributes may only be bound to identifiers or member expressions")}function Fc(e){const t="_new_"+e.name;return ac.types.arrowFunctionExpression([En(ac.types.identifier(t),e)],ac.types.blockStatement([ac.types.expressionStatement(ac.types.assignmentExpression("=",En(ac.types.identifier(e.name),e),En(ac.types.identifier(t),e)))]))}r("../../browser-shims/compiler/index.js");var Dc=function(e){const t={migrate:{},transform:{},analyze:{},translate:{}};for(const r in e){const s=r,n=e[s];n.migrate&&(t.migrate[s]=n.migrate),n.transform&&(t.transform[s]=n.transform),n.analyze&&(t.analyze[s]=n.analyze),n.translate&&(t.translate[s]=n.translate)}return t}({Program:vn,Function:Gi,ReferencedIdentifier:nc,ImportDeclaration:Zi,MarkoDocumentType:Vi,MarkoDeclaration:_i,MarkoCDATA:zi,MarkoText:{translate:{exit(e){Xi(e)||(cs(e)`${e.node.value}`,ts(e),e.remove())}}},MarkoTag:$c,MarkoPlaceholder:ec,MarkoScriptlet:oc,MarkoComment:Ui}),Rc=["tags"],zc="tags",{transform:Uc,analyze:_c,translate:Vc}=Dc,Wc=[["../../node_modules/@marko/runtime-tags/dist/translator",{...Ri,migrate:Dc.migrate}]];function qc(e,t){return[`${f.name}${t?"":"/debug"}/${"html"===e?"html":"dom"}`]}},"../../node_modules/@marko/runtime-tags/package.json":e=>{e.exports=JSON.parse('{"name":"@marko/runtime-tags","version":"6.0.7","description":"Optimized runtime for Marko templates.","keywords":["api","marko","runtime","tags"],"homepage":"https://github.com/marko-js/marko","bugs":"https://github.com/marko-js/marko/issues","repository":{"type":"git","url":"git+https://github.com/marko-js/marko.git","directory":"packages/runtime-tags"},"license":"MIT","exports":{".":{"types":"./index.d.ts"},"./package.json":"./package.json","./translator":"./dist/translator/index.js","./tag-types/*":"./tag-types/*","./debug/*":{"types":"./dist/*.d.ts","import":"./dist/debug/*.mjs","default":"./dist/debug/*.js"},"./*":{"types":"./dist/*.d.ts","import":"./dist/*.mjs","default":"./dist/*.js"}},"types":"index.d.ts","files":["dist","tag-types","index.d.ts","tags-html.d.ts","!**/meta.*.json","!**/__tests__","!**/*.tsbuildinfo"],"scripts":{"build":"node -r ~ts ./scripts/bundle.ts"},"dependencies":{"@marko/compiler":"^5.39.19","csstype":"^3.1.3","magic-string":"^0.30.17"},"engines":{"node":"18 || 20 || >=22"},"exports:override":{".":{"types":"./index.d.ts"},"./translator":"./src/translator/index.ts","./tag-types/*":"./tag-types/*","./debug/*":"./src/*.ts","./*":"./src/*.ts"}}')}}]);
//# sourceMappingURL=420.2f85dec4.js.map