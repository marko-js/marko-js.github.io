"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[548],{"./playground/components/preview.marko":(e,n,t)=>{t.r(n),t.d(n,{default:()=>$});var r=t("../../node_modules/marko/dist/runtime/vdom/index.js"),s=t("../../node_modules/path-browserify/index.js"),o=t.n(s),l=t("../../node_modules/prettier/standalone.js"),a=t("../../node_modules/prettier/parser-html.js"),i=t.n(a),d=t("../../node_modules/prettier/parser-babel.js"),m=t.n(d),c=t("../utils/highlight.js"),u=t.n(c),p=t("../utils/compiler/index.js"),v=t("../../node_modules/memfs/lib/index.js"),_=t("../../node_modules/@marko/tags-api-preview/dist/components/return/index-browser.js"),f=t.n(_),h=t("../../node_modules/@marko/tags-api-preview/dist/transform/cached-function/index-browser.js"),w=t("../../node_modules/@marko/tags-api-preview/dist/util/replace-assignments/index.js"),g=t.n(w),y=t("../../node_modules/marko/dist/runtime/vdom/helpers/v-element.js"),j=t.n(y),k=t("../../node_modules/@marko/tags-api-preview/dist/transform/native-tag-var/index-browser.js"),b=t.n(k),x=t("../../node_modules/@marko/tags-api-preview/dist/translate/native-tag-handlers/index-browser.js"),S=t.n(x),C=t("../../node_modules/marko/dist/runtime/vdom/helpers/attrs.js"),E=t.n(C),T=t("../../node_modules/@marko/tags-api-preview/dist/translate/track-rendering/index.js"),I=t("../../node_modules/marko/dist/runtime/components/renderer.js"),F=t.n(I),L=t("../../node_modules/marko/dist/runtime/components/registry/index-browser.js"),O=t("../../node_modules/marko/dist/runtime/components/defineComponent.js"),M=t.n(O);const N="JyubVr1s",A=(0,r.t)(N),D=A;(0,L.r)(N,(()=>A));const Q={onCreate(){this.state={}}};A._=F()((function(e,n,t,r,s){(0,T.begin)();try{var o=r;const s=e,i=b()(o,"0");var l={};n.e("iframe",E()(S()({...s},t,"iframe",l)),"@0",r,0,4,{...l});const d=b()(o,"1");var a={};n.e("iframe",E()(S()({...s,style:"display:none"},t,"iframe",a)),"@1",r,0,4,{...a}),e._return&&e._return({default:{clear(){const e="none"===i().style.display,n=e?d():i(),t=e?i():d();return n.srcdoc=n.srcdoc,n.style.display="none",t.style.display="",t}}},1)}finally{(0,T.end)()}}),{t:N},Q),A.Component=M()(Q,A._);var R=t("../../node_modules/marko/dist/runtime/helpers/render-tag.js"),U=t.n(R),B=t("../../node_modules/@marko/tags-api-preview/dist/components/_instance/index.marko"),H=t("../../node_modules/@marko/tags-api-preview/dist/components/effect/index.js"),J=t.n(H);const V="fQaIe3sQ",W=(0,r.t)(V),$=W,q=j()("small",null,"6",null,1,0).t("Open the dev tools to view the full error.");(0,L.r)(V,(()=>W));const z={onCreate(){this.state={}}};W._=F()((function(e,n,t,r,s){(0,T.begin)();try{var a,d=r,c=s,_=e=>a=e;const{type:w,files:y,selectedFile:j,onSelectError:k,onSyntaxError:b}=e,x=d.elId("@0"),S=o().join("/",x,j.path),C=o().join("/",x,y[0].path),E="0"in c?c[0]:c[0]=null,I=e=>d.setState("0",e),F="1"in c?c[1]:c[1]=null,L=e=>d.setState("1",e),O=/(.+?)(?:\((\d+),(\d+)\)|:(\d+)): (.*(?=\s+\d+ | ))/;E?(n.be("div",{class:"preview-error"},"0",r,null,1),n.be("h1",{class:"error-name"},"1",r,null,1),n.t(E.name,r),E.file&&(n.t(" :  ",r),n.be("a",null,"2",r,null,0,{onclick:t.d("click",(function(){k(E)}),!1)}),n.t(E.file.slice(1),r),n.t("(",r),n.t(E.line,r),n.t(",",r),n.t(E.column,r),n.t(")",r),n.ee()),n.ee(),n.be("div",null,"3",r,null,0),n.t(E.message,r),n.ee(),S!==E.file&&(E.codeFrame?(n.be("pre",null,"4",r,null,0),n.be("code",null,"5",r,null,0),n.t(E.codeFrame,r),n.ee(),n.ee()):n.n(q,r)),n.ee()):"preview"===w?U()(B.default,{renderBody:(e,n,t,r)=>{var s=n,o=f()(t);U()(D,{class:"preview-output",_return:o},e,s,"8");const{default:l}=o();_(l)}},n,t,"7"):(n.be("div",{class:"preview-compiled"},"9",r,null,1),n.h(F,r),n.ee()),J()(r,(0,h.cache)((0,h.cached)(d,[E,w,a,y,x,C,S,b])||function(){const e=!E&&"preview"===w&&a,n=setTimeout((async()=>{for(const e of y){const n=o().join("/",x,e.path);v.vol.mkdirSync(o().dirname(n),{recursive:!0}),v.vol.writeFileSync(n,e.content)}try{if("preview"===w||"html"===w){const n=await(0,p.g)({entry:C,markoOptions:{output:"vdom"}});if("preview"===w&&e){const{contentWindow:t,contentDocument:r}=e.clear();t.__INTERNAL_MODULES__=window.__INTERNAL_MODULES__;const s=(0,t.eval)(n.js),o=await s.render({}),l=r.createElement("style");l.innerHTML=n.css,r.head.appendChild(l),o.appendTo(r.body)}else{const e=(0,eval)(n.js),t=await e.render({});g()(L,u()("html",(0,l.format)(String(t),{parser:"html",plugins:[i()]})))}}else{const e="compiled-html"===w?"html":"vdom",n=await(0,p.M)({entry:S,markoOptions:{output:e}});g()(L,u()("javascript",(0,l.format)(n.replaceAll(`${x}/`,""),{parser:"babel",plugins:[m()]})))}g()(I,null)}catch(e){g()(L,null);const n="SyntaxError"===e.name&&O.exec(e.message);if(n){let[t,r,s,l,a,i]=n;a&&(s=a,l=0),r=o().resolve(r),s=parseInt(s,10),l=parseInt(l,10)+1;const d=e.message.slice(t.length);g()(I,{name:e.name,file:r,message:i,line:s,column:l,codeFrame:d}),r===S&&b&&b(E)}else g()(I,e),console.error(e)}}),150);return()=>{clearTimeout(n);try{v.vol.rmdirSync(x,{recursive:!0})}catch(e){}}}))}finally{(0,T.end)()}}),{t:V},z),W.Component=M()(z,W._)}}]);
//# sourceMappingURL=548.b07040fc.js.map