"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[25],{"../components/repl/components/preview.marko":(e,n,t)=>{t.r(n),t.d(n,{default:()=>$});var s=t("../../node_modules/marko/dist/runtime/vdom/index.js"),o=t("../../node_modules/path-browserify/index.js"),r=t.n(o),a=t("../../node_modules/prettier/standalone.js"),i=(t("../../node_modules/prettier/parser-html.js"),t("../../node_modules/prettier/parser-babel.js")),l=t.n(i),d=t("../utils/highlight.js"),m=t.n(d),c=t("../utils/compiler/index.js"),u=t("../../node_modules/memfs/lib/index.js"),p=t("../../node_modules/@marko/tags-api-preview/dist/components/return/index-browser.js"),v=t.n(p),_=t("../../node_modules/@marko/tags-api-preview/dist/transform/cached-function/index-browser.js"),f=t("../../node_modules/@marko/tags-api-preview/dist/util/replace-assignments/index.js"),h=t.n(f),w=t("../../node_modules/marko/dist/runtime/vdom/helpers/v-element.js"),y=t.n(w),g=t("../../node_modules/marko/dist/runtime/helpers/class-value.js"),b=t.n(g),k=t("../../node_modules/@marko/tags-api-preview/dist/transform/native-tag-var/index-browser.js"),j=t.n(k),x=t("../../node_modules/@marko/tags-api-preview/dist/translate/native-tag-handlers/index-browser.js"),T=t.n(x),S=t("../../node_modules/marko/dist/runtime/vdom/helpers/attrs.js"),C=t.n(S),E=t("../../node_modules/@marko/tags-api-preview/dist/translate/track-rendering/index.js"),L=t("../../node_modules/marko/dist/runtime/components/renderer.js"),F=t.n(L),I=t("../../node_modules/marko/dist/runtime/components/registry/index-browser.js"),O=t("../../node_modules/marko/dist/runtime/components/defineComponent.js"),A=t.n(O);const M="AzL9TbmU",N=(0,s.t)(M),D=N;(0,I.r)(M,(()=>N));const U={onCreate(){this.state={}}};N._=F()((function(e,n,t,s,o){(0,E.begin)();try{var r=s;const o=e,l=j()(r,"0");var a={};n.e("iframe",C()(T()({...o},t,"iframe",a)),"@0",s,0,4,{...a});const d=j()(r,"1");var i={};n.e("iframe",C()(T()({...o,style:"display:none"},t,"iframe",i)),"@1",s,0,4,{...i}),e._return&&e._return({default:{next:()=>"none"===l().style.display?l():d(),swap(){const e="none"===l().style.display,n=e?d():l(),t=e?l():d();return n.srcdoc=n.srcdoc,n.style.display="none",t.style.display="",t}}},1)}finally{(0,E.end)()}}),{t:M},U),N.Component=A()(U,N._);var z=t("../../node_modules/marko/dist/runtime/helpers/render-tag.js"),J=t.n(z),R=t("../../node_modules/@marko/tags-api-preview/dist/components/_instance/index.marko"),W=t("../../node_modules/@marko/tags-api-preview/dist/components/effect/index.js"),B=t.n(W);const H="P9JdgJzT",P=(0,s.t)(H),$=P,q=y()("small",null,"6",null,1,0).t("Open the dev tools to view the full error.");(0,I.r)(H,(()=>P));const G={onCreate(){this.state={}}};P._=F()((function(e,n,t,s,o){(0,E.begin)();try{var i,d=s,p=o,f=e=>i=e;const{type:w,files:y,selectedFile:g,getTranslator:k,debounce:j,onSelectError:x,onSyntaxError:T}=e,S=d.elId("@0"),C=r().join("/",S,g.path),L=r().join("/",S,y[0].path),F="0"in p?p[0]:p[0]=null,I=e=>d.setState("0",e),O="1"in p?p[1]:p[1]=null,A=e=>d.setState("1",e),M=/(.+?)(?:\((\d+),(\d+)\)|:(\d+)): (.*(?=\s+\d+ | ))/;n.be("div",{class:b()(["preview-error",F&&"preview-error-active"])},"0",s,null,1),F&&(n.be("h1",{class:"error-name"},"1",s,null,1),n.t(F.name,s),F.file&&(n.t(" :  ",s),n.be("a",null,"2",s,null,0,{onclick:t.d("click",(function(){x(F)}),!1)}),n.t(F.file.slice(1),s),n.t("(",s),n.t(F.line,s),n.t(",",s),n.t(F.column,s),n.t(")",s),n.ee()),n.ee(),n.be("div",null,"3",s,null,0),n.t(F.message,s),n.ee(),C!==F.file&&(F.codeFrame?(n.be("pre",null,"4",s,null,0),n.be("code",null,"5",s,null,0),n.t(F.codeFrame,s),n.ee(),n.ee()):n.n(q,s))),n.ee(),"preview"===w?J()(R.default,{renderBody:(e,n,t,s)=>{var o=n,r=v()(t);J()(D,{class:"preview-output",_return:r},e,o,"8");const{default:a}=r();f(a)}},n,t,"7"):(n.be("div",{class:"preview-compiled"},"9",s,null,1),n.h(O,s),n.ee()),B()(s,(0,_.cache)((0,_.cached)(d,[j,y,S,w,L,k,i,C,T])||function(){let e,n;async function t(){for(const e of y){const n=r().join("/",S,e.path);u.vol.mkdirSync(r().dirname(n),{recursive:!0}),u.vol.writeFileSync(n,e.content)}try{if("preview"===w||"html"===w){const e=await(0,c.g)({entry:L,markoOptions:{output:"vdom",translator:k&&k()}});if("preview"===w){const{contentWindow:n,contentDocument:t}=i.next();n.__INTERNAL_MODULES__=window.__INTERNAL_MODULES__;const s=(0,n.eval)(e.js),o=t.createElement("style");o.innerHTML=e.css,t.head.appendChild(o),k?s.default({},t.body):(await s.render({})).appendTo(t.body),i.swap()}}else{const e=w.startsWith("compiled-html")?"html":"vdom",n=await(0,c.M)({entry:C,markoOptions:{output:e,translator:k&&k()}});h()(A,m()("javascript",(0,a.format)(n.replaceAll(`${S}/`,""),{parser:"babel",plugins:[l()]})))}h()(I,null)}catch(e){function t(){const n="SyntaxError"===e.name&&M.exec(e.message);if(n){let[t,s,o,a,i,l]=n;i&&(o=i,a=0),s=r().resolve(s),o=parseInt(o,10),a=parseInt(a,10)+1;const d=e.message.slice(t.length),m=h()(I,{name:e.name,file:s,message:l,line:o,column:a,codeFrame:d});s===C&&T&&T(m)}else h()(I,e),console.error(e)}j?n=setTimeout(t,1e3):t()}}return j?e=setTimeout(t,100):t(),()=>{clearTimeout(e),clearTimeout(n);try{u.vol.rmdirSync(S,{recursive:!0})}catch(e){}}}))}finally{(0,E.end)()}}),{t:H},G),P.Component=A()(G,P._)}}]);
//# sourceMappingURL=25.28358a5d.js.map