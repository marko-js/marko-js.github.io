"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[215],{"../../node_modules/@marko/translator-tags/dist/index.js":(e,t,r)=>{var n,s=r("../../node_modules/buffer/index.js").Buffer,i=Object.create,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,c=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,d=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of l(t))p.call(e,s)||s===r||o(e,s,{get:()=>t[s],enumerable:!(n=a(t,s))||n.enumerable});return e},u=(e,t,r)=>(r=null!=e?i(c(e)):{},d(!t&&e&&e.__esModule?r:o(r,"default",{value:e,enumerable:!0}),e)),f={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(f,{analyze:()=>Wi,getRuntimeEntryFiles:()=>Ji,internalEntryBuilder:()=>U,taglibs:()=>Vi,transform:()=>zi,translate:()=>qi}),e.exports=(n=f,d(o({},"__esModule",{value:!0}),n));var m=r("../../node_modules/@marko/babel-utils/dist/index.js"),h="marko-core",y="@marko/translator-interop-class-tags";function g(e,t){return function(e){const t=e.isMarkoTag()&&(0,m.getTagDef)(e)?.taglibId;return t===h||t===y}(e)&&e.node.name.value===t}var b=r("../../node_modules/@marko/babel-utils/dist/index.js"),x={transform:[e=>{(0,b.getTagDef)(e)?.renderer||e.replaceWithMultiple(e.node.body.body)}]},v=r("../../browser-shims/compiler/index.js"),w={migrate:[e=>{const t=e.node.var;if(!t||"Identifier"===t.type&&"input"===t.name)e.remove();else{const r=v.types.markoTag(v.types.stringLiteral("const"),[v.types.markoAttribute("value",v.types.identifier("input"))],v.types.markoTagBody([]));r.var=t,e.replaceWith(r)}}],attributes:{},autocomplete:[{displayText:"attrs/{ ... }",description:"Use to receive the attributes passed into this template.",snippet:"attrs/{ $1 }$2"}]},E=r("../../node_modules/@marko/babel-utils/dist/index.js"),k=r("../../browser-shims/compiler/index.js"),S={parse(e){const{node:t,hub:{file:r}}=e,n=t.rawValue,s=n.replace(/^client\s*/,"").trim(),i=t.name.start+(n.length-s.length);let o=(0,E.parseStatements)(r,s,i,i+s.length);1===o.length&&k.types.isBlockStatement(o[0])&&(o=o[0].body),e.replaceWith(k.types.markoScriptlet(o,!0,"client"))},parseOptions:{statement:!0,rawOpenTag:!0},autocomplete:[{displayText:"client <statement>",description:"A JavaScript statement which is only evaluated once your template is loaded on the client.",descriptionMoreURL:"https://markojs.com/docs/syntax/#client-javascript"}]},A=r("../../node_modules/@marko/babel-utils/dist/index.js"),C=r("../../node_modules/@marko/babel-utils/dist/index.js"),I=r("../../browser-shims/compiler/index.js"),j=r("../../browser-shims/compiler/index.js"),T=r("../../node_modules/@marko/babel-utils/dist/index.js"),M=r("../../browser-shims/compiler/index.js"),N=u(r("../../node_modules/path-browserify/index.js"));function D(e){if(e.downstreamExpressions.size)return!0;for(const t of e.aliases)if(D(t))return!0;for(const t of e.propertyAliases.values())if(D(t))return!0;return!1}var L=r("../../node_modules/@marko/babel-utils/dist/index.js"),P=r("../../browser-shims/compiler/index.js"),O=Symbol(),U={build(e){const t=e[O];if(!t)throw e.path.buildCodeFrameError("Unable to build hydrate code, no files were visited before finalizing the build");const r=t.imports.map((e=>P.types.importDeclaration([],P.types.stringLiteral(e))));return t.init&&(r.unshift(P.types.importDeclaration([P.types.importSpecifier(P.types.identifier("init"),P.types.identifier("init"))],P.types.stringLiteral(`@marko/runtime-tags/${e.markoOpts.optimize?"":"debug/"}dom`))),r.push(P.types.expressionStatement(P.types.callExpression(P.types.identifier("init"),[])))),r},visit(e,t,r){const n=t[O]||={imports:[],init:!1},{analyzedTags:s}=e.metadata.marko;n.imports.push((0,L.resolveRelativePath)(t,e.opts.filename)),n.init||=e.path.node.extra.hasInteractiveChild||e.path.node.extra.isInteractive||!1;for(const e of s||[])r(e)}};function R(){return"html"===F().output}function B(){return!R()}function F(){return ar.hub.file.markoOpts}var _=r("../../node_modules/@marko/babel-utils/dist/index.js"),$=r("../../browser-shims/compiler/index.js"),z=e=>{const t=new WeakMap;return[()=>{let r=t.get(ar);return r||t.set(ar,r=e()),r},e=>{t.set(ar,e)}]};function W(e,t){return[r=>{const n=ar.state[e]??={};return n[r.id]??=t&&t(r)},(t,r)=>{(ar.state[e]??={})[t.id]=r}]}var q=r("../../node_modules/@marko/babel-utils/dist/index.js"),V=r("../../browser-shims/compiler/index.js"),J=/^<.*>$|\.marko$/;function X(e){const t=e.node.extra??={};if(void 0===t.tagNameType){const s=e.get("name");if(s.isStringLiteral()){if(t.tagNameType="@"===s.node.value[0]?3:(0,q.isNativeTag)(e)?0:1,1===t.tagNameType){const i=s.node.value,o=e.scope.getBinding(i)?.identifier;if(o){const e=(r=V.types.identifier(i),n=s.node,r.start=n.start,r.loc=n.loc,r.end=n.end,r);e.extra={referencedBindings:o.extra?.binding},Z(s.replaceWith(e)[0],t)}else{const r=(0,q.loadFileForTag)(e),n=r?.ast.program;"class"===n?.extra.featureType&&(t.tagNameType=2,t.featureType="class")}}t.tagNameNullable=t.tagNameNullable=!1}else Z(s,t);void 0===t.tagNameType&&(t.tagNameType=2)}var r,n;return t.tagNameType}function Z(e,t){const r=[e];let n,s,i,o=!1;for(;(n=r.pop())&&2!==s;)if(n.isConditionalExpression())r.push(n.get("consequent")),n.node.alternate&&r.push(n.get("alternate"));else if(n.isLogicalExpression())"||"===n.node.operator?r.push(n.get("left")):o=!0,r.push(n.get("right"));else if(n.isAssignmentExpression())r.push(n.get("right"));else if(n.isBinaryExpression())s="+"!==n.node.operator||void 0!==s?2:0;else if(n.isStringLiteral()||n.isTemplateLiteral())s=void 0!==s?2:0;else if(n.isNullLiteral())o=!0;else if(n.isIdentifier()){if("undefined"===n.node.name){o=!0;continue}const t=n.scope.getBinding(n.node.name);if(!t){s=2;continue}if("module"===t.kind){const r=t.path.parent;if(J.test(r.source.value)&&r.specifiers.some((e=>V.types.isImportDefaultSpecifier(e)))){const t=(0,q.resolveTagImport)(e,r.source.value)||r.source.value;0===s||i&&i!==t?(s=2,i=void 0):(s=1,i=t)}else s=2;continue}const a=t.path;if(a.isMarkoTag()&&"local"===t.kind){const e=a.get("name").node.value;if("const"===e){r.push(a.get("attributes")[0].get("value"));continue}if("let"===e){s=2;continue}continue}s=2}else s=2;t.tagNameType=s,t.tagNameNullable=o,t.tagNameDynamic=!0,1===s&&i&&(t.tagNameImported=i)}function K(e){const t=e.node.extra??={};let r=t.section;if(!r&&("Program"===e.type||e.get("body").length)){const n=e.parentPath?G(e.parentPath):void 0,s=e.parentPath?.get("name"),i=e.isProgram()?"":ar.scope.generateUid(s.toString()+"Body"),o=e.hub.file.path.node.extra??={},a=o.sections??=[];r=t.section={id:a.length,name:i,depth:n?n.depth+1:0,parent:n,closures:new Set,bindings:new Set,startNodeContentType:se(e),endNodeContentType:ie(e),upstreamExpression:void 0},a.push(r)}return r}function G(e){let t=e;for(;;){if("Program"===t.type||"MarkoTagBody"===t.type&&0!==X(t.parentPath)&&"html-comment"!==t.parent.name.value)return K(t);t=t.parentPath}}function H(e){let t,r=e;for(;void 0===(t=r.node.extra?.section);)r=r.parentPath;return ee(t,r),t}var[Q]=W("scopeIdIdentifier",(e=>ar.scope.generateUidIdentifier(`scope${e.id}_id`))),[Y,ee]=W("sectionPath"),[te]=W("scopeIdentifier",(()=>$.types.identifier("undefined"))),re=(e,t)=>{const r=te(e);return t||"undefined"!==r.name||(r.name=ar.scope.generateUid(`scope${e.id}_`)),r};function ne(e){const{sections:t}=ar.node.extra;t?.forEach(e)}function se(e){for(const t of e.get("body")){const e=oe(t,"startNodeContentType");if(2!==e)return e}return 2}function ie(e){const t=e.get("body");for(let e=t.length;e--;){const r=oe(t[e],"endNodeContentType");if(2!==r)return r}return 2}function oe(e,t){if($.types.isMarkoText(e))return 5;if($.types.isMarkoPlaceholder(e))return 3;if($.types.isMarkoScriptlet(e)||$.types.isMarkoComment(e))return 2;if($.types.isMarkoTag(e.node)){const r=e;if((0,_.isNativeTag)(r))return 4;if((0,_.isAttributeTag)(r))return 2;if($.types.isStringLiteral(e.node.name)){switch(e.node.name.value){case"html-comment":return 0;case"let":case"const":case"attrs":case"effect":case"lifecycle":case"return":case"id":case"define":return 2}const n=(0,_.loadFileForTag)(r)?.ast.program.extra.section;if(n)return n[t]??2}}return 1}var ae=e=>{const t=e.upstreamExpression;return!t||Wr(t.referencedBindings)},le=(e,t)=>{for(const r of e.closures)if((!t||e.parent===r.section)&&Wr(r))return!0},ce=r("../../browser-shims/compiler/index.js"),pe=r("../../node_modules/@marko/babel-utils/dist/index.js"),de=r("../../browser-shims/compiler/index.js");function ue(e,t){return t?e:""}var fe=/^(--|ta|or|li|z)|n-c|i(do|nk|m|t)|w$|we/;function me(e,t){return t||0===t?`${e}:${"number"==typeof t&&t&&!fe.test(e)?t+"px":t}`:""}function he(e,t,r){switch(typeof e){case"string":return e;case"object":if(null!==e){let n="",s="";if(Array.isArray(e))for(const i of e){const e=he(i,t,r);""!==e&&(n+=s+e,s=t)}else for(const i in e){const o=r(i,e[i]);""!==o&&(n+=s+o,s=t)}return n}}return""}var{hasOwnProperty:ye}={};function ge(e){return ve("class",he(e," ",ue))}function be(e){return ve("style",he(e,";",me))}function xe(e,t){return null==(r=t)||!1===r?"":function(e,t){switch(typeof t){case"string":return` ${e+we(t)}`;case"boolean":return` ${e}`;case"number":return` ${e}=${t}`;case"object":if(t instanceof RegExp)return` ${e+we(t.source)}`}return` ${e+we(t+"")}`}(e,t);var r}function ve(e,t){return t&&` ${e}=${ke(t)}`}function we(e){return e?`=${ke(e)}`:""}(function*(){})().constructor,async function*(){}().constructor,(()=>{const e=new Map;for(const t of Object.getOwnPropertyNames(Symbol)){const r=Symbol[t];"symbol"==typeof r&&e.set(r,"Symbol."+t)}})(),new Map([[AggregateError,"AggregateError"],[Array,"Array"],[Array.from,"Array.from"],[Array.isArray,"Array.isArray"],[Array.of,"Array.of"],[ArrayBuffer,"ArrayBuffer"],[ArrayBuffer.isView,"ArrayBuffer.isView"],[Atomics.add,"Atomics.add"],[Atomics.and,"Atomics.and"],[Atomics.compareExchange,"Atomics.compareExchange"],[Atomics.exchange,"Atomics.exchange"],[Atomics.isLockFree,"Atomics.isLockFree"],[Atomics.load,"Atomics.load"],[Atomics.notify,"Atomics.notify"],[Atomics.or,"Atomics.or"],[Atomics.store,"Atomics.store"],[Atomics.sub,"Atomics.sub"],[Atomics.wait,"Atomics.wait"],[BigInt,"BigInt"],[BigInt.asIntN,"BigInt.asIntN"],[BigInt.asUintN,"BigInt.asUintN"],[BigInt64Array,"BigInt64Array"],[BigInt64Array.from,"BigInt64Array.from"],[BigInt64Array.of,"BigInt64Array.of"],[BigUint64Array,"BigUint64Array"],[BigUint64Array.from,"BigUint64Array.from"],[BigUint64Array.of,"BigUint64Array.of"],[Boolean,"Boolean"],[console.assert,"console.assert"],[console.clear,"console.clear"],[console.count,"console.count"],[console.countReset,"console.countReset"],[console.debug,"console.debug"],[console.dir,"console.dir"],[console.dirxml,"console.dirxml"],[console.error,"console.error"],[console.group,"console.group"],[console.groupCollapsed,"console.groupCollapsed"],[console.groupEnd,"console.groupEnd"],[console.info,"console.info"],[console.log,"console.log"],[console.table,"console.table"],[console.time,"console.time"],[console.timeEnd,"console.timeEnd"],[console.timeLog,"console.timeLog"],[console.timeStamp,"console.timeStamp"],[console.trace,"console.trace"],[console.warn,"console.warn"],[DataView,"DataView"],[Date,"Date"],[Date.now,"Date.now"],[Date.parse,"Date.parse"],[Date.UTC,"Date.UTC"],[decodeURI,"decodeURI"],[decodeURIComponent,"decodeURIComponent"],[encodeURI,"encodeURI"],[encodeURIComponent,"encodeURIComponent"],[Error,"Error"],[EvalError,"EvalError"],[Float32Array,"Float32Array"],[Float32Array.from,"Float32Array.from"],[Float32Array.of,"Float32Array.of"],[Float64Array,"Float64Array"],[Float64Array.from,"Float64Array.from"],[Float64Array.of,"Float64Array.of"],[Function,"Function"],[globalThis.atob,"atob"],[globalThis.btoa,"btoa"],[globalThis.clearImmediate,"clearImmediate"],[globalThis.clearInterval,"clearInterval"],[globalThis.clearTimeout,"clearTimeout"],[globalThis.crypto?.getRandomValues,"crypto.getRandomValues"],[globalThis.crypto?.randomUUID,"crypto.randomUUID"],[globalThis.fetch,"fetch"],[globalThis.performance?.now,"performance.now"],[globalThis.queueMicrotask,"queueMicrotask"],[globalThis.setImmediate,"setImmediate"],[globalThis.setInterval,"setInterval"],[globalThis.setTimeout,"setTimeout"],[globalThis.structuredClone,"structuredClone"],[globalThis.URL,"URL"],[globalThis.URLSearchParams,"URLSearchParams"],[globalThis.WritableStream,"WritableStream"],[Int16Array,"Int16Array"],[Int16Array.from,"Int16Array.from"],[Int16Array.of,"Int16Array.of"],[Int32Array,"Int32Array"],[Int32Array.from,"Int32Array.from"],[Int32Array.of,"Int32Array.of"],[Int8Array,"Int8Array"],[Int8Array.from,"Int8Array.from"],[Int8Array.of,"Int8Array.of"],[Intl.Collator,"Intl.Collator"],[Intl.DateTimeFormat,"Intl.DateTimeFormat"],[Intl.DisplayNames,"Intl.DisplayNames"],[Intl.getCanonicalLocales,"Intl.getCanonicalLocales"],[Intl.ListFormat,"Intl.ListFormat"],[Intl.Locale,"Intl.Locale"],[Intl.NumberFormat,"Intl.NumberFormat"],[Intl.PluralRules,"Intl.PluralRules"],[Intl.RelativeTimeFormat,"Intl.RelativeTimeFormat"],[Intl.Segmenter,"Intl.Segmenter"],[Intl.supportedValuesOf,"Intl.supportedValuesOf"],[isFinite,"isFinite"],[isNaN,"isNaN"],[JSON.parse,"JSON.parse"],[JSON.stringify,"JSON.stringify"],[Map,"Map"],[Map.groupBy,"Map.groupBy"],[Math.abs,"Math.abs"],[Math.acos,"Math.acos"],[Math.acosh,"Math.acosh"],[Math.asin,"Math.asin"],[Math.asinh,"Math.asinh"],[Math.atan,"Math.atan"],[Math.atan2,"Math.atan2"],[Math.atanh,"Math.atanh"],[Math.cbrt,"Math.cbrt"],[Math.ceil,"Math.ceil"],[Math.clz32,"Math.clz32"],[Math.cos,"Math.cos"],[Math.cosh,"Math.cosh"],[Math.exp,"Math.exp"],[Math.expm1,"Math.expm1"],[Math.floor,"Math.floor"],[Math.fround,"Math.fround"],[Math.hypot,"Math.hypot"],[Math.imul,"Math.imul"],[Math.log,"Math.log"],[Math.log10,"Math.log10"],[Math.log1p,"Math.log1p"],[Math.log2,"Math.log2"],[Math.max,"Math.max"],[Math.min,"Math.min"],[Math.pow,"Math.pow"],[Math.random,"Math.random"],[Math.round,"Math.round"],[Math.sign,"Math.sign"],[Math.sin,"Math.sin"],[Math.sinh,"Math.sinh"],[Math.sqrt,"Math.sqrt"],[Math.tan,"Math.tan"],[Math.tanh,"Math.tanh"],[Math.trunc,"Math.trunc"],[Number,"Number"],[Number.isFinite,"Number.isFinite"],[Number.isInteger,"Number.isInteger"],[Number.isNaN,"Number.isNaN"],[Number.isSafeInteger,"Number.isSafeInteger"],[Number.parseFloat,"Number.parseFloat"],[Number.parseInt,"Number.parseInt"],[Object,"Object"],[Object.assign,"Object.assign"],[Object.create,"Object.create"],[Object.defineProperties,"Object.defineProperties"],[Object.defineProperty,"Object.defineProperty"],[Object.entries,"Object.entries"],[Object.freeze,"Object.freeze"],[Object.fromEntries,"Object.fromEntries"],[Object.getOwnPropertyDescriptor,"Object.getOwnPropertyDescriptor"],[Object.getOwnPropertyDescriptors,"Object.getOwnPropertyDescriptors"],[Object.getOwnPropertyNames,"Object.getOwnPropertyNames"],[Object.getOwnPropertySymbols,"Object.getOwnPropertySymbols"],[Object.getPrototypeOf,"Object.getPrototypeOf"],[Object.is,"Object.is"],[Object.isExtensible,"Object.isExtensible"],[Object.isFrozen,"Object.isFrozen"],[Object.isSealed,"Object.isSealed"],[Object.keys,"Object.keys"],[Object.preventExtensions,"Object.preventExtensions"],[Object.seal,"Object.seal"],[Object.setPrototypeOf,"Object.setPrototypeOf"],[Object.values,"Object.values"],[parseFloat,"parseFloat"],[parseInt,"parseInt"],[Promise,"Promise"],[Proxy,"Proxy"],[RangeError,"RangeError"],[ReferenceError,"ReferenceError"],[Reflect.apply,"Reflect.apply"],[Reflect.construct,"Reflect.construct"],[Reflect.defineProperty,"Reflect.defineProperty"],[Reflect.deleteProperty,"Reflect.deleteProperty"],[Reflect.get,"Reflect.get"],[Reflect.getOwnPropertyDescriptor,"Reflect.getOwnPropertyDescriptor"],[Reflect.getPrototypeOf,"Reflect.getPrototypeOf"],[Reflect.has,"Reflect.has"],[Reflect.isExtensible,"Reflect.isExtensible"],[Reflect.ownKeys,"Reflect.ownKeys"],[Reflect.preventExtensions,"Reflect.preventExtensions"],[Reflect.set,"Reflect.set"],[Reflect.setPrototypeOf,"Reflect.setPrototypeOf"],[RegExp,"RegExp"],[Set,"Set"],[String,"String"],[String.fromCharCode,"String.fromCharCode"],[String.fromCodePoint,"String.fromCodePoint"],[String.raw,"String.raw"],[Symbol,"Symbol"],[Symbol.for,"Symbol.for"],[SyntaxError,"SyntaxError"],[TypeError,"TypeError"],[Uint16Array,"Uint16Array"],[Uint16Array.from,"Uint16Array.from"],[Uint16Array.of,"Uint16Array.of"],[Uint32Array,"Uint32Array"],[Uint32Array.from,"Uint32Array.from"],[Uint32Array.of,"Uint32Array.of"],[Uint8Array,"Uint8Array"],[Uint8Array.from,"Uint8Array.from"],[Uint8Array.of,"Uint8Array.of"],[Uint8ClampedArray,"Uint8ClampedArray"],[Uint8ClampedArray.from,"Uint8ClampedArray.from"],[Uint8ClampedArray.of,"Uint8ClampedArray.of"],[URIError,"URIError"],[WeakMap,"WeakMap"],[WeakSet,"WeakSet"]]),new Map([[Atomics,"Atomics"],[console,"console"],[globalThis,"globalThis"],[globalThis.crypto,"crypto"],[Intl,"Intl"],[JSON,"JSON"],[Math,"Math"],[Reflect,"Reflect"]]),Symbol("Scope ID"),globalThis.setImmediate||globalThis.setTimeout||globalThis.queueMicrotask;var Ee=/["'>\s]/g;function ke(e){if(Ee.test(e)){const t=e[Ee.lastIndex-1];return Ee.lastIndex=0,'"'===t?`'${e.replace(/'/g,"&#39;")}'`:`"${e.replace(/"/g,"&#34;")}"`}return e}function Se(e){return e?e+"":0===e?"0":""}Symbol();var Ae=/[<&]/g,Ce=e=>"&"===e?"&amp;":"&lt;",Ie=e=>Ae.test(e)?e.replace(Ae,Ce):e;function je(e){return e?Ie(e+""):0===e?"0":"&zwj;"}var Te=/<\/script/g,Me=e=>Te.test(e)?e.replace(Te,"\\x3C/script"):e;function Ne(e){return e?Me(e+""):0===e?"0":""}var De=/<\/style/g,Le=e=>De.test(e)?e.replace(De,"\\3C/style"):e;function Pe(e){return e?Le(e+""):0===e?"0":""}var Oe=r("../../browser-shims/compiler/index.js");function Ue(e,t){return e?Array.isArray(e)?(e.push(t),e):[e,t]:t}function Re(e,t){if(e)if(Array.isArray(e))for(const r of e)t(r);else t(e)}function Be(e,t,r){let n=t.length,s=0;for(;s<n;){const i=s+n>>>1,o=t[i],a=e(o,r);if(0===a)return o;a>0?n=i:s=i+1}}function Fe(e,t,r){const n=t.length;let s=n,i=0;for(;i<s;){const n=i+s>>>1,o=e(t[n],r);if(0===o)return t;o>0?s=n:i=n+1}const o=new Array(n+1);for(let e=0;e<i;e++)o[e]=t[e];let a=r;for(;i<n;){const e=a;a=t[i],o[i++]=e}return o[n]=a,o}function _e(e,t,r){const n=e(t,r);return 0===n?t:n<0?[t,r]:[r,t]}function $e(e,t){const r=e.depth,n=Oe.types.objectPattern([]);let s;return Re(t,(t=>{if(t.name.includes("#"))return;const i=$r(t),o=Oe.types.identifier(t.name),a=i.value===o.name;let l=n;if(t.section!==e){s||(s=[n]);const e=r-t.section.depth;let i=s.length,o=s[i-1];for(;i<=e;i++){const e=Oe.types.objectPattern([]);o.properties.push(Oe.types.objectProperty(Oe.types.identifier("_"),e)),s.push(e),o=e}l=s[e]}l.properties.push(Oe.types.objectProperty(a?o:i,o,!1,a))})),n}function ze(e,t){let r=lr??Oe.types.identifier("undefined");const n=e.depth-t.depth;for(let e=0;e<n;e++)r=Oe.types.memberExpression(r,Oe.types.identifier("_"));if(n<0)throw new Error("Unable to find scope for reference.");return r}function We(e,t){return Oe.types.memberExpression(ze(e,t.section),$r(t),!0)}var qe=["createTemplate","createRenderer","value","intersection","closure","dynamicClosure","loopOf","loopIn","loopTo","conditional","bindFunction","bindRenderer"];function Ve(e){const{output:t}=F();return(0,pe.importNamed)(ar.hub.file,function(e){const{optimize:t}=F();return`@marko/runtime-tags/${t?"":"debug/"}${"html"===e?"html":"dom"}`}(t),e)}function Je(e,...t){const r=de.types.callExpression(Ve(e),function(e){const t=[];for(let r=e.length;r--;){const n=e[r];(n||t.length)&&(t[r]=n||de.types.unaryExpression("void",de.types.numericLiteral(0)))}return t}(t));return qe.includes(e)&&(r.leadingComments=[{type:"CommentBlock",value:" @__PURE__ "}]),r}function Xe(){return{escapeXML:je,toString:Se,attr:xe,classAttr:ge,styleAttr:be,escapeScript:Ne,escapeStyle:Pe}}var Ze=r("../../node_modules/@marko/babel-utils/dist/index.js"),Ke=r("../../browser-shims/compiler/index.js"),Ge=r("../../node_modules/@marko/babel-utils/dist/index.js"),He=r("../../browser-shims/compiler/index.js");function Qe(e){for(const t of e.get("attributes"))if(t.isMarkoSpreadAttribute())throw t.buildCodeFrameError(`The \`${e.get("name").node.value}\` tag does not support \`...spread\` attributes.`)}function Ye(e){if(e.node.body.body.length)throw e.get("name").buildCodeFrameError(`The \`${e.get("name").node.value}\` tag does not support body content.`)}var et=r("../../browser-shims/compiler/index.js"),tt=r("../../browser-shims/compiler/index.js");function rt(e){const t=[],r=[];let n=e[0];for(let s=1;s<e.length;s++){let i=e[s];if("object"==typeof i){if(!tt.types.isStringLiteral(i)){if(tt.types.isTemplateLiteral(i)){let t=s+1;const r=i.expressions.length;st(e,t,i.quasis.length+r);for(let n=0;n<r;n++)e[t++]=i.quasis[n].value.raw,e[t++]=i.expressions[n];e[t]=i.quasis[r].value.raw;continue}r.push(i),t.push(n),n="";continue}i=i.value}n+=i}return r.length?(t.push(n),tt.types.templateLiteral(t.map((e=>tt.types.templateElement({raw:e}))),r)):n?tt.types.stringLiteral(n):void 0}function nt(e,t){e[e.length-1]+=t}function st(e,t,r){for(let n=e.length-1;n>=t;n--)e[n+r]=e[n]}var it=r("../../browser-shims/compiler/index.js"),[ot]=W("walks",(()=>[""])),[at]=W("walkComment",(()=>[])),[lt]=W("steps",(()=>[])),ct={32:"get",33:"before",35:"after",36:"inside",37:"replace",38:"endChild",47:"beginChild",67:"next",97:"over",107:"out",117:"multiplier",91:"nextEnd",106:"overEnd",116:"outEnd",126:"multiplierEnd"};function pt(e){lt(H(e)).push(0)}function dt(e){lt(H(e)).push(1)}function ut(e){lt(H(e)).push(0,1)}function ft(e,t){if(R())return;const r=H(e),n=lt(r),s=ot(r),i=at(r);let o="";if(n.length){const e=[];let t=0;for(const r of n)0===r?(t++,e.push(67)):(t--,t>=0?(e.length=e.lastIndexOf(67),e.push(97)):(e.length=e.lastIndexOf(107)+1,e.push(107),t=0));let r=e[0],s=0;for(const t of e)t!==r?(i.push(`${ct[r]}(${s})`),o+=mt(r,s),r=t,s=1):s++;i.push(`${ct[r]}(${s})`),o+=mt(r,s),n.length=0}void 0!==t&&(32!==t&&bt(e)`<!>`,i.push(`${ct[t]}`),o+=String.fromCharCode(t)),nt(s,o)}function mt(e,t){switch(e){case 67:return ht(t,e,20);case 97:case 107:return ht(t,e,10);default:throw new Error(`Unexpected walk code: ${e}`)}}function ht(e,t,r){let n="";if(e>=r){const t=Math.floor(e/r);n+=ht(t,117,10),e-=t*r}return n+=String.fromCharCode(t+e),n}function yt(e){const t=1===e.startNodeContentType?String.fromCharCode(68):"",r=1===e.endNodeContentType?String.fromCharCode(68):"",n=rt([t,...ot(e),r])||it.types.stringLiteral("");return""!==n.value&&(n.leadingComments=[{type:"CommentBlock",value:" "+at(e).join(", ")+" "}]),n}var[gt]=W("writes",(()=>[""]));function bt(e){const t=H(e);return(e,...r)=>{const n=r.length,s=gt(t);nt(s,e[0]);for(let t=0;t<n;t++)s.push(r[t],e[t+1])}}function xt(e){const t=gt(H(e)),r=rt(t);if(t.length=0,t[0]="",r)return et.types.expressionStatement(Je("write",r))}function vt(e){const t=xt(e);t&&e.insertBefore(t)[0].skip()}function wt(e){const t=e.isProgram()?e:e.get("body"),r=xt(t);r&&t.pushContainer("body",r)[0].skip()}function Et(e){const t=1===e.startNodeContentType?"<!>":"",r=1===e.endNodeContentType?"<!>":"",n=gt(e);return{setup:ir(e),walks:yt(e),writes:rt([t,...n,r])||et.types.stringLiteral("")}}function kt(e,t){const r=H(e);if(0!==t.type)throw e.buildCodeFrameError("Tried to mark a node that was not determined to need a mark during analyze.");R()&&bt(e)`${Je("markResumeNode",Q(r),$r(t))}`}var[St,At]=W("returnId"),Ct=new WeakSet,It={analyze(e){if((0,Ge.assertNoArgs)(e),(0,Ge.assertNoVar)(e),(0,Ge.assertNoParams)(e),Ye(e),Qe(e),Ct.has(e.hub))throw e.get("name").buildCodeFrameError("The `return` tag can only be used once per template.");Ct.add(e.hub);const{node:t}=e,[r]=t.attributes;if(!He.types.isMarkoAttribute(r)||!r.default)throw e.get("name").buildCodeFrameError("The `return` tag requires a value.");if(t.attributes.length>1&&"valueChange"!==t.attributes[1].name){const r=t.attributes[1].loc?.start,n=t.attributes[t.attributes.length-1].loc?.end,s="The `return` tag only supports the `value` attribute.";throw null==r||null==n?e.get("name").buildCodeFrameError(s):e.hub.buildError({loc:{start:r,end:n}},s,Error)}},translate:{exit(e){const t=H(e),{node:{attributes:[{value:r}]},hub:{file:n}}=e;if(R()){vt(e);const s=n.path.scope.generateUidIdentifier("return");At(t,s),e.replaceWith(He.types.variableDeclaration("const",[He.types.variableDeclarator(s,r)]))[0].skip()}else Jt(t,r.extra?.referencedBindings,{identifier:Ve("tagVarSignal"),hasDownstreamIntersections:()=>!0},r),e.remove()}},autocomplete:[{displayText:"return=<value>",description:"Provides a value for use in a parent template.",snippet:"return=${1:value}",descriptionMoreURL:"https://markojs.com/docs/core-tags/#return"}]},[jt]=W("signals",(()=>new Map)),[Tt,Mt]=W("queue");function Nt(e,t){Mt(H(e.get("body")),t)}var[Dt]=W("closures",(()=>[])),Lt=(e,t,r)=>{let n=e;for(;void 0!==n&&n!==t;)Dt(n).push(r),n=n.parent},[Pt,Ot]=W("forceResumeScope");function Ut(e){Ot(e,!0)}var[Rt]=W("serializedScopeProperties",(()=>new Map)),Bt=()=>Ke.types.stringLiteral("SIGNAL NOT INITIALIZED");function Ft(e,t,r=function(e){let t;if(e)if(Array.isArray(e)){t="expr";for(const r of e)t+=`_${r.name}`}else t=e.name;else t="setup";return t}(t)){const n=jt(e);let s=n.get(t);if(!s){const i=t&&!Array.isArray(t)&&t.section===e&&t.export;if(n.set(t,s={identifier:i?Ke.types.identifier(i):ar.scope.generateUidIdentifier(r+e.name.replace("_","$")),referencedBindings:t,section:e,values:[],intersection:void 0,render:[],effect:[],effectInlineReferences:void 0,subscribers:[],closures:new Map,hasDownstreamIntersections:()=>{let r=!(!s.intersection&&!s.closures.size);if(!r)for(const e of s.values)if(e.signal.hasDownstreamIntersections()){r=!0;break}if(!r&&!Array.isArray(t)&&t){for(const n of t.aliases)if(Ft(e,n).hasDownstreamIntersections()){r=!0;break}if(!r)for(const[,n]of t.propertyAliases)if(Ft(e,n).hasDownstreamIntersections()){r=!0;break}}return s.hasDownstreamIntersections=()=>r,r},build:Bt,export:!!i}),R())return s;if(t){if(Array.isArray(t))Wt(t,s),s.build=()=>Je("intersection",Ke.types.numericLiteral(t.length),$t(s,[lr],t));else if(t.section!==e){const r=Ft(t.section,t);Lt(e,e.parent,s.identifier),r.closures.set(e,s),s.build=()=>{const r=Tt(e),n=ze(e,t.section),i=n.object===lr;return Je((s.isDynamicClosure=!(i&&r))?"dynamicClosure":"closure",$r(t),$t(s,[lr,Ke.types.identifier(t.name)]),i?null:Ke.types.arrowFunctionExpression([lr],n),zt(s))}}}else s.build=()=>$t(s,[lr])}return s}function _t(e){const t=$r(e),r=Ft(e.section,e);r.build=()=>{const n=$t(r,[lr,Ke.types.identifier(e.name)]),s=zt(r),i=!e.upstreamAlias&&(3===e.type||2===e.type);return(!e.upstreamAlias||e.property)&&(e.downstreamExpressions.size||n.body.body.length>0)||s||i||s?Je("value",t,n,s):n},r.valueAccessor=t;for(const t of e.aliases)_t(t);for(const t of e.propertyAliases.values())_t(t);return r}function $t(e,t,r){const n=e.section,s=e.referencedBindings;if(s&&!Array.isArray(s)&&s.section===n){const[r,n]=t;for(const t of s.aliases){const s=Ft(t.section,t);e.render.push(Ke.types.expressionStatement(Ke.types.callExpression(s.callee||s.identifier,[r,n])))}for(const[t,i]of s.propertyAliases){const s=Ft(i.section,i);e.render.push(Ke.types.expressionStatement(Ke.types.callExpression(s.callee||s.identifier,[r,or(n,t)])))}}for(const t of e.values)e.render.push(Ke.types.expressionStatement(Ke.types.callExpression(t.signal.callee||t.signal.identifier,[t.scope,t.value])));return r&&e.render.unshift(Ke.types.variableDeclaration("const",[Ke.types.variableDeclarator($e(n,r),lr)])),Ke.types.arrowFunctionExpression(t,Ke.types.blockStatement(e.render))}function zt(e){const t=e.section;let r=e.intersection;const n=e.referencedBindings;if(n&&!Array.isArray(n)&&n.section===e.section){for(const e of n.aliases){const t=Ft(e.section,e);t.hasDownstreamIntersections()&&(r=Ue(r,Ke.types.identifier(t.identifier.name)))}for(const[,e]of n.propertyAliases){const t=Ft(e.section,e);t.hasDownstreamIntersections()&&(r=Ue(r,Ke.types.identifier(t.identifier.name)))}}for(const t of e.values)t.signal.hasDownstreamIntersections()&&(r=Ue(r,t.intersectionExpression??Ke.types.identifier(t.signal.identifier.name)));const s=Array.from(e.closures.entries()).sort((([e],[t])=>e.id-t.id));for(const[n,i]of s){const s=Tt(n),o=n.parent===t;s&&o?r=Ue(r,s(i.identifier)):e.hasDynamicSubscribers||(e.hasDynamicSubscribers=!0)}return e.hasDynamicSubscribers&&(e.hasDynamicSubscribers=!0,r=Ue(r,Je("dynamicSubscribers",e.valueAccessor))),Array.isArray(r)?Je("intersections",Ke.types.arrayExpression(r)):r}function Wt(e,t){if(Array.isArray(e))return void e.forEach((e=>Wt(e,t)));const r=Ft(t.section,e);r.intersection=Ue(r.intersection,t.identifier)}function qt(e){for(let t=e.length-1;t>=0;t--){const r=e[t];if(Ke.types.isArrowFunctionExpression(r)){const n=r.body.body;n&&(0===n.length?e[t]=Ke.types.nullLiteral():1===n.length&&Ke.types.isExpressionStatement(n[0])&&(r.body=n[0].expression))}}for(let t=e.length-1;Ke.types.isNullLiteral(e[t]);)e.length=t--}function Vt(e,t,r,n,s,i){const o=Ft(t,r),a=o[e]??=[];if(Array.isArray(n)?a.push(...n):a.push(n),"effect"===e)if(Array.isArray(s))for(const e of s)!i&&Ke.types.isFunction(e)||Xt(o,e);else!i&&Ke.types.isFunction(s)||Xt(o,s)}function Jt(e,t,r,n,s=lr,i){Ft(e,t).values.push({signal:r,value:n,scope:s,intersectionExpression:i})}function Xt(e,t){e.effectInlineReferences=Pr.union(e.effectInlineReferences,t.extra?.referencedBindings)}function Zt(e,t,r){const{markoOpts:n,opts:{filename:s}}=ar.hub.file;let i="";if(t)if("string"==typeof t)i+=`_${t}`;else if(Array.isArray(t))for(const e of t)i+=`_${e.name}`;else i+=`_${t.name}`;return(0,Ze.getTemplateId)(n,s,`${e.id}${i}${r?"/"+r:""}`)}function Kt(){Ke.types.traverseFast(ar.node,(e=>{if(Ke.types.isIdentifier(e)){const t=e.extra&&(e.extra.source||e.extra.binding);t&&t.name!==e.name&&(e.name=t.name)}}))}function Gt(e){const t=[...jt(e).values()].sort(Ht);for(const r of t){let t;if(r.effect.length){const n=Ke.types.identifier(`${r.identifier.name}_effect`);r.effectInlineReferences&&r.effect.unshift(Ke.types.variableDeclaration("const",[Ke.types.variableDeclarator($e(e,r.effectInlineReferences),lr)])),t=Ke.types.variableDeclarator(n,Je("register",Ke.types.stringLiteral(Zt(e,r.referencedBindings)),Ke.types.arrowFunctionExpression([lr],1===r.effect.length&&Ke.types.isExpressionStatement(r.effect[0])?r.effect[0].expression:Ke.types.blockStatement(r.effect)))),r.render.push(Ke.types.expressionStatement(Je("queueEffect",lr,n)))}let n=r.build();Ke.types.isCallExpression(n)&&qt(n.arguments),r.register&&(n=Je("registerBoundSignal",Ke.types.stringLiteral(Zt(e,r.referencedBindings)),n)),r.isDynamicClosure&&Wr(r.referencedBindings)&&(n=Je("registerSubscriber",Ke.types.stringLiteral(Zt(e,r.referencedBindings,"subscriber")),n));const s=Ke.types.variableDeclarator(r.identifier,n);let i=Ke.types.variableDeclaration("const",[s]);r.export&&(i=Ke.types.exportNamedDeclaration(i));const o=ar.pushContainer("body",t?[Ke.types.variableDeclaration("const",[t]),i]:i);for(const t of o)t.traverse(rr,{root:t,section:e})}}function Ht(e,t){const r=Qt(e),n=Qt(t);for(let e=Math.max(r.length,n.length)-1;e>=0;e--){const t=(n[e]??-1)-(r[e]??-1);if(0!==t)return t}return 0}function Qt({referencedBindings:e}){return e?Array.isArray(e)?e.map(Yt).sort():[Yt(e)]:[]}function Yt(e){return 1e4*(0===e.type?1:0)+e.id}function er(e,t){Vt("effect",e,t,void 0,[])}function tr(e,t){if(!function(e){return void 0!==e.node.extra?.section}(e))return;const r=H(e),n=Array.from(jt(r).values()),s=Q(r);for(const t of r.closures)if(Wr(t)){let n=r;for(;n!==t.section;)Rt(n).set(Ke.types.stringLiteral("_"),Je("ensureScopeWithId",Q(n=n.parent)));Ut(t.section);const i=r.parent?.id===t.section.id;(!Tt(r)||!i)&&e.pushContainer("body",Ke.types.expressionStatement(Je("writeEffect",s,Ke.types.stringLiteral(Zt(r,t,"subscriber")))))}for(let t=n.length;t--;)if(n[t].effect.length){const i=n[t].referencedBindings;e.pushContainer("body",Ke.types.expressionStatement(Je("writeEffect",s,Ke.types.stringLiteral(Zt(r,i)))))}const i=new Set,o=Rt(r),a=[];for(const e of r.bindings)if(e.serialize&&0!==e.type){const t=$r(e);a.push(Ke.types.objectProperty(t,Ke.types.identifier(e.name))),i.add(t.value)}t&&void 0!==St(r)&&a.push(Ke.types.objectProperty(Ke.types.stringLiteral("/"),t));for(const[e,t]of o)i.has(e.value)||(a.push(Ke.types.objectProperty(e,t,!Ke.types.isLiteral(e))),i.add(e.value));(a.length||Pt(r))&&e.pushContainer("body",Ke.types.expressionStatement(Je("writeScope",s,Ke.types.objectExpression(a)))),e.get("body").length&&e.unshiftContainer("body",Ke.types.variableDeclaration("const",[Ke.types.variableDeclarator(s,Je("nextScopeId"))]))}var rr={FunctionExpression:{exit:sr},ArrowFunctionExpression:{exit:sr}};function nr(e,t,r,n,s){switch(n||(n={statement:e.getStatementParent(),end:e.getStatementParent()}),t.type){case"ObjectPattern":for(const s of t.properties)nr(e,s,r,n);break;case"ArrayPattern":for(const s in t.elements)null!==t.elements[s]&&nr(e,t.elements[s],r,n,(e=>t.elements[s]=e));break;case"RestElement":nr(e,t.argument,r,n,(e=>t.argument=e));break;case"ObjectProperty":nr(e,t.value,r,n,(e=>t.value=e));break;case"Identifier":{const e=t.extra?.source;if(e){const{buildAssignment:i}=Ft(e.section,e);if(i){const e=n.statement.scope.generateUidIdentifier(t.name);n.statement.insertBefore(Ke.types.variableDeclaration("let",[Ke.types.variableDeclarator(e)])),s?.(e),[n.end]=n.end.insertAfter(Ke.types.expressionStatement(i(r,e)))}}}}}function sr(e,{root:t,section:r}){const{node:n}=e,{extra:s}=n;if(!s?.referencedBindings)return;const{name:i,referencedBindings:o}=s,a=e.hub.file.path.scope.generateUidIdentifier(i);t.insertBefore(Ke.types.variableDeclaration("const",[Ke.types.variableDeclarator(a,Ke.types.arrowFunctionExpression([lr],o?Ke.types.blockStatement([Ke.types.variableDeclaration("const",[Ke.types.variableDeclarator($e(r,o),lr)]),Ke.types.returnStatement(n)]):n))]))[0].skip(),e.replaceWith(Ke.types.callExpression(a,[lr]))[0].skip()}function ir(e){return jt(e).get(void 0)?.identifier}function or(e,t){const r=function(e){return/^[a-z_$][a-z0-9_$]*$/i.test(e)?Ke.types.identifier(e):/^(?:0|[1-9][0-9]*)$/.test(e)?Ke.types.numericLiteral(parseInt(e,10)):Ke.types.stringLiteral(e)}(t);return Ke.types.memberExpression(e,r,"Identifier"!==r.type)}var ar,lr,cr={translate:{exit(e){ft(e);const t=H(e),{walks:r,writes:n,setup:s}=Et(t),i=e.node.extra.domExports,o=ce.types.identifier(i.template),a=ce.types.identifier(i.walks),l=ce.types.identifier(i.setup),c=ce.types.identifier(i.closures),p=e.node.extra.binding,d=p&&D(p)?_t(p):void 0;!function(){if(ar.node.extra.assignments)for(const[e,t]of ar.node.extra.assignments){const{node:r}=t;if("UpdateExpression"===r.type){const n=r.argument.extra?.source;if(n){const{buildAssignment:s}=Ft(n.section,n);if(s){const n=s(e,Ke.types.binaryExpression("++"===r.operator?"+":"-",r.argument,Ke.types.numericLiteral(1)));t.replaceWith(r.prefix||t.parentPath.isExpressionStatement()?n:Ke.types.sequenceExpression([n,r.argument]))}}}else if("ObjectPattern"===r.left.type||"ArrayPattern"===r.left.type)nr(t,r.left,e);else if("Identifier"===r.left.type){const n=r.left.extra?.source;if(n){const{buildAssignment:s}=Ft(n.section,n);if(s){const n=s(e,"="===r.operator?r.right:Ke.types.binaryExpression(r.operator.slice(0,-1),r.left,r.right));t.replaceWith(n)}}}}}(),function(e){const{sections:t}=ar.node.extra;for(let r=t.length;r--;)e(t[r])}((r=>{if(r!==t){const t=Y(r),n=t.node.extra?.binding,s=n&&_t(n),{walks:i,writes:o,setup:a}=Et(r),l=Dt(r),c=ce.types.identifier(r.name),p=Je("createRenderer",o,i,a,l.length&&ce.types.arrayExpression(l),void 0,s?.identifier);Gt(r),e.node.body.push(ce.types.variableDeclaration("const",[ce.types.variableDeclarator(c,ae(r)?Je(r.closures.size?"registerRenderer":"register",ce.types.stringLiteral(Zt(r,"renderer")),p):p)]))}}));const u=Dt(t);Gt(t),Kt(),e.node.body.push(ce.types.exportNamedDeclaration(ce.types.variableDeclaration("const",[ce.types.variableDeclarator(ce.types.identifier(i.template),n||ce.types.stringLiteral(""))])),ce.types.exportNamedDeclaration(ce.types.variableDeclaration("const",[ce.types.variableDeclarator(a,r||ce.types.stringLiteral(""))])),ce.types.exportNamedDeclaration(ce.types.variableDeclaration("const",[ce.types.variableDeclarator(l,ce.types.isNullLiteral(s)||!s?ce.types.functionExpression(null,[],ce.types.blockStatement([])):s)]))),u.length&&e.node.body.push(ce.types.exportNamedDeclaration(ce.types.variableDeclaration("const",[ce.types.variableDeclarator(c,ce.types.arrayExpression(u))]))),e.node.body.push(ce.types.exportDefaultDeclaration(Je("createTemplate",Je("createRenderer",o,a,l,u.length&&c,void 0,d?.identifier),ce.types.stringLiteral(e.hub.file.metadata.marko.id))))}}},pr=r("../../browser-shims/compiler/index.js"),dr={translate:{exit(e){const t=H(e),r=e.scope.generateUidIdentifier("tagVar");wt(e),tr(e,r),Kt();const n=St(t);void 0!==n&&e.pushContainer("body",pr.types.returnStatement(n));const s=[];for(const t of e.get("body"))(i=t).isImportDeclaration()||i.isExportDeclaration()||i.isMarkoScriptlet({static:!0})?t.isMarkoScriptlet()&&(t.node.target&&"server"!==t.node.target?t.remove():t.replaceWithMultiple(t.node.body)):(s.push(t.node),t.remove());var i;const o=e.scope.generateUidIdentifier("renderer");e.pushContainer("body",[pr.types.variableDeclaration("const",[pr.types.variableDeclarator(o,Je("createRenderer",pr.types.arrowFunctionExpression([pr.types.identifier("input"),r],pr.types.blockStatement(s))))]),pr.types.exportDefaultDeclaration(Je("createTemplate",o,pr.types.stringLiteral(e.hub.file.metadata.marko.id)))])}}},ur=new WeakMap,fr={migrate:{enter(e){ur.set(e,ar),e.node.params=[M.types.identifier("input")],ar=e},exit(){ar.scope.crawl(),ar=ur.get(ar)}},analyze:{enter(e){ur.set(e,ar),ar=e,K(e),Ar(e,2);const{scope:t}=e;(e.node.extra??={}).domExports={template:t.generateUid("template_"),walks:t.generateUid("walks_"),setup:t.generateUid("setup_"),params:void 0,closures:t.generateUid("closures_")}},exit(e){!function(){const e=Tr();if(e.size){for(const[t,r]of e){const e=t.node.extra??={};let{referencedBindings:n,isEffect:s}=e;for(const t of r){const r=t?.extra;if(r){const t=r.referencedBindings;s||=r.isEffect,t&&(n=Pr.union(n,t),Re(t,(({downstreamExpressions:t})=>{t.delete(r),t.add(e)})))}}n=_r(G(t),n),e.referencedBindings=n,e.isEffect=s}e.clear()}const t=vr();for(const e of t)if(0!==e.type&&!e.upstreamAlias&&zr(t,e)){const{upstreamExpression:r}=e;r&&Re(r.referencedBindings,(e=>{e.downstreamExpressions.delete(r),zr(t,e)}))}const r=new Set;for(const e of t){const{name:t,section:n}=e;if(0!==e.type)for(const r of n.bindings)if(r.name===e.name){e.name=ar.scope.generateUid(t);break}n.bindings.add(e);for(const{referencedBindings:t,isEffect:n}of e.downstreamExpressions)Array.isArray(t)&&r.add(t),Re(t,(e=>{n&&(e.serialize=!0)}))}for(const e of r){const t=e.length;for(let r=0;r<t-1;r++)for(let n=r+1;n<t;n++){const t=e[r],s=e[n],i=Lr(t),o=Lr(s);t.serialize||Dr(i,o)||(t.serialize=!0),s.serialize||Dr(o,i)||(s.serialize=!0)}}ne((e=>{for(const t of e.closures)if(!t.serialize){let r=!1;const n=t.section;let s=e;for(;s!==n&&!(r=!s.upstreamExpression||Wr(s.upstreamExpression.referencedBindings));)s=s.parent;t.serialize=r}})),ne((({id:e,bindings:t})=>{const r=[...t].filter((t=>t.section.id===e)).sort(Pr.compare);for(let e=r.length;e--;)r[e].id=e}))}();const{scope:t,node:{extra:r}}=e;r.binding&&D(r.binding)&&(r.domExports.params=mr(r.binding,t)),ar=ur.get(ar)}},translate:{enter(e){if(ur.set(e,ar),ar=e,lr=B()?e.scope.generateUidIdentifier("scope"):null,B()&&e.scope.generateUidIdentifier("clean"),"hydrate"===F().output){const t=e.hub.file,r=new Set([(0,T.resolveRelativePath)(t,t.opts.filename)]);return U.visit(t,t,(function e(n){if(!r.has(n)){r.add(n);const s=(0,T.loadFileForImport)(t,n);s&&U.visit(s,t,(r=>e(function(e,t,r){return t===e?(0,T.resolveRelativePath)(t,r):(0,T.resolveRelativePath)(e,"."===r[0]?N.default.join(t.opts.filename,"..",r):r)}(t,s,r))))}})),e.node.body=U.build(t),void e.skip()}},exit(e){R()?dr.translate.exit(e):cr.translate.exit(e),ar=ur.get(ar)}}};function mr(e,t){const r={id:e.export??=t.generateUid(e.name+"_"),props:void 0},{aliases:n,propertyAliases:s,downstreamExpressions:i}=e;if(!i.size){r.props={};for(const[e,n]of s)r.props[e]=mr(n,t);for(const e of n){const n=mr(e,t);if(!n.props)return r.props=void 0,r;r.props={...r.props,...n.props}}}return r}function hr(e){let t=e;do{t=t.parentPath}while(t&&!gr(t));return t}function yr(e){let t=e;for(;!gr(t.parentPath);)if(t=t.parentPath,"AssignmentExpression"===t.type){const e=xr(t);if(gr(e.parentPath)){t=t.get("right");break}t=e.parentPath}return t}function gr(e){switch(e.type){case"MarkoTag":case"MarkoTagBody":case"MarkoAttribute":case"MarkoSpreadAttribute":case"MarkoPlaceholder":case"MarkoScriptlet":return!0;default:return!1}}function br(e){switch(e.type){case"FunctionExpression":case"ArrowFunctionExpression":return!0;default:return!1}}function xr(e){switch(e.parent.type){case"ArrayPattern":case"ObjectPattern":case"ObjectProperty":return xr(e.parentPath);default:return e}}var[vr]=z((()=>new Set)),[wr,Er]=z((()=>0));function kr(e,t,r,n,s,i){const o=wr(),a={id:o,name:e,type:t,section:r,property:i,excludeProperties:void 0,serialize:!1,aliases:new Set,propertyAliases:new Map,upstreamAlias:n,upstreamExpression:s,downstreamExpressions:new Set,export:void 0};if(i){const e=n.propertyAliases.get(i);e?(a.property=void 0,a.upstreamAlias=e,e.aliases.add(a)):n.propertyAliases.set(i,a)}else n&&n.aliases.add(a);return Er(o+1),vr().add(a),a}function Sr(e,t,r,n,s){const i=e.node.var;if(i){const o=G(e),a=Br(r);r?.downstreamExpressions.delete(n),Ir(i,t,e.scope,o,a,n,void 0,s)}}function Ar(e,t,r,n){const s=e.node.params;if(e.get("body").length&&s.length){r?.downstreamExpressions.delete(n);const i=G(e),o=Br(r),a=o||((e.node.extra??={}).binding=kr(e.scope.generateUid("params_"),t,i,o,n,void 0));for(let r=0;r<s.length;r++)Ir(s[r],t,e.scope,i,a,void 0,r+"")}}function Cr(e,t){switch(e.type){case"ObjectPattern":for(const r of e.properties)Cr(r,t);break;case"ArrayPattern":for(const r of e.elements)null!==r&&Cr(r,t);break;case"RestElement":Cr(e.argument,t);break;case"ObjectProperty":Cr(e.value,t);break;case"Identifier":e.name===t.name&&((e.extra??={}).source=t)}}function Ir(e,t,r,n,s,i,o,a){switch(e.type){case"Identifier":(e.extra??={}).binding=kr(e.name,t,n,s,i,o),function(e,t){const{identifier:r,referencePaths:n,constantViolations:s}=e,i=r.extra.binding;for(const e of n)jr(e,i);for(const e of s){const r=e.node;j.types.isAssignmentExpression(r)&&Cr(r.left,i),j.types.isUpdateExpression(r)&&Cr(r.argument,i),j.types.isAssignmentExpression(r)&&j.types.isIdentifier(r.left)&&"="!==r.operator&&jr(e.get("left"),i),t&&(e.isUpdateExpression()?jr(e.get("argument"),t):e.isAssignmentExpression()&&jr(e.get("left"),t))}}(r.getBinding(e.name),a);break;case"ObjectPattern":{const a=(o?s.propertyAliases.get(o):s)||((e.extra??={}).binding=kr(r.generateUid("pattern_"),t,n,s,i,o));for(const s of e.properties)if("RestElement"===s.type)Ir(s.argument,t,r,n,a,void 0,o);else{let e;if("Identifier"===s.key.type)e=s.key.name;else{if("StringLiteral"!==s.key.type)throw new Error("computed keys not supported in object pattern");e=s.key.value}Ir(s.value,t,r,n,a,void 0,e)}break}case"ArrayPattern":{const a=(o?s.propertyAliases.get(o):s)||((e.extra??={}).binding=kr(r.generateUid("pattern_"),t,n,s,i,o));let l=-1;for(const s of e.elements)l++,s&&("RestElement"===s.type?Ir(s.argument,t,r,n,a,void 0,o):Ir(s,t,r,n,a,void 0,`${l}`));break}case"AssignmentPattern":Ir(e.left,t,r,n,s,i,o)}}function jr(e,t){const r=function(e){let t=e;if(!t.isProgram()){for(;!br(t);){if(gr(t))return;t=t.parentPath}return t}}(e.scope.path),n=yr(r||e),s=G(n),i=t,o=n.node.extra??={};if(Rr(n,t),Cr(e.node,t),r){let e=o;r!==n&&(e=r.node.extra??={},e.referencedBindings=Fr(s,e.referencedBindings,i))}}var[Tr]=z((()=>new Map));function Mr(e,t){Tr().set(e,t)}function Nr(e,t){const r=e.length,n=r-t.length;if(0!==n)return n;for(let n=0;n<r;n++){const r=Pr.compare(e[n],t[n]);if(0!==r)return r}return 0}function Dr(e,t){for(const r of t)if(!e.has(r))return!1;return!0}function Lr(e){const t=new Set,r=new Set;return function e(n){if(4===n.type||3===n.type){let s,i=n;for(;s=i.upstreamAlias;)i=s;if(i.upstreamExpression){if(t.has(i))return;t.add(i),Re(i.upstreamExpression.referencedBindings,e)}else r.add(i)}else r.add(n)}(e),r}var Pr=new class{constructor(e){this.compare=e}add(e,t){return e?Array.isArray(e)?Fe(this.compare,e,t):_e(this.compare,e,t):t}union(e,t){return e?Array.isArray(e)?t?Array.isArray(t)?function(e,t,r){const n=t.length,s=r.length;let i=0,o=0;const a=[e(t[i],r[o])<=0?t[i++]:r[o++],e(t[i],r[o])<=0?t[i++]:r[o++]];for(;i<n&&o<s;)a.push(e(t[i],r[o])<=0?t[i++]:r[o++]);if(n===s&&i===n)return t;for(;i<n;)a.push(t[i++]);for(;o<s;)a.push(r[o++]);return a}(this.compare,e,t):Fe(this.compare,e,t):e:t?Array.isArray(t)?Fe(this.compare,t,e):_e(this.compare,t,e):e:t}find(e,t){if(e){if(Array.isArray(e))return Be(this.compare,e,t);if(0===this.compare(e,t))return e}}}((function(e,t){return e.section.id-t.section.id||e.type!==t.type&&(0===e.type||0===t.type)?e.type-t.type:e.id-t.id})),[Or,Ur]=W("intersections",(()=>[]));function Rr(e,t){const r=e.node.extra??={},n=G(e);r.referencedBindings=Fr(n,r.referencedBindings,t),t.downstreamExpressions.add(r)}function Br(e){return e&&(e.property?e:e.upstreamAlias||e)}function Fr(e,t,r){return e!==r.section&&e.closures.add(r),_r(e,Pr.add(t,r))}function _r(e,t){if(!t||!Array.isArray(t))return t;const r=Or(e);let n=Be(Nr,r,t);return n||(Ur(e,Fe(Nr,r,t)),n=t),n}function $r(e){return F().optimize?j.types.numericLiteral(e.id):j.types.stringLiteral(e.name+(0===e.type?`/${e.id}`:""))}function zr(e,t){let r=!t.downstreamExpressions.size;for(const n of t.aliases)zr(e,n)?t.aliases.delete(n):r=!1;for(const[n,s]of t.propertyAliases)zr(e,s)?t.propertyAliases.delete(n):r=!1;return r&&e.delete(t),r}function Wr(e){if(e){if(!Array.isArray(e))return qr(e);for(const t of e)if(qr(t))return!0}return!1}function qr(e){switch(e.type){case 1:case 2:return!0;default:return!e.upstreamExpression||Wr(e.upstreamExpression.referencedBindings)}}var Vr=r("../../browser-shims/compiler/index.js");function Jr(e){const t=e.body;return 1===t.length?t[0]:Vr.types.isBlockStatement(e)?e:Vr.types.blockStatement(t)}var Xr=Symbol("if node binding"),Zr={analyze(e){const{node:t}=e,[r]=t.attributes;if((0,C.assertNoArgs)(e),(0,C.assertNoVar)(e),(0,C.assertNoParams)(e),!I.types.isMarkoAttribute(r)||!r.default)throw e.get("name").buildCodeFrameError("The `if` tag requires a value.");if(0===t.body.body.length)throw e.get("name").buildCodeFrameError("The `if` tag requires body content.");if(t.attributes.length>1){const r=t.attributes[1].loc?.start,n=t.attributes[t.attributes.length-1].loc?.end,s="The `if` tag only supports the `value` attribute.";throw null==r||null==n?e.get("name").buildCodeFrameError(s):e.hub.buildError({loc:{start:r,end:n}},s,Error)}const n=e.get("body"),s=G(e),i=e.node.extra??={};K(n),i[Xr]=kr("#text",0,s,void 0,i),Hr(e)},translate:{enter(e){ft(e,37),ut(e),R()&&vt(e),Qr.enter(e)},exit(e){Qr.exit(e)}},attributes:{},autocomplete:[{snippet:"if=${1:condition}",description:"Use to display content only if the condition is met.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#if-else-if-else"}]},Kr=new WeakMap;function Gr(e,t){const r=Kr.get(e)??[],n=e.getNextSibling(),s=!(g(n,"else")||g(n,"else-if"));return r.push({tag:e,section:t}),s||Kr.set(n,r),[s,r]}function Hr(e){const t=G(e.get("body")),[r,n]=Gr(e,t);if(r){const e=n[0].tag,t=e.node.extra;Mr(e,n.map((({tag:e})=>e.node.attributes[0]?.value))),t.singleNodeOptimization=n.every((({tag:e})=>1===e.node.body.body.length)),n.forEach((({section:e})=>{e.upstreamExpression=t}))}}var Qr={enter(e){const t=e.get("body"),r=H(t),n=function(e){return g(e,"if")?e:Kr.get(e)[0].tag}(e).node.extra,s=Wr(n.referencedBindings),i=n.singleNodeOptimization;R()&&s&&!i&&bt(t)`${Je("markResumeScopeStart",Q(r))}`},exit(e){const t=e.get("body"),r=H(e),n=H(t),[s,i]=Gr(e,n),o=i[0].tag.node.extra,a=o[Xr],l=Wr(o.referencedBindings),c=o.singleNodeOptimization,p=le(n,!0);if(R()&&((l||p)&&Ut(n),wt(e),Nt(e,(()=>{})),tr(t)),s){const t=i[0].tag.node.extra;if(B()){let e=I.types.nullLiteral();for(let t=i.length;t--;){const{tag:r,section:n}=i[t],[s]=r.node.attributes,o=I.types.identifier(n.name);Nt(r,(e=>Je("inConditionalScope",e,$r(a)))),r.remove(),e=s?I.types.conditionalExpression(s.value,o,e):o}const n=Ft(r,a,"if");n.build=()=>Je("conditional",$r(a),$t(n,[lr])),n.hasDownstreamIntersections=()=>i.some((e=>Dt(e.section).length>0)),Jt(r,t.referencedBindings,n,e)}else{const t=bt(e),n=e.getNextSibling(),s=e.scope.generateUidIdentifier("ifScopeId"),o=e.scope.generateUidIdentifier("ifRenderer");let d;for(let e=i.length;e--;){const{tag:t,section:r}=i[e],n=le(r,!0);l&&t.node.body.body.push(I.types.expressionStatement(Je("register",I.types.assignmentExpression("=",o,Je("createRenderer",I.types.arrowFunctionExpression([],I.types.blockStatement([])))),I.types.stringLiteral(Zt(r,"renderer")),r.closures.size&&Q(r.parent)))),(l||n)&&t.node.body.body.push(I.types.expressionStatement(I.types.assignmentExpression("=",s,Q(r))));const[a]=t.node.attributes,c=Jr(t.node.body);d=a?I.types.ifStatement(a.value,c,d):c,t.remove()}l||p?(n.insertBefore([I.types.variableDeclaration("let",[I.types.variableDeclarator(s),l&&I.types.variableDeclarator(o)].filter(Boolean)),d]),l&&(c?t`${Je("markResumeControlSingleNodeEnd",Q(r),$r(a),s)}`:t`${Je("markResumeControlEnd",Q(r),$r(a))}`,Rt(r).set(I.types.stringLiteral($r(a).value+"("),o)),Rt(r).set(I.types.stringLiteral($r(a).value+"!"),Je("getScopeById",s))):n.insertBefore(d)}}}},Yr={analyze(e){const{node:t}=e,[r]=t.attributes;if((0,A.assertNoVar)(e),(0,A.assertNoArgs)(e),(0,A.assertNoParams)(e),0===t.body.body.length)throw e.get("name").buildCodeFrameError("The `else` tag requires body content.");if(t.attributes.length>1||r&&"if"!==r.name){const r=t.attributes[1].loc?.start,n=t.attributes[t.attributes.length-1].loc?.end,s="The `else` tag only supports an `if=` attribute.";throw null==r||null==n?e.get("name").buildCodeFrameError(s):e.hub.buildError({loc:{start:r,end:n}},s,Error)}Hr(e)},translate:Qr,attributes:{},autocomplete:[{description:"Use after an <if> or <else-if> tag to display content if those conditions do not match.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#if-else-if-else"}]},en=r("../../node_modules/@marko/babel-utils/dist/index.js"),tn=r("../../browser-shims/compiler/index.js"),rn={analyze(e){const{node:t}=e,[r]=t.attributes;if((0,en.assertNoArgs)(e),(0,en.assertNoVar)(e),(0,en.assertNoParams)(e),!tn.types.isMarkoAttribute(r)||!r.default)throw e.get("name").buildCodeFrameError("The `else-if` tag requires a value.");if(0===t.body.body.length)throw e.get("name").buildCodeFrameError("The `else-if` tag requires body content.");if(t.attributes.length>1){const r=t.attributes[1].loc?.start,n=t.attributes[t.attributes.length-1].loc?.end,s="The `else-if` tag only supports the `value` attribute.";throw null==r||null==n?e.get("name").buildCodeFrameError(s):e.hub.buildError({loc:{start:r,end:n}},s,Error)}Hr(e)},translate:Qr,attributes:{},autocomplete:[{snippet:"else-if=${1:condition}",description:"Use after an <if> or <else-if> tag to display content if those conditions do not match and this one does.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#if-else-if-else"}]},nn=r("../../node_modules/@marko/babel-utils/dist/index.js"),sn=r("../../browser-shims/compiler/index.js"),on=r("../../browser-shims/compiler/index.js");function an(e,t,r="const"){const{node:{var:n}}=e;n&&e.insertBefore(on.types.variableDeclaration(r,[on.types.variableDeclarator(n,t)]))}var ln={analyze(e){(0,nn.assertNoArgs)(e),(0,nn.assertNoParams)(e),Ye(e);const{node:t}=e,[r]=t.attributes;if(!t.var)throw e.get("name").buildCodeFrameError("The `const` tag requires a tag variable.");if(!r)throw e.get("name").buildCodeFrameError("The `const` tag requires a value.");if(t.attributes.length>1||!sn.types.isMarkoAttribute(r)||!r.default&&"value"!==r.name)throw e.get("name").buildCodeFrameError("The `const` tag only supports the `value` attribute.");const n=sn.types.isIdentifier(r.value)?e.scope.getBinding(r.value.name)?.identifier.extra?.binding:void 0;Sr(e,4,n,r.value.extra??={})},translate:{exit(e){const{node:t}=e,[r]=t.attributes,{value:n}=r;if(B()){const r=H(e),s=t.var.extra?.binding;if(s&&!s.upstreamAlias){const e=_t(s);Jt(r,n.extra?.referencedBindings,e,n)}}else an(e,n);e.remove()}},attributes:{},autocomplete:[{description:"Use to create an constant binding.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#const"}],types:"@marko/translator-tags/tag-types/const.d.marko"},cn=r("../../node_modules/@marko/babel-utils/dist/index.js"),pn=r("../../browser-shims/compiler/index.js"),dn={analyze(e){const[t]=e.node.attributes;if((0,cn.assertNoVar)(e),(0,cn.assertNoArgs)(e),(0,cn.assertNoParams)(e),Ye(e),e.node.attributes.length>1||1===e.node.attributes.length&&(!pn.types.isMarkoAttribute(t)||!t.default&&"value"!==t.name))throw e.get("name").buildCodeFrameError("The `debug` tag only supports the `value` attribute.")},translate:{exit(e){const t=H(e),[r]=e.node.attributes,n=r?.value.extra?.referencedBindings,s=pn.types.debuggerStatement();R()?e.insertBefore(s):Vt("render",t,n,s),e.remove()}},attributes:{},autocomplete:[{description:"Debug on value change.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#debug"}],types:"@marko/translator-tags/tag-types/debug.d.marko"},un=r("../../node_modules/@marko/babel-utils/dist/index.js"),fn=r("../../browser-shims/compiler/index.js"),mn=r("../../browser-shims/compiler/index.js"),hn=r("../../browser-shims/compiler/index.js"),yn=/^[0-9A-Z_$]+$/i,gn=new WeakMap;function bn(e,t=!1){const{node:r}=e;let n=mn.types.objectExpression([]);const s=n.extra={};for(const t of e.get("attributes")){const e=t.node.value;t.isMarkoSpreadAttribute()?n.properties.push(mn.types.spreadElement(e)):n.properties.push(mn.types.objectProperty((i=t.node.name,yn.test(i)?hn.types.identifier(i):hn.types.stringLiteral(i)),e))}var i;if(t){const{body:t,params:s}=r.body;let i=r.extra.hoistedControlFlows;if(i)for(const t of e.get("body").get("body"))if(e.insertBefore(t.node),t.remove(),(t.isConditional()||t.isLoop())&&! --i)break;if(t.length){const r=H(e.get("body")),i=mn.types.arrowFunctionExpression(s,mn.types.blockStatement(t));gn.set(n,i),R()?n.properties.push(mn.types.objectProperty(mn.types.identifier("renderBody"),Je("register",Je("createRenderer",i),mn.types.stringLiteral(Zt(r,"renderer")),r.closures.size&&Q(r.parent)))):n.properties.push(mn.types.objectProperty(mn.types.identifier("renderBody"),i))}}if(n.properties.length&&1===n.properties.length){const[e]=n.properties;mn.types.isSpreadElement(e)&&(n=e.argument,n.extra=s)}if(r.arguments?.length)if(n.properties.length)n=mn.types.arrayExpression([...r.arguments,n]);else if(1==r.arguments.length){const e=r.arguments[0];n=mn.types.isSpreadElement(e)?e.argument:e}else n=mn.types.arrayExpression(r.arguments);return n}function xn(e){if(mn.types.isObjectExpression(e)){const t=e.properties[e.properties.length-1];if(mn.types.isObjectProperty(t)&&"renderBody"===t.key.name)return gn.get(e)}}var vn={analyze(e){if((0,un.assertNoArgs)(e),!e.node.var)throw e.get("name").buildCodeFrameError("The `define` tag requires a tag variable.");const t=e.get("body");K(t),Sr(e,4),Ar(t,3),Mr(e,e.node.attributes.map((e=>e.value)))},translate:{enter(e){R()&&vt(e)},exit(e){const{node:t}=e;if(R())wt(e),tr(e.get("body")),an(e,bn(e,!0));else{const r=H(e),n=H(e.get("body")),s=t.extra?.referencedBindings,i=_t(e.get("var").node.extra.binding);let o=bn(e);n!==r&&(o??=fn.types.objectExpression([]),o.properties.push(fn.types.objectProperty(fn.types.identifier("renderBody"),Je("bindRenderer",lr,fn.types.identifier(n.name))))),Jt(r,s,i,o)}e.remove()}},attributes:{},autocomplete:[{description:"Use to create a constant object binding that can be rendered.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#define"}],types:"@marko/translator-tags/tag-types/define.d.marko"},wn=r("../../node_modules/@marko/babel-utils/dist/index.js"),En=r("../../browser-shims/compiler/index.js"),kn={analyze(e){const[t]=e.node.attributes;if((0,wn.assertNoArgs)(e),(0,wn.assertNoParams)(e),Ye(e),(0,wn.assertNoVar)(e),!t)throw e.get("name").buildCodeFrameError("The `do` tag requires a value.");if(e.node.attributes.length>1||!En.types.isMarkoAttribute(t)||!t.default&&"value"!==t.name)throw e.get("name").buildCodeFrameError("The `do` tag only supports the `value` attribute.")},translate:{exit(e){const t=H(e),[r]=e.node.attributes,{value:n}=r,s=n.extra?.referencedBindings;let i=null;if(En.types.isFunctionExpression(n)||En.types.isArrowFunctionExpression(n))if(En.types.isBlockStatement(n.body)){let e=!1;for(const t of n.body.body)if(En.types.isDeclaration(t)){e=!0;break}i=e?n.body:n.body.body}else i=En.types.expressionStatement(n.body);R()?i?e.insertBefore(i):e.insertBefore(En.types.expressionStatement(En.types.callExpression(n,[]))):Vt("render",t,s,i??En.types.expressionStatement(En.types.callExpression(n,[lr]))),e.remove()}},attributes:{},autocomplete:[{description:"Use to run a function on render.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#do"}],types:"@marko/translator-tags/tag-types/do.d.marko"},Sn=r("../../node_modules/@marko/babel-utils/dist/index.js"),An=r("../../browser-shims/compiler/index.js"),Cn={analyze(e){const{node:t}=e,[r]=t.attributes;if((0,Sn.assertNoArgs)(e),(0,Sn.assertNoVar)(e),(0,Sn.assertNoParams)(e),Ye(e),!r)throw e.get("name").buildCodeFrameError("The `effect` tag requires a value.");if(t.attributes.length>1||!An.types.isMarkoAttribute(r)||!r.default&&"value"!==r.name)throw e.get("name").buildCodeFrameError("The `effect` tag only supports the `value` attribute.");(r.value.extra??={}).isEffect=!0,(ar.node.extra??={}).isInteractive=!0},translate:{exit(e){const{node:t}=e,[r]=t.attributes,n=H(e),{value:s}=r,i=s.extra?.referencedBindings;if(B()){const{value:e}=r;let t=null;if(An.types.isFunctionExpression(e)||An.types.isArrowFunctionExpression(e))if(An.types.isBlockStatement(e.body)){let r=!1;for(const t of e.body.body)if(An.types.isDeclaration(t)){r=!0;break}t=r?e.body:e.body.body}else t=An.types.expressionStatement(e.body);Vt("effect",n,i,t||An.types.expressionStatement(An.types.callExpression(e,[lr])),e,!!t)}else er(n,i);e.remove()}},attributes:{},autocomplete:[{description:"Use to create a side effects.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#effect"}],types:"@marko/translator-tags/tag-types/effect.d.marko"},In=r("../../node_modules/@marko/babel-utils/dist/index.js"),jn={parse(e){const{node:t}=e;e.replaceWith((0,In.parseStatements)(e.hub.file,t.rawValue,t.start,t.end)[0])},parseOptions:{statement:!0,rawOpenTag:!0},autocomplete:[{displayText:"export <value>"}]},Tn=r("../../node_modules/@marko/babel-utils/dist/index.js"),Mn=r("../../browser-shims/compiler/index.js"),Nn=r("../../node_modules/@marko/babel-utils/dist/index.js");function Dn(e){const t=e.node.extra??={};t.nestedAttributeTags={},t.hoistedControlFlows=0,Ln(t,!1,!1,e)}function Ln(e,t,r,n){let s=!1;for(const i of n.get("body").get("body"))i.isMarkoTag()&&Pn(e,t,r,i)&&(s=!0);return s}function Pn(e,t,r,n){if((0,Nn.isTransparentTag)(n)){if(Ln(e,t||(0,Nn.isLoopTag)(n),!0,n))return(0,Nn.isTransparentTag)(n.parentPath.parentPath)||e.hoistedControlFlows++,!0}else if((0,Nn.isAttributeTag)(n)){const s=n.node.name.value.slice(1),i=e.nestedAttributeTags,o=i[s],a=o||(i[s]={dynamic:!1,repeated:!1});return a.dynamic||=r,a.repeated||=t||void 0!==o,!0}return!1}var On=r("../../node_modules/@marko/babel-utils/dist/index.js"),Un=r("../../browser-shims/compiler/index.js"),Rn=r("../../node_modules/@marko/babel-utils/dist/index.js");function Bn(e){let{extra:t}=e.node;if(t||(t=e.node.extra={}),void 0===t.confident){const r=(0,Rn.computeNode)(e.node.value);r?(t.computed=r.value,t.confident=!0):(t.computed=void 0,t.confident=!1)}return t}var Fn=Symbol("native tag binding"),_n=Symbol("serialize marker"),$n={analyze:{enter(e){const{node:t}=e,r=e.get("attributes");let n=!1,s=!1;for(const t of r)zn(t)?((t.node.value.extra??={}).isEffect=!0,n=!0,s=!0,Mr(e,r.map((e=>e.node.value)))):Wn(t.node.name)?((t.node.value.extra??={}).isEffect=!0,n=!0):Bn(t).confident||(s=!0);if(e.has("var")||n||s){ar.node.extra.isInteractive||=n;const r=G(e),s="StringLiteral"===t.name.type?t.name.value:Un.types.toIdentifier(e.get("name")),i=t.extra??={};i[_n]=e.has("var")||n,i[Fn]=kr("#"+s,0,r)}}},translate:{enter(e){(0,On.assertNoArgs)(e);const t=e.node.extra,r=t[Fn],n=R(),s=e.get("name"),i=e.get("attributes"),o=(0,On.getTagDef)(e),a=i.some((e=>e.isMarkoSpreadAttribute())),l=bt(e),c=H(e);if(n&&t.tagNameNullable&&vt(e),e.has("var"))if(n)an(e,Un.types.arrowFunctionExpression([],Un.types.blockStatement([Un.types.throwStatement(Un.types.newExpression(Un.types.identifier("Error"),[Un.types.stringLiteral("Cannot reference DOM node from server")]))])));else{const t=e.node.var.name,n=e.scope.getBinding(t).referencePaths;let s;for(const e of n){const n=H(e);e.parentPath?.isCallExpression()?e.parentPath.replaceWith(Un.types.expressionStatement(We(n,r))):(s??=Un.types.identifier(t+"_getter"),e.replaceWith(Je("bindFunction",ze(n,c),s)))}s&&ar.pushContainer("body",Un.types.variableDeclaration("const",[Un.types.variableDeclarator(s,Un.types.arrowFunctionExpression([lr],Un.types.memberExpression(lr,$r(r),!0)))]))}let p;if(r&&(p=$r(r),ft(e,32)),l`<${s.node}`,a){const r=bn(e);n?(er(c,t.referencedBindings),l`${Je("attrs",r,p,Q(c))}`):(Vt("render",c,t.referencedBindings,Un.types.expressionStatement(Je("attrs",lr,p,r))),Vt("effect",c,t.referencedBindings,Un.types.expressionStatement(Je("attrsEvents",lr,p)),r))}else for(const e of i){const t=e.node.name,r=e.get("value"),{confident:s,computed:i}=e.node.extra??{},o=r.node.extra?.referencedBindings;switch(t){case"class":case"style":{const e=`${t}Attr`;s?l`${Xe()[e](i)}`:n?l`${Je(e,r.node)}`:Vt("render",c,o,Un.types.expressionStatement(Je(e,Un.types.memberExpression(lr,p,!0),r.node)));break}default:s?l`${Xe().attr(t,i)}`:n?Wn(t)?er(c,o):l`${Je("attr",Un.types.stringLiteral(t),r.node)}`:Wn(t)?Vt("effect",c,o,Un.types.expressionStatement(Je("on",Un.types.memberExpression(lr,p,!0),Un.types.stringLiteral("-"===(d=t).charAt(2)?d.slice(3):d.charAt(2).toLowerCase()+d.slice(3)),r.node)),r.node):Vt("render",c,o,Un.types.expressionStatement(Je("attr",Un.types.memberExpression(lr,p,!0),Un.types.stringLiteral(t),r.node)))}}var d;if(o&&o.parseOptions?.openTagOnly)switch(o.htmlType){case"svg":case"math":l`/>`;break;default:l`>`}else l`>`;n&&t.tagNameNullable&&e.insertBefore(Un.types.ifStatement(s.node,xt(e)))[0].skip(),pt(e)},exit(e){const t=e.node.extra,r=t[Fn],n=R(),s=(0,On.getTagDef)(e)?.parseOptions?.openTagOnly;n&&t.tagNameNullable&&wt(e),e.insertBefore(e.node.body.body).forEach((e=>e.skip())),s||bt(e)`</${e.node.name}>`,n&&t.tagNameNullable&&e.insertBefore(Un.types.ifStatement(e.node.name,xt(e)))[0].skip(),r&&(t[_n]||e.node.attributes.some((e=>Wr(e.value.extra?.referencedBindings))))&&kt(e,r),dt(e),e.remove()}}};function zn(e){return"MarkoSpreadAttribute"===e.type}function Wn(e){return/^on[A-Z-]/.test(e)}var qn=Symbol("for marker binding"),Vn={analyze(e){!function(e){const t=e.node.attributes,r=e.node.body.params.length>0;if((0,Tn.assertNoVar)(e),Zn(t,"of")){if((0,Tn.assertAllowedAttributes)(e,["of","by"]),!r)throw e.buildCodeFrameError("Invalid `for of` tag, missing `|value, index|` params.")}else if(Zn(t,"in")){if((0,Tn.assertAllowedAttributes)(e,["in","by"]),!r)throw e.buildCodeFrameError("Invalid `for in` tag, missing `|key, value|` params.")}else{if(!Zn(t,"to"))throw e.buildCodeFrameError("Invalid `for` tag, missing an `of=`, `in=` or `to=` attribute.");(0,Tn.assertAllowedAttributes)(e,["from","to","step","by"])}}(e);const t=function(e){const t=e.node.extra;return Mn.types.isMarkoTag(e.parentPath?.parent)&&(0,Tn.getTagDef)(e.parentPath.parentPath)?.html?t.isOnlyChild=1===e.parent.body.length:t.isOnlyChild=!1}(e),r=e.node.extra??={},n=e.get("body"),s=G(e),i=K(n);if(t){const t=e.parentPath.parent,r=t.name?.value;(t.extra??={})[Fn]??=kr("#"+r,0,s)}else r[qn]=kr("#text",0,s);Ar(n,3,void 0,r),Dn(e),Mr(e,e.node.attributes.map((e=>e.value))),i.upstreamExpression=r,r.singleNodeOptimization=1===e.node.body.body.length},translate:{enter(e){const t=e.get("body"),r=H(t),n=e.node.extra,{singleNodeOptimization:s,isOnlyChild:i}=n,o=Wr(n.referencedBindings),a=n.nestedAttributeTags&&Object.keys(n.nestedAttributeTags).length>0;i||(ft(e,37),ut(e)),R()&&(vt(e),!o||s||a||bt(t)`${Je("markResumeScopeStart",Q(r))}`)},exit(e){R()?Xn.exit(e):Jn.exit(e)}},attributes:{of:{type:"expression",autocomplete:[{description:"Iterates over a list of items."}]},in:{type:"expression",autocomplete:[{description:"Iterates over the keys and values of an object."}]},to:{type:"number",autocomplete:[{description:"Iterates up to the provided number (inclusive)"}]},from:{type:"number",autocomplete:[{description:"Iterates starting from the provided number (inclusive)"}]},step:{type:"number",autocomplete:[{description:"The amount to increment during each interation (with from/to)"}]}},autocomplete:[{snippet:"for|${1:value, index}| of=${3:array}",description:"Use to iterate over lists, object properties, or between ranges.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#iterating-over-a-list"},{snippet:"for|${1:name, value}| in=${3:object}",descriptionMoreURL:"https://markojs.com/docs/core-tags/#iterating-over-an-objects-properties"},{snippet:"for|${1:index}| from=${2:number} to=${3:number} step=${4:number}",descriptionMoreURL:"https://markojs.com/docs/core-tags/#iterating-between-a-range-of-numbers"}]},Jn={exit(e){const t=e.get("body"),r=H(e),n=H(t),{node:s}=e,{attributes:i}=s,{isOnlyChild:o,referencedBindings:a}=s.extra,l=o?e.parentPath.parent.extra[Fn]:e.node.extra[qn];Nt(e,(e=>Je("inLoopScope",e,$r(l)))),e.remove();const c=Mn.types.identifier(n.name),p=Zn(i,"of"),d=Zn(i,"to"),u=Zn(i,"in"),f=[];let m;if(p)m="loopOf",f.push(p.value);else if(u)m="loopIn",f.push(u.value);else if(d){const e=Zn(i,"from"),t=Zn(i,"step");m="loopTo",f.push(d.value,e?e.value:Mn.types.numericLiteral(0),t?t.value:Mn.types.numericLiteral(1))}const h=Zn(i,"by");h&&f.push(h.value);const y=Ft(r,l,"for");y.build=()=>Je(m,$r(l),c);const g=Object.values(t.getBindingIdentifiers());y.hasDownstreamIntersections=()=>{if(Dt(n).length>0)return!0;if(g.length){const e=g[0].extra.binding;for(const{referencedBindings:t}of e.downstreamExpressions)if(Ft(n,t).hasDownstreamIntersections())return!0}return!1},Jt(r,a,y,Mn.types.arrayExpression(f))}},Xn={exit(e){const t=e.get("body"),r=H(e),n=H(t),{node:s}=e,{attributes:i,body:{body:o,params:a}}=s,l=s.extra,{singleNodeOptimization:c,isOnlyChild:p}=l,d=Wr(l.referencedBindings),u=l.nestedAttributeTags&&Object.keys(l.nestedAttributeTags).length>0,f=p?e.parentPath.parent.extra[Fn]:e.node.extra[qn],m=Zn(i,"of"),h=Zn(i,"in"),y=Zn(i,"to"),g=Zn(i,"by"),b=Mn.types.blockStatement(o),x=bt(e),v=[],w=le(n,!0);let E,k=Mn.types.identifier("NOO");if(d&&p&&(e.parentPath.parent.extra[_n]=!0),(d||w)&&Ut(n),g&&d){const e=ar.scope.generateUidIdentifier("by");v.push(Mn.types.variableDeclaration("const",[Mn.types.variableDeclarator(e,g.value)])),E=[],k=Mn.types.callExpression(e,E)}if(h){const[e,t]=a;k=e,t&&b.body.unshift(Mn.types.variableDeclaration("const",[Mn.types.variableDeclarator(t,Mn.types.memberExpression(h.value,e,!0))])),v.push(Mn.types.forInStatement(Mn.types.variableDeclaration("const",[Mn.types.variableDeclarator(e)]),h.value,b))}else if(m){let t=m.value,[r,n,s]=a;if(!Mn.types.isIdentifier(r)&&E){const e=ar.scope.generateUidIdentifier("v");b.body.unshift(Mn.types.variableDeclaration("const",[Mn.types.variableDeclarator(r,e)])),r=e}if(n||d||w){n??=ar.scope.generateUidIdentifier("i");const t=e.scope.generateUidIdentifierBasedOnNode(n,"i");v.push(Mn.types.variableDeclaration("let",[Mn.types.variableDeclarator(t,Mn.types.numericLiteral(0))])),b.body.unshift(Mn.types.variableDeclaration("let",[Mn.types.variableDeclarator(n,Mn.types.updateExpression("++",t))]))}s&&(Mn.types.isIdentifier(s)&&(t=s),v.push(Mn.types.variableDeclaration("const",[Mn.types.variableDeclarator(s,m.value)]))),E?E.push(r,n):k=n,v.push(Mn.types.forOfStatement(Mn.types.variableDeclaration("const",[Mn.types.variableDeclarator(r)]),t,b))}else if(y){const t=Zn(i,"step")?.value??Mn.types.numericLiteral(1),r=Zn(i,"from")?.value??Mn.types.numericLiteral(0);let[n]=a;const s=e.scope.generateUidIdentifier("steps"),o=e.scope.generateUidIdentifier("i"),l=e.scope.generateUidIdentifier("step"),c=e.scope.generateUidIdentifier("from");(n||d||w)&&(n??=ar.scope.generateUidIdentifier("i"),k=n,b.body.unshift(Mn.types.variableDeclaration("const",[Mn.types.variableDeclarator(n,Mn.types.binaryExpression("+",c,Mn.types.binaryExpression("*",o,l)))]))),v.push(Mn.types.forStatement(Mn.types.variableDeclaration("let",[Mn.types.variableDeclarator(c,Mn.types.logicalExpression("??",r,Mn.types.numericLiteral(0))),Mn.types.variableDeclarator(l,Mn.types.logicalExpression("??",t,Mn.types.numericLiteral(1))),Mn.types.variableDeclarator(s,Mn.types.binaryExpression("/",Mn.types.binaryExpression("-",y.value,c),l)),Mn.types.variableDeclarator(o,Mn.types.numericLiteral(0))]),Mn.types.binaryExpression("<=",o,s),Mn.types.updateExpression("++",o),b))}if((d||w)&&!u){const t=e.scope.generateUidIdentifier("forScopeIds"),s=re(n);v.unshift(Mn.types.variableDeclaration("const",[d&&c&&Mn.types.variableDeclarator(t,Mn.types.arrayExpression([])),Mn.types.variableDeclarator(s,Mn.types.newExpression(Mn.types.identifier("Map"),[]))].filter(Boolean))),d&&(c?(b.body.push(Mn.types.expressionStatement(Mn.types.callExpression(Mn.types.memberExpression(t,Mn.types.identifier("push")),[Q(n)]))),x`${Je("markResumeControlSingleNodeEnd",Q(r),$r(f),t)}`):x`${Je("markResumeControlEnd",Q(r),$r(f))}`),Rt(r).set(Mn.types.stringLiteral($r(f).value+"("),Mn.types.conditionalExpression(Mn.types.memberExpression(s,Mn.types.identifier("size")),s,Mn.types.identifier("undefined")))}wt(e),Nt(e,(()=>{})),tr(t),(d||w)&&e.node.body.body.push(Mn.types.expressionStatement(Mn.types.callExpression(Mn.types.memberExpression(re(n),Mn.types.identifier("set")),[k,Je("getScopeById",Q(n))]))),e.replaceWithMultiple(v)}};function Zn(e,t){return e.find((e=>Mn.types.isMarkoAttribute(e)&&e.name===t))}var Kn=r("../../node_modules/@marko/babel-utils/dist/index.js"),Gn=r("../../browser-shims/compiler/index.js"),Hn=Symbol("comment tag binding"),Qn={analyze(e){(0,Kn.assertNoArgs)(e),(0,Kn.assertNoParams)(e),(0,Kn.assertNoAttributes)(e);let t=!1;if(e.has("var")){if(!Gn.types.isIdentifier(e.node.var))throw e.get("var").buildCodeFrameError("The `html-comment` tag cannot be destructured.");t=!0}const r=[];for(const n of e.get("body").get("body"))if(n.isMarkoPlaceholder())r.push(n.node.value),t=!0;else if(!n.isMarkoText())throw n.buildCodeFrameError("Invalid child. Only text is allowed inside an html comment.");if(t){const t=G(e);(e.node.extra??={})[Hn]=kr("#comment",0,t),Mr(e,r)}e.skip()},translate(e){const t=e.node.extra,r=t[Hn];if(e.has("var"))if(R())an(e,Gn.types.arrowFunctionExpression([],Gn.types.blockStatement([Gn.types.throwStatement(Gn.types.newExpression(Gn.types.identifier("Error"),[Gn.types.stringLiteral("Cannot reference a DOM node from the server")]))])));else{const t=e.node.var.name,n=e.scope.getBinding(t).referencePaths;let s;for(const i of n){const n=H(i);i.parentPath?.isCallExpression()?i.parentPath.replaceWith(Gn.types.expressionStatement(We(n,r))):(s??=Gn.types.identifier(t+"_getter"),i.replaceWith(Je("bindFunction",ze(n,H(e)),s)))}s&&ar.pushContainer("body",Gn.types.variableDeclaration("const",[Gn.types.variableDeclarator(s,Gn.types.arrowFunctionExpression([lr],Gn.types.memberExpression(lr,$r(r),!0)))]))}t[Hn]&&ft(e,32);const n=bt(e);if(pt(e),n`<!--`,R())for(const t of e.node.body.body)Gn.types.isMarkoText(t)?n`${t.value}`:Gn.types.isMarkoPlaceholder(t)&&n`${Je("escapeXML",t.value)}`;else{const s=[],i=[];let o="";for(const t of e.node.body.body)Gn.types.isMarkoText(t)?o+=t.value:Gn.types.isMarkoPlaceholder(t)&&(s.push(Gn.types.templateElement({raw:o})),i.push(t.value),o="");0===i.length?n`${o}`:(s.push(Gn.types.templateElement({raw:o})),Vt("render",H(e),t.referencedBindings,Gn.types.expressionStatement(Je("data",Gn.types.memberExpression(lr,$r(r),!0),Gn.types.templateLiteral(s,i)))))}dt(e),n`-->`,r&&kt(e,r),e.remove()},parseOptions:{text:!0},attributes:{},autocomplete:[{description:"Use to create an html comment that is not stripped from the output.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#html-comment"}]},Yn=r("../../node_modules/@marko/babel-utils/dist/index.js"),es=r("../../browser-shims/compiler/index.js"),ts={translate:{exit(e){const{node:t}=e,{var:r}=t,n=R()?Je("nextTagId"):Je("nextTagId",lr);if((0,Yn.assertNoArgs)(e),(0,Yn.assertNoAttributes)(e),Ye(e),(0,Yn.assertNoParams)(e),!t.var)throw e.get("name").buildCodeFrameError("The `id` tag requires a tag variable.");if(!es.types.isIdentifier(r))throw e.get("var").buildCodeFrameError("The `id` tag cannot be destructured");if(R())e.replaceWith(es.types.variableDeclaration("const",[es.types.variableDeclarator(t.var,n)]));else{const t=_t(r.extra.binding);Jt(H(e),void 0,t,n),e.remove()}}},attributes:{},autocomplete:[{displayText:"id/<name>",description:"Use to create a unique identifier.",snippet:"id/${1:name}",descriptionMoreURL:"https://markojs.com/docs/core-tags/#id"}],types:"@marko/translator-tags/tag-types/id.d.marko"},rs=r("../../node_modules/@marko/babel-utils/dist/index.js"),ns={parse(e){const{node:t}=e;e.replaceWith((0,rs.parseStatements)(e.hub.file,t.rawValue,t.start,t.end)[0])},parseOptions:{statement:!0,rawOpenTag:!0},autocomplete:[{displayText:'import <scope> from "<path>"',description:"Use to import external modules, follows the same syntax as JavaScript imports.",snippet:'import ${2} from "${1:path}"',descriptionMoreURL:"https://markojs.com/docs/syntax/#importing-external-files"}]},ss=r("../../node_modules/@marko/babel-utils/dist/index.js"),is=r("../../browser-shims/compiler/index.js"),os={analyze(e){const{node:t}=e,r=t.var,{optimize:n}=F();let s,i;for(const r of t.attributes)if(is.types.isMarkoAttribute(r))if("value"===r.name)s=r;else{if("valueChange"!==r.name){const t=r.loc?.start,n=r.loc?.end,s="The `let` tag only supports the `value` attribute and its change handler.";throw null==t||null==n?e.get("name").buildCodeFrameError(s):e.hub.buildError({loc:{start:t,end:n}},s,Error)}i=r}if((0,ss.assertNoArgs)(e),(0,ss.assertNoParams)(e),Ye(e),Qe(e),!r)throw e.get("name").buildCodeFrameError("The `let` tag requires a tag variable.");if(!is.types.isIdentifier(r))throw e.get("var").buildCodeFrameError("The `let` tag variable cannot be destructured.");if(i&&(0,ss.computeNode)(i.value))throw e.get("attributes").find((e=>e.node===i)).get("value").buildCodeFrameError("The `let` tag `valueChange` attribute must be a function.");if(i){const t=(i.value.extra??={})?.referencedBindings;i.value.extra.static=is.types.isFunction(i.value),n&&is.types.isIdentifier(i.value)&&1===((o=t)?Array.isArray(o)?o.length:1:0)?i.value.extra.binding=t:i.value.extra.binding=kr(e.scope.generateUid(r.name+"_change"),1,H(e),void 0,i.value.extra)}var o;Sr(e,1,void 0,s?s.value.extra??={}:void 0,i?.value.extra?.binding)},translate:{exit(e){const{node:t}=e,r=t.var,{optimize:n}=F(),s=t.attributes.find((e=>is.types.isMarkoAttribute(e)&&(e.default||"value"===e.name)))??is.types.markoAttribute("value",is.types.identifier("undefined")),i=t.attributes.find((e=>is.types.isMarkoAttribute(e)&&"valueChange"===e.name)),o=i?.value.extra?.binding;if(B()){const t=H(e),a=r.extra.binding,l=_t(a),c=s.value.extra?.referencedBindings,p=!c;if(o&&(!n||!is.types.isIdentifier(i.value))){const e=_t(o);if(!n&&!is.types.isFunction(i.value)){const t=e.build;e.build=()=>{const e=t();return Je("changeHandler",$r(o),e)}}Jt(t,i.value.extra?.referencedBindings,e,i.value)}if(Jt(t,c,l,s.value),!p&&!i?.value.extra?.static){let r;Object.defineProperty(l,"callee",{get(){if(!r){const n=e.scope.generateUidIdentifier(l.identifier.name+"_init");r=o?is.types.conditionalExpression(We(t,o),l.identifier,n):n,ar.pushContainer("body",is.types.variableDeclaration("const",[is.types.variableDeclarator(n,Je("initValue",$r(a),l.identifier))]))}return r}})}l.buildAssignment=(e,t)=>function(e,t,r,n){if(!n)return Je("queueSource",ze(r,e.section),e.identifier,t);const s=Ke.types.identifier(n.name);return n.upstreamExpression?.static?Ke.types.callExpression(s,[t]):Je("queueControllableSource",ze(r,e.section),e.identifier,s,t)}(l,t,e,o)}else an(e,s.value),o&&e.insertBefore(is.types.variableDeclaration("const",[is.types.variableDeclarator(is.types.identifier(o.name),i.value)]));e.remove()}},attributes:{},autocomplete:[{description:"Use to create a mutable binding.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#let"}],types:"@marko/translator-tags/tag-types/let.d.marko"},as=r("../../node_modules/@marko/babel-utils/dist/index.js"),ls=r("../../browser-shims/compiler/index.js"),cs=Symbol("lifecycle attrs reference"),ps=new Set(["onMount","onUpdate","onDestroy"]),ds={analyze(e){(0,as.assertNoArgs)(e),(0,as.assertNoVar)(e),(0,as.assertNoParams)(e),Ye(e);const{node:t}=e,r=t.extra??={};if(r[cs]=kr(e.scope.generateUid("lifecycle"),4,G(e),void 0,r),0===t.attributes.length)throw e.get("name").buildCodeFrameError("The `lifecycle` tag requires at least one attribute.");for(const r of t.attributes){if(ls.types.isMarkoSpreadAttribute(r))throw e.get("name").buildCodeFrameError("The `lifecycle` tag does not support `...spread` attributes.");if(!ps.has(r.name))throw e.get("name").buildCodeFrameError(`The \`lifecycle\` tag does not support the \`${r.name}\` attribute.`);(r.value.extra??={}).isEffect=!0}(ar.node.extra??={}).isInteractive=!0,Mr(e,e.node.attributes.map((e=>e.value)))},translate:{exit(e){const{node:t}=e,r=H(e),n=t.extra,{referencedBindings:s}=n,i=n[cs];if(B()){const n=bn(e);Vt("effect",r,s,ls.types.expressionStatement(Je("lifecycle",lr,$r(i),n)),t.attributes.map((e=>e.value)))}else er(r,s);e.remove()}},attributes:{},autocomplete:[{description:"Use to create a side effects.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#effect"}],types:"@marko/translator-tags/tag-types/lifecycle.d.marko"},us=r("../../node_modules/@marko/babel-utils/dist/index.js"),fs=r("../../browser-shims/compiler/index.js"),ms={analyze(e){const[t]=e.node.attributes;if((0,us.assertNoArgs)(e),(0,us.assertNoVar)(e),(0,us.assertNoParams)(e),Ye(e),!t)throw e.get("name").buildCodeFrameError("The `log` tag requires a value.");if(e.node.attributes.length>1||!fs.types.isMarkoAttribute(t)||!t.default&&"value"!==t.name)throw e.get("name").buildCodeFrameError("The `log` tag only supports the `value` attribute.")},translate:{exit(e){const t=H(e),[r]=e.node.attributes,{value:n}=r,s=n.extra?.referencedBindings,i=fs.types.expressionStatement(fs.types.callExpression(fs.types.memberExpression(fs.types.identifier("console"),fs.types.identifier("log")),[n]));R()?e.insertBefore(i):Vt("render",t,s,i),e.remove()}},attributes:{},autocomplete:[{description:"Use to log a value to the console.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#log"}],types:"@marko/translator-tags/tag-types/log.d.marko"},hs={migrate:[e=>e.remove()]},ys=r("../../node_modules/@marko/babel-utils/dist/index.js"),gs=r("../../browser-shims/compiler/index.js"),bs={parse(e){const{node:t,hub:{file:r}}=e,n=t.rawValue,s=n.replace(/^server\s*/,"").trim(),i=t.name.start+(n.length-s.length);let o=(0,ys.parseStatements)(r,s,i,i+s.length);1===o.length&&gs.types.isBlockStatement(o[0])&&(o=o[0].body),e.replaceWith(gs.types.markoScriptlet(o,!0,"server"))},parseOptions:{statement:!0,rawOpenTag:!0},autocomplete:[{displayText:"server <statement>",description:"A JavaScript statement which is only evaluated once your template is loaded on the server.",descriptionMoreURL:"https://markojs.com/docs/syntax/#server-javascript"}]},xs=r("../../node_modules/@marko/babel-utils/dist/index.js"),vs=r("../../browser-shims/compiler/index.js"),ws={parse(e){const{node:t,hub:{file:r}}=e,n=t.rawValue,s=n.replace(/^static\s*/,"").trim(),i=t.name.start+(n.length-s.length);let o=(0,xs.parseStatements)(r,s,i,i+s.length);1===o.length&&vs.types.isBlockStatement(o[0])&&(o=o[0].body),e.replaceWith(vs.types.markoScriptlet(o,!0))},parseOptions:{statement:!0,rawOpenTag:!0},autocomplete:[{displayText:"static <statement>",description:"A JavaScript statement which is only evaluated once your template is loaded.",descriptionMoreURL:"https://markojs.com/docs/syntax/#static-javascript"}]},Es=r("../../node_modules/@marko/babel-utils/dist/index.js"),ks=r("../../browser-shims/compiler/index.js"),Ss=",".charCodeAt(0),As=";".charCodeAt(0),Cs=new Uint8Array(64),Is=new Uint8Array(128);for(let e=0;e<64;e++){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(e);Cs[e]=t,Is[t]=e}function js(e,t,r){let n=t-r;n=n<0?-n<<1|1:n<<1;do{let t=31&n;n>>>=5,n>0&&(t|=32),e.write(Cs[t])}while(n>0);return t}var Ts="undefined"!=typeof TextDecoder?new TextDecoder:void 0!==s?{decode:e=>s.from(e.buffer,e.byteOffset,e.byteLength).toString()}:{decode(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}},Ms=class{constructor(){this.pos=0,this.out="",this.buffer=new Uint8Array(16384)}write(e){const{buffer:t}=this;t[this.pos++]=e,16384===this.pos&&(this.out+=Ts.decode(t),this.pos=0)}flush(){const{buffer:e,out:t,pos:r}=this;return r>0?t+Ts.decode(e.subarray(0,r)):t}},Ns=class e{constructor(t){this.bits=t instanceof e?t.bits.slice():[]}add(e){this.bits[e>>5]|=1<<(31&e)}has(e){return!!(this.bits[e>>5]&1<<(31&e))}},Ds=class e{constructor(e,t,r){this.start=e,this.end=t,this.original=r,this.intro="",this.outro="",this.content=r,this.storeName=!1,this.edited=!1,this.previous=null,this.next=null}appendLeft(e){this.outro+=e}appendRight(e){this.intro=this.intro+e}clone(){const t=new e(this.start,this.end,this.original);return t.intro=this.intro,t.outro=this.outro,t.content=this.content,t.storeName=this.storeName,t.edited=this.edited,t}contains(e){return this.start<e&&e<this.end}eachNext(e){let t=this;for(;t;)e(t),t=t.next}eachPrevious(e){let t=this;for(;t;)e(t),t=t.previous}edit(e,t,r){return this.content=e,r||(this.intro="",this.outro=""),this.storeName=t,this.edited=!0,this}prependLeft(e){this.outro=e+this.outro}prependRight(e){this.intro=e+this.intro}reset(){this.intro="",this.outro="",this.edited&&(this.content=this.original,this.storeName=!1,this.edited=!1)}split(t){const r=t-this.start,n=this.original.slice(0,r),s=this.original.slice(r);this.original=n;const i=new e(t,this.end,s);return i.outro=this.outro,this.outro="",this.end=t,this.edited?(i.edit("",!1),this.content=""):this.content=n,i.next=this.next,i.next&&(i.next.previous=i),i.previous=this,this.next=i,i}toString(){return this.intro+this.content+this.outro}trimEnd(e){if(this.outro=this.outro.replace(e,""),this.outro.length)return!0;const t=this.content.replace(e,"");return t.length?(t!==this.content&&(this.split(this.start+t.length).edit("",void 0,!0),this.edited&&this.edit(t,this.storeName,!0)),!0):(this.edit("",void 0,!0),this.intro=this.intro.replace(e,""),!!this.intro.length||void 0)}trimStart(e){if(this.intro=this.intro.replace(e,""),this.intro.length)return!0;const t=this.content.replace(e,"");if(t.length){if(t!==this.content){const e=this.split(this.end-t.length);this.edited&&e.edit(t,this.storeName,!0),this.edit("",void 0,!0)}return!0}return this.edit("",void 0,!0),this.outro=this.outro.replace(e,""),!!this.outro.length||void 0}},Ls="undefined"!=typeof globalThis&&"function"==typeof globalThis.btoa?e=>globalThis.btoa(unescape(encodeURIComponent(e))):"function"==typeof s?e=>s.from(e,"utf-8").toString("base64"):()=>{throw new Error("Unsupported environment: `window.btoa` or `Buffer` should be supported.")},Ps=class{constructor(e){this.version=3,this.file=e.file,this.sources=e.sources,this.sourcesContent=e.sourcesContent,this.names=e.names,this.mappings=function(e){const t=new Ms;let r=0,n=0,s=0,i=0;for(let o=0;o<e.length;o++){const a=e[o];if(o>0&&t.write(As),0===a.length)continue;let l=0;for(let e=0;e<a.length;e++){const o=a[e];e>0&&t.write(Ss),l=js(t,o[0],l),1!==o.length&&(r=js(t,o[1],r),n=js(t,o[2],n),s=js(t,o[3],s),4!==o.length&&(i=js(t,o[4],i)))}}return t.flush()}(e.mappings),void 0!==e.x_google_ignoreList&&(this.x_google_ignoreList=e.x_google_ignoreList)}toString(){return JSON.stringify(this)}toUrl(){return"data:application/json;charset=utf-8;base64,"+Ls(this.toString())}};function Os(e,t){const r=e.split(/[/\\]/),n=t.split(/[/\\]/);for(r.pop();r[0]===n[0];)r.shift(),n.shift();if(r.length){let e=r.length;for(;e--;)r[e]=".."}return r.concat(n).join("/")}var Us=Object.prototype.toString;function Rs(e){const t=e.split("\n"),r=[];for(let e=0,n=0;e<t.length;e++)r.push(n),n+=t[e].length+1;return function(e){let t=0,n=r.length;for(;t<n;){const s=t+n>>1;e<r[s]?n=s:t=s+1}const s=t-1;return{line:s,column:e-r[s]}}}var Bs=/\w/,Fs=class{constructor(e){this.hires=e,this.generatedCodeLine=0,this.generatedCodeColumn=0,this.raw=[],this.rawSegments=this.raw[this.generatedCodeLine]=[],this.pending=null}addEdit(e,t,r,n){if(t.length){const s=t.length-1;let i=t.indexOf("\n",0),o=-1;for(;i>=0&&s>i;){const s=[this.generatedCodeColumn,e,r.line,r.column];n>=0&&s.push(n),this.rawSegments.push(s),this.generatedCodeLine+=1,this.raw[this.generatedCodeLine]=this.rawSegments=[],this.generatedCodeColumn=0,o=i,i=t.indexOf("\n",i+1)}const a=[this.generatedCodeColumn,e,r.line,r.column];n>=0&&a.push(n),this.rawSegments.push(a),this.advance(t.slice(o+1))}else this.pending&&(this.rawSegments.push(this.pending),this.advance(t));this.pending=null}addUneditedChunk(e,t,r,n,s){let i=t.start,o=!0,a=!1;for(;i<t.end;){if(this.hires||o||s.has(i)){const t=[this.generatedCodeColumn,e,n.line,n.column];"boundary"===this.hires?Bs.test(r[i])?a||(this.rawSegments.push(t),a=!0):(this.rawSegments.push(t),a=!1):this.rawSegments.push(t)}"\n"===r[i]?(n.line+=1,n.column=0,this.generatedCodeLine+=1,this.raw[this.generatedCodeLine]=this.rawSegments=[],this.generatedCodeColumn=0,o=!0):(n.column+=1,this.generatedCodeColumn+=1,o=!1),i+=1}this.pending=null}advance(e){if(!e)return;const t=e.split("\n");if(t.length>1){for(let e=0;e<t.length-1;e++)this.generatedCodeLine++,this.raw[this.generatedCodeLine]=this.rawSegments=[];this.generatedCodeColumn=0}this.generatedCodeColumn+=t[t.length-1].length}},_s="\n",$s={insertLeft:!1,insertRight:!1,storeName:!1},zs=class e{constructor(e,t={}){const r=new Ds(0,e.length,e);Object.defineProperties(this,{original:{writable:!0,value:e},outro:{writable:!0,value:""},intro:{writable:!0,value:""},firstChunk:{writable:!0,value:r},lastChunk:{writable:!0,value:r},lastSearchedChunk:{writable:!0,value:r},byStart:{writable:!0,value:{}},byEnd:{writable:!0,value:{}},filename:{writable:!0,value:t.filename},indentExclusionRanges:{writable:!0,value:t.indentExclusionRanges},sourcemapLocations:{writable:!0,value:new Ns},storedNames:{writable:!0,value:{}},indentStr:{writable:!0,value:void 0},ignoreList:{writable:!0,value:t.ignoreList}}),this.byStart[0]=r,this.byEnd[e.length]=r}addSourcemapLocation(e){this.sourcemapLocations.add(e)}append(e){if("string"!=typeof e)throw new TypeError("outro content must be a string");return this.outro+=e,this}appendLeft(e,t){if("string"!=typeof t)throw new TypeError("inserted content must be a string");this._split(e);const r=this.byEnd[e];return r?r.appendLeft(t):this.intro+=t,this}appendRight(e,t){if("string"!=typeof t)throw new TypeError("inserted content must be a string");this._split(e);const r=this.byStart[e];return r?r.appendRight(t):this.outro+=t,this}clone(){const t=new e(this.original,{filename:this.filename});let r=this.firstChunk,n=t.firstChunk=t.lastSearchedChunk=r.clone();for(;r;){t.byStart[n.start]=n,t.byEnd[n.end]=n;const e=r.next,s=e&&e.clone();s&&(n.next=s,s.previous=n,n=s),r=e}return t.lastChunk=n,this.indentExclusionRanges&&(t.indentExclusionRanges=this.indentExclusionRanges.slice()),t.sourcemapLocations=new Ns(this.sourcemapLocations),t.intro=this.intro,t.outro=this.outro,t}generateDecodedMap(e){e=e||{};const t=Object.keys(this.storedNames),r=new Fs(e.hires),n=Rs(this.original);return this.intro&&r.advance(this.intro),this.firstChunk.eachNext((e=>{const s=n(e.start);e.intro.length&&r.advance(e.intro),e.edited?r.addEdit(0,e.content,s,e.storeName?t.indexOf(e.original):-1):r.addUneditedChunk(0,e,this.original,s,this.sourcemapLocations),e.outro.length&&r.advance(e.outro)})),{file:e.file?e.file.split(/[/\\]/).pop():void 0,sources:[e.source?Os(e.file||"",e.source):e.file||""],sourcesContent:e.includeContent?[this.original]:void 0,names:t,mappings:r.raw,x_google_ignoreList:this.ignoreList?[0]:void 0}}generateMap(e){return new Ps(this.generateDecodedMap(e))}_ensureindentStr(){void 0===this.indentStr&&(this.indentStr=function(e){const t=e.split("\n"),r=t.filter((e=>/^\t+/.test(e))),n=t.filter((e=>/^ {2,}/.test(e)));if(0===r.length&&0===n.length)return null;if(r.length>=n.length)return"\t";const s=n.reduce(((e,t)=>{const r=/^ +/.exec(t)[0].length;return Math.min(r,e)}),1/0);return new Array(s+1).join(" ")}(this.original))}_getRawIndentString(){return this._ensureindentStr(),this.indentStr}getIndentString(){return this._ensureindentStr(),null===this.indentStr?"\t":this.indentStr}indent(e,t){const r=/^[^\r\n]/gm;var n;if(n=e,"[object Object]"===Us.call(n)&&(t=e,e=void 0),void 0===e&&(this._ensureindentStr(),e=this.indentStr||"\t"),""===e)return this;const s={};(t=t||{}).exclude&&("number"==typeof t.exclude[0]?[t.exclude]:t.exclude).forEach((e=>{for(let t=e[0];t<e[1];t+=1)s[t]=!0}));let i=!1!==t.indentStart;const o=t=>i?`${e}${t}`:(i=!0,t);this.intro=this.intro.replace(r,o);let a=0,l=this.firstChunk;for(;l;){const t=l.end;if(l.edited)s[a]||(l.content=l.content.replace(r,o),l.content.length&&(i="\n"===l.content[l.content.length-1]));else for(a=l.start;a<t;){if(!s[a]){const t=this.original[a];"\n"===t?i=!0:"\r"!==t&&i&&(i=!1,a===l.start||(this._splitChunk(l,a),l=l.next),l.prependRight(e))}a+=1}a=l.end,l=l.next}return this.outro=this.outro.replace(r,o),this}insert(){throw new Error("magicString.insert(...) is deprecated. Use prependRight(...) or appendLeft(...)")}insertLeft(e,t){return $s.insertLeft||(console.warn("magicString.insertLeft(...) is deprecated. Use magicString.appendLeft(...) instead"),$s.insertLeft=!0),this.appendLeft(e,t)}insertRight(e,t){return $s.insertRight||(console.warn("magicString.insertRight(...) is deprecated. Use magicString.prependRight(...) instead"),$s.insertRight=!0),this.prependRight(e,t)}move(e,t,r){if(r>=e&&r<=t)throw new Error("Cannot move a selection inside itself");this._split(e),this._split(t),this._split(r);const n=this.byStart[e],s=this.byEnd[t],i=n.previous,o=s.next,a=this.byStart[r];if(!a&&s===this.lastChunk)return this;const l=a?a.previous:this.lastChunk;return i&&(i.next=o),o&&(o.previous=i),l&&(l.next=n),a&&(a.previous=s),n.previous||(this.firstChunk=s.next),s.next||(this.lastChunk=n.previous,this.lastChunk.next=null),n.previous=l,s.next=a||null,l||(this.firstChunk=n),a||(this.lastChunk=s),this}overwrite(e,t,r,n){return n=n||{},this.update(e,t,r,{...n,overwrite:!n.contentOnly})}update(e,t,r,n){if("string"!=typeof r)throw new TypeError("replacement content must be a string");if(0!==this.original.length){for(;e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length}if(t>this.original.length)throw new Error("end is out of bounds");if(e===t)throw new Error("Cannot overwrite a zero-length range  use appendLeft or prependRight instead");this._split(e),this._split(t),!0===n&&($s.storeName||(console.warn("The final argument to magicString.overwrite(...) should be an options object. See https://github.com/rich-harris/magic-string"),$s.storeName=!0),n={storeName:!0});const s=void 0!==n&&n.storeName,i=void 0!==n&&n.overwrite;if(s){const r=this.original.slice(e,t);Object.defineProperty(this.storedNames,r,{writable:!0,value:!0,enumerable:!0})}const o=this.byStart[e],a=this.byEnd[t];if(o){let e=o;for(;e!==a;){if(e.next!==this.byStart[e.end])throw new Error("Cannot overwrite across a split point");e=e.next,e.edit("",!1)}o.edit(r,s,!i)}else{const n=new Ds(e,t,"").edit(r,s);a.next=n,n.previous=a}return this}prepend(e){if("string"!=typeof e)throw new TypeError("outro content must be a string");return this.intro=e+this.intro,this}prependLeft(e,t){if("string"!=typeof t)throw new TypeError("inserted content must be a string");this._split(e);const r=this.byEnd[e];return r?r.prependLeft(t):this.intro=t+this.intro,this}prependRight(e,t){if("string"!=typeof t)throw new TypeError("inserted content must be a string");this._split(e);const r=this.byStart[e];return r?r.prependRight(t):this.outro=t+this.outro,this}remove(e,t){if(0!==this.original.length){for(;e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length}if(e===t)return this;if(e<0||t>this.original.length)throw new Error("Character is out of bounds");if(e>t)throw new Error("end must be greater than start");this._split(e),this._split(t);let r=this.byStart[e];for(;r;)r.intro="",r.outro="",r.edit(""),r=t>r.end?this.byStart[r.end]:null;return this}reset(e,t){if(0!==this.original.length){for(;e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length}if(e===t)return this;if(e<0||t>this.original.length)throw new Error("Character is out of bounds");if(e>t)throw new Error("end must be greater than start");this._split(e),this._split(t);let r=this.byStart[e];for(;r;)r.reset(),r=t>r.end?this.byStart[r.end]:null;return this}lastChar(){if(this.outro.length)return this.outro[this.outro.length-1];let e=this.lastChunk;do{if(e.outro.length)return e.outro[e.outro.length-1];if(e.content.length)return e.content[e.content.length-1];if(e.intro.length)return e.intro[e.intro.length-1]}while(e=e.previous);return this.intro.length?this.intro[this.intro.length-1]:""}lastLine(){let e=this.outro.lastIndexOf(_s);if(-1!==e)return this.outro.substr(e+1);let t=this.outro,r=this.lastChunk;do{if(r.outro.length>0){if(e=r.outro.lastIndexOf(_s),-1!==e)return r.outro.substr(e+1)+t;t=r.outro+t}if(r.content.length>0){if(e=r.content.lastIndexOf(_s),-1!==e)return r.content.substr(e+1)+t;t=r.content+t}if(r.intro.length>0){if(e=r.intro.lastIndexOf(_s),-1!==e)return r.intro.substr(e+1)+t;t=r.intro+t}}while(r=r.previous);return e=this.intro.lastIndexOf(_s),-1!==e?this.intro.substr(e+1)+t:this.intro+t}slice(e=0,t=this.original.length){if(0!==this.original.length){for(;e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length}let r="",n=this.firstChunk;for(;n&&(n.start>e||n.end<=e);){if(n.start<t&&n.end>=t)return r;n=n.next}if(n&&n.edited&&n.start!==e)throw new Error(`Cannot use replaced character ${e} as slice start anchor.`);const s=n;for(;n;){!n.intro||s===n&&n.start!==e||(r+=n.intro);const i=n.start<t&&n.end>=t;if(i&&n.edited&&n.end!==t)throw new Error(`Cannot use replaced character ${t} as slice end anchor.`);const o=s===n?e-n.start:0,a=i?n.content.length+t-n.end:n.content.length;if(r+=n.content.slice(o,a),!n.outro||i&&n.end!==t||(r+=n.outro),i)break;n=n.next}return r}snip(e,t){const r=this.clone();return r.remove(0,e),r.remove(t,r.original.length),r}_split(e){if(this.byStart[e]||this.byEnd[e])return;let t=this.lastSearchedChunk;const r=e>t.end;for(;t;){if(t.contains(e))return this._splitChunk(t,e);t=r?this.byStart[t.end]:this.byEnd[t.start]}}_splitChunk(e,t){if(e.edited&&e.content.length){const r=Rs(this.original)(t);throw new Error(`Cannot split a chunk that has already been edited (${r.line}:${r.column}  "${e.original}")`)}const r=e.split(t);return this.byEnd[t]=e,this.byStart[t]=r,this.byEnd[r.end]=r,e===this.lastChunk&&(this.lastChunk=r),this.lastSearchedChunk=e,!0}toString(){let e=this.intro,t=this.firstChunk;for(;t;)e+=t.toString(),t=t.next;return e+this.outro}isEmpty(){let e=this.firstChunk;do{if(e.intro.length&&e.intro.trim()||e.content.length&&e.content.trim()||e.outro.length&&e.outro.trim())return!1}while(e=e.next);return!0}length(){let e=this.firstChunk,t=0;do{t+=e.intro.length+e.content.length+e.outro.length}while(e=e.next);return t}trimLines(){return this.trim("[\\r\\n]")}trim(e){return this.trimStart(e).trimEnd(e)}trimEndAborted(e){const t=new RegExp((e||"\\s")+"+$");if(this.outro=this.outro.replace(t,""),this.outro.length)return!0;let r=this.lastChunk;do{const e=r.end,n=r.trimEnd(t);if(r.end!==e&&(this.lastChunk===r&&(this.lastChunk=r.next),this.byEnd[r.end]=r,this.byStart[r.next.start]=r.next,this.byEnd[r.next.end]=r.next),n)return!0;r=r.previous}while(r);return!1}trimEnd(e){return this.trimEndAborted(e),this}trimStartAborted(e){const t=new RegExp("^"+(e||"\\s")+"+");if(this.intro=this.intro.replace(t,""),this.intro.length)return!0;let r=this.firstChunk;do{const e=r.end,n=r.trimStart(t);if(r.end!==e&&(r===this.lastChunk&&(this.lastChunk=r.next),this.byEnd[r.end]=r,this.byStart[r.next.start]=r.next,this.byEnd[r.next.end]=r.next),n)return!0;r=r.next}while(r);return!1}trimStart(e){return this.trimStartAborted(e),this}hasChanged(){return this.original!==this.toString()}_replaceRegexp(e,t){function r(e,r){return"string"==typeof t?t.replace(/\$(\$|&|\d+)/g,((t,r)=>"$"===r?"$":"&"===r?e[0]:+r<e.length?e[+r]:`$${r}`)):t(...e,e.index,r,e.groups)}if(e.global)(function(e,t){let r;const n=[];for(;r=e.exec(t);)n.push(r);return n})(e,this.original).forEach((e=>{if(null!=e.index){const t=r(e,this.original);t!==e[0]&&this.overwrite(e.index,e.index+e[0].length,t)}}));else{const t=this.original.match(e);if(t&&null!=t.index){const e=r(t,this.original);e!==t[0]&&this.overwrite(t.index,t.index+t[0].length,e)}}return this}_replaceString(e,t){const{original:r}=this,n=r.indexOf(e);return-1!==n&&this.overwrite(n,n+e.length,t),this}replace(e,t){return"string"==typeof e?this._replaceString(e,t):this._replaceRegexp(e,t)}_replaceAllString(e,t){const{original:r}=this,n=e.length;for(let s=r.indexOf(e);-1!==s;s=r.indexOf(e,s+n))r.slice(s,s+n)!==t&&this.overwrite(s,s+n,t);return this}replaceAll(e,t){if("string"==typeof e)return this._replaceAllString(e,t);if(!e.global)throw new TypeError("MagicString.prototype.replaceAll called with a non-global RegExp argument");return this._replaceRegexp(e,t)}},Ws=u(r("../../node_modules/path-browserify/index.js")),qs={taglibId:h,"<import>":ns,"<export>":jn,"<attrs>":w,"<if>":Zr,"<else-if>":rn,"<else>":Yr,"<for>":Vn,"<let>":os,"<const>":ln,"<define>":vn,"<effect>":Cn,"<do>":kn,"<log>":ms,"<debug>":dn,"<lifecycle>":ds,"<id>":ts,"<html-comment>":Qn,"<return>":It,"<style>":{translate(e){const{hub:{file:t}}=e,{filename:r,sourceMaps:n}=t.opts;(0,Es.assertNoParams)(e),Qe(e);let s="text/css";const i=e.get("attributes"),o=Ws.default.basename(r),a=i.find((e=>e.isMarkoAttribute()&&"type"===e.node.name)),l=i.find((e=>e.isMarkoAttribute()&&"class"===e.node.name));if(a&&l)throw l.buildCodeFrameError("The `style` tag must only use `type` or `class` and not both.");if(a){const e=a.get("value");if(!e.isStringLiteral())throw e.buildCodeFrameError("The `style` tag `type` attribute can only be a string literal.");s=e.node.value}else if(l){const e=l.get("value");if(!e.isStringLiteral())throw e.buildCodeFrameError("The `style` tag `class` attribute can only be a string literal.");s=e.node.value}"text/css"===s&&(s="css"),e.node.var&&!s.startsWith("module")&&(s="module."+s);const c=e.get("body").get("body"),p=c[0];if(1!==c.length||!p.isMarkoText())throw(p.isMarkoText()?c[1]:c[0]).buildCodeFrameError("The `style` tag currently only supports static content.");const{resolveVirtualDependency:d}=F(),u=(0,Es.getStart)(t,p.node),f=(0,Es.getEnd)(t,p.node);let m,h=p.node.value;if(d&&n&&null!==u&&null!==f){const e=new zs(t.code,{filename:r});e.remove(0,u),e.remove(f,t.code.length),m=e.generateMap({source:r,includeContent:!0}),"inline"!==n&&"both"!==n||(h+=`\n/*# sourceMappingURL=${m.toUrl()}*/`,"inline"===n&&(m=void 0))}const y=d?.(r,{virtualPath:`./${o}.${s}`,code:h,map:m});y&&(e.node.var?ks.types.isIdentifier(e.node.var)?ar.pushContainer("body",ks.types.importDeclaration([ks.types.importDefaultSpecifier(e.node.var)],ks.types.stringLiteral(y))):ar.pushContainer("body",ks.types.variableDeclaration("const",[ks.types.variableDeclarator(e.node.var,(0,Es.importDefault)(t,y,"style"))])):ar.pushContainer("body",ks.types.importDeclaration([],ks.types.stringLiteral(y)))),e.remove()},attributes:{}},"<await-reorderer>":hs,"<init-widgets>":hs,"<init-components>":hs,"<static>":ws,"<server>":bs,"<client>":S,"<__flush_here_and_after__>":x},Vs=(r("../../browser-shims/compiler/index.js"),{translate:{exit(e){B()&&Js(e,e.node.left)}}});function Js(e,t){switch(t.type){case"ObjectPattern":for(const r of t.properties)Js(e,r);break;case"ArrayPattern":for(const r in t.elements)null!==t.elements[r]&&Js(e,t.elements[r]);break;case"RestElement":Js(e,t.argument);break;case"ObjectProperty":Js(e,t.value);break;case"Identifier":{const r=t.extra?.source;if(r){const t=H(e);(ar.node.extra.assignments??=[]).push([t,e])}break}}}var Xs={translate:{exit(e){R()&&bt(e)`<![CDATA[${e.node.value}]]>`,e.remove()}}},Zs={translate:{exit(e){e.remove()}}},Ks={translate:{exit(e){R()&&bt(e)`<?${e.node.value}?>`,e.remove()}}},Gs={translate:{exit(e){R()&&bt(e)`<!${e.node.value}>`,e.remove()}}},Hs=r("../../node_modules/@marko/babel-utils/dist/index.js"),Qs=r("../../browser-shims/compiler/index.js"),Ys=new WeakMap,ei=new WeakSet,ti={analyze(e){const t=hr(e);if(!ri(e,!t||t.isMarkoScriptlet({static:!0})))return;if(t&&(t.isMarkoPlaceholder()||t.isMarkoScriptlet({target:"server"})))return;const{node:r}=e,n=r.extra??={},s=n.name=e.node.id?.name||(t?.isMarkoAttribute()?t.node.default?Qs.types.toIdentifier(t.parentPath.parentPath.get("name")):t.node.name:"anonymous");if(t&&t.isMarkoAttribute()&&((0,Hs.isNativeTag)(t.parentPath)||g(t.parentPath,"effect")||g(t.parentPath,"lifecycle")||g(t.parentPath,"for")||g(t.parentPath,"do")))return;const{markoOpts:i,opts:{filename:o}}=ar.hub.file,a=H(e);let l=Ys.get(a);l||(l=new Map,Ys.set(a,l));const c=l.get(s);let p="";void 0===c?l.set(s,0):p=`_${c}`,n.registerId=(0,Hs.getTemplateId)(i,o,`${a.id}/${s+p}`)},translate:{exit(e){const t=hr(e),r=!t||t.isMarkoScriptlet({static:!0});if(!ri(e,r))return;const{node:n}=e,{extra:s}=n;if(!s?.registerId)return;if(ei.has(n))return;const i=H(e);if(i)if(ei.add(n),R()){const t=Rt(i);if(Re(s.referencedBindings,(e=>{t.set($r(e),Qs.types.identifier(e.name))})),Qs.types.isFunctionDeclaration(n))ar.unshiftContainer("body",Qs.types.expressionStatement(Je("register",n.id,Qs.types.stringLiteral(s.registerId),r?void 0:Q(i))))[0].skip();else{const t=Je("register",n,Qs.types.stringLiteral(s.registerId),r?void 0:Q(i));gr(e.parentPath)&&(t.extra=n.extra),e.replaceWith(t)[0].skip()}}else{const{referencedBindings:t}=s,o=ar.scope.generateUidIdentifier(s.name);if(Qs.types.isFunctionDeclaration(n))ar.unshiftContainer("body",Qs.types.expressionStatement(Je("register",Qs.types.stringLiteral(s.registerId),n.id)))[0].skip();else if(r){const t=Je("register",Qs.types.stringLiteral(s.registerId),n);gr(e.parentPath)&&(t.extra=n.extra),e.replaceWith(t)[0].skip()}else{const r=Qs.types.callExpression(o,[lr]);gr(e.parentPath)&&(r.extra=n.extra),ar.pushContainer("body",Qs.types.variableDeclaration("const",[Qs.types.variableDeclarator(o,Je("register",Qs.types.stringLiteral(s.registerId),Qs.types.arrowFunctionExpression([lr],t?Qs.types.blockStatement([Qs.types.variableDeclaration("const",[Qs.types.variableDeclarator($e(i,t),lr)]),Qs.types.returnStatement(n)]):n)))]))[0].skip(),e.replaceWith(r)[0].skip()}}}}};function ri(e,t){switch(e.node.type){case"FunctionDeclaration":return t;case"FunctionExpression":case"ArrowFunctionExpression":return!0;default:return!1}}var ni=r("../../node_modules/@marko/babel-utils/dist/index.js"),si={analyze(e){const{node:t}=e,{source:r}=t,{value:n}=r,s=(0,ni.resolveTagImport)(e,n);if(s){t.extra??={},t.extra.tagImport=s;const r=e.hub.file.metadata.marko.tags;r.includes(s)||r.push(s)}},translate:{exit(e){const{node:t}=e,{extra:r}=t,n=r?.tagImport;n&&(t.source.value=n)}}},ii=r("../../node_modules/@marko/babel-utils/dist/index.js"),oi=r("../../browser-shims/compiler/index.js"),ai=Symbol("placeholder node binding"),li=Symbol("placeholder has sibling text"),ci={script:"escapeScript",style:"escapeStyle"},pi={analyze(e){const{node:t}=e,{confident:r,computed:n}=Bn(e);(!r||!t.escape&&n)&&((t.extra??={})[ai]=kr("#text",0,G(e),void 0,t.value.extra),function(e){const t=e.node.extra;let r=e.getPrevSibling();for(;r.node;){const e=oe(r,"endNodeContentType");if(2!==e){if(5===e||1===e||3===e)return t[li]=1;break}r=r.getPrevSibling()}if(!r.node&&oi.types.isProgram(e.parentPath))return t[li]=1;let n=e.getNextSibling();for(;n.node;){const e=oe(n,"startNodeContentType");if(2!==e){if(5===e||1===e||3===e)return t[li]=2;break}n=n.getNextSibling()}if(!n.node&&oi.types.isProgram(e.parentPath))return t[li]=2;t[li]=0}(e))},translate:{exit(e){const t=R(),r=bt(e),{node:n}=e,{value:s}=n,i=n.extra,{confident:o,computed:a}=i,l=i[ai],c=t||o&&(n.escape||!a),p=c?n.escape?ci[function({parentPath:e}){return e.isMarkoTag()&&(0,ii.isNativeTag)(e)&&e.node.name.value||""}(e)]||"escapeXML":"toString":n.escape?"data":"html",d=Wr(s.extra?.referencedBindings),u=i[li];o&&c?r`${Xe()[p](a)}`:(1===u?(t&&d&&r`<!>`,ft(e,37)):2===u?ft(e,37):(t||r` `,ft(e,32)),t?(r`${Je(p,s)}`,d&&kt(e,l)):Vt("render",H(e),s.extra?.referencedBindings,oi.types.expressionStatement("data"===p?Je("data",oi.types.memberExpression(lr,$r(l),!0),s):Je("html",lr,s,$r(l))))),ut(e),e.remove()}}},di=r("../../browser-shims/compiler/index.js"),ui=new WeakMap,fi={migrate(e){const{name:t}=e.node;if(!e.scope.hasBinding(t)&&"out"===t){if(!di.types.isMemberExpression(e.parent)||!di.types.isIdentifier(e.parent.property)||"global"!==e.parent.property.name)throw e.buildCodeFrameError("Only `out.global` is supported for compatibility.");e.parentPath.replaceWith(di.types.identifier("$global"))}},translate(e){const{name:t}=e.node;if(!e.scope.hasBinding(t))switch(t){case"$global":R()?e.replaceWith(di.types.memberExpression(di.types.callExpression(Ve("getStreamData"),[]),di.types.identifier("global"))):e.replaceWith(di.types.memberExpression(lr,di.types.identifier("$global")));break;case"$signal":if(R())e.replaceWith(di.types.callExpression(di.types.arrowFunctionExpression([],di.types.blockStatement([di.types.throwStatement(di.types.newExpression(di.types.identifier("Error"),[di.types.stringLiteral("Cannot use $signal in a server render.")]))])),[]));else{const t=H(e),r=yr(e);let n,s=ui.get(t);s?n=s.get(r):(s=new Map,ui.set(t,s)),n||(n=s.size,s.set(r,n),Vt("render",t,r.node.extra?.referencedBindings,di.types.expressionStatement(di.types.callExpression(Ve("resetAbortSignal"),[lr,di.types.numericLiteral(n)])))),e.replaceWith(di.types.callExpression(Ve("getAbortSignal"),[lr,di.types.numericLiteral(n)]))}}}},mi={analyze(e){Mr(e,e.node.body)},translate:{exit(e){const{node:t}=e;if(R()){if(t.static)return;e.replaceWithMultiple(t.body)}else t.target&&"client"!==t.target?e.remove():t.static?e.replaceWithMultiple(t.body):(Vt("render",H(e),t.extra?.referencedBindings,t.body),e.remove())}}},hi=r("../../node_modules/@marko/babel-utils/dist/index.js"),yi=r("../../browser-shims/compiler/index.js"),gi=r("../../browser-shims/compiler/index.js");function bi(e,t){if(!e)return!1;const{node:r}=t,n=vi(e)?e.default:e;return wi(n)?n(t,gi.types):n.enter&&n.enter(t,gi.types),r!==t.node}function xi(e,t){if(!e)return!1;const{node:r}=t,n=vi(e)?e.default:e;return!wi(n)&&n.exit&&n.exit(t,gi.types),r!==t.node}function vi(e){return Boolean(e.default)}function wi(e){return"function"==typeof e}var Ei=r("../../node_modules/@marko/babel-utils/dist/index.js"),ki=r("../../browser-shims/compiler/index.js"),Si={analyze:{enter(e){(0,Ei.assertNoVar)(e),(0,Ei.assertNoArgs)(e),K(e.get("body"))}},translate:{exit(e){const t=(0,Ei.findParentTag)(e);if(!t)throw e.get("name").buildCodeFrameError("@tags must be nested within another tag.");const r=t.node.extra;if(0===r.tagNameType)throw e.get("name").buildCodeFrameError("@tags cannot be nested under native tags.");R()?wt(e):e.node.attributes.push(ki.types.markoAttribute("renderBody",Je("bindRenderer",lr,ki.types.identifier(H(e.get("body")).name))));const n=e.node.name.value.slice(1),s=r.nestedAttributeTags[n],i=bn(e,!0);if(s.dynamic)s.identifier||(s.identifier=t.scope.generateUidIdentifier(n),t.insertBefore(s.repeated?ki.types.variableDeclaration("const",[ki.types.variableDeclarator(s.identifier,ki.types.arrayExpression([]))]):ki.types.variableDeclaration("let",[ki.types.variableDeclarator(s.identifier)])),t.pushContainer("attributes",ki.types.markoAttribute(n,s.identifier))),e.replaceWith(ki.types.expressionStatement(s.repeated?ki.types.callExpression(ki.types.memberExpression(s.identifier,ki.types.identifier("push")),[i]):ki.types.assignmentExpression("=",s.identifier,i)));else if(s.repeated){const r=t.get("attributes").find((e=>e.node.name===n));r?r.get("value").pushContainer("elements",i):t.pushContainer("attributes",ki.types.markoAttribute(n,ki.types.arrayExpression([i]))),e.remove()}else t.pushContainer("attributes",ki.types.markoAttribute(n,i)),e.remove()}}},Ai=r("../../node_modules/@marko/babel-utils/dist/index.js"),Ci=r("../../browser-shims/compiler/index.js"),Ii=Symbol("custom tag child scope"),ji={analyze:{enter(e){const t=G(e),r=e.get("body");if(K(r),Sr(e,4),Ar(r,3),(0,Ai.getTagTemplate)(e)){const r=e.node.extra??={};r[Ii]=kr("#childScope",0,t,void 0,r)}const n=(0,Ai.loadFileForTag)(e),s=n?.ast.program.extra,i=s?.isInteractive||s?.hasInteractiveChild,o=s?.domExports?.params?.props?.[0];o?.props&&!e.node.attributes.find((e=>Ci.types.isMarkoSpreadAttribute(e)))||Mr(e,e.node.attributes.map((e=>e.value))),i&&((ar.node.extra??{}).hasInteractiveChild=!0)}},translate:{enter(e){(0,Ai.assertAttributesOrSingleArg)(e),ft(e),R()&&vt(e)},exit(e){R()?function(e){const t=e.get("body"),{node:r}=e;let n;if(wt(e),tr(t),Ci.types.isStringLiteral(r.name)){const{file:t}=e.hub,s=r.name.value,i=Ti(e);n=Ci.types.memberExpression((0,Ai.importDefault)(t,i,s),Ci.types.identifier("_"))}else n=Ci.types.memberExpression(r.name,Ci.types.identifier("_"));const s=r.var,i=bn(e,!0),o=xn(i),a=H(e),l=r.extra[Ii],c=e.scope.generateUidIdentifier(l?.name);if(e.insertBefore(Ci.types.variableDeclaration("const",[Ci.types.variableDeclarator(c,Je("peekNextScope"))])),Rt(a).set($r(l),c),r.extra.tagNameNullable){let t,r=Ni(n,bn(e));if(o){t=e.scope.generateUidIdentifier("renderBody");const r=H(e.get("body")),[n]=e.insertBefore(Ci.types.variableDeclaration("const",[Ci.types.variableDeclarator(t,Je("register",Je("createRenderer",Ci.types.arrowFunctionExpression(o.params,o.body)),Ci.types.stringLiteral(Zt(r,"renderer")),r.closures.size&&Q(r.parent)))]));n.skip(),i.properties[i.properties.length-1]=Ci.types.objectProperty(Ci.types.identifier("renderBody"),t)}s&&(an(e,Ci.types.unaryExpression("void",Ci.types.numericLiteral(0)),"let"),r=Ci.types.assignmentExpression("=",s,r)),e.replaceWith(Ci.types.ifStatement(n,Ci.types.expressionStatement(r),t&&Mi(t)))[0].skip()}else s?(an(e,Ni(n,i,Je("register",Je("createRenderer",Ci.types.arrowFunctionExpression([],Ci.types.blockStatement([]))),Ci.types.stringLiteral(Zt(a,r.var.extra?.binding)),Q(a)))),Ut(a),e.remove()):e.replaceWith(Mi(n,i))[0].skip()}(e):function(e){const t=H(e),r=H(e.get("body")),{node:n}=e,s=n.extra,i=s[Ii],o=bt(e),{file:a}=e.hub,l=Ci.types.isIdentifier(n.name)?n.name.name:Ci.types.isStringLiteral(n.name)?n.name.value:"tag",c=Ti(e),p=(0,Ai.loadFileForTag)(e).ast.program,d=(0,Ai.importNamed)(a,c,p.extra.domExports.setup,l),u=p.extra.domExports.params?.props?.[0];if(u)if(!u.props||e.node.attributes.some((e=>Ci.types.isMarkoSpreadAttribute(e)))){let n=bn(e);r!==t&&(n??=Ci.types.objectExpression([]),n.properties.push(Ci.types.objectProperty(Ci.types.identifier("renderBody"),Je("bindRenderer",lr,Ci.types.identifier(r.name)))));const o=(0,Ai.importNamed)(a,c,u.id,`${l}_input`);Jt(t,s.referencedBindings,{identifier:o,hasDownstreamIntersections:()=>!0},n,We(t,i),Je("inChild",$r(i),Ci.types.identifier(o.name)))}else{for(const r of e.get("attributes")){const e=r.node,n=u.props[e.name];if(n){const r=(0,Ai.importNamed)(a,c,n.id,`${l}_${n.id}`),s=e.value.extra?.referencedBindings;Jt(t,s,{identifier:r,hasDownstreamIntersections:()=>!0},e.value,We(t,i),Je("inChild",$r(i),Ci.types.identifier(r.name)))}}if(u.props.renderBody&&r!==t){const e=(0,Ai.importNamed)(a,c,u.props.renderBody.id,`${l}_renderBody`);Jt(t,void 0,{identifier:e,hasDownstreamIntersections:()=>!0},Je("bindRenderer",lr,Ci.types.identifier(r.name)),We(t,i),Je("inChild",$r(i),Ci.types.identifier(e.name)))}}if(o`${(0,Ai.importNamed)(a,c,p.extra.domExports.template,`${l}_template`)}`,function(e,t){const r=ot(H(e));at(H(e)).push(`${ct[47]}`,t.name,ct[38]),nt(r,String.fromCharCode(47)),r.push(t,String.fromCharCode(38))}(e,(0,Ai.importNamed)(a,c,p.extra.domExports.walks,`${l}_walks`)),n.var){const e=_t(n.var.extra.binding);e.register=!0,Vt("render",t,void 0,Ci.types.expressionStatement(Je("setTagVar",lr,$r(i),e.identifier)))}Vt("render",t,void 0,Ci.types.expressionStatement(Ci.types.callExpression(d,[We(t,i)]))),e.remove()}(e)}}};function Ti(e){const{node:t,hub:{file:r}}=e,n=Ci.types.isStringLiteral(t.name);let s;if(n){const t=(0,Ai.getTagTemplate)(e);s=t&&(0,Ai.resolveRelativePath)(r,t)}else t.extra?.tagNameImported&&(s=t.extra.tagNameImported);if(!s)throw e.get("name").buildCodeFrameError(`Unable to find entry point for custom tag \`${n?t.name.value:t.name}\`.`);const i=r.metadata.marko.tags;return i.includes(s)||i.push(s),s}function Mi(e,...t){return Ci.types.expressionStatement(Ni(e,...t))}function Ni(e,...t){return Ci.types.callExpression(e,t.filter(Boolean))}var Di=r("../../node_modules/@marko/babel-utils/dist/index.js"),Li=r("../../browser-shims/compiler/index.js"),Pi=r("../../browser-shims/compiler/index.js"),Oi=Symbol("dynamic tag dom binding"),Ui={analyze:{enter(e){const t=G(e),r=e.node.extra??={},n=e.get("body"),s=r[Oi]=kr("#text",0,t,void 0,r);K(n),Sr(e,4),Ar(n,3);const i=[];if(e.node.arguments)for(const t of e.node.arguments)i.push(t);for(const t of e.node.attributes)i.push(t.value);Mr(e,i),Rr(e,s)}},translate:{enter(e){ft(e,37),(0,Di.assertAttributesOrArgs)(e),ut(e),R()&&vt(e)},exit(e){const{node:t}=e,r=t.extra,n=r[Oi];let s=t.name;if(Li.types.isStringLiteral(s)){const{file:t}=e.hub,r=Ti(e);s=(0,Di.importDefault)(t,r,s.value)}if("class"===r.featureType){const{markoOpts:t}=e.hub.file,r=`marko/src/runtime/helpers/tags-compat/${R()?"html":"dom"}${t.optimize?"":"-debug"}.${"esm"===t.modules?"mjs":"js"}`;if((0,Di.importDefault)(e.hub.file,r),R()){const t=(0,Di.importNamed)(e.hub.file,r,"s");ar.pushContainer("body",Li.types.expressionStatement(Li.types.callExpression(t,[Li.types.identifier(s.name),Li.types.stringLiteral((0,Di.loadFileForTag)(e).metadata.marko.id)])))}else ar.pushContainer("body",Li.types.expressionStatement(Je("register",Li.types.stringLiteral((0,Di.loadFileForTag)(e).metadata.marko.id),Li.types.identifier(s.name))))}if(R()){wt(e),tr(e.get("body"));const r=bn(e,!0),i=xn(r),o=[s,r];if(Li.types.isObjectExpression(r)&&i){const t=H(e.get("body"));r.properties.pop(),o.push(Je("register",Je("createRenderer",Li.types.arrowFunctionExpression(i.params,function(e){const t=e.body;return 1===t.length&&Pi.types.isExpressionStatement(t[0])?t[0].expression:Pi.types.isBlockStatement(e)?e:Pi.types.blockStatement(t)}(i.body))),Li.types.stringLiteral(Zt(t,"renderer")),t.closures.size&&Q(t.parent)))}const a=ar.scope.generateUidIdentifier("dynamicScope"),l=Li.types.isArrayExpression(r)?Je("dynamicTagArgs",...o):Je("dynamicTagInput",...o);t.var?(an(e,l),e.remove()):e.replaceWith(Li.types.variableDeclaration("const",[Li.types.variableDeclarator(a,l)]))[0].skip();const c=H(e);bt(e)`${Je("markResumeControlEnd",Q(c),$r(n))}`,Rt(c).set(Li.types.stringLiteral($r(n).value+"!"),a),Rt(c).set(Li.types.stringLiteral($r(n).value+"("),Li.types.isIdentifier(s)?Li.types.identifier(s.name):s)}else{const r=H(e),i=H(e.get("body")),o=r!==i&&Li.types.identifier(i.name),a=Ft(r,n,"dynamicTagName");a.build=()=>Je("conditional",$r(n),$t(a,[lr]),zt(a)),a.hasDownstreamIntersections=()=>!0,Jt(r,t.name.extra?.referencedBindings,a,o?Li.types.logicalExpression("||",s,o):s);const l=bn(e,!0);if(!Li.types.isObjectExpression(l)||l.properties.length||o){const s=Li.types.arrowFunctionExpression([],l),i=ar.scope.generateUidIdentifier(e.get("name").toString()+"_input");let a=!1;Jt(r,t.extra?.referencedBindings,{get identifier(){return a||(ar.pushContainer("body",Li.types.variableDeclaration("const",[Li.types.variableDeclarator(i,Je("dynamicTagAttrs",$r(n),o,!!Li.types.isArrayExpression(l)&&Li.types.booleanLiteral(!0)))])),a=!0),i},hasDownstreamIntersections:()=>!0},s)}e.remove()}}}},Ri={transform:{enter(e){const t=e.get("attributes");for(let r=0;r<t.length;r++){const n=t[r];if(yi.types.isMarkoAttribute(n.node)&&n.node.bound){n.node.bound=!1;const t=Bi(e,n);if(null===t)throw n.buildCodeFrameError("Attributes may only be bound to identifiers or member expressions");e.node.attributes.splice(++r,0,yi.types.markoAttribute(n.node.name+"Change",t)),e.scope.crawl()}}}},analyze:{enter(e){const t=(0,hi.getTagDef)(e),r=X(e),n=t?.analyzer?.hook;if(n)bi(n,e);else if(0!==r)switch(Dn(e),r){case 1:ji.analyze.enter(e);break;case 3:Si.analyze.enter(e);break;case 2:Ui.analyze.enter(e)}else $n.analyze.enter(e)},exit(e){const t=(0,hi.getTagDef)(e)?.analyzer?.hook;t&&xi(t,e)}},translate:{enter(e){const t=(0,hi.getTagDef)(e),r=e.node.extra;if(t?.translator)return t.translator.path&&e.hub.file.metadata.marko.watchFiles.push(t.translator.path),void bi(t.translator.hook,e);for(const t of e.get("attributes"))if(t.isMarkoAttribute()){if(t.node.arguments)throw t.buildCodeFrameError(`Unsupported arguments on the \`${t.node.name}\` attribute.`);if(t.node.modifier){if(!(0,hi.isNativeTag)(t.parentPath))throw t.buildCodeFrameError(`Unsupported modifier \`${t.node.modifier}\`.`);t.node.name+=`:${t.node.modifier}`}}if(r.tagNameDynamic&&r.tagNameNullable&&!e.get("name").isIdentifier()&&R()){const t=e.scope.generateUidIdentifier("tagName"),[r]=e.insertBefore(yi.types.variableDeclaration("const",[yi.types.variableDeclarator(t,e.node.name)]));r.skip(),e.set("name",t)}switch(r.tagNameType){case 0:$n.translate.enter(e);break;case 1:ji.translate.enter(e);break;case 2:Ui.translate.enter(e)}},exit(e){const t=(0,hi.getTagDef)(e)?.translator;if(t)xi(t.hook,e);else switch(e.node.extra.tagNameType){case 0:$n.translate.exit(e);break;case 1:ji.translate.exit(e);break;case 2:Ui.translate.exit(e);break;case 3:Si.translate.exit(e)}}}};function Bi(e,t){if(yi.types.isIdentifier(t.node.value)){const r=e.scope.generateUidIdentifier("new_"+t.node.value.name);return yi.types.functionExpression(null,[r],yi.types.blockStatement([yi.types.expressionStatement(yi.types.assignmentExpression("=",t.node.value,r))]))}if(yi.types.isMemberExpression(t.node.value)){const e=t.node.value.property;return yi.types.isPrivateName(e)?null:yi.types.isIdentifier(e)?yi.types.memberExpression(yi.types.cloneNode(t.node.value.object),yi.types.identifier(e.name+"Change")):yi.types.memberExpression(yi.types.cloneNode(t.node.value.object),yi.types.binaryExpression("+",yi.types.cloneNode(e),yi.types.stringLiteral("Change")),!0)}return null}r("../../browser-shims/compiler/index.js");var Fi={translate:{exit(e){bt(e)`${e.node.value}`,ut(e),e.remove()}}},_i=(r("../../browser-shims/compiler/index.js"),{Program:fr,Function:ti,AssignmentExpression:Vs,UpdateExpression:{translate:{exit(e){if(B()){const t=e.node.argument.extra?.source;if(t){const t=H(e);(ar.node.extra.assignments??=[]).push([t,e])}}}}},ReferencedIdentifier:fi,ImportDeclaration:si,MarkoDocumentType:Gs,MarkoDeclaration:Ks,MarkoCDATA:Xs,MarkoText:Fi,MarkoTag:Ri,MarkoPlaceholder:pi,MarkoScriptlet:mi,MarkoComment:Zs}),$i=e=>Object.entries(_i).reduce(((t,[r,n])=>(e in n&&(t[r]=n[e]),t)),{}),zi=$i("transform"),Wi=$i("analyze"),qi=$i("translate"),Vi=[["../../node_modules/@marko/translator-tags/dist",{...qs,migrate:$i("migrate")}]];function Ji(e,t){return[`@marko/runtime-tags${t?"":"/debug"}/${"html"===e?"html":"dom"}`]}}}]);
//# sourceMappingURL=215.cc3fa032.js.map