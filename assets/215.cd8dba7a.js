"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[215],{"../../node_modules/@marko/translator-tags/dist/index.js":(e,t,r)=>{var n,s=r("../../node_modules/buffer/index.js").Buffer,i=Object.create,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,c=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,d=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of l(t))p.call(e,s)||s===r||o(e,s,{get:()=>t[s],enumerable:!(n=a(t,s))||n.enumerable});return e},u=(e,t,r)=>(r=null!=e?i(c(e)):{},d(!t&&e&&e.__esModule?r:o(r,"default",{value:e,enumerable:!0}),e)),f={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(f,{analyze:()=>Ao,getRuntimeEntryFiles:()=>Io,internalEntryBuilder:()=>O,taglibs:()=>To,transform:()=>Eo,translate:()=>Co}),e.exports=(n=f,d(o({},"__esModule",{value:!0}),n));var m=r("../../node_modules/@marko/babel-utils/dist/index.js");function h(e){return e.node.name.value}var g="marko-core";function y(e){const t=e.isMarkoTag()&&(0,m.getTagDef)(e)?.taglibId;return t===g||"@marko/translator-interop-class-tags"===t}function b(e,t){return y(e)&&h(e)===t}function x(e){if(y(e))switch(h(e)){case"if":case"else-if":case"else":return!0}return!1}var v=r("../../node_modules/@marko/babel-utils/dist/index.js"),w={transform:[e=>{(0,v.getTagDef)(e)?.renderer||e.replaceWithMultiple(e.node.body.body)}]},k=r("../../browser-shims/compiler/index.js"),S={migrate:[e=>{const t=e.node.var;if(!t||"Identifier"===t.type&&"input"===t.name)e.remove();else{const r=k.types.markoTag(k.types.stringLiteral("const"),[k.types.markoAttribute("value",k.types.identifier("input"))],k.types.markoTagBody([]));r.var=t,e.replaceWith(r)}}],attributes:{},autocomplete:[{displayText:"attrs/{ ... }",description:"Use to receive the attributes passed into this template.",snippet:"attrs/{ $1 }$2"}]},E=r("../../node_modules/@marko/babel-utils/dist/index.js"),A=r("../../browser-shims/compiler/index.js"),C={parse(e){const{node:t,hub:{file:r}}=e,n=t.rawValue,s=n.replace(/^client\s*/,"").trim(),i=t.name.start+(n.length-s.length);let o=(0,E.parseStatements)(r,s,i,i+s.length);1===o.length&&A.types.isBlockStatement(o[0])&&(o=o[0].body),e.replaceWith(A.types.markoScriptlet(o,!0,"client"))},parseOptions:{statement:!0,rawOpenTag:!0},autocomplete:[{displayText:"client <statement>",description:"A JavaScript statement which is only evaluated once your template is loaded on the client.",descriptionMoreURL:"https://markojs.com/docs/syntax/#client-javascript"}]},T=r("../../node_modules/@marko/babel-utils/dist/index.js"),I=r("../../browser-shims/compiler/index.js");function M(e){for(const t of e.get("attributes"))if(t.isMarkoSpreadAttribute())throw t.buildCodeFrameError(`The \`${e.get("name").node.value}\` tag does not support \`...spread\` attributes.`)}function j(e){if(e.node.body.body.length)throw e.get("name").buildCodeFrameError(`The \`${e.get("name").node.value}\` tag does not support body content.`)}var P=r("../../node_modules/@marko/babel-utils/dist/index.js"),N=r("../../browser-shims/compiler/index.js"),B=u(r("../../node_modules/path-browserify/index.js"));function L(e){if(e.downstreamExpressions.size)return!0;for(const t of e.aliases)if(L(t))return!0;for(const t of e.propertyAliases.values())if(L(t))return!0;return!1}var D=r("../../node_modules/@marko/babel-utils/dist/index.js"),U=r("../../browser-shims/compiler/index.js"),$=Symbol(),O={build(e){const t=e[$];if(!t)throw e.path.buildCodeFrameError("Unable to build hydrate code, no files were visited before finalizing the build");const r=t.imports.map((e=>U.types.importDeclaration([],U.types.stringLiteral(e))));return t.init&&(r.unshift(U.types.importDeclaration([U.types.importSpecifier(U.types.identifier("init"),U.types.identifier("init"))],U.types.stringLiteral(`@marko/runtime-tags/${e.markoOpts.optimize?"":"debug/"}dom`))),r.push(U.types.expressionStatement(U.types.callExpression(U.types.identifier("init"),[])))),r},visit(e,t,r){const n=t[$]||={imports:[],init:!1},{analyzedTags:s}=e.metadata.marko;n.imports.push((0,D.resolveRelativePath)(t,e.opts.filename)),n.init||=e.path.node.extra.hasInteractiveChild||e.path.node.extra.isInteractive||!1;for(const e of s||[])r(e)}},_=r("../../browser-shims/compiler/index.js");function R(e){let t=e;do{t=t.parentPath}while(t&&!z(t));return t}function F(e){let t=e;for(;!z(t.parentPath);)if(t=t.parentPath,"AssignmentExpression"===t.type){const e=V(t);if(z(e.parentPath)){t=t.get("right");break}t=e.parentPath}return t}function z(e){switch(e.type){case"MarkoTag":case"MarkoTagBody":case"MarkoAttribute":case"MarkoSpreadAttribute":case"MarkoPlaceholder":case"MarkoScriptlet":return!0;default:return!1}}function W(e){switch(e.type){case"FunctionExpression":case"ArrowFunctionExpression":return!0;default:return!1}}function V(e){switch(e.parent.type){case"ArrayPattern":case"ObjectPattern":case"ObjectProperty":return V(e.parentPath);default:return e}}function q(e){if(e){if(!Array.isArray(e))return J(e);for(const t of e)if(J(t))return!0}return!1}function J(e){switch(e.type){case 1:case 2:return!0;default:return!e.upstreamExpression||q(e.upstreamExpression.referencedBindings)}}function Z(e,t){return e?Array.isArray(e)?(e.push(t),e):[e,t]:t}function G(e,t){if(e)if(Array.isArray(e)){let r=0;for(const n of e)t(n,r++)}else t(e,0)}function X(e,t){if(e){if(Array.isArray(e))return e.find(t);if(t(e,0))return e}}function K(e,t,r){let n=t.length,s=0;for(;s<n;){const i=s+n>>>1,o=t[i],a=e(o,r);if(0===a)return o;a>0?n=i:s=i+1}}function H(e,t,r){const n=t.length;let s=n,i=0;for(;i<s;){const n=i+s>>>1,o=e(t[n],r);if(0===o)return t;o>0?s=n:i=n+1}const o=new Array(n+1);for(let e=0;e<i;e++)o[e]=t[e];let a=r;for(;i<n;){const e=a;a=t[i],o[i++]=e}return o[n]=a,o}function Q(e,t,r){const n=e(t,r);return 0===n?t:n<0?[t,r]:[r,t]}var Y=r("../../node_modules/@marko/babel-utils/dist/index.js"),ee=r("../../browser-shims/compiler/index.js"),te=e=>{const t=new WeakMap;return[()=>{let r=t.get(Xr);return r||t.set(Xr,r=e()),r},e=>{t.set(Xr,e)}]};function re(e,t){return[r=>{const n=Xr.state[e]??={};return n[r.id]??=t&&t(r)},(t,r)=>{(Xr.state[e]??={})[t.id]=r}]}var ne=r("../../node_modules/@marko/babel-utils/dist/index.js"),se=r("../../browser-shims/compiler/index.js");function ie(e,t){return e.start=t.start,e.loc=t.loc,e.end=t.end,e}var oe=/^<.*>$|\.marko$/,ae=/^[A-Z][a-zA-Z0-9_$]*$/;function le(e){const t=e.node.extra??={};if(void 0===t.tagNameType){const r=e.get("name");if(r.isStringLiteral()){if(t.tagNameType="@"===r.node.value[0]?3:(0,ne.isNativeTag)(e)?0:1,1===t.tagNameType){const n=r.node.value,s=e.scope.getBinding(n)?.identifier;if(s&&ae.test(s.name)){const e=ie(se.types.identifier(n),r.node);e.extra={referencedBindings:s.extra?.binding},ce(r.replaceWith(e)[0],t)}}t.tagNameNullable=t.tagNameNullable=!1}else ce(r,t);if(void 0===t.tagNameType&&(t.tagNameType=2),1===t.tagNameType){const r=(0,ne.loadFileForTag)(e);r?"class"===r.ast.program.extra.featureType&&(t.tagNameType=2,t.featureType="class"):t.tagNameType=2}}return t.tagNameType}function ce(e,t){const r=[e];let n,s,i,o=!1;for(;(n=r.pop())&&2!==s;)if(n.isConditionalExpression())r.push(n.get("consequent")),n.node.alternate&&r.push(n.get("alternate"));else if(n.isLogicalExpression())"||"===n.node.operator?r.push(n.get("left")):o=!0,r.push(n.get("right"));else if(n.isAssignmentExpression())r.push(n.get("right"));else if(n.isBinaryExpression())s="+"!==n.node.operator||void 0!==s?2:0;else if(n.isStringLiteral()||n.isTemplateLiteral())s=void 0!==s?2:0;else if(n.isNullLiteral())o=!0;else if(n.isIdentifier()){if("undefined"===n.node.name){o=!0;continue}const t=n.scope.getBinding(n.node.name);if(!t){s=2;continue}if("module"===t.kind){const r=t.path.parent;if(oe.test(r.source.value)&&r.specifiers.some((e=>se.types.isImportDefaultSpecifier(e)))){const t=(0,ne.resolveTagImport)(e,r.source.value)||r.source.value;0===s||i&&i!==t?(s=2,i=void 0):(s=1,i=t)}else s=2;continue}const a=t.path;if(a.isMarkoTag()&&"local"===t.kind){const e=a.get("name").node.value;if("const"===e){r.push(a.get("attributes")[0].get("value"));continue}if("let"===e){s=2;continue}continue}s=2}else s=2;t.tagNameType=s,t.tagNameNullable=o,t.tagNameDynamic=!0,1===s&&i&&(t.tagNameImported=i)}function pe(e){const t=e.node.extra??={};let r=t.section;if(!r&&("Program"===e.type||e.get("body").length)){const n=e.parentPath?de(e.parentPath):void 0,s=e.parentPath?.get("name"),i=e.isProgram()?"":Xr.scope.generateUid(s.toString()+"Body"),o=e.hub.file.path.node.extra??={},a=o.sections??=[];r=t.section={id:a.length,name:i,depth:n?n.depth+1:0,parent:n,params:void 0,closures:void 0,bindings:void 0,content:ve(e),upstreamExpression:void 0,hasCleanup:!1},a.push(r)}return r}function de(e){let t=e;for(;;){if("Program"===t.type||"MarkoTagBody"===t.type&&!t.node.attributeTags&&0!==le(t.parentPath)&&"html-comment"!==t.parent.name.value)return pe(t);t=t.parentPath}}function ue(e){return e.node.extra?.section}function fe(e){let t,r=e;for(;void 0===(t=r.node.extra?.section);)r=r.parentPath;return t}var[me]=re("scopeIdIdentifier",(e=>Xr.scope.generateUidIdentifier(`scope${e.id}_id`))),[he,ge]=re("parentIsOwner",(()=>!1)),[ye]=re("scopeIdentifier",(()=>ee.types.identifier("undefined"))),be=(e,t)=>{const r=ye(e);return t||"undefined"!==r.name||(r.name=Xr.scope.generateUid(`scope${e.id}_`)),r};function xe(e){const{sections:t}=Xr.node.extra;t?.forEach(e)}function ve(e){const t=e.get("body"),r={startType:null,endType:null,singleChild:!0};for(let e=t.length;e--;){const n=we(t[e],"endType",r);if(null!==n){r.endType=n;for(let n=0;n<e;n++){const e=we(t[n],"startType");if(null!==e)return r.startType=e,r.singleChild=!1,r}return r.startType=we(t[e],"startType"),r}}return null}function we(e,t,r){if(ee.types.isMarkoText(e))return 4;if(ee.types.isMarkoPlaceholder(e))return 2;if(ee.types.isMarkoScriptlet(e)||ee.types.isMarkoComment(e))return null;if(ee.types.isMarkoTag(e.node)){const n=e;if((0,Y.isNativeTag)(n))return 3;if((0,Y.isAttributeTag)(n))return null;if(ee.types.isStringLiteral(e.node.name)){switch(e.node.name.value){case"html-comment":return 0;case"let":case"const":case"attrs":case"effect":case"lifecycle":case"return":case"id":case"define":return null}const s=(0,Y.loadFileForTag)(n)?.ast.program.extra.section;if(s)return s.content?(r&&!s.content.singleChild&&"endType"===t&&(r.startType=s.content.startType,r.singleChild=!1),s.content[t]):null}}return 1}var ke=e=>{const t=e.upstreamExpression;return!t||q(t.referencedBindings)},Se=(e,t)=>!!X(e.closures,(r=>(!t||e.parent===r.section)&&q(r))),[Ee]=te((()=>new Set)),[Ae,Ce]=te((()=>0));function Te(e,t,r,n,s,i){const o=Ae(),a={id:o,name:e,type:t,section:r,property:i,excludeProperties:void 0,serialize:!1,aliases:new Set,propertyAliases:new Map,upstreamAlias:n,upstreamExpression:s,downstreamExpressions:new Set,export:void 0};if(i){const e=n.propertyAliases.get(i);e?(a.property=void 0,a.upstreamAlias=e,e.aliases.add(a)):n.propertyAliases.set(i,a)}else n&&n.aliases.add(a);return Ce(o+1),Ee().add(a),a}function Ie(e,t,r,n,s){const i=e.node.var;if(i){const o=de(e),a=Ve(r);r?.downstreamExpressions.delete(n),Pe(i,t,e.scope,o,a,n,void 0,s)}}function Me(e,t,r,n){const s=e.node.params;if(e.node.body.length&&s.length){r?.downstreamExpressions.delete(n);const i=de(e),o=Ve(r),a=o||((e.node.extra??={}).binding=Te(e.scope.generateUid("params_"),t,i,o,n,void 0));i.params=a;for(let r=0;r<s.length;r++)Pe(s[r],t,e.scope,i,a,void 0,r+"")}}function je(e,t){switch(e.type){case"ObjectPattern":for(const r of e.properties)je(r,t);break;case"ArrayPattern":for(const r of e.elements)null!==r&&je(r,t);break;case"RestElement":je(e.argument,t);break;case"ObjectProperty":je(e.value,t);break;case"Identifier":e.name===t.name&&((e.extra??={}).source=t)}}function Pe(e,t,r,n,s,i,o,a){switch(e.type){case"Identifier":(e.extra??={}).binding=Te(e.name,t,n,s,i,o),function(e,t){const{identifier:r,referencePaths:n,constantViolations:s}=e,i=r.extra.binding;for(const e of n)Ne(e,i);for(const e of s){const r=e.node;_.types.isAssignmentExpression(r)&&je(r.left,i),_.types.isUpdateExpression(r)&&je(r.argument,i),_.types.isAssignmentExpression(r)&&_.types.isIdentifier(r.left)&&"="!==r.operator&&Ne(e.get("left"),i),t&&(e.isUpdateExpression()?Ne(e.get("argument"),t):e.isAssignmentExpression()&&Ne(e.get("left"),t))}}(r.getBinding(e.name),a);break;case"ObjectPattern":{const a=(o?s.propertyAliases.get(o):s)||((e.extra??={}).binding=Te(r.generateUid("pattern_"),t,n,s,i,o));for(const s of e.properties)if("RestElement"===s.type)Pe(s.argument,t,r,n,a,void 0,o);else{let e;if("Identifier"===s.key.type)e=s.key.name;else{if("StringLiteral"!==s.key.type)throw new Error("computed keys not supported in object pattern");e=s.key.value}Pe(s.value,t,r,n,a,void 0,e)}break}case"ArrayPattern":{const a=(o?s.propertyAliases.get(o):s)||((e.extra??={}).binding=Te(r.generateUid("pattern_"),t,n,s,i,o));let l=-1;for(const s of e.elements)l++,s&&("RestElement"===s.type?Pe(s.argument,t,r,n,a,void 0,o):Pe(s,t,r,n,a,void 0,`${l}`));break}case"AssignmentPattern":Pe(e.left,t,r,n,s,i,o)}}function Ne(e,t){const r=function(e){let t=e;if(!t.isProgram()){for(;!W(t);){if(z(t))return;t=t.parentPath}return t}}(e.scope.path),n=F(r||e),s=de(n),i=t,o=n.node.extra??={};if(Fe(n,t),je(e.node,t),r){let e=o;r!==n&&(e=r.node.extra??={},e.referencedBindings=Je(s,e.referencedBindings,i))}}var[Be]=te((()=>new Map));function Le(e,t,r){Be().set(t,{section:e,nodes:r})}function De(e,t){const r=e.length,n=r-t.length;if(0!==n)return n;for(let n=0;n<r;n++){const r=Oe.compare(e[n],t[n]);if(0!==r)return r}return 0}function Ue(e,t){for(const r of t)if(!e.has(r))return!1;return!0}function $e(e){const t=new Set,r=new Set;return function e(n){if(4===n.type||3===n.type){let s,i=n;for(;s=i.upstreamAlias;)i=s;if(i.upstreamExpression){if(t.has(i))return;t.add(i),G(i.upstreamExpression.referencedBindings,e)}else r.add(i)}else r.add(n)}(e),r}var Oe=new class{constructor(e){this.compare=e}add(e,t){return e?Array.isArray(e)?H(this.compare,e,t):Q(this.compare,e,t):t}union(e,t){return e?Array.isArray(e)?t?Array.isArray(t)?function(e,t,r){const n=t.length,s=r.length;let i=0,o=0;const a=[];for(;i<n&&o<s;){const n=t[i],s=r[o],l=e(n,s);0===l?(i++,o++,a.push(n)):l<0?(i++,a.push(n)):(o++,a.push(s))}if(n===s&&i===n)return t;for(;i<n;)a.push(t[i++]);for(;o<s;)a.push(r[o++]);return a}(this.compare,e,t):H(this.compare,e,t):e:t?Array.isArray(t)?H(this.compare,[...t],e):Q(this.compare,t,e):e:t}find(e,t){if(e){if(Array.isArray(e))return K(this.compare,e,t);if(0===this.compare(e,t))return e}}}((function(e,t){return(e.section.id-t.section.id||e.type!==t.type&&(0===e.type||0===t.type))&&e.type-t.type||e.id-t.id})),[_e,Re]=re("intersections",(()=>[]));function Fe(e,t){const r=e.node.extra??={},n=de(e);r.referencedBindings=Je(n,r.referencedBindings,t),t.downstreamExpressions.add(r)}var[ze]=te((()=>new Set));function We(e){const t=ze();if(Array.isArray(e))for(const r of e)t.add(r);else t.add(e)}function Ve(e){return e&&(e.property?e:e.upstreamAlias||e)}function qe(e,t=[]){if(e.arguments)for(const r of e.arguments)t.push(r);for(const r of e.attributes)t.push(r.value);for(const r of e.body.attributeTags?e.body.body:e.attributeTags)switch(r.type){case"MarkoTag":qe(r,t);break;case"MarkoScriptlet":for(const e of r.body)t.push(e)}return t}function Je(e,t,r){return e!==r.section&&(e.closures=Oe.add(e.closures,r)),Ze(e,Oe.add(t,r))}function Ze(e,t){if(!t||!Array.isArray(t))return t;const r=_e(e);let n=K(De,r,t);return n||(Re(e,H(De,r,t)),n=t),n}function Ge(e){return on().optimize?_.types.numericLiteral(e.id):_.types.stringLiteral(e.name+(0===e.type?`/${e.id}`:""))}function Xe(e,t){let r=!t.downstreamExpressions.size;for(const n of t.aliases)Xe(e,n)?t.aliases.delete(n):r=!1;for(const[n,s]of t.propertyAliases)Xe(e,s)?t.propertyAliases.delete(n):r=!1;return r&&e.delete(t),r}var Ke=r("../../browser-shims/compiler/index.js"),He=r("../../node_modules/@marko/babel-utils/dist/index.js"),Qe=r("../../browser-shims/compiler/index.js");function Ye(e,t){return t?e:""}Symbol();var et=/^(--|ta|or|li|z)|n-c|i(do|nk|m|t)|w$|we/;function tt(e,t){return t||0===t?`${e}:${"number"==typeof t&&t&&!et.test(e)?t+"px":t}`:""}function rt(e,t,r){switch(typeof e){case"string":return e;case"object":if(null!==e){let n="",s="";if(Array.isArray(e))for(const i of e){const e=rt(i,t,r);""!==e&&(n+=s+e,s=t)}else for(const i in e){const o=r(i,e[i]);""!==o&&(n+=s+o,s=t)}return n}}return""}function nt(e){return/^on[A-Z-]/.test(e)}function st(e){return"-"===e[2]?e.slice(3):e.slice(2).toLowerCase()}function it(e){return e?e+"":0===e?"0":""}var ot=/[<&]/g,at=e=>"&"===e?"&amp;":"&lt;";function lt(e){return e?(t=e+"",ot.test(t)?t.replace(ot,at):t):0===e?"0":"&zwj;";var t}var ct=/<\/script/g;function pt(e){return e?(t=e+"",ct.test(t)?t.replace(ct,"\\x3C/script"):t):0===e?"0":"";var t}var dt=/<\/style/g;function ut(e){return e?(t=e+"",dt.test(t)?t.replace(dt,"\\3C/style"):t):0===e?"0":"";var t}var{hasOwnProperty:ft}={};function mt(e){return yt("class",rt(e," ",Ye))}function ht(e){return yt("style",rt(e,";",tt))}function gt(e,t){return null==(r=t)||!1===r?"":function(e,t){switch(typeof t){case"string":return` ${e+bt(t)}`;case"boolean":return` ${e}`;case"number":return` ${e}=${t}`;case"object":if(t instanceof RegExp)return` ${e+bt(t.source)}`}return` ${e+bt(t+"")}`}(e,t);var r}function yt(e,t){return t&&` ${e}=${vt(t)}`}function bt(e){return e?`=${vt(e)}`:""}(function*(){})().constructor,async function*(){}().constructor,(()=>{const e=new Map;for(const t of Object.getOwnPropertyNames(Symbol)){const r=Symbol[t];"symbol"==typeof r&&e.set(r,"Symbol."+t)}})(),new Map([[AggregateError,"AggregateError"],[Array,"Array"],[Array.from,"Array.from"],[Array.isArray,"Array.isArray"],[Array.of,"Array.of"],[ArrayBuffer,"ArrayBuffer"],[ArrayBuffer.isView,"ArrayBuffer.isView"],[Atomics.add,"Atomics.add"],[Atomics.and,"Atomics.and"],[Atomics.compareExchange,"Atomics.compareExchange"],[Atomics.exchange,"Atomics.exchange"],[Atomics.isLockFree,"Atomics.isLockFree"],[Atomics.load,"Atomics.load"],[Atomics.notify,"Atomics.notify"],[Atomics.or,"Atomics.or"],[Atomics.store,"Atomics.store"],[Atomics.sub,"Atomics.sub"],[Atomics.wait,"Atomics.wait"],[BigInt,"BigInt"],[BigInt.asIntN,"BigInt.asIntN"],[BigInt.asUintN,"BigInt.asUintN"],[BigInt64Array,"BigInt64Array"],[BigInt64Array.from,"BigInt64Array.from"],[BigInt64Array.of,"BigInt64Array.of"],[BigUint64Array,"BigUint64Array"],[BigUint64Array.from,"BigUint64Array.from"],[BigUint64Array.of,"BigUint64Array.of"],[Boolean,"Boolean"],[console.assert,"console.assert"],[console.clear,"console.clear"],[console.count,"console.count"],[console.countReset,"console.countReset"],[console.debug,"console.debug"],[console.dir,"console.dir"],[console.dirxml,"console.dirxml"],[console.error,"console.error"],[console.group,"console.group"],[console.groupCollapsed,"console.groupCollapsed"],[console.groupEnd,"console.groupEnd"],[console.info,"console.info"],[console.log,"console.log"],[console.table,"console.table"],[console.time,"console.time"],[console.timeEnd,"console.timeEnd"],[console.timeLog,"console.timeLog"],[console.timeStamp,"console.timeStamp"],[console.trace,"console.trace"],[console.warn,"console.warn"],[DataView,"DataView"],[Date,"Date"],[Date.now,"Date.now"],[Date.parse,"Date.parse"],[Date.UTC,"Date.UTC"],[decodeURI,"decodeURI"],[decodeURIComponent,"decodeURIComponent"],[encodeURI,"encodeURI"],[encodeURIComponent,"encodeURIComponent"],[Error,"Error"],[EvalError,"EvalError"],[Float32Array,"Float32Array"],[Float32Array.from,"Float32Array.from"],[Float32Array.of,"Float32Array.of"],[Float64Array,"Float64Array"],[Float64Array.from,"Float64Array.from"],[Float64Array.of,"Float64Array.of"],[Function,"Function"],[globalThis.atob,"atob"],[globalThis.btoa,"btoa"],[globalThis.clearImmediate,"clearImmediate"],[globalThis.clearInterval,"clearInterval"],[globalThis.clearTimeout,"clearTimeout"],[globalThis.crypto?.getRandomValues,"crypto.getRandomValues"],[globalThis.crypto?.randomUUID,"crypto.randomUUID"],[globalThis.fetch,"fetch"],[globalThis.performance?.now,"performance.now"],[globalThis.queueMicrotask,"queueMicrotask"],[globalThis.setImmediate,"setImmediate"],[globalThis.setInterval,"setInterval"],[globalThis.setTimeout,"setTimeout"],[globalThis.structuredClone,"structuredClone"],[globalThis.URL,"URL"],[globalThis.URLSearchParams,"URLSearchParams"],[globalThis.WritableStream,"WritableStream"],[Int16Array,"Int16Array"],[Int16Array.from,"Int16Array.from"],[Int16Array.of,"Int16Array.of"],[Int32Array,"Int32Array"],[Int32Array.from,"Int32Array.from"],[Int32Array.of,"Int32Array.of"],[Int8Array,"Int8Array"],[Int8Array.from,"Int8Array.from"],[Int8Array.of,"Int8Array.of"],[Intl.Collator,"Intl.Collator"],[Intl.DateTimeFormat,"Intl.DateTimeFormat"],[Intl.DisplayNames,"Intl.DisplayNames"],[Intl.getCanonicalLocales,"Intl.getCanonicalLocales"],[Intl.ListFormat,"Intl.ListFormat"],[Intl.Locale,"Intl.Locale"],[Intl.NumberFormat,"Intl.NumberFormat"],[Intl.PluralRules,"Intl.PluralRules"],[Intl.RelativeTimeFormat,"Intl.RelativeTimeFormat"],[Intl.Segmenter,"Intl.Segmenter"],[Intl.supportedValuesOf,"Intl.supportedValuesOf"],[isFinite,"isFinite"],[isNaN,"isNaN"],[JSON.parse,"JSON.parse"],[JSON.stringify,"JSON.stringify"],[Map,"Map"],[Map.groupBy,"Map.groupBy"],[Math.abs,"Math.abs"],[Math.acos,"Math.acos"],[Math.acosh,"Math.acosh"],[Math.asin,"Math.asin"],[Math.asinh,"Math.asinh"],[Math.atan,"Math.atan"],[Math.atan2,"Math.atan2"],[Math.atanh,"Math.atanh"],[Math.cbrt,"Math.cbrt"],[Math.ceil,"Math.ceil"],[Math.clz32,"Math.clz32"],[Math.cos,"Math.cos"],[Math.cosh,"Math.cosh"],[Math.exp,"Math.exp"],[Math.expm1,"Math.expm1"],[Math.floor,"Math.floor"],[Math.fround,"Math.fround"],[Math.hypot,"Math.hypot"],[Math.imul,"Math.imul"],[Math.log,"Math.log"],[Math.log10,"Math.log10"],[Math.log1p,"Math.log1p"],[Math.log2,"Math.log2"],[Math.max,"Math.max"],[Math.min,"Math.min"],[Math.pow,"Math.pow"],[Math.random,"Math.random"],[Math.round,"Math.round"],[Math.sign,"Math.sign"],[Math.sin,"Math.sin"],[Math.sinh,"Math.sinh"],[Math.sqrt,"Math.sqrt"],[Math.tan,"Math.tan"],[Math.tanh,"Math.tanh"],[Math.trunc,"Math.trunc"],[Number,"Number"],[Number.isFinite,"Number.isFinite"],[Number.isInteger,"Number.isInteger"],[Number.isNaN,"Number.isNaN"],[Number.isSafeInteger,"Number.isSafeInteger"],[Number.parseFloat,"Number.parseFloat"],[Number.parseInt,"Number.parseInt"],[Object,"Object"],[Object.assign,"Object.assign"],[Object.create,"Object.create"],[Object.defineProperties,"Object.defineProperties"],[Object.defineProperty,"Object.defineProperty"],[Object.entries,"Object.entries"],[Object.freeze,"Object.freeze"],[Object.fromEntries,"Object.fromEntries"],[Object.getOwnPropertyDescriptor,"Object.getOwnPropertyDescriptor"],[Object.getOwnPropertyDescriptors,"Object.getOwnPropertyDescriptors"],[Object.getOwnPropertyNames,"Object.getOwnPropertyNames"],[Object.getOwnPropertySymbols,"Object.getOwnPropertySymbols"],[Object.getPrototypeOf,"Object.getPrototypeOf"],[Object.is,"Object.is"],[Object.isExtensible,"Object.isExtensible"],[Object.isFrozen,"Object.isFrozen"],[Object.isSealed,"Object.isSealed"],[Object.keys,"Object.keys"],[Object.preventExtensions,"Object.preventExtensions"],[Object.seal,"Object.seal"],[Object.setPrototypeOf,"Object.setPrototypeOf"],[Object.values,"Object.values"],[parseFloat,"parseFloat"],[parseInt,"parseInt"],[Promise,"Promise"],[Proxy,"Proxy"],[RangeError,"RangeError"],[ReferenceError,"ReferenceError"],[Reflect.apply,"Reflect.apply"],[Reflect.construct,"Reflect.construct"],[Reflect.defineProperty,"Reflect.defineProperty"],[Reflect.deleteProperty,"Reflect.deleteProperty"],[Reflect.get,"Reflect.get"],[Reflect.getOwnPropertyDescriptor,"Reflect.getOwnPropertyDescriptor"],[Reflect.getPrototypeOf,"Reflect.getPrototypeOf"],[Reflect.has,"Reflect.has"],[Reflect.isExtensible,"Reflect.isExtensible"],[Reflect.ownKeys,"Reflect.ownKeys"],[Reflect.preventExtensions,"Reflect.preventExtensions"],[Reflect.set,"Reflect.set"],[Reflect.setPrototypeOf,"Reflect.setPrototypeOf"],[RegExp,"RegExp"],[Set,"Set"],[String,"String"],[String.fromCharCode,"String.fromCharCode"],[String.fromCodePoint,"String.fromCodePoint"],[String.raw,"String.raw"],[Symbol,"Symbol"],[Symbol.for,"Symbol.for"],[SyntaxError,"SyntaxError"],[TypeError,"TypeError"],[Uint16Array,"Uint16Array"],[Uint16Array.from,"Uint16Array.from"],[Uint16Array.of,"Uint16Array.of"],[Uint32Array,"Uint32Array"],[Uint32Array.from,"Uint32Array.from"],[Uint32Array.of,"Uint32Array.of"],[Uint8Array,"Uint8Array"],[Uint8Array.from,"Uint8Array.from"],[Uint8Array.of,"Uint8Array.of"],[Uint8ClampedArray,"Uint8ClampedArray"],[Uint8ClampedArray.from,"Uint8ClampedArray.from"],[Uint8ClampedArray.of,"Uint8ClampedArray.of"],[URIError,"URIError"],[WeakMap,"WeakMap"],[WeakSet,"WeakSet"]]),new Map([[Atomics,"Atomics"],[console,"console"],[globalThis,"globalThis"],[globalThis.crypto,"crypto"],[Intl,"Intl"],[JSON,"JSON"],[Math,"Math"],[Reflect,"Reflect"]]),Symbol("Scope ID"),Symbol("Pending Contexts"),globalThis.setImmediate||globalThis.setTimeout||globalThis.queueMicrotask,Symbol("selectedValue");var xt=/["'>\s]/g;function vt(e){if(xt.test(e)){const t=e[xt.lastIndex-1];return xt.lastIndex=0,'"'===t?`'${e.replace(/'/g,"&#39;")}'`:`"${e.replace(/"/g,"&#34;")}"`}return e}Symbol();var wt=["createTemplate","createRenderer","createRendererWithOwner","value","state","intersection","closure","dynamicClosure","loopOf","loopIn","loopTo","conditional"];function kt(e){const{output:t}=on();return Qe.types.memberExpression((0,He.importStar)(Xr.hub.file,function(e){const{optimize:t}=on();return`@marko/runtime-tags/${t?"":"debug/"}${"html"===e?"html":"dom"}`}(t),"$"),Qe.types.identifier(e))}function St(e,...t){const r=Qe.types.callExpression(kt(e),function(e){const t=[];for(let r=e.length;r--;){const n=e[r];(n||t.length)&&(t[r]=n||Qe.types.unaryExpression("void",Qe.types.numericLiteral(0)))}return t}(t));return wt.includes(e)&&(r.leadingComments=[{type:"CommentBlock",value:" @__PURE__ "}]),r}function Et(){return{escapeXML:lt,toString:it,attr:gt,classAttr:mt,styleAttr:ht,escapeScript:pt,escapeStyle:ut}}var At=r("../../node_modules/@marko/babel-utils/dist/index.js"),Ct=r("../../browser-shims/compiler/index.js"),Tt=r("../../node_modules/@marko/babel-utils/dist/index.js"),It=r("../../browser-shims/compiler/index.js");function Mt(e){const t={};for(const r of e.attributes)"MarkoAttribute"===r.type&&(t[r.name]=r.value);return t}var jt=r("../../browser-shims/compiler/index.js");function Pt(e,t){if(!e)return!1;const{node:r}=t,n=Bt(e)?e.default:e;return Lt(n)?n(t,jt.types):n.enter&&n.enter(t,jt.types),r!==t.node}function Nt(e,t){if(!e)return!1;const{node:r}=t,n=Bt(e)?e.default:e;return!Lt(n)&&n.exit&&n.exit(t,jt.types),r!==t.node}function Bt(e){return Boolean(e.default)}function Lt(e){return"function"==typeof e}function Dt({html:e,dom:t}){return{enter(r){Pt(nn()?e:t,r)},exit(r){Nt(nn()?e:t,r)}}}var Ut=r("../../browser-shims/compiler/index.js"),$t=r("../../browser-shims/compiler/index.js");function Ot(e){const t=[],r=[];let n=e[0];for(let s=1;s<e.length;s++){let i=e[s];if("object"==typeof i){if(!$t.types.isStringLiteral(i)){if($t.types.isTemplateLiteral(i)){let t=s+1;const r=i.expressions.length;Rt(e,t,i.quasis.length+r);for(let n=0;n<r;n++)e[t++]=i.quasis[n].value.raw,e[t++]=i.expressions[n];e[t]=i.quasis[r].value.raw;continue}r.push(i),t.push(n),n="";continue}i=i.value}n+=i}return r.length?(t.push(n),$t.types.templateLiteral(t.map((e=>$t.types.templateElement({raw:e}))),r)):n?$t.types.stringLiteral(n):void 0}function _t(e,t){e[e.length-1]+=t}function Rt(e,t,r){for(let n=e.length-1;n>=t;n--)e[n+r]=e[n]}var Ft=r("../../browser-shims/compiler/index.js"),[zt]=re("walks",(()=>[""])),[Wt]=re("walkComment",(()=>[])),[Vt]=re("steps",(()=>[])),qt={32:"get",36:"inside",37:"replace",38:"endChild",47:"beginChild",67:"next",97:"over",107:"out",117:"multiplier",91:"nextEnd",106:"overEnd",116:"outEnd",126:"multiplierEnd"};function Jt(e){Vt(fe(e)).push(0)}function Zt(e){Vt(fe(e)).push(1)}function Gt(e){Vt(fe(e)).push(0,1)}function Xt(e,t){if(nn())return;const r=fe(e),n=Vt(r),s=zt(r),i=Wt(r);let o="";if(n.length){const e=[];let t=0;for(const r of n)0===r?(t++,e.push(67)):(t--,t>=0?(e.length=e.lastIndexOf(67),e.push(97)):(e.length=e.lastIndexOf(107)+1,e.push(107),t=0));let r=e[0],s=0;for(const t of e)t!==r?(i.push(`${qt[r]}(${s})`),o+=Kt(r,s),r=t,s=1):s++;i.push(`${qt[r]}(${s})`),o+=Kt(r,s),n.length=0}void 0!==t&&(32!==t&&er(e)`<!>`,i.push(`${qt[t]}`),o+=String.fromCharCode(t)),_t(s,o)}function Kt(e,t){switch(e){case 67:return Ht(t,e,20);case 97:case 107:return Ht(t,e,10);default:throw new Error(`Unexpected walk code: ${e}`)}}function Ht(e,t,r){let n="";if(e>=r){const t=Math.floor(e/r);n+=Ht(t,117,10),e-=t*r}return n+=String.fromCharCode(t+e),n}function Qt(e){const t=1===e.content?.startType?String.fromCharCode(68):"",r=1===e.content?.endType?String.fromCharCode(68):"",n=Ot([t,...zt(e),r])||Ft.types.stringLiteral("");return""!==n.value&&(n.leadingComments=[{type:"CommentBlock",value:" "+Wt(e).join(", ")+" "}]),n}var[Yt]=re("writes",(()=>[""]));function er(e){const t=fe(e);return(e,...r)=>{const n=r.length,s=Yt(t);_t(s,e[0]);for(let t=0;t<n;t++)s.push(r[t],e[t+1])}}function tr(e){const t=Yt(fe(e)),r=Ot(t);if(t.length=0,t[0]="",r)return Ut.types.expressionStatement(St("write",r))}function rr(e){const t=tr(e);t&&e.insertBefore(t)[0].skip()}function nr(e){const t=e.isProgram()?e:e.get("body"),r=tr(t);r&&t.pushContainer("body",r)[0].skip()}function sr(e){const t=1===e.content?.startType?"<!>":"",r=1===e.content?.endType?"<!>":"",n=Yt(e);return{setup:qr(e),walks:Qt(e),writes:Ot([t,...n,r])||Ut.types.stringLiteral("")}}function ir(e,t){const r=fe(e);if(0!==t.type)throw e.buildCodeFrameError("Tried to mark a node that was not determined to need a mark during analyze.");nn()&&er(e)`${St("markResumeNode",me(r),Ge(t))}`}var[or,ar]=re("returnId"),lr=new WeakSet,cr={analyze(e){if((0,Tt.assertNoArgs)(e),(0,Tt.assertNoVar)(e),(0,Tt.assertNoParams)(e),j(e),(0,Tt.assertAllowedAttributes)(e,["value","valueChange"]),lr.has(e.hub))throw e.get("name").buildCodeFrameError("The `return` tag can only be used once per template.");if(lr.add(e.hub),!Mt(e.node).value)throw e.get("name").buildCodeFrameError("The `return` tag requires a value.")},translate:Dt({html:{exit(e){const t=fe(e),r=Mt(e.node);if(rr(e),r.valueChange&&wr(t).set(It.types.stringLiteral("@"),r.valueChange),r.value){const n=e.hub.file.path.scope.generateUidIdentifier("return");ar(t,n),e.replaceWith(It.types.variableDeclaration("const",[It.types.variableDeclarator(n,r.value)]))[0].skip()}}},dom:{exit(e){const t=fe(e),r=Mt(e.node);r.value&&jr(t,r.value.extra?.referencedBindings,{identifier:kt("tagVarSignal"),hasDownstreamIntersections:()=>!0},r.value),r.valueChange&&jr(t,r.valueChange.extra?.referencedBindings,{identifier:kt("setTagVarChange"),hasDownstreamIntersections:()=>!1},r.valueChange),e.remove()}}}),autocomplete:[{displayText:"return=<value>",description:"Provides a value for use in a parent template.",snippet:"return=${1:value}",descriptionMoreURL:"https://markojs.com/docs/core-tags/#return"}]},pr=r("../../browser-shims/compiler/index.js");function dr(e,t){const r=e.depth,n=pr.types.objectPattern([]);let s;return G(t,(t=>{if(t.name.includes("#"))return;const i=Ge(t),o=pr.types.identifier(t.name),a=i.value===o.name;let l=n;if(t.section!==e){s||(s=[n]);const e=r-t.section.depth;let i=s.length,o=s[i-1];for(;i<=e;i++){const e=pr.types.objectPattern([]);o.properties.push(pr.types.objectProperty(pr.types.identifier("_"),e)),s.push(e),o=e}l=s[e]}l.properties.push(pr.types.objectProperty(a?o:i,o,!1,a))})),n}function ur(e,t){let r=Kr??pr.types.identifier("undefined");const n=e.depth-t.depth;for(let e=0;e<n;e++)r=pr.types.memberExpression(r,pr.types.identifier("_"));if(n<0)throw new Error("Unable to find scope for reference.");return r}function fr(e,t){return pr.types.memberExpression(ur(e,t.section),Ge(t),!0)}var[mr]=re("signals",(()=>new Map)),[hr,gr]=re("queue");function yr(e,t){gr(ue(e.get("body")),t)}var[br,xr]=re("forceResumeScope");function vr(e){xr(e,!0)}var[wr]=re("serializedScopeProperties",(()=>new Map)),kr=()=>Ct.types.stringLiteral("SIGNAL NOT INITIALIZED");function Sr(e,t,r=function(e){let t;if(e)if(Array.isArray(e)){t="expr";for(const r of e)t+=`_${r.name}`}else t=e.name;else t="setup";return t}(t)){const n=mr(e);let s=n.get(t);if(!s){const i=t?!Array.isArray(t)&&t.section===e&&t.export:!e.parent&&Xr.node.extra.domExports?.setup;if(n.set(t,s={identifier:i?Ct.types.identifier(i):Xr.scope.generateUidIdentifier(r+e.name.replace("_","$")),referencedBindings:t,section:e,values:[],intersection:void 0,render:[],effect:[],effectInlineReferences:void 0,subscribers:[],closures:new Map,hasDownstreamIntersections:()=>{let r=!(!s.intersection&&!s.closures.size);if(!r)for(const e of s.values)if(e.signal.hasDownstreamIntersections()){r=!0;break}if(!r&&!Array.isArray(t)&&t){for(const n of t.aliases)if(Sr(e,n).hasDownstreamIntersections()){r=!0;break}if(!r)for(const[,n]of t.propertyAliases)if(Sr(e,n).hasDownstreamIntersections()){r=!0;break}}return s.hasDownstreamIntersections=()=>r,r},build:kr,export:!!i}),nn())return s;t?Array.isArray(t)?(Tr(t,s),s.build=()=>St("intersection",Ct.types.numericLiteral(t.length),Ar(s,[Kr],t),Cr(s))):t.section!==e&&(Sr(t.section,t).closures.set(e,s),s.build=()=>{const r=hr(e),n=ur(e,t.section),i=n.object===Kr;return St((s.isDynamicClosure=!(i&&r))?"dynamicClosure":"closure",Ge(t),Ar(s,[Kr,Ct.types.identifier(t.name)]),i?null:Ct.types.arrowFunctionExpression([Kr],n),Cr(s))}):s.build=()=>Ar(s,[Kr])}return s}function Er(e,t="value"){const r=Ge(e),n=Sr(e.section,e);n.build=()=>{const s=Ar(n,[Kr,Ct.types.identifier(e.name)]),i=Cr(n),o=!e.upstreamAlias&&(3===e.type||2===e.type);return(!e.upstreamAlias||e.property)&&(e.downstreamExpressions.size||s.body.body.length>0)||i||o||i?St(t,r,s,i):s},n.valueAccessor=r;for(const t of e.aliases)Er(t);for(const t of e.propertyAliases.values())Er(t);return n}function Ar(e,t,r){const n=e.section,s=e.referencedBindings;if(s&&!Array.isArray(s)&&s.section===n){const[r,n]=t;for(const t of s.aliases){const s=Sr(t.section,t);e.render.push(Ct.types.expressionStatement(Ct.types.callExpression(s.identifier,[r,n,...s.extraArgs||[]])))}for(const[t,i]of s.propertyAliases){const s=Sr(i.section,i);e.render.push(Ct.types.expressionStatement(Ct.types.callExpression(s.identifier,[r,Jr(n,t),...s.extraArgs||[]])))}}for(const t of e.values)e.render.push(Ct.types.expressionStatement(Ct.types.callExpression(t.signal.identifier,[t.scope,t.value,...t.signal.extraArgs||[]])));return r&&e.render.unshift(Ct.types.variableDeclaration("const",[Ct.types.variableDeclarator(dr(n,r),Kr)])),Ct.types.arrowFunctionExpression(t,Ct.types.blockStatement(e.render))}function Cr(e){const t=e.section;let r=e.intersection;const n=e.referencedBindings;if(n&&!Array.isArray(n)&&n.section===e.section){for(const e of n.aliases){const t=Sr(e.section,e);t.hasDownstreamIntersections()&&(r=Z(r,Ct.types.identifier(t.identifier.name)))}for(const[,e]of n.propertyAliases){const t=Sr(e.section,e);t.hasDownstreamIntersections()&&(r=Z(r,Ct.types.identifier(t.identifier.name)))}}for(const t of e.values)t.signal.hasDownstreamIntersections()&&(r=Z(r,t.intersectionExpression??(Ct.types.isMemberExpression(t.signal.identifier)?t.signal.identifier:Ct.types.identifier(t.signal.identifier.name))));const s=Array.from(e.closures.entries()).sort((([e],[t])=>e.id-t.id));for(const[n,i]of s){const s=hr(n),o=n.parent===t;s&&o?r=Z(r,s(i.identifier)):e.hasDynamicSubscribers||(e.hasDynamicSubscribers=!0)}return e.hasDynamicSubscribers&&(e.hasDynamicSubscribers=!0,r=Z(r,St("dynamicSubscribers",e.valueAccessor))),r&&Ct.types.arrowFunctionExpression([],Array.isArray(r)?St("intersections",Ct.types.arrayExpression(r)):r)}function Tr(e,t){if(Array.isArray(e))return void e.forEach((e=>Tr(e,t)));const r=Sr(t.section,e);r.intersection=Z(r.intersection,t.identifier)}function Ir(e){for(let t=e.length-1;t>=0;t--){const r=e[t];if(Ct.types.isArrowFunctionExpression(r)){const n=r.body.body;n&&(0===n.length?e[t]=Ct.types.numericLiteral(0):1===n.length&&Ct.types.isExpressionStatement(n[0])&&(r.body=n[0].expression))}}for(let t=e.length-1;Ct.types.isNullLiteral(e[t]);)e.length=t--}function Mr(e,t,r,n,s,i){const o=Sr(t,r),a=o[e]??=[];if(Array.isArray(n)?a.push(...n):a.push(n),"effect"===e)if(Array.isArray(s))for(const e of s)!i&&Ct.types.isFunction(e)||Pr(o,e);else!s||!i&&Ct.types.isFunction(s)||Pr(o,s)}function jr(e,t,r,n,s=Kr,i){Sr(e,t).values.push({signal:r,value:n,scope:s,intersectionExpression:i})}function Pr(e,t){e.effectInlineReferences=Oe.union(e.effectInlineReferences,t.extra?.referencedBindings)}function Nr(e,t,r){const{markoOpts:n,opts:{filename:s}}=Xr.hub.file;let i="";if(t)if("string"==typeof t)i+=`_${t}`;else if(Array.isArray(t))for(const e of t)i+=`_${e.name}`;else i+=`_${t.name}`;return(0,At.getTemplateId)(n,s,`${e.id}${i}${r?"/"+r:""}`)}var Br=new WeakMap;function Lr(e,t){const{markoOpts:r,opts:{filename:n}}=Xr.hub.file;let s=Br.get(e);s||Br.set(e,s=new Set);const i=(0,At.getTemplateId)(r,n,`${e.id}/${t}`);let o=0,a=i;for(;s.has(a);)a=i+"_"+ ++o;return s.add(a),a}function Dr(){Ct.types.traverseFast(Xr.node,(e=>{if(Ct.types.isIdentifier(e)){const t=e.extra&&(e.extra.source||e.extra.binding);t&&t.name!==e.name&&(e.name=t.name)}}))}function Ur(e){const t=[...mr(e).values()].sort($r);for(const r of t){let t;if(r.effect.length){const n=Ct.types.identifier(`${r.identifier.name}_effect`);r.effectInlineReferences&&r.effect.unshift(Ct.types.variableDeclaration("const",[Ct.types.variableDeclarator(dr(e,r.effectInlineReferences),Kr)])),t=Ct.types.variableDeclarator(n,St("effect",Ct.types.stringLiteral(Nr(e,r.referencedBindings)),Ct.types.arrowFunctionExpression([Kr],1===r.effect.length&&Ct.types.isExpressionStatement(r.effect[0])?r.effect[0].expression:Ct.types.blockStatement(r.effect)))),r.render.push(Ct.types.expressionStatement(Ct.types.callExpression(n,[Kr])))}let n=r.build();Ct.types.isCallExpression(n)&&Ir(n.arguments),r.register&&(n=St("registerBoundSignal",Ct.types.stringLiteral(Nr(e,r.referencedBindings)),n)),r.isDynamicClosure&&q(r.referencedBindings)&&(n=St("registerSubscriber",Ct.types.stringLiteral(Nr(e,r.referencedBindings,"subscriber")),n));const s=Ct.types.variableDeclarator(r.identifier,n);let i=e.parent||r.referencedBindings||!Ct.types.isFunctionExpression(n)&&!Ct.types.isArrowFunctionExpression(n)?Ct.types.variableDeclaration("const",[s]):Ct.types.functionDeclaration(r.identifier,n.params,Ct.types.isExpression(n.body)?Ct.types.blockStatement([Ct.types.expressionStatement(n.body)]):n.body);r.export&&(i=Ct.types.exportNamedDeclaration(i));const o=Xr.pushContainer("body",t?[Ct.types.variableDeclaration("const",[t]),i]:i);for(const t of o)t.traverse(zr,{root:t,section:e})}}function $r(e,t){const r=Or(e),n=Or(t);for(let e=Math.max(r.length,n.length)-1;e>=0;e--){const t=(n[e]??-1)-(r[e]??-1);if(0!==t)return t}return 0}function Or({referencedBindings:e}){return e?Array.isArray(e)?e.map(_r).sort():[_r(e)]:[]}function _r(e){return 1e4*(0===e.type?1:0)+e.id}function Rr(e,t){Mr("effect",e,t,void 0,[])}function Fr(e,t){const r=ue(e);if(!r)return;const n=Array.from(mr(r).values()),s=me(r);G(r.closures,(t=>{if(q(t)){let n=r;for(;n!==t.section;)wr(n).set(Ct.types.stringLiteral("_"),St("ensureScopeWithId",me(n=n.parent)));vr(t.section);const i=r.parent?.id===t.section.id;(!hr(r)||!i)&&e.pushContainer("body",Ct.types.expressionStatement(St("writeEffect",s,Ct.types.stringLiteral(Nr(r,t,"subscriber")))))}}));for(let t=n.length;t--;)if(n[t].effect.length){const i=n[t].referencedBindings;e.pushContainer("body",Ct.types.expressionStatement(St("writeEffect",s,Ct.types.stringLiteral(Nr(r,i)))))}const i=new Set,o=wr(r),a=[];G(r.bindings,(e=>{if(e.serialize&&0!==e.type){const t=Ge(e);a.push(Ct.types.objectProperty(t,Ct.types.identifier(e.name))),i.add(t.value)}})),t&&void 0!==or(r)&&a.push(Ct.types.objectProperty(Ct.types.stringLiteral("/"),t));for(const[e,t]of o)i.has(e.value)||(a.push(Ct.types.objectProperty(e,t,!Ct.types.isLiteral(e))),i.add(e.value));(a.length||br(r))&&e.pushContainer("body",Ct.types.expressionStatement(St("writeScope",s,Ct.types.objectExpression(a)))),e.get("body").length&&e.unshiftContainer("body",Ct.types.variableDeclaration("const",[Ct.types.variableDeclarator(s,St("nextScopeId"))]))}var zr={FunctionExpression:{exit:Vr},ArrowFunctionExpression:{exit:Vr}};function Wr(e,t,r,n,s){switch(n||(n={statement:e.getStatementParent(),end:e.getStatementParent()}),t.type){case"ObjectPattern":for(const s of t.properties)Wr(e,s,r,n);break;case"ArrayPattern":for(const s in t.elements)null!==t.elements[s]&&Wr(e,t.elements[s],r,n,(e=>t.elements[s]=e));break;case"RestElement":Wr(e,t.argument,r,n,(e=>t.argument=e));break;case"ObjectProperty":Wr(e,t.value,r,n,(e=>t.value=e));break;case"Identifier":{const e=t.extra?.source;if(e){const{buildAssignment:i}=Sr(e.section,e);if(i){const e=n.statement.scope.generateUidIdentifier(t.name);n.statement.insertBefore(Ct.types.variableDeclaration("let",[Ct.types.variableDeclarator(e)])),s?.(e),[n.end]=n.end.insertAfter(Ct.types.expressionStatement(i(r,e)))}}}}}function Vr(e,{root:t,section:r}){const{node:n}=e,{extra:s}=n;if(!s?.referencedBindings)return;const{name:i,referencedBindings:o}=s,a=e.hub.file.path.scope.generateUidIdentifier(i);t.insertBefore(Ct.types.variableDeclaration("const",[Ct.types.variableDeclarator(a,Ct.types.arrowFunctionExpression([Kr],o?Ct.types.blockStatement([Ct.types.variableDeclaration("const",[Ct.types.variableDeclarator(dr(r,o),Kr)]),Ct.types.returnStatement(n)]):n))]))[0].skip(),e.replaceWith(Ct.types.callExpression(a,[Kr]))[0].skip()}function qr(e){return mr(e).get(void 0)?.identifier}function Jr(e,t){const r=function(e){return/^[a-z_$][a-z0-9_$]*$/i.test(e)?Ct.types.identifier(e):/^(?:0|[1-9][0-9]*)$/.test(e)?Ct.types.numericLiteral(parseInt(e,10)):Ct.types.stringLiteral(e)}(t);return Ct.types.memberExpression(e,r,"Identifier"!==r.type)}var Zr={translate:{exit(e){Xt(e);const t=ue(e),{walks:r,writes:n,setup:s}=sr(t),i=e.node.extra.domExports,o=Ke.types.identifier(i.template),a=Ke.types.identifier(i.walks),l=Ke.types.identifier(i.setup),c=Ke.types.identifier(i.closures),p=e.node.extra.binding,d=p&&L(p)?Er(p):void 0;!function(){if(Xr.node.extra.assignments)for(const[e,t]of Xr.node.extra.assignments){const{node:r}=t;if("UpdateExpression"===r.type){const n=r.argument.extra?.source;if(n){const{buildAssignment:s}=Sr(n.section,n);if(s){const n=s(e,Ct.types.binaryExpression("++"===r.operator?"+":"-",r.argument,Ct.types.numericLiteral(1)));t.replaceWith(r.prefix||t.parentPath.isExpressionStatement()?n:Ct.types.sequenceExpression([n,r.argument]))}}}else if("ObjectPattern"===r.left.type||"ArrayPattern"===r.left.type)Wr(t,r.left,e);else if("Identifier"===r.left.type){const n=r.left.extra?.source;if(n){const{buildAssignment:s}=Sr(n.section,n);if(s){const n=s(e,"="===r.operator?r.right:Ct.types.binaryExpression(r.operator.slice(0,-1),r.left,r.right));t.replaceWith(n)}}}}}(),function(e){const{sections:t}=Xr.node.extra;for(let r=t.length;r--;)e(t[r])}((r=>{if(r!==t){const t=r.params&&Er(r.params),{walks:n,writes:s,setup:i}=sr(r),o=Gr(r),a=Ke.types.identifier(r.name),l=St(he(r)?"createRenderer":"createRendererWithOwner",s,n,i,o&&Ke.types.arrowFunctionExpression([],o),t?.identifier&&Ke.types.arrowFunctionExpression([],t.identifier));Ur(r),e.node.body.push(Ke.types.variableDeclaration("const",[Ke.types.variableDeclarator(a,ke(r)?St("register",Ke.types.stringLiteral(Nr(r,"renderer")),l):l)]))}}));const u=Gr(t);Ur(t),Dr(),s||e.node.body.unshift(Ke.types.exportNamedDeclaration(Ke.types.variableDeclaration("const",[Ke.types.variableDeclarator(l,Ke.types.arrowFunctionExpression([],Ke.types.blockStatement([])))]))),e.node.body.unshift(Ke.types.exportNamedDeclaration(Ke.types.variableDeclaration("const",[Ke.types.variableDeclarator(o,n||Ke.types.stringLiteral(""))])),Ke.types.exportNamedDeclaration(Ke.types.variableDeclaration("const",[Ke.types.variableDeclarator(a,r||Ke.types.stringLiteral(""))]))),u&&e.node.body.push(Ke.types.exportNamedDeclaration(Ke.types.variableDeclaration("const",[Ke.types.variableDeclarator(c,u)]))),e.node.body.push(Ke.types.exportDefaultDeclaration(St("createTemplate",Ke.types.stringLiteral(e.hub.file.metadata.marko.id),o,a,l,u&&Ke.types.arrowFunctionExpression([],c),d?.identifier&&Ke.types.arrowFunctionExpression([],d.identifier))))}}};function Gr(e){if(e.closures)return Ke.types.arrayExpression((t=e.closures,r=t=>Sr(e,t).identifier,t?Array.isArray(t)?t.map(r):[r(t)]:[]).reverse());var t,r}var Xr,Kr,Hr,Qr=r("../../browser-shims/compiler/index.js"),Yr={translate:{exit(e){const t=ue(e),r=e.scope.generateUidIdentifier("tagVar");nr(e),Fr(e,r),Dr();const n=or(t);void 0!==n&&e.pushContainer("body",Qr.types.returnStatement(n));const s=[];for(const t of e.get("body"))(i=t).isImportDeclaration()||i.isExportDeclaration()||i.isMarkoScriptlet({static:!0})?t.isMarkoScriptlet()&&(t.node.target&&"server"!==t.node.target?t.remove():t.replaceWithMultiple(t.node.body)):(s.push(t.node),t.remove());var i;e.pushContainer("body",[Qr.types.variableDeclaration("const",[Qr.types.variableDeclarator(Hr,St("createRenderer",Qr.types.arrowFunctionExpression([Qr.types.identifier("input"),r],Qr.types.blockStatement(s))))]),Qr.types.exportDefaultDeclaration(St("createTemplate",Qr.types.stringLiteral(e.hub.file.metadata.marko.id),Hr))])}}},en=new WeakMap,tn={migrate:{enter(e){en.set(e,Xr),e.node.params=[N.types.identifier("input")],Xr=e},exit(){Xr.scope.crawl(),Xr=en.get(Xr)}},analyze:{enter(e){en.set(e,Xr),Xr=e,pe(e),Me(e,2);const{scope:t}=e;(e.node.extra??={}).domExports={template:t.generateUid("template_"),walks:t.generateUid("walks_"),setup:t.generateUid("setup_"),params:void 0,closures:t.generateUid("closures_")}},exit(e){!function(){const e=ze();if(e.size){for(const t of e){const{extra:e}=t;e&&e.referencedBindings&&(G(e.referencedBindings,(({downstreamExpressions:t})=>{t.delete(e)})),e.referencedBindings=void 0)}e.clear()}const t=Be();if(t.size){for(const[e,{section:r,nodes:n}]of t){const t=e.extra??={};let{referencedBindings:s,isEffect:i}=t;for(const e of n){const r=e?.extra;if(r){const e=r.referencedBindings;i||=r.isEffect,e&&(s=Oe.union(s,e),G(e,(({downstreamExpressions:e})=>{e.delete(r),e.add(t)})))}}s=Ze(r,s),t.referencedBindings=s,t.isEffect=i}t.clear()}const r=Ee();for(const e of r)if(0!==e.type&&!e.upstreamAlias&&Xe(r,e)){const{upstreamExpression:t}=e;t&&G(t.referencedBindings,(e=>{e.downstreamExpressions.delete(t),Xe(r,e)}))}const n=new Set;for(const e of r){const{name:t,section:r}=e;0!==e.type&&X(r.bindings,(({name:t})=>t===e.name))&&(e.name=Xr.scope.generateUid(t)),r.bindings=Oe.add(r.bindings,e);for(const{referencedBindings:t,isEffect:r}of e.downstreamExpressions)Array.isArray(t)&&n.add(t),G(t,(e=>{r&&(e.serialize=!0)}))}for(const e of n){const t=e.length;for(let r=0;r<t-1;r++)for(let n=r+1;n<t;n++){const t=e[r],s=e[n],i=$e(t),o=$e(s);t.serialize||Ue(i,o)||(t.serialize=!0),s.serialize||Ue(o,i)||(s.serialize=!0)}}xe((e=>{G(e.closures,(t=>{if(!t.serialize){let r=!1;const n=t.section;let s=e;for(;s!==n&&!(r=!s.upstreamExpression||q(s.upstreamExpression.referencedBindings));)s=s.parent;t.serialize=r}}))})),xe((({id:e,bindings:t})=>{G(function(e,t){if(e){if(Array.isArray(e)){const r=e.length;let n,s=0;for(;s<r;){let i=e[s++];if(t(i)){for(n=i;s<r;)if(i=e[s++],t(i)){for(n=[n,i];s<r;)i=e[s++],t(i)&&n.push(i);return n}return n}}return n}if(t(e))return e}}(t,(({section:t})=>t.id===e)),((e,t)=>{e.id=t}))}))}();const{scope:t,node:{extra:r}}=e;r.binding&&L(r.binding)&&(r.domExports.params=rn(r.binding,t)),Xr=en.get(Xr)}},translate:{enter(e){if(en.set(e,Xr),Xr=e,Kr=sn()?e.scope.generateUidIdentifier("scope"):null,sn()&&e.scope.generateUidIdentifier("clean"),Hr=nn()?e.scope.generateUidIdentifier("renderer"):null,"hydrate"===on().output){const t=e.hub.file,r=new Set([(0,P.resolveRelativePath)(t,t.opts.filename)]);return O.visit(t,t,(function e(n){if(!r.has(n)){r.add(n);const s=(0,P.loadFileForImport)(t,n);s&&O.visit(s,t,(r=>e(function(e,t,r){return t===e?(0,P.resolveRelativePath)(t,r):(0,P.resolveRelativePath)(e,"."===r[0]?B.default.join(t.opts.filename,"..",r):r)}(t,s,r))))}})),e.node.body=O.build(t),void e.skip()}},exit(e){nn()?Yr.translate.exit(e):Zr.translate.exit(e),Xr=en.get(Xr)}}};function rn(e,t){const r={id:e.export??=t.generateUid(e.name+"_"),props:void 0},{aliases:n,propertyAliases:s,downstreamExpressions:i}=e;if(!i.size){r.props={};for(const[e,n]of s)r.props[e]=rn(n,t);for(const e of n){const n=rn(e,t);if(!n.props)return r.props=void 0,r;r.props={...r.props,...n.props}}}return r}function nn(){return"html"===on().output}function sn(){return!nn()}function on(){return Xr.hub.file.markoOpts}var an=r("../../browser-shims/compiler/index.js");function ln(e,t,r="const"){const{node:{var:n}}=e;n&&e.insertBefore(an.types.variableDeclaration(r,[an.types.variableDeclarator(n,t)]))}var cn={analyze(e){(0,T.assertNoArgs)(e),(0,T.assertNoParams)(e),j(e);const{node:t}=e,[r]=t.attributes;if(!t.var)throw e.get("name").buildCodeFrameError("The `const` tag requires a tag variable.");if(!r)throw e.get("name").buildCodeFrameError("The `const` tag requires a value.");if(t.attributes.length>1||!I.types.isMarkoAttribute(r)||!r.default&&"value"!==r.name)throw e.get("name").buildCodeFrameError("The `const` tag only supports the `value` attribute.");const n=I.types.isIdentifier(r.value)?e.scope.getBinding(r.value.name)?.identifier.extra?.binding:void 0;Ie(e,4,n,r.value.extra??={})},translate:{exit(e){const{node:t}=e,[r]=t.attributes,{value:n}=r;if(sn()){const r=fe(e),s=t.var.extra?.binding;if(s&&!s.upstreamAlias){const e=Er(s);jr(r,n.extra?.referencedBindings,e,n)}}else ln(e,n);e.remove()}},attributes:{},autocomplete:[{description:"Use to create an constant binding.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#const"}],types:"@marko/translator-tags/tag-types/const.d.marko"},pn=r("../../node_modules/@marko/babel-utils/dist/index.js"),dn=r("../../browser-shims/compiler/index.js"),un={analyze(e){const[t]=e.node.attributes;if((0,pn.assertNoVar)(e),(0,pn.assertNoArgs)(e),(0,pn.assertNoParams)(e),j(e),e.node.attributes.length>1||1===e.node.attributes.length&&(!dn.types.isMarkoAttribute(t)||!t.default&&"value"!==t.name))throw e.get("name").buildCodeFrameError("The `debug` tag only supports the `value` attribute.")},translate:{exit(e){const t=fe(e),[r]=e.node.attributes,n=r?.value.extra?.referencedBindings,s=ie(dn.types.debuggerStatement(),e.node);nn()?e.insertBefore(s):Mr("render",t,n,s),e.remove()}},attributes:{},autocomplete:[{description:"Debug on value change.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#debug"}],types:"@marko/translator-tags/tag-types/debug.d.marko"},fn=r("../../node_modules/@marko/babel-utils/dist/index.js"),mn=(r("../../browser-shims/compiler/index.js"),r("../../node_modules/@marko/babel-utils/dist/index.js")),hn=r("../../browser-shims/compiler/index.js"),gn=r("../../node_modules/@marko/babel-utils/dist/index.js"),yn=r("../../browser-shims/compiler/index.js");function bn(e){const t="MarkoTagBody"===e.parent.type?e.parentPath.parentPath:e.parentPath;if("MarkoTag"===t.type)return t}var xn=r("../../node_modules/@marko/babel-utils/dist/index.js"),vn=r("../../browser-shims/compiler/index.js"),wn=r("../../node_modules/@marko/babel-utils/dist/index.js");function kn(e){let{extra:t}=e.node;if(t||(t=e.node.extra={}),void 0===t.confident){const r=(0,wn.computeNode)(e.node.value);r?(t.computed=r.value,t.confident=!0):(t.computed=void 0,t.confident=!1)}return t}var Sn=r("../../browser-shims/compiler/index.js"),En=/^[0-9A-Z_$]+$/i;function An(e){return En.test(e)?Sn.types.identifier(e):Sn.types.stringLiteral(e)}r("../../browser-shims/compiler/index.js");var Cn={translate:{exit(e){sn()&&Tn(e,e.node.left)}}};function Tn(e,t){switch(t.type){case"ObjectPattern":for(const r of t.properties)Tn(e,r);break;case"ArrayPattern":for(const r in t.elements)null!==t.elements[r]&&Tn(e,t.elements[r]);break;case"RestElement":Tn(e,t.argument);break;case"ObjectProperty":Tn(e,t.value);break;case"Identifier":{const r=t.extra?.source;if(r){const t=fe(e);(Xr.node.extra.assignments??=[]).push([t,e])}break}}}var In=r("../../node_modules/@marko/babel-utils/dist/index.js"),Mn=r("../../browser-shims/compiler/index.js"),jn=new WeakMap,Pn=new WeakSet,Nn={analyze(e){const t=R(e);if(!Bn(e,!t||t.isMarkoScriptlet({static:!0})))return;if(t&&(t.isMarkoPlaceholder()||t.isMarkoScriptlet({target:"server"})))return;const{node:r}=e,n=r.extra??={},s=n.name=e.node.id?.name||(Ln(t)?t.node.default?Mn.types.toIdentifier(t.parentPath.has("var")?t.parentPath.get("var"):t.parentPath.get("name")):t.node.name:"anonymous");if(Ln(t)&&((0,In.isNativeTag)(t.parentPath)&&/^on[A-Z-]/.test(t.node.name)||b(t.parentPath,"effect")||b(t.parentPath,"lifecycle")||b(t.parentPath,"for")||b(t.parentPath,"do")))return;const{markoOpts:i,opts:{filename:o}}=Xr.hub.file,a=fe(e);let l=jn.get(a);l||(l=new Map,jn.set(a,l));const c=l.get(s);let p="";void 0===c?l.set(s,0):p=`_${c}`,n.registerId=(0,In.getTemplateId)(i,o,`${a.id}/${s+p}`)},translate:{exit(e){const t=R(e),r=!t||t.isMarkoScriptlet({static:!0});if(!Bn(e,r))return;const{node:n}=e,{extra:s}=n;if(!s?.registerId)return;if(Pn.has(n))return;const i=fe(e);if(i)if(Pn.add(n),nn()){const t=wr(i);if(G(s.referencedBindings,(e=>{t.set(Ge(e),Mn.types.identifier(e.name))})),Mn.types.isFunctionDeclaration(n))Xr.unshiftContainer("body",Mn.types.expressionStatement(St("register",n.id,Mn.types.stringLiteral(s.registerId),r?void 0:me(i))))[0].skip();else{const t=St("register",n,Mn.types.stringLiteral(s.registerId),r?void 0:me(i));z(e.parentPath)&&(t.extra=n.extra),e.replaceWith(t)[0].skip()}}else{const{referencedBindings:t}=s,o=Xr.scope.generateUidIdentifier(s.name);if(Mn.types.isFunctionDeclaration(n))Xr.unshiftContainer("body",Mn.types.expressionStatement(St("register",Mn.types.stringLiteral(s.registerId),n.id)))[0].skip();else if(r){const t=St("register",Mn.types.stringLiteral(s.registerId),n);z(e.parentPath)&&(t.extra=n.extra),e.replaceWith(t)[0].skip()}else{const r=Mn.types.callExpression(o,[Kr]);z(e.parentPath)&&(r.extra=n.extra),Xr.pushContainer("body",Mn.types.variableDeclaration("const",[Mn.types.variableDeclarator(o,St("register",Mn.types.stringLiteral(s.registerId),Mn.types.arrowFunctionExpression([Kr],t?Mn.types.blockStatement([Mn.types.variableDeclaration("const",[Mn.types.variableDeclarator(dr(i,t),Kr)]),Mn.types.returnStatement(n)]):n)))]))[0].skip(),e.replaceWith(r)[0].skip()}}}}};function Bn(e,t){switch(e.node.type){case"FunctionDeclaration":return t;case"FunctionExpression":case"ArrowFunctionExpression":return!0;default:return!1}}function Ln(e){return!!e&&e.isMarkoAttribute()}r("../../browser-shims/compiler/index.js");var Dn={translate:{exit(e){if(sn()){const t=e.node.argument.extra?.source;if(t){const t=fe(e);(Xr.node.extra.assignments??=[]).push([t,e])}}}}},Un=Symbol("native tag binding"),$n=Symbol("serialize marker"),On=Symbol("node getter id"),_n=new WeakMap;function Rn(e,t){switch(e){case"input":if(t.checked||t.checkedChange)return{special:!1,helper:"controllable_input_checked",attrs:[t.checked,t.checkedChange]};if(t.checkedValue||t.checkedValueChange)return{special:!0,helper:"controllable_input_checkedValue",attrs:[t.checkedValue,t.checkedValueChange,t.value]};if(t.value||t.valueChange)return{special:!1,helper:"controllable_input_value",attrs:[t.value,t.valueChange]};break;case"select":if(t.value||t.valueChange)return{special:!0,helper:"controllable_select_value",attrs:[t.value,t.valueChange]};break;case"textarea":if(t.value||t.valueChange)return{special:!0,helper:"controllable_textarea_value",attrs:[t.value,t.valueChange]};break;case"details":case"dialog":if(t.open||t.openChange)return{special:!1,helper:"controllable_detailsOrDialog_open",attrs:[t.open,t.openChange]}}}var Fn={transform:{enter(e){if("textarea"===h(e)&&e.node.body.body.length){const t=[];for(const r of e.node.body.body){if(!("MarkoText"===r.type||"MarkoPlaceholder"===r.type&&r.escape))throw e.hub.file.hub.buildError(r,"Unexpected content in textarea, only text and placeholders are supported.",SyntaxError);t.push(r.value)}e.node.attributes.push(vn.types.markoAttribute("value",Ot(t)||Vn())),e.node.body.body=[]}}},analyze:{enter(e){(0,xn.assertNoArgs)(e),(0,xn.assertNoParams)(e),(0,xn.assertNoAttributeTags)(e);const{node:t}=e;if(t.var&&!vn.types.isIdentifier(t.var))throw e.get("var").buildCodeFrameError("Tag variables on native elements cannot be destructured.");const r=h(e),n=de(e);let s=!1,i=!1;const o={},{attributes:a}=e.node;let l,c;for(let t=a.length;t--;){const n=a[t];if(vn.types.isMarkoAttribute(n)){if(o[n.name]){We(n.value);continue}o[n.name]=n,nt(n.name)||(p=n.name,/^(?:value|checked(?:Values?)?|open)Change/.test(p))?((n.value.extra??={}).isEffect=!0,s=!0):kn(e.get("attributes")[t]).confident||(i=!0)}else vn.types.isMarkoSpreadAttribute(n)&&(s=!0,i=!0,(n.value.extra??={}).isEffect=!0);c?c.push(n.value):vn.types.isMarkoSpreadAttribute(n)&&(c=[n.value],l=Rn(r,o))}var p;if(function(e,t){const r=[t.open||t.openChange,t.checked||t.checkedChange,t.checkedValue||t.checkedValueChange,t.valueChange].filter(Boolean);if(r.length>1)throw e.get("name").buildCodeFrameError(`The attributes ${r.map((e=>`"${e.name}"`)).join(", ")} are mutually exclusive.`)}(e,o),c){if(l&&!l.attrs.every(Boolean)){for(const e of l.attrs)e&&c.push(e.value);l=void 0}Le(n,e.node,c)}else l=Rn(r,o);if(l&&Le(n,l.attrs.find(Boolean),l.attrs.map((e=>e?.value))),t.var||s||i){Xr.node.extra.isInteractive||=s;const r="StringLiteral"===t.name.type?t.name.value:vn.types.toIdentifier(e.get("name")),i=t.extra??={},o="#"+r;if(i[$n]=s||!!t.var,i[Un]=Te(o,0,n),t.var)for(const r of e.scope.getBinding(t.var.name).referencePaths)if(!r.parentPath?.isCallExpression()){i[On]=Lr(n,o);break}}}},translate:{enter(e){const t=h(e),r=e.node.extra,n=r[Un],s=nn(),i=e.get("name"),o=(0,xn.getTagDef)(e),a=er(e),l=fe(e);if(s&&r.tagNameNullable&&rr(e),e.has("var")){const t=r[On];if(s){const r=e.node.var.name,n=e.scope.getBinding(r).referencePaths;for(const e of n){let t=fe(e);for(;t!==l&&t.parent;)wr(t).set(vn.types.stringLiteral("_"),St("ensureScopeWithId",me(t=t.parent)))}ln(e,St("nodeRef",t&&me(l),t&&vn.types.stringLiteral(t)))}else{const r=e.node.var.name,s=e.scope.getBinding(r).referencePaths;let i;t&&(i=Xr.scope.generateUidIdentifier(`get_${r}`),Xr.pushContainer("body",vn.types.variableDeclaration("const",[vn.types.variableDeclarator(i,St("nodeRef",vn.types.stringLiteral(t),Ge(n)))])));for(const t of s){const r=fe(t);t.parentPath?.isCallExpression()?t.parentPath.replaceWith(vn.types.expressionStatement(fr(r,n))):i&&t.replaceWith(vn.types.callExpression(i,[ur(r,fe(e))]))}}}let c;n&&(c=Ge(n),Xt(e,32)),a`<${i.node}`;const p=function(e,t){const r={},{attributes:n}=t,s=new Set;let i,o,a,l,c;for(let t=n.length;t--;){const i=n[t],{value:o}=i;if(vn.types.isMarkoSpreadAttribute(i)){if(!a&&(a=[],c=Rn(e,r),c&&!c.attrs.every(Boolean))){for(const e of c.attrs)e&&(a.push(zn(e)),s.delete(e));c=void 0}a.push(vn.types.spreadElement(o))}else r[i.name]||(r[i.name]=i,a?a.push(zn(i)):s.add(i))}if(a||(c=Rn(e,r),!1!==c?.special||c.attrs[1]||(c=void 0)),c)for(const e of c.attrs)e&&s.delete(e);const p=[...s].reverse();if(a){if(a.reverse(),c)for(const e of c.attrs)e&&(l||=[]).push(vn.types.objectProperty(An(e.name),vn.types.numericLiteral(1)));for(const{name:e}of p)(l||=[]).push(vn.types.objectProperty(An(e),vn.types.numericLiteral(1)));l&&(o=vn.types.objectExpression(l)),i=us(a)}return{staticAttrs:p,staticControllable:c,spreadExpression:i,skipExpression:o}}(t,e.node),{staticAttrs:d,staticControllable:u,skipExpression:f}=p;let m,{spreadExpression:g}=p;if(u){const{helper:r,attrs:n}=u,i=n[1],o=n.find(Boolean),p=o.value.extra?.referencedBindings;i&&e.get("attributes").find((e=>e.node===i)).traverse(Wn);const d=n.map((e=>e?.value));s?("select"!==t&&"textarea"!==t&&a`${St(r,me(l),c,...d)}`,Rr(l,void 0)):(Mr("render",l,p,vn.types.expressionStatement(St(r,Kr,c,...d))),Mr("effect",l,void 0,vn.types.expressionStatement(St(`${r}_effect`,Kr,c))))}if(s)if("select"===t){if(u)_n.set(e.node,{value:u.attrs[0]?.value||Vn(),valueChange:u.attrs[1]?.value||Vn()});else if(g){const t=e.scope.generateUidIdentifier("select_input");e.insertBefore(vn.types.variableDeclaration("const",[vn.types.variableDeclarator(t,g)])),_n.set(e.node,{value:vn.types.memberExpression(t,vn.types.identifier("value")),valueChange:vn.types.memberExpression(t,vn.types.identifier("valueChange"))}),g=t}}else if("textarea"===t){let t,r;if(u)t=u.attrs[0]?.value,r=u.attrs[1]?.value;else if(g){const n=e.scope.generateUidIdentifier("textarea_input");e.insertBefore(vn.types.variableDeclaration("const",[vn.types.variableDeclarator(n,g)])),t=vn.types.memberExpression(n,vn.types.identifier("value")),r=vn.types.memberExpression(n,vn.types.identifier("valueChange")),g=n}(t||r)&&(m=St("controllable_textarea_value",me(fe(e)),Ge(n),t,r))}for(const e of d){const{name:r,value:n}=e,{confident:i,computed:o}=e.extra??{},p=n.extra?.referencedBindings;if(s&&"option"===t&&"value"===r)a`${St("optionValueAttr",n)}`;else switch(r){case"class":case"style":{const e=`${r}Attr`;i?a`${Et()[e](o)}`:s?a`${St(e,n)}`:Mr("render",l,p,vn.types.expressionStatement(St(e,vn.types.memberExpression(Kr,c,!0),n)));break}default:i?a`${Et().attr(r,o)}`:s?nt(r)?Rr(l,p):a`${St("attr",vn.types.stringLiteral(r),n)}`:nt(r)?Mr("effect",l,p,vn.types.expressionStatement(St("on",vn.types.memberExpression(Kr,c,!0),vn.types.stringLiteral(st(r)),n)),n):Mr("render",l,p,vn.types.expressionStatement(St("attr",vn.types.memberExpression(Kr,c,!0),vn.types.stringLiteral(r),n)))}}if(g&&(s?(Rr(l,r.referencedBindings),f?a`${St("partialAttrs",g,f,c,me(l),i.node)}`:a`${St("attrs",g,c,me(l),i.node)}`):(Mr("render",l,r.referencedBindings,f?vn.types.expressionStatement(St("partialAttrs",Kr,c,g,f)):vn.types.expressionStatement(St("attrs",Kr,c,g))),Mr("effect",l,r.referencedBindings,vn.types.expressionStatement(St("attrsEvents",Kr,c)),g))),o&&o.parseOptions?.openTagOnly)switch(o.htmlType){case"svg":case"math":a`/>`;break;default:a`>`}else a`>`;s&&r.tagNameNullable&&e.insertBefore(vn.types.ifStatement(i.node,tr(e)))[0].skip(),m&&a`${m}`,Jt(e)},exit(e){const t=e.node.extra,r=t[Un],n=nn(),s=(0,xn.getTagDef)(e)?.parseOptions?.openTagOnly,i=n&&_n.get(e.node);n&&t.tagNameNullable&&nr(e),i?(er(e)`</${e.node.name}>`,nr(e),e.insertBefore(vn.types.expressionStatement(St("controllable_select_value",me(fe(e)),Ge(r),i.value,i.valueChange,vn.types.arrowFunctionExpression([],vn.types.blockStatement(e.node.body.body)))))):e.insertBefore(e.node.body.body).forEach((e=>e.skip())),s||i||er(e)`</${e.node.name}>`,n&&t.tagNameNullable&&e.insertBefore(vn.types.ifStatement(e.node.name,tr(e)))[0].skip(),r&&(t[$n]||e.node.attributes.some((e=>q(e.value.extra?.referencedBindings))))&&ir(e,r),Zt(e),e.remove()}}};function zn(e){return vn.types.objectProperty(An(e.name),e.value)}var Wn={Function:Nn.translate,UpdateExpression:Dn.translate,AssignmentExpression:Cn.translate};function Vn(){return vn.types.unaryExpression("void",vn.types.numericLiteral(0))}var qn=Symbol("for marker binding"),Jn=Symbol("for scope start index"),Zn=Symbol("only child in parent"),Gn={analyze(e){const t=e.node.extra??={},r=e.node.body.attributeTags;let n;switch((0,gn.assertNoVar)(e),(0,gn.assertNoArgs)(e),M(e),Kn(e.node)){case"of":n=["of"];break;case"in":n=["in"];break;case"to":n=["to","from","step"];break;default:throw e.buildCodeFrameError("Invalid `for` tag, missing an `of=`, `in=`, `to=` attribute.")}if(r||n.push("by"),(0,gn.assertAllowedAttributes)(e,n),r)return;const s=e.get("body"),i=pe(s);if(!i)return void We(qe(e.node));const o=de(e);if(Qn(e)){const t=bn(e).node,r=t.name?.value;(t.extra??={})[Un]??=Te("#"+r,0,o)}else t[qn]=Te("#text",0,o);Me(s,3,void 0,t),Le(o,e.node,qe(e.node)),i.upstreamExpression=t},translate:Dt({html:{enter(e){if(e.node.body.attributeTags)return;const t=e.get("body"),r=ue(t);if(!r)return void e.remove();const n=e.node.extra,s=q(n.referencedBindings);ge(r,!0),Qn(e)||(Xt(e,37),Gt(e)),rr(e),s&&!r.content?.singleChild&&(n[Jn]=e.scope.generateUidIdentifier("k"),er(t)`${St("markResumeScopeStart",me(r),yn.types.updateExpression("++",n[Jn]))}`)},exit(e){if(e.node.body.attributeTags)return;const t=e.get("body"),r=fe(e),n=ue(t),{node:s}=e,i=s.extra,o=q(i.referencedBindings),a=bn(e),l=Qn(e)?a.node.extra[Un]:e.node.extra[qn],c=Mt(s),p=Kn(s),d=s.body.params,u=[],f=s.body.body,m=Se(n,!0);let h;if(o&&Qn(e)&&(a.node.extra[$n]=!0),i[Jn]&&u.push(yn.types.variableDeclaration("let",[yn.types.variableDeclarator(i[Jn],yn.types.numericLiteral(0))])),o||m){const t=null===n.content||n.content.singleChild,s={of:["list","index"],in:["key","value"],to:["value"]}[p],i="of"===p?1:0,a=c.by?s.length-1:i;vr(n);for(let e=0;e<=a;e++){const t=d[e];if(!t||!yn.types.isIdentifier(t)){const r=d[e]=Xr.scope.generateUidIdentifier(s[e]);t&&f.unshift(yn.types.variableDeclaration("let",[yn.types.variableDeclarator(t,r)]))}}if(c.by){const e=Xr.scope.generateUidIdentifier("by");u.push(yn.types.variableDeclaration("const",[yn.types.variableDeclarator(e,c.by)])),h=yn.types.callExpression(e,d)}else h=d[i];const m=er(e),g=e.scope.generateUidIdentifier("forScopeIds"),y=be(n);u.push(yn.types.variableDeclaration("const",[o&&t&&yn.types.variableDeclarator(g,yn.types.arrayExpression([])),yn.types.variableDeclarator(y,yn.types.newExpression(yn.types.identifier("Map"),[]))].filter(Boolean))),o&&(t?(f.push(yn.types.expressionStatement(yn.types.callExpression(yn.types.memberExpression(g,yn.types.identifier("push")),[me(n)]))),m`${St("markResumeControlSingleNodeEnd",me(r),Ge(l),g)}`):m`${St("markResumeControlEnd",me(r),Ge(l))}`),wr(r).set(yn.types.stringLiteral(Ge(l).value+"("),yn.types.conditionalExpression(yn.types.memberExpression(y,yn.types.identifier("size")),y,yn.types.identifier("undefined")))}nr(e),yr(e,(()=>{})),Fr(t),h&&(o||m)&&f.push(yn.types.expressionStatement(yn.types.callExpression(yn.types.memberExpression(be(n),yn.types.identifier("set")),[h,St("getScopeById",me(n))]))),u.push(Xn(p,c,d,f));for(const t of e.replaceWithMultiple(u))t.skip()}},dom:{enter(e){if(e.node.body.attributeTags)return;const t=ue(e.get("body"));t?(ge(t,!0),Qn(e)||(Xt(e,37),Gt(e))):e.remove()},exit(e){if(e.node.body.attributeTags)return;const t=e.get("body"),r=fe(e),n=ue(t),{node:s}=e,i=s.extra,{referencedBindings:o}=i,a=Qn(e)?bn(e).node.extra[Un]:e.node.extra[qn];yr(e,(e=>St("inLoopScope",e,Ge(a))));const l=Kn(s),c=Sr(r,a,"for");c.build=()=>St(function(e){switch(e){case"of":return"loopOf";case"in":return"loopIn";case"to":return"loopTo"}}(l),Ge(a),yn.types.identifier(n.name));const p=s.body.params;c.hasDownstreamIntersections=()=>{if(n.closures)return!0;for(const e of p){const t=e.extra?.binding;if(t)for(const{referencedBindings:e}of t.downstreamExpressions)if(Sr(n,e).hasDownstreamIntersections())return!0}return!1};const d=Mt(s),u=Hn(l,d);d.by&&u.push(d.by),jr(r,o,c,yn.types.arrayExpression(u)),e.remove()}}}),parseOptions:{controlFlow:!0},attributes:{of:{type:"expression",autocomplete:[{description:"Iterates over a list of items."}]},in:{type:"expression",autocomplete:[{description:"Iterates over the keys and values of an object."}]},to:{type:"number",autocomplete:[{description:"Iterates up to the provided number (inclusive)"}]},from:{type:"number",autocomplete:[{description:"Iterates starting from the provided number (inclusive)"}]},step:{type:"number",autocomplete:[{description:"The amount to increment during each interation (with from/to)"}]}},autocomplete:[{snippet:"for|${1:value, index}| of=${3:array}",description:"Use to iterate over lists, object properties, or between ranges.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#iterating-over-a-list"},{snippet:"for|${1:name, value}| in=${3:object}",descriptionMoreURL:"https://markojs.com/docs/core-tags/#iterating-over-an-objects-properties"},{snippet:"for|${1:index}| to=${2:number}",descriptionMoreURL:"https://markojs.com/docs/core-tags/#iterating-between-a-range-of-numbers"}]};function Xn(e,t,r,n){return yn.types.expressionStatement(St(function(e){switch(e){case"of":return"forOf";case"in":return"forIn";case"to":return"forTo"}}(e),...Hn(e,t),yn.types.arrowFunctionExpression(r,yn.types.blockStatement(n))))}function Kn(e){for(const t of e.attributes)if("MarkoAttribute"===t.type)switch(t.name){case"of":case"in":case"to":return t.name}}function Hn(e,t){switch(e){case"in":return[t.in];case"of":return[t.of];case"to":return[t.to,t.from||yn.types.numericLiteral(0),t.step||yn.types.numericLiteral(1)]}}function Qn(e){const t=e.node.extra;if(void 0!==t[Zn])return t[Zn];const r=bn(e);return r&&(0,gn.getTagDef)(r)?.html?t[Zn]=1===e.parent.body.length:t[Zn]=!1}var Yn=r("../../node_modules/@marko/babel-utils/dist/index.js"),es=r("../../browser-shims/compiler/index.js"),ts=new WeakMap;function rs(e){let t=ts.get(e);return t||(t=Xr.scope.generateUid(e.name),ts.set(e,t)),es.types.identifier(t)}function ns(e){if(e.node.extra?.attributeTags)return e.node.extra.attributeTags;const t=e.node.body.attributeTags?e.get("body").get("body"):e.get("attributeTags");if(!t.length)return;const r=(e.node.extra??={}).attributeTags={},n={},s=new Map;for(const e of t)if(e.isMarkoTag())if((0,Yn.isAttributeTag)(e)){const t=h(e);r[t]||=ss(t,[t]),ns(e)}else{const t=(0,Yn.isLoopTag)(e);let i;for(const o of is(e,n)){const n=r[o];if(n)if(i){if(i!==n.group)for(const e of n.group)r[e].group=i,i.push(e)}else i=n.group;let a=r[o];a||(a=r[o]=ss(o,[]),i=a.group,i.push(o)),a.dynamic=!0,t&&(a.repeated=!0),s.set(e,o)}}for(const[e,t]of s)(e.node.extra??={}).attributeTagGroup=r[t].group;for(const e in n){const t=r[e];if(!t.repeated){const r=n[e];r.length>1&&(t.repeated=!t.dynamic||os(r))}}return r}function ss(e,t){return{name:e.slice(1),dynamic:!1,repeated:!1,group:t}}function is(e,t,r=new Set){const n=e.node.body.attributeTags?e.get("body").get("body"):e.get("attributeTags");for(const e of n)if(e.isMarkoTag())if((0,Yn.isAttributeTag)(e)){const n=h(e);r.add(n),(t[n]||=[]).push(e),ns(e)}else is(e,t,r);return r}function os(e){let t;const r=new Set;for(const n of e){const e=bn(n);if(r.has(e)||!x(e))return!0;const s=as(e);if(s&&s!==(t||=s))return!0;r.add(e)}return!1}function as(e){if("if"===h(e))return e;let t=e.getPrevSibling();for(;t.node;){if(t.isMarkoTag()&&"if"===h(t))return t;t=t.getPrevSibling()}}var ls=new WeakSet;function cs(e,t,r=[]){const n=new Set,s=[],i=e.node.extra?.attributeTags;if(i){for(const e in i){const o=i[e];ms(t,o.name)&&(n.add(o.name),o.dynamic&&(r.push(hn.types.variableDeclaration("let",[hn.types.variableDeclarator(rs(o))])),s.push(hn.types.objectProperty(An(o.name),rs(o)))))}const o=e.node.body.attributeTags?e.get("body").get("body"):e.get("attributeTags");for(let e=0;e<o.length;e++){const n=o[e];if(n.isMarkoTag())if((0,mn.isAttributeTag)(n)){const a=i[h(n)];if(a.dynamic)e=ds(o,e,i,r,t);else{const e=cs(n,t?.[a.name]?.props,r);if(a.repeated){const t=hs(a.name,s);t?t.value=St("attrTags",t.value,us(e.properties)):s.push(hn.types.objectProperty(An(a.name),St("attrTag",us(e.properties))))}else s.push(hn.types.objectProperty(An(a.name),St("attrTag",us(e.properties))))}}else e=ds(o,e,i,r,t)}}if(!n.has("renderBody")&&ms(t,"renderBody")){n.add("renderBody");const t=function(e){const t=e.node.extra?.section;if(t)return nn()?St("register",St("createRenderer",hn.types.arrowFunctionExpression(e.node.params,hn.types.blockStatement(e.node.body))),hn.types.stringLiteral(Nr(t,"renderer")),me(fe(function(e){let t=e;for(;(0,mn.isAttributeTag)(t)||(0,mn.isTransparentTag)(t);)t=bn(t);return t}(e.parentPath)))):hn.types.callExpression(hn.types.identifier(t.name),[Kr])}(e.get("body"));if(t){const e=hn.types.objectProperty(hn.types.identifier("renderBody"),t);ls.add(e),s.push(e)}}const{attributes:o}=e.node;for(let e=o.length;e--;){const r=o[e],{value:i}=r;hn.types.isMarkoSpreadAttribute(r)?s.push(hn.types.spreadElement(i)):!n.has(r.name)&&ms(t,r.name)&&(n.add(r.name),s.push(hn.types.objectProperty(An(r.name),i)))}return s.reverse(),{properties:s,statements:r}}function ps(e){for(const t of e)if(ls.has(t))return t}function ds(e,t,r,n,s){const i=e[t];if(i.isMarkoTag())if((0,mn.isAttributeTag)(i)){const e=r[h(i)];if(ms(s,e.name)&&e.dynamic){const t=cs(i,s?.[e.name]?.props,n);e.repeated?n.push(hn.types.expressionStatement(hn.types.assignmentExpression("=",rs(e),St("attrTags",rs(e),us(t.properties))))):n.push(hn.types.expressionStatement(hn.types.assignmentExpression("=",rs(e),St("attrTag",us(t.properties)))))}}else switch(h(i)){case"if":return function(e,t,r,n,s){const i=e[t],o=[];let a=hn.types.ifStatement(gs(i),hn.types.blockStatement(o));n.push(a),fs(i,r,o,s);let l=t+1;for(;l<e.length;){const t=e[l];if(t.isMarkoTag())switch(h(t)){case"else-if":case"else":{const e=gs(t),n=[];if(fs(t,r,n,s),e){a.alternate=a=hn.types.ifStatement(e,hn.types.blockStatement(n)),l++;continue}a.alternate=hn.types.blockStatement(n);break}}break}return l-1}(e,t,r,n,s);case"for":return function(e,t,r,n,s){const i=e[t],o=[];return fs(i,r,o,s),n.push(Xn(Kn(i.node),Mt(i.node),i.node.body.params,o)),t}(e,t,r,n,s)}return t}function us(e){return 1===e.length&&hn.types.isSpreadElement(e[0])?e[0].argument:hn.types.objectExpression(e)}function fs(e,t,r,n){const s=e.node.body.attributeTags?e.get("body").get("body"):e.get("attributeTags");for(let e=0;e<s.length;e++)e=ds(s,e,t,r,n)}function ms(e,t){return!e||!!e[t]}function hs(e,t){for(const r of t)if("ObjectProperty"===r.type)switch(r.key.type){case"StringLiteral":if(r.key.value===e)return r;break;case"Identifier":if(r.key.name===e)return r}return!1}function gs({node:{attributes:e}}){return 1===e.length?e[0].value:void 0}var ys={analyze(e){if((0,fn.assertNoArgs)(e),!e.node.var)throw e.get("name").buildCodeFrameError("The `define` tag requires a tag variable.");const t=e.get("body");pe(t),Ie(e,4),Me(t,3),Le(de(e),e.node,qe(e.node))},translate:{enter(e){nn()&&rr(e)},exit(e){const{node:t}=e,r=cs(e);if(nn())nr(e),Fr(e.get("body")),e.insertBefore(r.statements),ln(e,us(r.properties));else{const n=fe(e),s=t.extra?.referencedBindings,i=Er(e.get("var").node.extra.binding);r.statements.length&&Mr("render",n,s,r.statements),jr(n,s,i,us(r.properties))}e.remove()}},attributes:{},autocomplete:[{description:"Use to create a constant object binding that can be rendered.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#define"}],types:"@marko/translator-tags/tag-types/define.d.marko"},bs=r("../../node_modules/@marko/babel-utils/dist/index.js"),xs=r("../../browser-shims/compiler/index.js"),vs={analyze(e){const[t]=e.node.attributes;if((0,bs.assertNoArgs)(e),(0,bs.assertNoParams)(e),j(e),(0,bs.assertNoVar)(e),!t)throw e.get("name").buildCodeFrameError("The `do` tag requires a value.");if(e.node.attributes.length>1||!xs.types.isMarkoAttribute(t)||!t.default&&"value"!==t.name)throw e.get("name").buildCodeFrameError("The `do` tag only supports the `value` attribute.")},translate:{exit(e){const t=fe(e),[r]=e.node.attributes,{value:n}=r,s=n.extra?.referencedBindings;let i=null;if(xs.types.isFunctionExpression(n)||xs.types.isArrowFunctionExpression(n))if(xs.types.isBlockStatement(n.body)){let e=!1;for(const t of n.body.body)if(xs.types.isDeclaration(t)){e=!0;break}i=e?n.body:n.body.body}else i=xs.types.expressionStatement(n.body);nn()?i?e.insertBefore(i):e.insertBefore(xs.types.expressionStatement(xs.types.callExpression(n,[]))):Mr("render",t,s,i??xs.types.expressionStatement(xs.types.callExpression(n,[Kr]))),e.remove()}},attributes:{},autocomplete:[{description:"Use to run a function on render.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#do"}],types:"@marko/translator-tags/tag-types/do.d.marko"},ws=r("../../node_modules/@marko/babel-utils/dist/index.js"),ks=r("../../browser-shims/compiler/index.js"),Ss={analyze(e){const{node:t}=e,[r]=t.attributes;if((0,ws.assertNoArgs)(e),(0,ws.assertNoVar)(e),(0,ws.assertNoParams)(e),j(e),!r)throw e.get("name").buildCodeFrameError("The `effect` tag requires a value.");if(t.attributes.length>1||!ks.types.isMarkoAttribute(r)||!r.default&&"value"!==r.name)throw e.get("name").buildCodeFrameError("The `effect` tag only supports the `value` attribute.");(r.value.extra??={}).isEffect=!0,(Xr.node.extra??={}).isInteractive=!0},translate:{exit(e){const{node:t}=e,[r]=t.attributes,n=fe(e),{value:s}=r,i=s.extra?.referencedBindings;if(sn()){const{value:e}=r;let t=null;if(ks.types.isFunctionExpression(e)||ks.types.isArrowFunctionExpression(e))if(ks.types.isBlockStatement(e.body)){let r=!1;for(const t of e.body.body)if(ks.types.isDeclaration(t)){r=!0;break}t=r?e.body:e.body.body}else t=ks.types.expressionStatement(e.body);Mr("effect",n,i,t||ks.types.expressionStatement(ks.types.callExpression(e,[Kr])),e,!!t)}else Rr(n,i);e.remove()}},attributes:{},autocomplete:[{description:"Use to create a side effects.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#effect"}],types:"@marko/translator-tags/tag-types/effect.d.marko"},Es=r("../../node_modules/@marko/babel-utils/dist/index.js"),As={parse(e){const{node:t}=e;e.replaceWith((0,Es.parseStatements)(e.hub.file,t.rawValue,t.start,t.end)[0])},parseOptions:{statement:!0,rawOpenTag:!0},autocomplete:[{displayText:"export <value>"}]},Cs=r("../../node_modules/@marko/babel-utils/dist/index.js"),Ts=r("../../browser-shims/compiler/index.js"),Is=Symbol("comment tag binding"),Ms=Symbol("node getter id"),js={analyze(e){(0,Cs.assertNoArgs)(e),(0,Cs.assertNoParams)(e),(0,Cs.assertNoAttributes)(e);const t=e.node.var;let r=!1,n=!1;if(t){if(!Ts.types.isIdentifier(t))throw e.get("var").buildCodeFrameError("The `html-comment` tag variable cannot be destructured.");r=!0;for(const r of e.scope.getBinding(t.name).referencePaths)if(!r.parentPath?.isCallExpression()){n=!0;break}}const s=[];for(const t of e.get("body").get("body"))if(t.isMarkoPlaceholder())s.push(t.node.value),r=!0;else if(!t.isMarkoText())throw t.buildCodeFrameError("Invalid child. Only text is allowed inside an html comment.");if(r){const t=de(e),r=e.node.extra??={};n&&(r[Ms]=Lr(t,"comment")),r[Is]=Te("#comment",0,t),Le(t,e.node,s)}e.skip()},translate(e){const t=e.node.extra,r=t[Is];if(e.node.var){const n=t[Ms];if(nn())ln(e,St("nodeRef",n&&me(fe(e)),n&&Ts.types.stringLiteral(n)));else{const t=e.node.var.name,s=e.scope.getBinding(t).referencePaths;let i;n&&(i=Xr.scope.generateUidIdentifier(`get_${t}`),Xr.pushContainer("body",Ts.types.variableDeclaration("const",[Ts.types.variableDeclarator(i,St("nodeRef",Ts.types.stringLiteral(n),Ge(r)))])));for(const t of s){const n=fe(t);t.parentPath?.isCallExpression()?t.parentPath.replaceWith(Ts.types.expressionStatement(fr(n,r))):i&&t.replaceWith(Ts.types.callExpression(i,[ur(n,fe(e))]))}}}t[Is]&&Xt(e,32);const n=er(e);if(Jt(e),n`<!--`,nn())for(const t of e.node.body.body)Ts.types.isMarkoText(t)?n`${t.value}`:Ts.types.isMarkoPlaceholder(t)&&n`${St("escapeXML",t.value)}`;else{const s=[],i=[];let o="";for(const t of e.node.body.body)Ts.types.isMarkoText(t)?o+=t.value:Ts.types.isMarkoPlaceholder(t)&&(s.push(Ts.types.templateElement({raw:o})),i.push(t.value),o="");0===i.length?n`${o}`:(s.push(Ts.types.templateElement({raw:o})),Mr("render",fe(e),t.referencedBindings,Ts.types.expressionStatement(St("data",Ts.types.memberExpression(Kr,Ge(r),!0),Ts.types.templateLiteral(s,i)))))}Zt(e),n`-->`,r&&ir(e,r),e.remove()},parseOptions:{text:!0},attributes:{},autocomplete:[{description:"Use to create an html comment that is not stripped from the output.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#html-comment"}]},Ps=r("../../node_modules/@marko/babel-utils/dist/index.js"),Ns=r("../../browser-shims/compiler/index.js"),Bs={analyze(e){(0,Ps.assertNoArgs)(e),(0,Ps.assertNoParams)(e),(0,Ps.assertNoAttributes)(e),j(e),(0,Ps.assertNoAttributeTags)(e);const{node:t}=e;if(!t.var)throw e.get("name").buildCodeFrameError("The `id` tag requires a tag variable.");if(!Ns.types.isIdentifier(t.var))throw e.get("var").buildCodeFrameError("The `id` tag cannot be destructured");Ie(e,4)},translate:{exit(e){const{node:t}=e,r=nn()?St("nextTagId"):St("nextTagId",Kr);if(nn())e.replaceWith(Ns.types.variableDeclaration("const",[Ns.types.variableDeclarator(t.var,r)]));else{const n=Er(t.var.extra.binding);jr(fe(e),void 0,n,r),e.remove()}}},attributes:{},autocomplete:[{displayText:"id/<name>",description:"Use to create a unique identifier.",snippet:"id/${1:name}",descriptionMoreURL:"https://markojs.com/docs/core-tags/#id"}],types:"@marko/translator-tags/tag-types/id.d.marko"},Ls=r("../../node_modules/@marko/babel-utils/dist/index.js"),Ds=r("../../browser-shims/compiler/index.js"),Us=r("../../browser-shims/compiler/index.js"),$s=Symbol("if node binding"),Os=new WeakMap,_s={analyze(e){if(function(e){switch((0,Ls.assertNoVar)(e),(0,Ls.assertNoArgs)(e),(0,Ls.assertNoParams)(e),function(e){if(!e.node.body.body.length&&!e.node.attributeTags.length)throw e.get("name").buildCodeFrameError(`The \`${h(e)}\` tag requires body content.`)}(e),M(e),h(e)){case"if":Ws(e);break;case"else-if":Ws(e),zs(e);break;case"else":!function(e){const{node:t}=e,[r]=t.attributes;if(t.attributes.length>1||r&&"if"!==r.name){const r=t.attributes[1].loc?.start,n=t.attributes[t.attributes.length-1].loc?.end,s=`The \`${h(e)}\` tag only supports an \`if=\` attribute.`;throw null==r||null==n?e.get("name").buildCodeFrameError(s):e.hub.buildError({loc:{start:r,end:n}},s,Error)}}(e),zs(e)}}(e),e.node.body.attributeTags)return;const[t,r]=Vs(e,pe(e.get("body")));if(t){const[t]=r[0],n=t.node.extra??={},s=[];let i=!0;for(const[e,t]of r)t&&(t.upstreamExpression=n,null===t.content||t.content?.singleChild||(i=!1)),e.node.attributes.length&&s.push(e.node.attributes[0].value);const o=de(e);n[$s]=Te("#text",0,o,void 0,n),n.singleNodeOptimization=i,Le(o,t.node,s)}},translate:Dt({html:{enter(e){if(e.node.body.attributeTags)return;const t=e.get("body"),r=ue(t),n=function(e){return qs(e)?e:Os.get(e)[0][0]}(e).node.extra,s=q(n.referencedBindings),i=n.singleNodeOptimization;qs(e)&&Xt(e,37),Gt(e),rr(e),r&&(ge(r,!0),s&&!i&&er(t)`${St("markResumeScopeStart",me(r))}`)},exit(e){if(e.node.body.attributeTags)return;const t=e.get("body"),r=fe(e),n=ue(t),[s,i]=Vs(e,n),o=i[0][0].node.extra,a=o[$s],l=q(o.referencedBindings),c=o.singleNodeOptimization,p=n&&Se(n,!0);if(n&&((l||p)&&vr(n),nr(e),yr(e,(()=>{})),Fr(t)),s){const t=er(e),n=e.getNextSibling(),s=e.scope.generateUidIdentifier("ifScopeId"),o=e.scope.generateUidIdentifier("ifRenderer");let u;for(let e=i.length;e--;){const[t,r]=i[e],n=t.node.body.body;if(r){const e=Se(r,!0);l&&n.push(Ds.types.expressionStatement(St("register",Ds.types.assignmentExpression("=",o,St("createRenderer",Ds.types.arrowFunctionExpression([],Ds.types.blockStatement([])))),Ds.types.stringLiteral(Nr(r,"renderer"))))),(l||e)&&n.push(Ds.types.expressionStatement(Ds.types.assignmentExpression("=",s,me(r))))}const[a]=t.node.attributes,c=(d=n,Array.isArray(d)?1===d.length?d[0]:Us.types.blockStatement(d):d);u=a?Ds.types.ifStatement(a.value,c,u):c,t.remove()}l||p?(n.insertBefore([Ds.types.variableDeclaration("let",[Ds.types.variableDeclarator(s),l&&Ds.types.variableDeclarator(o)].filter(Boolean)),u]),l&&(c?t`${St("markResumeControlSingleNodeEnd",me(r),Ge(a),s)}`:t`${St("markResumeControlEnd",me(r),Ge(a))}`,wr(r).set(Ds.types.stringLiteral(Ge(a).value+"("),o)),wr(r).set(Ds.types.stringLiteral(Ge(a).value+"!"),St("getScopeById",s))):n.insertBefore(u)}var d}},dom:{enter(e){if(e.node.body.attributeTags)return;const t=ue(e.get("body"));t&&ge(t,!0),qs(e)&&Xt(e,37),Gt(e)},exit(e){if(e.node.body.attributeTags)return;const[t,r]=Vs(e,ue(e.get("body")));if(t){const t=fe(e),n=r[0][0].node.extra,s=n[$s];let i=Ds.types.nullLiteral();for(let e=r.length;e--;){const[t,n]=r[e],[o]=t.node.attributes,a=n?Ds.types.identifier(n.name):Ds.types.numericLiteral(0);yr(t,(e=>St("inConditionalScope",e,Ge(s)))),t.remove(),i=o?Ds.types.conditionalExpression(o.value,a,i):a}const o=Sr(t,s,"if");o.build=()=>St("conditional",Ge(s),Ar(o,[Kr])),o.hasDownstreamIntersections=()=>r.some((([,e])=>e?.closures)),jr(t,n.referencedBindings,o,i)}}}}),parseOptions:{controlFlow:!0},autocomplete:[{snippet:"if=${1:condition}",description:"Use to display content only if the condition is met.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#if-else-if-else"}]},Rs={..._s,autocomplete:[{snippet:"else-if=${1:condition}",description:"Use after an <if> or <else-if> tag to display content if those conditions do not match and this one does.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#if-else-if-else"}]},Fs={..._s,autocomplete:[{description:"Use after an <if> or <else-if> tag to display content if those conditions do not match.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#if-else-if-else"}]};function zs(e){let t=e.getPrevSibling();for(;t.node&&t.isMarkoComment();)t=t.getPrevSibling();if(!x(t)||"else"!==h(t)&&!t.node.attributes.length)throw e.buildCodeFrameError(`The \`<${h(e)}>\` must have a preceding \`<if=cond>\`, \`<else-if=cond>\`, or \`<else if=cond>\`.`)}function Ws(e){const{node:t}=e,[r]=t.attributes;if(!Ds.types.isMarkoAttribute(r)||!r.default)throw e.get("name").buildCodeFrameError(`The \`${h(e)}\` tag requires a value.`);if(t.attributes.length>1){const r=t.attributes[1].loc?.start,n=t.attributes[t.attributes.length-1].loc?.end,s=`The \`${h(e)}\` tag only supports the \`value\` attribute.`;throw null==r||null==n?e.get("name").buildCodeFrameError(s):e.hub.buildError({loc:{start:r,end:n}},s,Error)}}function Vs(e,t){const r=Os.get(e)??[];let n=e.getNextSibling();for(;n.isMarkoComment();)n=n.getNextSibling();const s=!(b(n,"else")||b(n,"else-if"));return r.push([e,t]),s||Os.set(n,r),[s,r]}function qs(e){return b(e,"if")}var Js=r("../../node_modules/@marko/babel-utils/dist/index.js"),Zs={parse(e){const{node:t}=e;e.replaceWith((0,Js.parseStatements)(e.hub.file,t.rawValue,t.start,t.end)[0])},parseOptions:{statement:!0,rawOpenTag:!0},autocomplete:[{displayText:'import <scope> from "<path>"',description:"Use to import external modules, follows the same syntax as JavaScript imports.",snippet:'import ${2} from "${1:path}"',descriptionMoreURL:"https://markojs.com/docs/syntax/#importing-external-files"}]},Gs=r("../../node_modules/@marko/babel-utils/dist/index.js"),Xs=r("../../browser-shims/compiler/index.js"),Ks={analyze(e){const{node:t}=e,r=t.var,{optimize:n}=on();let s,i;for(const r of t.attributes)if(Xs.types.isMarkoAttribute(r))if("value"===r.name)s=r;else{if("valueChange"!==r.name){const t=r.loc?.start,n=r.loc?.end,s="The `let` tag only supports the `value` attribute and its change handler.";throw null==t||null==n?e.get("name").buildCodeFrameError(s):e.hub.buildError({loc:{start:t,end:n}},s,Error)}i=r}if((0,Gs.assertNoArgs)(e),(0,Gs.assertNoParams)(e),j(e),M(e),!r)throw e.get("name").buildCodeFrameError("The `let` tag requires a tag variable.");if(!Xs.types.isIdentifier(r))throw e.get("var").buildCodeFrameError("The `let` tag variable cannot be destructured.");if(i&&(0,Gs.computeNode)(i.value))throw e.get("attributes").find((e=>e.node===i)).get("value").buildCodeFrameError("The `let` tag `valueChange` attribute must be a function.");if(i){const t=(i.value.extra??={})?.referencedBindings;i.value.extra.static=Xs.types.isFunction(i.value),n&&Xs.types.isIdentifier(i.value)&&1===((o=t)?Array.isArray(o)?o.length:1:0)?i.value.extra.binding=t:i.value.extra.binding=Te(e.scope.generateUid(r.name+"_change"),1,fe(e),void 0,i.value.extra)}var o;Ie(e,1,void 0,s?s.value.extra??={}:void 0,i?.value.extra?.binding)},translate:{exit(e){const{node:t}=e,r=t.var,{optimize:n}=on(),s=t.attributes.find((e=>Xs.types.isMarkoAttribute(e)&&(e.default||"value"===e.name)))??Xs.types.markoAttribute("value",Xs.types.identifier("undefined")),i=t.attributes.find((e=>Xs.types.isMarkoAttribute(e)&&"valueChange"===e.name)),o=i?.value.extra?.binding;if(sn()){const t=fe(e),a=Er(r.extra.binding,"state"),l=s.value.extra?.referencedBindings,c=!l;if(!o||n&&Xs.types.isIdentifier(i.value)||jr(t,i.value.extra?.referencedBindings,Er(o),i.value),jr(t,l,a,s.value),!c){let e;Object.defineProperty(a,"extraArgs",{get:()=>(e||(e=o?i?.value.extra?.static?[Xs.types.numericLiteral(1)]:[fr(t,o)]:[]),e)})}a.buildAssignment=(e,t)=>{const r=o&&Xs.types.identifier(o.name);if(o?.upstreamExpression?.static)return Xs.types.callExpression(r,[t]);const n=ur(e,a.section);return Xs.types.callExpression(a.identifier,r?[n,t,r]:[n,t])}}else ln(e,s.value),o&&e.insertBefore(Xs.types.variableDeclaration("const",[Xs.types.variableDeclarator(Xs.types.identifier(o.name),i.value)]));e.remove()}},attributes:{},autocomplete:[{description:"Use to create a mutable binding.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#let"}],types:"@marko/translator-tags/tag-types/let.d.marko"},Hs=r("../../node_modules/@marko/babel-utils/dist/index.js"),Qs=r("../../browser-shims/compiler/index.js"),Ys=Symbol("lifecycle attrs reference"),ei=new Set(["onMount","onUpdate","onDestroy"]),ti={analyze(e){(0,Hs.assertNoArgs)(e),(0,Hs.assertNoVar)(e),(0,Hs.assertNoParams)(e),j(e);const{node:t}=e,r=t.extra??={},n=de(e);if(r[Ys]=Te(e.scope.generateUid("lifecycle"),4,n,void 0,r),0===t.attributes.length)throw e.get("name").buildCodeFrameError("The `lifecycle` tag requires at least one attribute.");for(const r of t.attributes){if(Qs.types.isMarkoSpreadAttribute(r))throw e.get("name").buildCodeFrameError("The `lifecycle` tag does not support `...spread` attributes.");if(!ei.has(r.name))throw e.get("name").buildCodeFrameError(`The \`lifecycle\` tag does not support the \`${r.name}\` attribute.`);(r.value.extra??={}).isEffect=!0}(Xr.node.extra??={}).isInteractive=!0,Le(n,e.node,qe(e.node))},translate:{exit(e){const{node:t}=e,r=fe(e),n=t.extra,{referencedBindings:s}=n,i=n[Ys];if(sn()){const n=cs(e);n.statements.push(Qs.types.expressionStatement(St("lifecycle",Kr,Ge(i),us(n.properties)))),Mr("effect",r,s,n.statements,t.attributes.map((e=>e.value)))}else Rr(r,s);e.remove()}},attributes:{},autocomplete:[{description:"Use to create a side effects.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#effect"}],types:"@marko/translator-tags/tag-types/lifecycle.d.marko"},ri=r("../../node_modules/@marko/babel-utils/dist/index.js"),ni=r("../../browser-shims/compiler/index.js"),si={analyze(e){const[t]=e.node.attributes;if((0,ri.assertNoArgs)(e),(0,ri.assertNoVar)(e),(0,ri.assertNoParams)(e),j(e),!t)throw e.get("name").buildCodeFrameError("The `log` tag requires a value.");if(e.node.attributes.length>1||!ni.types.isMarkoAttribute(t)||!t.default&&"value"!==t.name)throw e.get("name").buildCodeFrameError("The `log` tag only supports the `value` attribute.")},translate:{exit(e){const t=fe(e),[r]=e.node.attributes,{value:n}=r,s=n.extra?.referencedBindings,i=ni.types.expressionStatement(ni.types.callExpression(ni.types.memberExpression(ni.types.identifier("console"),ni.types.identifier("log")),[n]));nn()?e.insertBefore(i):Mr("render",t,s,i),e.remove()}},attributes:{},autocomplete:[{description:"Use to log a value to the console.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#log"}],types:"@marko/translator-tags/tag-types/log.d.marko"},ii={migrate:[e=>e.remove()]},oi=r("../../node_modules/@marko/babel-utils/dist/index.js"),ai=r("../../browser-shims/compiler/index.js"),li={parse(e){const{node:t,hub:{file:r}}=e,n=t.rawValue,s=n.replace(/^server\s*/,"").trim(),i=t.name.start+(n.length-s.length);let o=(0,oi.parseStatements)(r,s,i,i+s.length);1===o.length&&ai.types.isBlockStatement(o[0])&&(o=o[0].body),e.replaceWith(ai.types.markoScriptlet(o,!0,"server"))},parseOptions:{statement:!0,rawOpenTag:!0},autocomplete:[{displayText:"server <statement>",description:"A JavaScript statement which is only evaluated once your template is loaded on the server.",descriptionMoreURL:"https://markojs.com/docs/syntax/#server-javascript"}]},ci=r("../../node_modules/@marko/babel-utils/dist/index.js"),pi=r("../../browser-shims/compiler/index.js"),di={parse(e){const{node:t,hub:{file:r}}=e,n=t.rawValue,s=n.replace(/^static\s*/,"").trim(),i=t.name.start+(n.length-s.length);let o=(0,ci.parseStatements)(r,s,i,i+s.length);1===o.length&&pi.types.isBlockStatement(o[0])&&(o=o[0].body),e.replaceWith(pi.types.markoScriptlet(o,!0))},parseOptions:{statement:!0,rawOpenTag:!0},autocomplete:[{displayText:"static <statement>",description:"A JavaScript statement which is only evaluated once your template is loaded.",descriptionMoreURL:"https://markojs.com/docs/syntax/#static-javascript"}]},ui=r("../../node_modules/@marko/babel-utils/dist/index.js"),fi=r("../../browser-shims/compiler/index.js"),mi=",".charCodeAt(0),hi=";".charCodeAt(0),gi=new Uint8Array(64),yi=new Uint8Array(128);for(let e=0;e<64;e++){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(e);gi[e]=t,yi[t]=e}function bi(e,t,r){let n=t-r;n=n<0?-n<<1|1:n<<1;do{let t=31&n;n>>>=5,n>0&&(t|=32),e.write(gi[t])}while(n>0);return t}var xi="undefined"!=typeof TextDecoder?new TextDecoder:void 0!==s?{decode:e=>s.from(e.buffer,e.byteOffset,e.byteLength).toString()}:{decode(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}},vi=class{constructor(){this.pos=0,this.out="",this.buffer=new Uint8Array(16384)}write(e){const{buffer:t}=this;t[this.pos++]=e,16384===this.pos&&(this.out+=xi.decode(t),this.pos=0)}flush(){const{buffer:e,out:t,pos:r}=this;return r>0?t+xi.decode(e.subarray(0,r)):t}},wi=class e{constructor(t){this.bits=t instanceof e?t.bits.slice():[]}add(e){this.bits[e>>5]|=1<<(31&e)}has(e){return!!(this.bits[e>>5]&1<<(31&e))}},ki=class e{constructor(e,t,r){this.start=e,this.end=t,this.original=r,this.intro="",this.outro="",this.content=r,this.storeName=!1,this.edited=!1,this.previous=null,this.next=null}appendLeft(e){this.outro+=e}appendRight(e){this.intro=this.intro+e}clone(){const t=new e(this.start,this.end,this.original);return t.intro=this.intro,t.outro=this.outro,t.content=this.content,t.storeName=this.storeName,t.edited=this.edited,t}contains(e){return this.start<e&&e<this.end}eachNext(e){let t=this;for(;t;)e(t),t=t.next}eachPrevious(e){let t=this;for(;t;)e(t),t=t.previous}edit(e,t,r){return this.content=e,r||(this.intro="",this.outro=""),this.storeName=t,this.edited=!0,this}prependLeft(e){this.outro=e+this.outro}prependRight(e){this.intro=e+this.intro}reset(){this.intro="",this.outro="",this.edited&&(this.content=this.original,this.storeName=!1,this.edited=!1)}split(t){const r=t-this.start,n=this.original.slice(0,r),s=this.original.slice(r);this.original=n;const i=new e(t,this.end,s);return i.outro=this.outro,this.outro="",this.end=t,this.edited?(i.edit("",!1),this.content=""):this.content=n,i.next=this.next,i.next&&(i.next.previous=i),i.previous=this,this.next=i,i}toString(){return this.intro+this.content+this.outro}trimEnd(e){if(this.outro=this.outro.replace(e,""),this.outro.length)return!0;const t=this.content.replace(e,"");return t.length?(t!==this.content&&(this.split(this.start+t.length).edit("",void 0,!0),this.edited&&this.edit(t,this.storeName,!0)),!0):(this.edit("",void 0,!0),this.intro=this.intro.replace(e,""),!!this.intro.length||void 0)}trimStart(e){if(this.intro=this.intro.replace(e,""),this.intro.length)return!0;const t=this.content.replace(e,"");if(t.length){if(t!==this.content){const e=this.split(this.end-t.length);this.edited&&e.edit(t,this.storeName,!0),this.edit("",void 0,!0)}return!0}return this.edit("",void 0,!0),this.outro=this.outro.replace(e,""),!!this.outro.length||void 0}},Si="undefined"!=typeof globalThis&&"function"==typeof globalThis.btoa?e=>globalThis.btoa(unescape(encodeURIComponent(e))):"function"==typeof s?e=>s.from(e,"utf-8").toString("base64"):()=>{throw new Error("Unsupported environment: `window.btoa` or `Buffer` should be supported.")},Ei=class{constructor(e){this.version=3,this.file=e.file,this.sources=e.sources,this.sourcesContent=e.sourcesContent,this.names=e.names,this.mappings=function(e){const t=new vi;let r=0,n=0,s=0,i=0;for(let o=0;o<e.length;o++){const a=e[o];if(o>0&&t.write(hi),0===a.length)continue;let l=0;for(let e=0;e<a.length;e++){const o=a[e];e>0&&t.write(mi),l=bi(t,o[0],l),1!==o.length&&(r=bi(t,o[1],r),n=bi(t,o[2],n),s=bi(t,o[3],s),4!==o.length&&(i=bi(t,o[4],i)))}}return t.flush()}(e.mappings),void 0!==e.x_google_ignoreList&&(this.x_google_ignoreList=e.x_google_ignoreList)}toString(){return JSON.stringify(this)}toUrl(){return"data:application/json;charset=utf-8;base64,"+Si(this.toString())}};function Ai(e,t){const r=e.split(/[/\\]/),n=t.split(/[/\\]/);for(r.pop();r[0]===n[0];)r.shift(),n.shift();if(r.length){let e=r.length;for(;e--;)r[e]=".."}return r.concat(n).join("/")}var Ci=Object.prototype.toString;function Ti(e){const t=e.split("\n"),r=[];for(let e=0,n=0;e<t.length;e++)r.push(n),n+=t[e].length+1;return function(e){let t=0,n=r.length;for(;t<n;){const s=t+n>>1;e<r[s]?n=s:t=s+1}const s=t-1;return{line:s,column:e-r[s]}}}var Ii=/\w/,Mi=class{constructor(e){this.hires=e,this.generatedCodeLine=0,this.generatedCodeColumn=0,this.raw=[],this.rawSegments=this.raw[this.generatedCodeLine]=[],this.pending=null}addEdit(e,t,r,n){if(t.length){const s=t.length-1;let i=t.indexOf("\n",0),o=-1;for(;i>=0&&s>i;){const s=[this.generatedCodeColumn,e,r.line,r.column];n>=0&&s.push(n),this.rawSegments.push(s),this.generatedCodeLine+=1,this.raw[this.generatedCodeLine]=this.rawSegments=[],this.generatedCodeColumn=0,o=i,i=t.indexOf("\n",i+1)}const a=[this.generatedCodeColumn,e,r.line,r.column];n>=0&&a.push(n),this.rawSegments.push(a),this.advance(t.slice(o+1))}else this.pending&&(this.rawSegments.push(this.pending),this.advance(t));this.pending=null}addUneditedChunk(e,t,r,n,s){let i=t.start,o=!0,a=!1;for(;i<t.end;){if("\n"===r[i])n.line+=1,n.column=0,this.generatedCodeLine+=1,this.raw[this.generatedCodeLine]=this.rawSegments=[],this.generatedCodeColumn=0,o=!0;else{if(this.hires||o||s.has(i)){const t=[this.generatedCodeColumn,e,n.line,n.column];"boundary"===this.hires?Ii.test(r[i])?a||(this.rawSegments.push(t),a=!0):(this.rawSegments.push(t),a=!1):this.rawSegments.push(t)}n.column+=1,this.generatedCodeColumn+=1,o=!1}i+=1}this.pending=null}advance(e){if(!e)return;const t=e.split("\n");if(t.length>1){for(let e=0;e<t.length-1;e++)this.generatedCodeLine++,this.raw[this.generatedCodeLine]=this.rawSegments=[];this.generatedCodeColumn=0}this.generatedCodeColumn+=t[t.length-1].length}},ji="\n",Pi={insertLeft:!1,insertRight:!1,storeName:!1},Ni=class e{constructor(e,t={}){const r=new ki(0,e.length,e);Object.defineProperties(this,{original:{writable:!0,value:e},outro:{writable:!0,value:""},intro:{writable:!0,value:""},firstChunk:{writable:!0,value:r},lastChunk:{writable:!0,value:r},lastSearchedChunk:{writable:!0,value:r},byStart:{writable:!0,value:{}},byEnd:{writable:!0,value:{}},filename:{writable:!0,value:t.filename},indentExclusionRanges:{writable:!0,value:t.indentExclusionRanges},sourcemapLocations:{writable:!0,value:new wi},storedNames:{writable:!0,value:{}},indentStr:{writable:!0,value:void 0},ignoreList:{writable:!0,value:t.ignoreList}}),this.byStart[0]=r,this.byEnd[e.length]=r}addSourcemapLocation(e){this.sourcemapLocations.add(e)}append(e){if("string"!=typeof e)throw new TypeError("outro content must be a string");return this.outro+=e,this}appendLeft(e,t){if("string"!=typeof t)throw new TypeError("inserted content must be a string");this._split(e);const r=this.byEnd[e];return r?r.appendLeft(t):this.intro+=t,this}appendRight(e,t){if("string"!=typeof t)throw new TypeError("inserted content must be a string");this._split(e);const r=this.byStart[e];return r?r.appendRight(t):this.outro+=t,this}clone(){const t=new e(this.original,{filename:this.filename});let r=this.firstChunk,n=t.firstChunk=t.lastSearchedChunk=r.clone();for(;r;){t.byStart[n.start]=n,t.byEnd[n.end]=n;const e=r.next,s=e&&e.clone();s&&(n.next=s,s.previous=n,n=s),r=e}return t.lastChunk=n,this.indentExclusionRanges&&(t.indentExclusionRanges=this.indentExclusionRanges.slice()),t.sourcemapLocations=new wi(this.sourcemapLocations),t.intro=this.intro,t.outro=this.outro,t}generateDecodedMap(e){e=e||{};const t=Object.keys(this.storedNames),r=new Mi(e.hires),n=Ti(this.original);return this.intro&&r.advance(this.intro),this.firstChunk.eachNext((e=>{const s=n(e.start);e.intro.length&&r.advance(e.intro),e.edited?r.addEdit(0,e.content,s,e.storeName?t.indexOf(e.original):-1):r.addUneditedChunk(0,e,this.original,s,this.sourcemapLocations),e.outro.length&&r.advance(e.outro)})),{file:e.file?e.file.split(/[/\\]/).pop():void 0,sources:[e.source?Ai(e.file||"",e.source):e.file||""],sourcesContent:e.includeContent?[this.original]:void 0,names:t,mappings:r.raw,x_google_ignoreList:this.ignoreList?[0]:void 0}}generateMap(e){return new Ei(this.generateDecodedMap(e))}_ensureindentStr(){void 0===this.indentStr&&(this.indentStr=function(e){const t=e.split("\n"),r=t.filter((e=>/^\t+/.test(e))),n=t.filter((e=>/^ {2,}/.test(e)));if(0===r.length&&0===n.length)return null;if(r.length>=n.length)return"\t";const s=n.reduce(((e,t)=>{const r=/^ +/.exec(t)[0].length;return Math.min(r,e)}),1/0);return new Array(s+1).join(" ")}(this.original))}_getRawIndentString(){return this._ensureindentStr(),this.indentStr}getIndentString(){return this._ensureindentStr(),null===this.indentStr?"\t":this.indentStr}indent(e,t){const r=/^[^\r\n]/gm;var n;if(n=e,"[object Object]"===Ci.call(n)&&(t=e,e=void 0),void 0===e&&(this._ensureindentStr(),e=this.indentStr||"\t"),""===e)return this;const s={};(t=t||{}).exclude&&("number"==typeof t.exclude[0]?[t.exclude]:t.exclude).forEach((e=>{for(let t=e[0];t<e[1];t+=1)s[t]=!0}));let i=!1!==t.indentStart;const o=t=>i?`${e}${t}`:(i=!0,t);this.intro=this.intro.replace(r,o);let a=0,l=this.firstChunk;for(;l;){const t=l.end;if(l.edited)s[a]||(l.content=l.content.replace(r,o),l.content.length&&(i="\n"===l.content[l.content.length-1]));else for(a=l.start;a<t;){if(!s[a]){const t=this.original[a];"\n"===t?i=!0:"\r"!==t&&i&&(i=!1,a===l.start||(this._splitChunk(l,a),l=l.next),l.prependRight(e))}a+=1}a=l.end,l=l.next}return this.outro=this.outro.replace(r,o),this}insert(){throw new Error("magicString.insert(...) is deprecated. Use prependRight(...) or appendLeft(...)")}insertLeft(e,t){return Pi.insertLeft||(console.warn("magicString.insertLeft(...) is deprecated. Use magicString.appendLeft(...) instead"),Pi.insertLeft=!0),this.appendLeft(e,t)}insertRight(e,t){return Pi.insertRight||(console.warn("magicString.insertRight(...) is deprecated. Use magicString.prependRight(...) instead"),Pi.insertRight=!0),this.prependRight(e,t)}move(e,t,r){if(r>=e&&r<=t)throw new Error("Cannot move a selection inside itself");this._split(e),this._split(t),this._split(r);const n=this.byStart[e],s=this.byEnd[t],i=n.previous,o=s.next,a=this.byStart[r];if(!a&&s===this.lastChunk)return this;const l=a?a.previous:this.lastChunk;return i&&(i.next=o),o&&(o.previous=i),l&&(l.next=n),a&&(a.previous=s),n.previous||(this.firstChunk=s.next),s.next||(this.lastChunk=n.previous,this.lastChunk.next=null),n.previous=l,s.next=a||null,l||(this.firstChunk=n),a||(this.lastChunk=s),this}overwrite(e,t,r,n){return n=n||{},this.update(e,t,r,{...n,overwrite:!n.contentOnly})}update(e,t,r,n){if("string"!=typeof r)throw new TypeError("replacement content must be a string");if(0!==this.original.length){for(;e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length}if(t>this.original.length)throw new Error("end is out of bounds");if(e===t)throw new Error("Cannot overwrite a zero-length range – use appendLeft or prependRight instead");this._split(e),this._split(t),!0===n&&(Pi.storeName||(console.warn("The final argument to magicString.overwrite(...) should be an options object. See https://github.com/rich-harris/magic-string"),Pi.storeName=!0),n={storeName:!0});const s=void 0!==n&&n.storeName,i=void 0!==n&&n.overwrite;if(s){const r=this.original.slice(e,t);Object.defineProperty(this.storedNames,r,{writable:!0,value:!0,enumerable:!0})}const o=this.byStart[e],a=this.byEnd[t];if(o){let e=o;for(;e!==a;){if(e.next!==this.byStart[e.end])throw new Error("Cannot overwrite across a split point");e=e.next,e.edit("",!1)}o.edit(r,s,!i)}else{const n=new ki(e,t,"").edit(r,s);a.next=n,n.previous=a}return this}prepend(e){if("string"!=typeof e)throw new TypeError("outro content must be a string");return this.intro=e+this.intro,this}prependLeft(e,t){if("string"!=typeof t)throw new TypeError("inserted content must be a string");this._split(e);const r=this.byEnd[e];return r?r.prependLeft(t):this.intro=t+this.intro,this}prependRight(e,t){if("string"!=typeof t)throw new TypeError("inserted content must be a string");this._split(e);const r=this.byStart[e];return r?r.prependRight(t):this.outro=t+this.outro,this}remove(e,t){if(0!==this.original.length){for(;e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length}if(e===t)return this;if(e<0||t>this.original.length)throw new Error("Character is out of bounds");if(e>t)throw new Error("end must be greater than start");this._split(e),this._split(t);let r=this.byStart[e];for(;r;)r.intro="",r.outro="",r.edit(""),r=t>r.end?this.byStart[r.end]:null;return this}reset(e,t){if(0!==this.original.length){for(;e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length}if(e===t)return this;if(e<0||t>this.original.length)throw new Error("Character is out of bounds");if(e>t)throw new Error("end must be greater than start");this._split(e),this._split(t);let r=this.byStart[e];for(;r;)r.reset(),r=t>r.end?this.byStart[r.end]:null;return this}lastChar(){if(this.outro.length)return this.outro[this.outro.length-1];let e=this.lastChunk;do{if(e.outro.length)return e.outro[e.outro.length-1];if(e.content.length)return e.content[e.content.length-1];if(e.intro.length)return e.intro[e.intro.length-1]}while(e=e.previous);return this.intro.length?this.intro[this.intro.length-1]:""}lastLine(){let e=this.outro.lastIndexOf(ji);if(-1!==e)return this.outro.substr(e+1);let t=this.outro,r=this.lastChunk;do{if(r.outro.length>0){if(e=r.outro.lastIndexOf(ji),-1!==e)return r.outro.substr(e+1)+t;t=r.outro+t}if(r.content.length>0){if(e=r.content.lastIndexOf(ji),-1!==e)return r.content.substr(e+1)+t;t=r.content+t}if(r.intro.length>0){if(e=r.intro.lastIndexOf(ji),-1!==e)return r.intro.substr(e+1)+t;t=r.intro+t}}while(r=r.previous);return e=this.intro.lastIndexOf(ji),-1!==e?this.intro.substr(e+1)+t:this.intro+t}slice(e=0,t=this.original.length){if(0!==this.original.length){for(;e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length}let r="",n=this.firstChunk;for(;n&&(n.start>e||n.end<=e);){if(n.start<t&&n.end>=t)return r;n=n.next}if(n&&n.edited&&n.start!==e)throw new Error(`Cannot use replaced character ${e} as slice start anchor.`);const s=n;for(;n;){!n.intro||s===n&&n.start!==e||(r+=n.intro);const i=n.start<t&&n.end>=t;if(i&&n.edited&&n.end!==t)throw new Error(`Cannot use replaced character ${t} as slice end anchor.`);const o=s===n?e-n.start:0,a=i?n.content.length+t-n.end:n.content.length;if(r+=n.content.slice(o,a),!n.outro||i&&n.end!==t||(r+=n.outro),i)break;n=n.next}return r}snip(e,t){const r=this.clone();return r.remove(0,e),r.remove(t,r.original.length),r}_split(e){if(this.byStart[e]||this.byEnd[e])return;let t=this.lastSearchedChunk;const r=e>t.end;for(;t;){if(t.contains(e))return this._splitChunk(t,e);t=r?this.byStart[t.end]:this.byEnd[t.start]}}_splitChunk(e,t){if(e.edited&&e.content.length){const r=Ti(this.original)(t);throw new Error(`Cannot split a chunk that has already been edited (${r.line}:${r.column} – "${e.original}")`)}const r=e.split(t);return this.byEnd[t]=e,this.byStart[t]=r,this.byEnd[r.end]=r,e===this.lastChunk&&(this.lastChunk=r),this.lastSearchedChunk=e,!0}toString(){let e=this.intro,t=this.firstChunk;for(;t;)e+=t.toString(),t=t.next;return e+this.outro}isEmpty(){let e=this.firstChunk;do{if(e.intro.length&&e.intro.trim()||e.content.length&&e.content.trim()||e.outro.length&&e.outro.trim())return!1}while(e=e.next);return!0}length(){let e=this.firstChunk,t=0;do{t+=e.intro.length+e.content.length+e.outro.length}while(e=e.next);return t}trimLines(){return this.trim("[\\r\\n]")}trim(e){return this.trimStart(e).trimEnd(e)}trimEndAborted(e){const t=new RegExp((e||"\\s")+"+$");if(this.outro=this.outro.replace(t,""),this.outro.length)return!0;let r=this.lastChunk;do{const e=r.end,n=r.trimEnd(t);if(r.end!==e&&(this.lastChunk===r&&(this.lastChunk=r.next),this.byEnd[r.end]=r,this.byStart[r.next.start]=r.next,this.byEnd[r.next.end]=r.next),n)return!0;r=r.previous}while(r);return!1}trimEnd(e){return this.trimEndAborted(e),this}trimStartAborted(e){const t=new RegExp("^"+(e||"\\s")+"+");if(this.intro=this.intro.replace(t,""),this.intro.length)return!0;let r=this.firstChunk;do{const e=r.end,n=r.trimStart(t);if(r.end!==e&&(r===this.lastChunk&&(this.lastChunk=r.next),this.byEnd[r.end]=r,this.byStart[r.next.start]=r.next,this.byEnd[r.next.end]=r.next),n)return!0;r=r.next}while(r);return!1}trimStart(e){return this.trimStartAborted(e),this}hasChanged(){return this.original!==this.toString()}_replaceRegexp(e,t){function r(e,r){return"string"==typeof t?t.replace(/\$(\$|&|\d+)/g,((t,r)=>"$"===r?"$":"&"===r?e[0]:+r<e.length?e[+r]:`$${r}`)):t(...e,e.index,r,e.groups)}if(e.global)(function(e,t){let r;const n=[];for(;r=e.exec(t);)n.push(r);return n})(e,this.original).forEach((e=>{if(null!=e.index){const t=r(e,this.original);t!==e[0]&&this.overwrite(e.index,e.index+e[0].length,t)}}));else{const t=this.original.match(e);if(t&&null!=t.index){const e=r(t,this.original);e!==t[0]&&this.overwrite(t.index,t.index+t[0].length,e)}}return this}_replaceString(e,t){const{original:r}=this,n=r.indexOf(e);return-1!==n&&this.overwrite(n,n+e.length,t),this}replace(e,t){return"string"==typeof e?this._replaceString(e,t):this._replaceRegexp(e,t)}_replaceAllString(e,t){const{original:r}=this,n=e.length;for(let s=r.indexOf(e);-1!==s;s=r.indexOf(e,s+n))r.slice(s,s+n)!==t&&this.overwrite(s,s+n,t);return this}replaceAll(e,t){if("string"==typeof e)return this._replaceAllString(e,t);if(!e.global)throw new TypeError("MagicString.prototype.replaceAll called with a non-global RegExp argument");return this._replaceRegexp(e,t)}},Bi=u(r("../../node_modules/path-browserify/index.js")),Li={taglibId:g,"<import>":Zs,"<export>":As,"<attrs>":S,"<if>":_s,"<else-if>":Rs,"<else>":Fs,"<for>":Gn,"<let>":Ks,"<const>":cn,"<define>":ys,"<effect>":Ss,"<do>":vs,"<log>":si,"<debug>":un,"<lifecycle>":ti,"<id>":Bs,"<html-comment>":js,"<return>":cr,"<style>":{analyze(e){(0,ui.assertNoArgs)(e),(0,ui.assertNoParams)(e),(0,ui.assertNoAttributeTags)(e)},translate(e){const{hub:{file:t}}=e,{filename:r,sourceMaps:n}=t.opts;(0,ui.assertNoParams)(e),M(e);let s="text/css";const i=e.get("attributes"),o=Bi.default.basename(r),a=i.find((e=>e.isMarkoAttribute()&&"type"===e.node.name)),l=i.find((e=>e.isMarkoAttribute()&&"class"===e.node.name));if(a&&l)throw l.buildCodeFrameError("The `style` tag must only use `type` or `class` and not both.");if(a){const e=a.get("value");if(!e.isStringLiteral())throw e.buildCodeFrameError("The `style` tag `type` attribute can only be a string literal.");s=e.node.value}else if(l){const e=l.get("value");if(!e.isStringLiteral())throw e.buildCodeFrameError("The `style` tag `class` attribute can only be a string literal.");s=e.node.value}"text/css"===s&&(s="css"),e.node.var&&!s.startsWith("module")&&(s="module."+s);const c=e.get("body").get("body"),p=c[0];if(1!==c.length||!p.isMarkoText())throw(p.isMarkoText()?c[1]:c[0]).buildCodeFrameError("The `style` tag currently only supports static content.");const{resolveVirtualDependency:d}=on(),u=(0,ui.getStart)(t,p.node),f=(0,ui.getEnd)(t,p.node);let m,h=p.node.value;if(d&&n&&null!==u&&null!==f){const e=new Ni(t.code,{filename:r});e.remove(0,u),e.remove(f,t.code.length),m=e.generateMap({source:r,includeContent:!0}),"inline"!==n&&"both"!==n||(h+=`\n/*# sourceMappingURL=${m.toUrl()}*/`,"inline"===n&&(m=void 0))}const g=d?.(r,{virtualPath:`./${o}.${s}`,code:h,map:m});g&&(e.node.var?fi.types.isIdentifier(e.node.var)?Xr.pushContainer("body",fi.types.importDeclaration([fi.types.importDefaultSpecifier(e.node.var)],fi.types.stringLiteral(g))):Xr.pushContainer("body",fi.types.variableDeclaration("const",[fi.types.variableDeclarator(e.node.var,(0,ui.importDefault)(t,g,"style"))])):Xr.pushContainer("body",fi.types.importDeclaration([],fi.types.stringLiteral(g)))),e.remove()},attributes:{}},"<await-reorderer>":ii,"<init-widgets>":ii,"<init-components>":ii,"<static>":di,"<server>":li,"<client>":C,"<__flush_here_and_after__>":w},Di={translate:{enter(e){throw e.buildCodeFrameError("CDATA sections are not supported in Marko.")}}},Ui={translate:{exit(e){e.remove()}}},$i={translate:{enter(e){throw e.buildCodeFrameError("XML declarations sections are not supported in Marko.")}}},Oi={translate:{exit(e){nn()&&er(e)`<!${e.node.value}>`,e.remove()}}},_i=r("../../node_modules/@marko/babel-utils/dist/index.js"),Ri={analyze(e){const{node:t}=e,{source:r}=t,{value:n}=r,s=(0,_i.resolveTagImport)(e,n);if(s){t.extra??={},t.extra.tagImport=s;const r=e.hub.file.metadata.marko.tags;r.includes(s)||r.push(s)}},translate:{exit(e){const{node:t}=e,{extra:r}=t,n=r?.tagImport;n&&(t.source.value=n)}}},Fi=r("../../node_modules/@marko/babel-utils/dist/index.js"),zi=r("../../browser-shims/compiler/index.js"),Wi=Symbol("placeholder node binding"),Vi=Symbol("placeholder has sibling text"),qi={script:"escapeScript",style:"escapeStyle"},Ji={analyze(e){const{node:t}=e,{confident:r,computed:n}=kn(e);(!r||!t.escape&&n)&&((t.extra??={})[Wi]=Te("#text",0,de(e),void 0,t.value.extra),function(e){const t=e.node.extra;let r=e.getPrevSibling();for(;r.node;){const e=we(r,"endType");if(null!==e){if(4===e||1===e||2===e)return t[Vi]=1;break}r=r.getPrevSibling()}if(!r.node&&zi.types.isProgram(e.parentPath))return t[Vi]=1;let n=e.getNextSibling();for(;n.node;){const e=we(n,"startType");if(null!==e){if(4===e||1===e||2===e)return t[Vi]=2;break}n=n.getNextSibling()}if(!n.node&&zi.types.isProgram(e.parentPath))return t[Vi]=2;t[Vi]=0}(e))},translate:{exit(e){const t=nn(),r=er(e),{node:n}=e,{value:s}=n,i=n.extra,{confident:o,computed:a}=i,l=i[Wi],c=t||o&&(n.escape||!a),p=c?n.escape?qi[function({parentPath:e}){return e.isMarkoTag()&&(0,Fi.isNativeTag)(e)&&e.node.name.value||""}(e)]||"escapeXML":"toString":n.escape?"data":"html",d=q(s.extra?.referencedBindings),u=i[Vi];o&&c?r`${Et()[p](a)}`:(1===u?(t&&d&&r`<!>`,Xt(e,37)):2===u?Xt(e,37):(t||r` `,Xt(e,32)),t?(r`${St(p,s)}`,d&&ir(e,l)):Mr("render",fe(e),s.extra?.referencedBindings,zi.types.expressionStatement("data"===p?St("data",zi.types.memberExpression(Kr,Ge(l),!0),s):St("html",Kr,s,Ge(l))))),Gt(e),e.remove()}}},Zi=r("../../browser-shims/compiler/index.js"),Gi=new WeakMap,Xi={migrate(e){const{name:t}=e.node;if(!e.scope.hasBinding(t)&&"out"===t){if(!Zi.types.isMemberExpression(e.parent)||!Zi.types.isIdentifier(e.parent.property)||"global"!==e.parent.property.name)throw e.buildCodeFrameError("Only `out.global` is supported for compatibility.");e.parentPath.replaceWith(Zi.types.identifier("$global"))}},translate(e){const{name:t}=e.node;if(!e.scope.hasBinding(t))switch(t){case"$global":nn()?e.replaceWith(Zi.types.callExpression(kt("$global"),[])):e.replaceWith(Zi.types.memberExpression(Kr,Zi.types.identifier("$global")));break;case"$signal":if(nn()){const t=fe(e);t.hasCleanup||(t.hasCleanup=!0,er(F(e))`${St("markResumeCleanup",me(t))}`),e.replaceWith(Zi.types.callExpression(Zi.types.arrowFunctionExpression([],Zi.types.blockStatement([Zi.types.throwStatement(Zi.types.newExpression(Zi.types.identifier("Error"),[Zi.types.stringLiteral("Cannot use $signal in a server render.")]))])),[]))}else{const t=fe(e),r=F(e);let n,s=Gi.get(t);s?n=s.get(r):(s=new Map,Gi.set(t,s)),n||(n=s.size,s.set(r,n),Mr("render",t,r.node.extra?.referencedBindings,Zi.types.expressionStatement(Zi.types.callExpression(kt("resetAbortSignal"),[Kr,Zi.types.numericLiteral(n)])))),e.replaceWith(Zi.types.callExpression(kt("getAbortSignal"),[Kr,Zi.types.numericLiteral(n)]))}}}},Ki={analyze(e){Le(de(e),e.node,e.node.body)},translate:{exit(e){const{node:t}=e;if(nn()){if(t.static)return;e.replaceWithMultiple(t.body)}else t.target&&"client"!==t.target?e.remove():t.static?e.replaceWithMultiple(t.body):(Mr("render",fe(e),t.extra?.referencedBindings,t.body),e.remove())}}},Hi=r("../../node_modules/@marko/babel-utils/dist/index.js"),Qi=r("../../browser-shims/compiler/index.js"),Yi=r("../../node_modules/@marko/babel-utils/dist/index.js"),eo=(r("../../browser-shims/compiler/index.js"),{analyze:{enter(e){(0,Yi.assertNoVar)(e),(0,Yi.assertNoArgs)(e);const t=e.get("body");if(pe(t),Me(t,3),!(0,Yi.findParentTag)(e))throw e.get("name").buildCodeFrameError("@tags must be nested within another tag.")}},translate:{enter(e){nn()&&rr(e)},exit(e){nn()&&(nr(e),Fr(e.get("body")))}}}),to=r("../../node_modules/@marko/babel-utils/dist/index.js"),ro=r("../../browser-shims/compiler/index.js"),no=u(r("../../node_modules/path-browserify/index.js")),so=Symbol("custom tag child scope"),io={analyze:{enter(e){if((0,to.assertAttributesOrSingleArg)(e),ns(e),!(0,to.getTagTemplate)(e)){const t=h(e);if(t&&e.scope.hasBinding(t))throw e.get("name").buildCodeFrameError(`Local variables must in a dynamic tag unless they are PascalCase. Use \`<\${${t}}/>\` or rename to \`${t.charAt(0).toUpperCase()+t.slice(1)}\`.`);throw e.get("name").buildCodeFrameError("Unable to find entry point for custom tag.")}const t=de(e),r=e.get("body"),n=e.node.extra??={};pe(r),Ie(e,4),Me(r,3),n[so]=Te("#childScope",0,t,void 0,n);const s=(0,to.loadFileForTag)(e);if(s.opts.filename===e.hub.file.opts.filename)Le(t,e.node,qe(e.node));else{const r=s.ast.program.extra;ao(t,e,r?.domExports.params?.props?.[0]),Xr.node.extra.hasInteractiveChild=r?.isInteractive||r?.hasInteractiveChild||!1}}},translate:{enter(e){Xt(e),nn()&&rr(e)},exit(e){nn()?function(e){const t=e.get("body"),{node:r}=e;let n;if(nr(e),Fr(t),ro.types.isStringLiteral(r.name)){const t=oo(e);n=po(e.hub.file,t)?Hr:(0,to.importDefault)(e.hub.file,t,h(e))}else n=r.name;const s=r.var,i=fe(e),o=r.extra[so],a=e.scope.generateUidIdentifier(o?.name);e.insertBefore(ro.types.variableDeclaration("const",[ro.types.variableDeclarator(a,St("peekNextScope"))])),wr(i).set(Ge(o),St("writeExistingScope",a));const l=(0,to.loadFileForTag)(e)?.ast.program.extra?.domExports?.params?.props?.[0],{properties:c,statements:p}=l?cs(e,l.props):{properties:[],statements:[]};if(r.extra.tagNameNullable){const t=ps(c);let r;if(t){const n=t.value;t.value=r=e.scope.generateUidIdentifier("renderBody");const[s]=e.insertBefore(ro.types.variableDeclaration("const",[ro.types.variableDeclarator(r,n)]));s.skip()}let i=fo(n,us(c));s&&(ln(e,ro.types.unaryExpression("void",ro.types.numericLiteral(0)),"let"),i=ro.types.assignmentExpression("=",s,i)),p.push(ro.types.ifStatement(n,ro.types.expressionStatement(i),r&&uo(r)))}else s?(ln(e,fo(n,us(c),St("register",ro.types.arrowFunctionExpression([],ro.types.blockStatement([])),ro.types.stringLiteral(Nr(i,r.var.extra?.binding)),me(i)))),vr(i)):p.push(uo(n,us(c)));for(const t of e.replaceWithMultiple(p))t.skip()}(e):function(e){const t=fe(e),{node:r}=e,n=r.extra[so],s=er(e),{file:i}=e.hub,o=ro.types.isIdentifier(r.name)?r.name.name:ro.types.isStringLiteral(r.name)?r.name.value:"tag",a=oo(e),l=(0,to.loadFileForTag)(e),c=l.ast.program.extra.domExports,p=co(i,a,c.setup,o),d=c.params?.props?.[0];if(d&&lo(e,d,`${h(e)||"tag"}_input`,{circular:l.opts.filename===i.opts.filename,tagSection:t,relativePath:a,childScopeBinding:n}),s`${(0,to.importNamed)(i,a,c.template,`${o}_template`)}`,function(e,t){const r=zt(fe(e));Wt(fe(e)).push(`${qt[47]}`,t.name,qt[38]),_t(r,String.fromCharCode(47)),r.push(t,String.fromCharCode(38))}(e,(0,to.importNamed)(i,a,c.walks,`${o}_walks`)),r.var){const e=Er(r.var.extra.binding);e.register=!0,e.buildAssignment=(t,r)=>ro.types.callExpression(kt("tagVarSignalChange"),[fr(e.section,n),r]),Mr("render",t,void 0,ro.types.expressionStatement(St("setTagVar",Kr,Ge(n),e.identifier)))}Mr("render",t,void 0,ro.types.expressionStatement(ro.types.callExpression(p,[fr(t,n)]))),e.remove()}(e)}}};function oo(e){const{node:t,hub:{file:r}}=e;let n;if(ro.types.isStringLiteral(t.name)){const t=(0,to.getTagTemplate)(e);n=t&&(0,to.resolveRelativePath)(r,t)}else t.extra?.tagNameImported&&(n=t.extra.tagNameImported);if(!n){const t=h(e);if(t&&e.scope.hasBinding(t))throw e.get("name").buildCodeFrameError(`Local variables must in a dynamic tag unless they are PascalCase. Use \`<\${${t}}/>\` or rename to \`${t.charAt(0).toUpperCase()+t.slice(1)}\`.`);throw e.get("name").buildCodeFrameError("Unable to find entry point for custom tag.")}return n}function ao(e,t,r){if(!r)return void We(qe(t.node));if(!r.props||t.node.arguments?.length)return void Le(e,t.node,qe(t.node));const n=ns(t),s=new Set;if(n){const i=new Map,o=(e,t)=>{const r=qe(t.node),n=i.get(e);n?n.referenceNodes=n.referenceNodes.concat(r):i.set(e,{firstTag:t,referenceNodes:r})};for(const e in n)s.add(n[e].name);const a=t.node.body.attributeTags?t.get("body").get("body"):t.get("attributeTags");for(const t of a)if(t.isMarkoTag())if((0,to.isAttributeTag)(t)){const s=n[h(t)],i=r.props[s.name];i?i.props&&!s.dynamic?ao(e,t,i):o(s.group,t):We(qe(t.node))}else{const e=t.node.extra.attributeTagGroup;let s=!1;for(const t of e)if(r.props[n[t].name]){s=!0;break}s?o(e,t):We(qe(t.node))}for(const{firstTag:t,referenceNodes:r}of i.values())Le(e,t.node,r)}const{attributes:i}=t.node;let o;for(let e=i.length;e--;){const t=i[e];if(ro.types.isMarkoAttribute(t)){if(s.has(t.name)||!r.props[t.name]){We(t.value);continue}s.add(t.name)}o?o.push(t.value):ro.types.isMarkoSpreadAttribute(t)&&(o=[t.value])}o&&Le(e,t.node,o)}function lo(e,t,r,n){if(e.node.arguments?.length){const[s]=e.node.arguments,i=co(e.hub.file,n.relativePath,t.id,r);return void jr(n.tagSection,e.node.extra?.referencedBindings,mo(i),ro.types.isSpreadElement(s)?ro.types.memberExpression(s.argument,ro.types.numericLiteral(0)):s,fr(n.tagSection,n.childScopeBinding),St("inChild",Ge(n.childScopeBinding),ro.types.identifier(i.name)))}if(!t.props||n.circular){const s=e.node.extra?.referencedBindings,i=co(e.hub.file,n.relativePath,t.id,r),o=cs(e);return o.statements.length&&Mr("render",n.tagSection,s,o.statements),void jr(n.tagSection,s,mo(i),us(o.properties),fr(n.tagSection,n.childScopeBinding),St("inChild",Ge(n.childScopeBinding),ro.types.identifier(i.name)))}const s=new Set,i=ns(e);if(i){const o=e.get("attributeTags"),a=new Map,l=(e,r)=>{const n=o[r];let s=a.get(e)?.statements;return s||(s=[],a.set(e,{referencedBindings:n.node.extra?.referencedBindings,statements:s})),ds(o,r,i,s,t.props)};for(const e in i)s.add(i[e].name);for(let e=0;e<o.length;e++){const s=o[e];if(s.isMarkoTag())if((0,to.isAttributeTag)(s)){const o=i[h(s)],a=t.props[o.name];a&&(o.dynamic?e=l(o.group,e):lo(s,a,`${r}_${o.name}`,n))}else s.node.extra?.attributeTagGroup&&(e=l(s.node.extra.attributeTagGroup,e))}for(const[s,{referencedBindings:o,statements:l}]of a){const a=[];for(const l of s){const s=i[l],c=t.props[s.name];if(!c)continue;const p=co(e.hub.file,n.relativePath,c.id,`${r}_${s.name}`);a.push(ro.types.variableDeclarator(rs(s))),jr(n.tagSection,o,mo(p),rs(s),fr(n.tagSection,n.childScopeBinding),St("inChild",Ge(n.childScopeBinding),ro.types.identifier(p.name)))}Mr("render",n.tagSection,o,[ro.types.variableDeclaration("let",a),...l])}}const o=e.node.body.extra?.section;if(o&&!s.has("renderBody")&&(s.add("renderBody"),t.props.renderBody)){const s=(0,to.importNamed)(e.hub.file,n.relativePath,t.props.renderBody.id,`${r}_renderBody`);jr(n.tagSection,void 0,mo(s),ro.types.callExpression(ro.types.identifier(o.name),[Kr]),fr(n.tagSection,n.childScopeBinding),St("inChild",Ge(n.childScopeBinding),ro.types.identifier(s.name)))}const{attributes:a}=e.node,l=[];let c;for(let e=a.length;e--;){const r=a[e];if(ro.types.isMarkoAttribute(r)){if(!t.props[r.name]||s.has(r.name))continue;if(s.add(r.name),c){c.push(ro.types.objectProperty(An(r.name),r.value));continue}l.push(r)}else c?c.push(ro.types.spreadElement(r.value)):c=[ro.types.spreadElement(r.value)]}for(const s of l.reverse()){const i=t.props[s.name],o=co(e.hub.file,n.relativePath,i.id,`${r}_${s.name}`);jr(n.tagSection,s.value.extra?.referencedBindings,mo(o),s.value,fr(n.tagSection,n.childScopeBinding),St("inChild",Ge(n.childScopeBinding),ro.types.identifier(o.name)))}const p=new Set(Object.keys(t.props));for(const e of s)p.delete(e);if(p.size){const s=e.node.extra?.referencedBindings;let i=ho;if(c){const t=e.scope.generateUidIdentifier(`${r}_spread`);c.reverse(),i=e=>ro.types.memberExpression(t,An(e)),Mr("render",n.tagSection,s,[ro.types.variableDeclaration("const",[ro.types.variableDeclarator(t,us(c))])])}for(const o of p){const a=t.props[o],l=co(e.hub.file,n.relativePath,a.id,`${r}_${o}`);jr(n.tagSection,s,mo(l),i(o),fr(n.tagSection,n.childScopeBinding),St("inChild",Ge(n.childScopeBinding),ro.types.identifier(l.name)))}}}function co(e,t,r,n){return po(e,t)?ro.types.identifier(r):(0,to.importNamed)(e,t,r,n)}function po(e,t){const{filename:r}=e.opts;return t===r||"."===t[0]&&no.default.resolve(r,"..",t)===r}function uo(e,...t){return ro.types.expressionStatement(fo(e,...t))}function fo(e,...t){return ro.types.callExpression(e,t.filter(Boolean))}function mo(e){return{identifier:e,hasDownstreamIntersections:go}}function ho(){return ro.types.unaryExpression("void",ro.types.numericLiteral(0))}function go(){return!0}var yo=r("../../node_modules/@marko/babel-utils/dist/index.js"),bo=r("../../browser-shims/compiler/index.js"),xo=Symbol("dynamic tag dom binding"),vo={analyze:{enter(e){(0,yo.assertAttributesOrArgs)(e),ns(e);const t=de(e),r=e.node.extra??={},n=e.get("body"),s=r[xo]=Te("#text",0,t,void 0,r);pe(n),Ie(e,4),Me(n,3),Le(t,e.node,qe(e.node)),Fe(e,s)}},translate:{enter(e){Xt(e,37),Gt(e),nn()&&rr(e)},exit(e){const{node:t}=e,r=t.extra,n=r[xo],s=fe(e);let i=t.name;if(bo.types.isStringLiteral(i)&&(i=(0,yo.importDefault)(e.hub.file,oo(e),i.value)),"class"===r.featureType){const t=(o=e.hub.file.markoOpts,`marko/src/runtime/helpers/tags-compat/${nn()?"html":"dom"}${o.optimize?"":"-debug"}.${"esm"===o.modules?"mjs":"js"}`);(0,yo.importDefault)(e.hub.file,t),nn()?Xr.pushContainer("body",bo.types.expressionStatement(bo.types.callExpression((0,yo.importNamed)(e.hub.file,t,"s"),[bo.types.identifier(i.name),bo.types.stringLiteral((0,yo.loadFileForTag)(e).metadata.marko.id)]))):Xr.pushContainer("body",bo.types.expressionStatement(St("register",bo.types.stringLiteral((0,yo.loadFileForTag)(e).metadata.marko.id),bo.types.identifier(i.name))))}var o;const{properties:a,statements:l}=cs(e),c=[];let p=!1;if(t.arguments?.length)c.push(...t.arguments),a.length?(p=!0,c.push(us(a))):p=t.arguments.length>1||bo.types.isSpreadElement(t.arguments[0]);else{const e=ps(a);e?(a.splice(a.indexOf(e),1),c.push(us(a),e.value)):c.push(us(a))}if(nn()){nr(e),Fr(e.get("body"));const r=er(e);t.var&&(p||1!==c.length||c.push(bo.types.unaryExpression("void",bo.types.numericLiteral(0))),c.push(St("register",bo.types.arrowFunctionExpression([],bo.types.blockStatement([])),bo.types.stringLiteral(Nr(s,t.var.extra?.binding)),me(s))));const o=Xr.scope.generateUidIdentifier("dynamicScope"),a=p?St("dynamicTagArgs",o,i,bo.types.arrayExpression(c)):St("dynamicTagInput",o,i,...c);l.push(bo.types.variableDeclaration("const",[bo.types.variableDeclarator(o,St("peekNextScope"))])),l.push(t.var?bo.types.variableDeclaration("const",[bo.types.variableDeclarator(t.var,a)]):bo.types.expressionStatement(a)),r`${St("markResumeControlEnd",me(s),Ge(n))}`,wr(s).set(bo.types.stringLiteral(Ge(n).value+"!"),St("writeExistingScope",o)),wr(s).set(bo.types.stringLiteral(Ge(n).value+"("),St("normalizeDynamicRenderer",bo.types.isIdentifier(i)?bo.types.identifier(i.name):i));for(const t of e.replaceWithMultiple(l))t.skip()}else{const s=fe(e),o=ue(e.get("body")),a=Sr(s,n,"dynamicTagName");if(a.build=()=>St("conditional",Ge(n),Ar(a,[Kr]),Cr(a)),a.hasDownstreamIntersections=()=>!0,jr(s,t.name.extra?.referencedBindings,a,o?bo.types.logicalExpression("||",i,bo.types.callExpression(bo.types.identifier(o.name),[Kr])):i),e.node.var){const t=bo.types.stringLiteral(Ge(r[xo]).value+"!"),i=Er(e.node.var.extra.binding);i.register=!0,i.buildAssignment=(e,r)=>bo.types.callExpression(kt("tagVarSignalChange"),[bo.types.memberExpression(ur(i.section,e),t,!0),r]),Mr("render",s,n,bo.types.expressionStatement(St("setTagVar",Kr,t,i.identifier)))}if(c.length){const r=p?bo.types.arrayExpression(c):c[0],i=bo.types.arrowFunctionExpression([],l.length?bo.types.blockStatement(l.concat(bo.types.returnStatement(r))):r),a=Xr.scope.generateUidIdentifier(e.get("name").toString()+"_input");let d=!1;jr(s,t.extra?.referencedBindings,{get identifier(){return d||(Xr.pushContainer("body",bo.types.variableDeclaration("const",[bo.types.variableDeclarator(a,St("dynamicTagAttrs",Ge(n),o&&bo.types.identifier(o.name),p&&bo.types.numericLiteral(1)))])),d=!0),a},hasDownstreamIntersections:()=>!0},i)}e.remove()}}}},wo={transform:{enter(e){const t=e.get("attributes");for(let r=0;r<t.length;r++){const n=t[r];if(Qi.types.isMarkoAttribute(n.node)&&n.node.bound){n.node.bound=!1;const t=ko(e,n);if(null===t)throw n.buildCodeFrameError("Attributes may only be bound to identifiers or member expressions");e.node.attributes.splice(++r,0,Qi.types.markoAttribute(n.node.name+"Change",t)),e.scope.crawl()}}}},analyze:{enter(e){const t=(0,Hi.getTagDef)(e),r=le(e),n=t?.analyzer?.hook;if(n)Pt(n,e);else if(0!==r)switch(r){case 1:io.analyze.enter(e);break;case 3:eo.analyze.enter(e);break;case 2:vo.analyze.enter(e)}else Fn.analyze.enter(e)},exit(e){const t=(0,Hi.getTagDef)(e)?.analyzer?.hook;t&&Nt(t,e)}},translate:{enter(e){const t=(0,Hi.getTagDef)(e),r=e.node.extra;if(t?.translator)return t.translator.path&&e.hub.file.metadata.marko.watchFiles.push(t.translator.path),void Pt(t.translator.hook,e);for(const t of e.get("attributes"))if(t.isMarkoAttribute()){if(t.node.arguments)throw t.buildCodeFrameError(`Unsupported arguments on the \`${t.node.name}\` attribute.`);if(t.node.modifier){if(!(0,Hi.isNativeTag)(t.parentPath))throw t.buildCodeFrameError(`Unsupported modifier \`${t.node.modifier}\`.`);t.node.name+=`:${t.node.modifier}`}}if(r.tagNameDynamic&&r.tagNameNullable&&!e.get("name").isIdentifier()&&nn()){const t=e.scope.generateUidIdentifier("tagName"),[r]=e.insertBefore(Qi.types.variableDeclaration("const",[Qi.types.variableDeclarator(t,e.node.name)]));r.skip(),e.set("name",t)}switch(r.tagNameType){case 0:Fn.translate.enter(e);break;case 1:io.translate.enter(e);break;case 2:vo.translate.enter(e);break;case 3:eo.translate.enter(e)}},exit(e){const t=(0,Hi.getTagDef)(e)?.translator;if(t)Nt(t.hook,e);else switch(e.node.extra.tagNameType){case 0:Fn.translate.exit(e);break;case 1:io.translate.exit(e);break;case 2:vo.translate.exit(e);break;case 3:eo.translate.exit(e)}}}};function ko(e,t){if(Qi.types.isIdentifier(t.node.value)){const r=e.scope.generateUidIdentifier("new_"+t.node.value.name);return Qi.types.functionExpression(null,[r],Qi.types.blockStatement([Qi.types.expressionStatement(Qi.types.assignmentExpression("=",t.node.value,r))]))}if(Qi.types.isMemberExpression(t.node.value)){const e=t.node.value.property;return Qi.types.isPrivateName(e)?null:Qi.types.isIdentifier(e)?Qi.types.memberExpression(Qi.types.cloneNode(t.node.value.object),Qi.types.identifier(e.name+"Change")):Qi.types.memberExpression(Qi.types.cloneNode(t.node.value.object),Qi.types.binaryExpression("+",Qi.types.cloneNode(e),Qi.types.stringLiteral("Change")),!0)}return null}r("../../browser-shims/compiler/index.js");var So=function(e){const t={migrate:{},transform:{},analyze:{},translate:{}};for(const r in e){const n=r,s=e[n];s.migrate&&(t.migrate[n]=s.migrate),s.transform&&(t.transform[n]=s.transform),s.analyze&&(t.analyze[n]=s.analyze),s.translate&&(t.translate[n]=s.translate)}return t}({Program:tn,Function:Nn,AssignmentExpression:Cn,UpdateExpression:Dn,ReferencedIdentifier:Xi,ImportDeclaration:Ri,MarkoDocumentType:Oi,MarkoDeclaration:$i,MarkoCDATA:Di,MarkoText:{translate:{exit(e){er(e)`${e.node.value}`,Gt(e),e.remove()}}},MarkoTag:wo,MarkoPlaceholder:Ji,MarkoScriptlet:Ki,MarkoComment:Ui}),{transform:Eo,analyze:Ao,translate:Co}=So,To=[["../../node_modules/@marko/translator-tags/dist",{...Li,migrate:So.migrate}]];function Io(e,t){return[`@marko/runtime-tags${t?"":"/debug"}/${"html"===e?"html":"dom"}`]}}}]);
//# sourceMappingURL=215.cd8dba7a.js.map