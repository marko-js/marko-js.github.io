"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[996],{"./try-online-new/components/preview.marko":(e,n,t)=>{t.r(n),t.d(n,{default:()=>A});var o=t("../../node_modules/marko/dist/runtime/vdom/index.js"),r=t("../../node_modules/path-browserify/index.js"),s=t.n(r),l=t("../../node_modules/prettier/standalone.js"),i=t("../../node_modules/prettier/parser-html.js"),a=t.n(i),d=t("../../node_modules/prettier/parser-babel.js"),m=t.n(d),c=t("../utils/highlight.js"),u=t.n(c),p=t("../utils/compiler/index.js"),v=t("../../node_modules/memfs/lib/index.js"),h=t("../../node_modules/@marko/tags-api-preview/dist/transform/native-tag-var/index-browser.js"),f=t.n(h),w=t("../../node_modules/@marko/tags-api-preview/dist/transform/cached-function/index-browser.js"),g=t("../../node_modules/@marko/tags-api-preview/dist/util/replace-assignments/index.js"),k=t.n(g),b=t("../../node_modules/marko/dist/runtime/vdom/helpers/v-element.js"),j=t.n(b),_=t("../../node_modules/@marko/tags-api-preview/dist/components/_instance/index.marko"),y=t("../../node_modules/marko/dist/runtime/helpers/render-tag.js"),x=t.n(y),S=t("../../node_modules/@marko/tags-api-preview/dist/components/effect/index.js"),C=t.n(S),T=t("../../node_modules/@marko/tags-api-preview/dist/translate/track-rendering/index.js"),E=t("../../node_modules/marko/dist/runtime/components/renderer.js"),F=t.n(E),N=t("../../node_modules/marko/dist/runtime/components/registry/index-browser.js"),I=t("../../node_modules/marko/dist/runtime/components/defineComponent.js"),O=t.n(I);const M="6Z/ZKJFt",Z=(0,o.t)(M),A=Z,B=j()("small",null,"6",null,1,0).t("Open the dev tools to view the full error.");(0,N.r)(M,(()=>Z));const H={onCreate(){this.state={}}};Z._=F()((function(e,n,t,o,r){(0,T.begin)();try{var i,d=o,c=r,h=e=>i=e;const{type:g,files:b,selectedFile:j,onSelectError:y,onSyntaxError:S}=e,E=d.elId("@0"),F=s().join("/",E,j.path),N=s().join("/",E,b[0].path),I="0"in c?c[0]:c[0]=null,O=e=>d.setState("0",e),M="1"in c?c[1]:c[1]=null,Z=e=>d.setState("1",e),A=/(.+?)(?:\((\d+),(\d+)\)|:(\d+)): (.*(?=\s+\d+ | ))/;I?(n.be("div",{class:"preview-error"},"0",o,null,1),n.be("h1",{class:"error-name"},"1",o,null,1),n.t(I.name,o),I.file&&(n.t(" :  ",o),n.be("a",null,"2",o,null,0,{onclick:t.d("click",(function(){y(I)}),!1)}),n.t(I.file.slice(1),o),n.t("(",o),n.t(I.line,o),n.t(",",o),n.t(I.column,o),n.t(")",o),n.ee()),n.ee(),n.be("div",null,"3",o,null,0),n.t(I.message,o),n.ee(),F!==I.file&&(I.codeFrame?(n.be("pre",null,"4",o,null,0),n.be("code",null,"5",o,null,0),n.t(I.codeFrame,o),n.ee(),n.ee()):n.n(B,o)),n.ee()):"preview"===g?x()(_.default,{renderBody:(e,n,t,o)=>{var r=t;const s=f()(t,"0");e.e("div",{class:"preview-output"},"@0",r,0,1),h(s)}},n,t,"7"):(n.be("div",{class:"preview-compiled"},"8",o,null,1),n.h(M,o),n.ee()),C()(o,(0,w.cache)((0,w.cached)(d,[I,g,b,E,N,F,S])||function(){const e=!I&&"preview"===g&&i(),n=setTimeout((async()=>{for(const e of b){const n=s().join("/",E,e.path);v.vol.mkdirSync(s().dirname(n),{recursive:!0}),v.vol.writeFileSync(n,e.content)}try{if("preview"===g||"html"===g){const n=await(0,p.g)({entry:N,markoOptions:{output:"vdom"}}),t=(0,eval)(n.js),o=await t.render({});if("preview"===g&&e){let t=e.shadowRoot;if(t)for(;t.firstChild;)t.removeChild(t.firstChild);else t=e.attachShadow({mode:"open"});const r=document.createElement("style");r.innerHTML=n.css,t.createElementNS=document.createElementNS.bind(document),t.createTextNode=document.createTextNode.bind(document),t.appendChild(r),o.appendTo(t)}else k()(Z,u()("html",(0,l.format)(String(o),{parser:"html",plugins:[a()]})))}else{const e="compiled-html"===g?"html":"vdom",n=await(0,p.M)({entry:F,markoOptions:{output:e}});k()(Z,u()("javascript",(0,l.format)(n.replaceAll(`${E}/`,""),{parser:"babel",plugins:[m()]})))}k()(O,null)}catch(e){k()(Z,null);const n="SyntaxError"===e.name&&A.exec(e.message);if(n){let[t,o,r,l,i,a]=n;i&&(r=i,l=0),o=s().resolve(o),r=parseInt(r,10),l=parseInt(l,10)+1;const d=e.message.slice(t.length);k()(O,{name:e.name,file:o,message:a,line:r,column:l,codeFrame:d}),o===F&&S&&S(I)}else k()(O,e),console.error(e)}}),150);return()=>{clearTimeout(n);try{v.vol.rmdirSync(E,{recursive:!0})}catch(e){}}}))}finally{(0,T.end)()}}),{t:M},H),Z.Component=O()(H,Z._)}}]);
//# sourceMappingURL=996.a1919cf1.js.map