"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[215],{"../../node_modules/@marko/translator-tags/dist/index.js":(e,t,r)=>{var n,s=r("../../node_modules/buffer/index.js").Buffer,i=Object.create,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,c=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,d=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of l(t))p.call(e,s)||s===r||o(e,s,{get:()=>t[s],enumerable:!(n=a(t,s))||n.enumerable});return e},u=(e,t,r)=>(r=null!=e?i(c(e)):{},d(!t&&e&&e.__esModule?r:o(r,"default",{value:e,enumerable:!0}),e)),f={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(f,{analyze:()=>So,getRuntimeEntryFiles:()=>Co,internalEntryBuilder:()=>$,taglibs:()=>Ao,transform:()=>ko,translate:()=>Eo}),e.exports=(n=f,d(o({},"__esModule",{value:!0}),n));var m=r("../../node_modules/@marko/babel-utils/dist/index.js");function h(e){return e.node.name.value}var g="marko-core";function y(e){const t=e.isMarkoTag()&&(0,m.getTagDef)(e)?.taglibId;return t===g||"@marko/translator-interop-class-tags"===t}function b(e,t){return y(e)&&h(e)===t}function x(e){if(y(e))switch(h(e)){case"if":case"else-if":case"else":return!0}return!1}var v=r("../../node_modules/@marko/babel-utils/dist/index.js"),w={transform:[e=>{(0,v.getTagDef)(e)?.renderer||e.replaceWithMultiple(e.node.body.body)}]},k=r("../../browser-shims/compiler/index.js"),S={migrate:[e=>{const t=e.node.var;if(!t||"Identifier"===t.type&&"input"===t.name)e.remove();else{const r=k.types.markoTag(k.types.stringLiteral("const"),[k.types.markoAttribute("value",k.types.identifier("input"))],k.types.markoTagBody([]));r.var=t,e.replaceWith(r)}}],attributes:{},autocomplete:[{displayText:"attrs/{ ... }",description:"Use to receive the attributes passed into this template.",snippet:"attrs/{ $1 }$2"}]},E=r("../../node_modules/@marko/babel-utils/dist/index.js"),A=r("../../browser-shims/compiler/index.js"),C={parse(e){const{node:t,hub:{file:r}}=e,n=t.rawValue,s=n.replace(/^client\s*/,"").trim(),i=t.name.start+(n.length-s.length);let o=(0,E.parseStatements)(r,s,i,i+s.length);1===o.length&&A.types.isBlockStatement(o[0])&&(o=o[0].body),e.replaceWith(A.types.markoScriptlet(o,!0,"client"))},parseOptions:{statement:!0,rawOpenTag:!0},autocomplete:[{displayText:"client <statement>",description:"A JavaScript statement which is only evaluated once your template is loaded on the client.",descriptionMoreURL:"https://markojs.com/docs/syntax/#client-javascript"}]},T=r("../../node_modules/@marko/babel-utils/dist/index.js"),I=r("../../browser-shims/compiler/index.js");function M(e){for(const t of e.get("attributes"))if(t.isMarkoSpreadAttribute())throw t.buildCodeFrameError(`The \`${e.get("name").node.value}\` tag does not support \`...spread\` attributes.`)}function j(e){if(e.node.body.body.length)throw e.get("name").buildCodeFrameError(`The \`${e.get("name").node.value}\` tag does not support body content.`)}var P=r("../../node_modules/@marko/babel-utils/dist/index.js"),N=r("../../browser-shims/compiler/index.js"),B=u(r("../../node_modules/path-browserify/index.js"));function D(e){if(e.downstreamExpressions.size)return!0;for(const t of e.aliases)if(D(t))return!0;for(const t of e.propertyAliases.values())if(D(t))return!0;return!1}var L=r("../../node_modules/@marko/babel-utils/dist/index.js"),U=r("../../browser-shims/compiler/index.js"),O=Symbol(),$={build(e){const t=e[O];if(!t)throw e.path.buildCodeFrameError("Unable to build hydrate code, no files were visited before finalizing the build");const r=t.imports.map((e=>U.types.importDeclaration([],U.types.stringLiteral(e))));return t.init&&(r.unshift(U.types.importDeclaration([U.types.importSpecifier(U.types.identifier("init"),U.types.identifier("init"))],U.types.stringLiteral(`@marko/runtime-tags/${e.markoOpts.optimize?"":"debug/"}dom`))),r.push(U.types.expressionStatement(U.types.callExpression(U.types.identifier("init"),[])))),r},visit(e,t,r){const n=t[O]||={imports:[],init:!1},{analyzedTags:s}=e.metadata.marko;n.imports.push((0,L.resolveRelativePath)(t,e.opts.filename)),n.init||=e.path.node.extra.hasInteractiveChild||e.path.node.extra.isInteractive||!1;for(const e of s||[])r(e)}},R=r("../../browser-shims/compiler/index.js");function _(e){let t=e;do{t=t.parentPath}while(t&&!z(t));return t}function F(e){let t=e;for(;!z(t.parentPath);)if(t=t.parentPath,"AssignmentExpression"===t.type){const e=V(t);if(z(e.parentPath)){t=t.get("right");break}t=e.parentPath}return t}function z(e){switch(e.type){case"MarkoTag":case"MarkoTagBody":case"MarkoAttribute":case"MarkoSpreadAttribute":case"MarkoPlaceholder":case"MarkoScriptlet":return!0;default:return!1}}function W(e){switch(e.type){case"FunctionExpression":case"ArrowFunctionExpression":return!0;default:return!1}}function V(e){switch(e.parent.type){case"ArrayPattern":case"ObjectPattern":case"ObjectProperty":return V(e.parentPath);default:return e}}function q(e){if(e){if(!Array.isArray(e))return J(e);for(const t of e)if(J(t))return!0}return!1}function J(e){switch(e.type){case 1:case 2:return!0;default:return!e.upstreamExpression||q(e.upstreamExpression.referencedBindings)}}function Z(e,t){return e?Array.isArray(e)?(e.push(t),e):[e,t]:t}function G(e,t){if(e)if(Array.isArray(e)){let r=0;for(const n of e)t(n,r++)}else t(e,0)}function X(e,t){if(e){if(Array.isArray(e))return e.find(t);if(t(e,0))return e}}function K(e,t,r){let n=t.length,s=0;for(;s<n;){const i=s+n>>>1,o=t[i],a=e(o,r);if(0===a)return o;a>0?n=i:s=i+1}}function H(e,t,r){const n=t.length;let s=n,i=0;for(;i<s;){const n=i+s>>>1,o=e(t[n],r);if(0===o)return t;o>0?s=n:i=n+1}const o=new Array(n+1);for(let e=0;e<i;e++)o[e]=t[e];let a=r;for(;i<n;){const e=a;a=t[i],o[i++]=e}return o[n]=a,o}function Q(e,t,r){const n=e(t,r);return 0===n?t:n<0?[t,r]:[r,t]}var Y=r("../../node_modules/@marko/babel-utils/dist/index.js"),ee=r("../../browser-shims/compiler/index.js"),te=e=>{const t=new WeakMap;return[()=>{let r=t.get(_r);return r||t.set(_r,r=e()),r},e=>{t.set(_r,e)}]};function re(e,t){return[r=>{const n=_r.state[e]??={};return n[r.id]??=t&&t(r)},(t,r)=>{(_r.state[e]??={})[t.id]=r}]}var ne=r("../../node_modules/@marko/babel-utils/dist/index.js"),se=r("../../browser-shims/compiler/index.js");function ie(e,t){return e.start=t.start,e.loc=t.loc,e.end=t.end,e}var oe=/^<.*>$|\.marko$/,ae=/^[A-Z][a-zA-Z0-9_$]*$/;function le(e){const t=e.node.extra??={};if(void 0===t.tagNameType){const r=e.get("name");if(r.isStringLiteral()){if(t.tagNameType="@"===r.node.value[0]?3:(0,ne.isNativeTag)(e)?0:1,1===t.tagNameType){const n=r.node.value,s=e.scope.getBinding(n)?.identifier;if(s&&ae.test(s.name)){const e=ie(se.types.identifier(n),r.node);e.extra={referencedBindings:s.extra?.binding},ce(r.replaceWith(e)[0],t)}else{const r=(0,ne.loadFileForTag)(e),n=r?.ast.program;"class"===n?.extra.featureType&&(t.tagNameType=2,t.featureType="class")}}t.tagNameNullable=t.tagNameNullable=!1}else ce(r,t);void 0===t.tagNameType&&(t.tagNameType=2)}return t.tagNameType}function ce(e,t){const r=[e];let n,s,i,o=!1;for(;(n=r.pop())&&2!==s;)if(n.isConditionalExpression())r.push(n.get("consequent")),n.node.alternate&&r.push(n.get("alternate"));else if(n.isLogicalExpression())"||"===n.node.operator?r.push(n.get("left")):o=!0,r.push(n.get("right"));else if(n.isAssignmentExpression())r.push(n.get("right"));else if(n.isBinaryExpression())s="+"!==n.node.operator||void 0!==s?2:0;else if(n.isStringLiteral()||n.isTemplateLiteral())s=void 0!==s?2:0;else if(n.isNullLiteral())o=!0;else if(n.isIdentifier()){if("undefined"===n.node.name){o=!0;continue}const t=n.scope.getBinding(n.node.name);if(!t){s=2;continue}if("module"===t.kind){const r=t.path.parent;if(oe.test(r.source.value)&&r.specifiers.some((e=>se.types.isImportDefaultSpecifier(e)))){const t=(0,ne.resolveTagImport)(e,r.source.value)||r.source.value;0===s||i&&i!==t?(s=2,i=void 0):(s=1,i=t)}else s=2;continue}const a=t.path;if(a.isMarkoTag()&&"local"===t.kind){const e=a.get("name").node.value;if("const"===e){r.push(a.get("attributes")[0].get("value"));continue}if("let"===e){s=2;continue}continue}s=2}else s=2;t.tagNameType=s,t.tagNameNullable=o,t.tagNameDynamic=!0,1===s&&i&&(t.tagNameImported=i)}function pe(e){const t=e.node.extra??={};let r=t.section;if(!r&&("Program"===e.type||e.get("body").length)){const n=e.parentPath?de(e.parentPath):void 0,s=e.parentPath?.get("name"),i=e.isProgram()?"":_r.scope.generateUid(s.toString()+"Body"),o=e.hub.file.path.node.extra??={},a=o.sections??=[];r=t.section={id:a.length,name:i,depth:n?n.depth+1:0,parent:n,params:void 0,closures:void 0,bindings:void 0,content:ve(e),upstreamExpression:void 0,hasCleanup:!1},a.push(r)}return r}function de(e){let t=e;for(;;){if("Program"===t.type||"MarkoTagBody"===t.type&&0!==le(t.parentPath)&&"html-comment"!==t.parent.name.value)return pe(t);t=t.parentPath}}function ue(e){return e.node.extra?.section}function fe(e){let t,r=e;for(;void 0===(t=r.node.extra?.section);)r=r.parentPath;return t}var[me]=re("scopeIdIdentifier",(e=>_r.scope.generateUidIdentifier(`scope${e.id}_id`))),[he,ge]=re("parentIsOwner",(()=>!1)),[ye]=re("scopeIdentifier",(()=>ee.types.identifier("undefined"))),be=(e,t)=>{const r=ye(e);return t||"undefined"!==r.name||(r.name=_r.scope.generateUid(`scope${e.id}_`)),r};function xe(e){const{sections:t}=_r.node.extra;t?.forEach(e)}function ve(e){const t=e.get("body"),r={startType:null,endType:null,singleChild:!0};for(let e=t.length;e--;){const n=we(t[e],"endType",r);if(null!==n){r.endType=n;for(let n=0;n<e;n++){const e=we(t[n],"startType");if(null!==e)return r.startType=e,r.singleChild=!1,r}return r.startType=we(t[e],"startType"),r}}return null}function we(e,t,r){if(ee.types.isMarkoText(e))return 4;if(ee.types.isMarkoPlaceholder(e))return 2;if(ee.types.isMarkoScriptlet(e)||ee.types.isMarkoComment(e))return null;if(ee.types.isMarkoTag(e.node)){const n=e;if((0,Y.isNativeTag)(n))return 3;if((0,Y.isAttributeTag)(n))return null;if(ee.types.isStringLiteral(e.node.name)){switch(e.node.name.value){case"html-comment":return 0;case"let":case"const":case"attrs":case"effect":case"lifecycle":case"return":case"id":case"define":return null}const s=(0,Y.loadFileForTag)(n)?.ast.program.extra.section;if(s)return s.content?(r&&!s.content.singleChild&&"endType"===t&&(r.startType=s.content.startType,r.singleChild=!1),s.content[t]):null}}return 1}var ke=e=>{const t=e.upstreamExpression;return!t||q(t.referencedBindings)},Se=(e,t)=>!!X(e.closures,(r=>(!t||e.parent===r.section)&&q(r))),[Ee]=te((()=>new Set)),[Ae,Ce]=te((()=>0));function Te(e,t,r,n,s,i){const o=Ae(),a={id:o,name:e,type:t,section:r,property:i,excludeProperties:void 0,serialize:!1,aliases:new Set,propertyAliases:new Map,upstreamAlias:n,upstreamExpression:s,downstreamExpressions:new Set,export:void 0};if(i){const e=n.propertyAliases.get(i);e?(a.property=void 0,a.upstreamAlias=e,e.aliases.add(a)):n.propertyAliases.set(i,a)}else n&&n.aliases.add(a);return Ce(o+1),Ee().add(a),a}function Ie(e,t,r,n,s){const i=e.node.var;if(i){const o=de(e),a=Ve(r);r?.downstreamExpressions.delete(n),Pe(i,t,e.scope,o,a,n,void 0,s)}}function Me(e,t,r,n){const s=e.node.params;if(e.node.body.length&&s.length){r?.downstreamExpressions.delete(n);const i=de(e),o=Ve(r),a=o||((e.node.extra??={}).binding=Te(e.scope.generateUid("params_"),t,i,o,n,void 0));i.params=a;for(let r=0;r<s.length;r++)Pe(s[r],t,e.scope,i,a,void 0,r+"")}}function je(e,t){switch(e.type){case"ObjectPattern":for(const r of e.properties)je(r,t);break;case"ArrayPattern":for(const r of e.elements)null!==r&&je(r,t);break;case"RestElement":je(e.argument,t);break;case"ObjectProperty":je(e.value,t);break;case"Identifier":e.name===t.name&&((e.extra??={}).source=t)}}function Pe(e,t,r,n,s,i,o,a){switch(e.type){case"Identifier":(e.extra??={}).binding=Te(e.name,t,n,s,i,o),function(e,t){const{identifier:r,referencePaths:n,constantViolations:s}=e,i=r.extra.binding;for(const e of n)Ne(e,i);for(const e of s){const r=e.node;R.types.isAssignmentExpression(r)&&je(r.left,i),R.types.isUpdateExpression(r)&&je(r.argument,i),R.types.isAssignmentExpression(r)&&R.types.isIdentifier(r.left)&&"="!==r.operator&&Ne(e.get("left"),i),t&&(e.isUpdateExpression()?Ne(e.get("argument"),t):e.isAssignmentExpression()&&Ne(e.get("left"),t))}}(r.getBinding(e.name),a);break;case"ObjectPattern":{const a=(o?s.propertyAliases.get(o):s)||((e.extra??={}).binding=Te(r.generateUid("pattern_"),t,n,s,i,o));for(const s of e.properties)if("RestElement"===s.type)Pe(s.argument,t,r,n,a,void 0,o);else{let e;if("Identifier"===s.key.type)e=s.key.name;else{if("StringLiteral"!==s.key.type)throw new Error("computed keys not supported in object pattern");e=s.key.value}Pe(s.value,t,r,n,a,void 0,e)}break}case"ArrayPattern":{const a=(o?s.propertyAliases.get(o):s)||((e.extra??={}).binding=Te(r.generateUid("pattern_"),t,n,s,i,o));let l=-1;for(const s of e.elements)l++,s&&("RestElement"===s.type?Pe(s.argument,t,r,n,a,void 0,o):Pe(s,t,r,n,a,void 0,`${l}`));break}case"AssignmentPattern":Pe(e.left,t,r,n,s,i,o)}}function Ne(e,t){const r=function(e){let t=e;if(!t.isProgram()){for(;!W(t);){if(z(t))return;t=t.parentPath}return t}}(e.scope.path),n=F(r||e),s=de(n),i=t,o=n.node.extra??={};if(Fe(n,t),je(e.node,t),r){let e=o;r!==n&&(e=r.node.extra??={},e.referencedBindings=Je(s,e.referencedBindings,i))}}var[Be]=te((()=>new Map));function De(e,t,r){Be().set(t,{section:e,nodes:r})}function Le(e,t){const r=e.length,n=r-t.length;if(0!==n)return n;for(let n=0;n<r;n++){const r=$e.compare(e[n],t[n]);if(0!==r)return r}return 0}function Ue(e,t){for(const r of t)if(!e.has(r))return!1;return!0}function Oe(e){const t=new Set,r=new Set;return function e(n){if(4===n.type||3===n.type){let s,i=n;for(;s=i.upstreamAlias;)i=s;if(i.upstreamExpression){if(t.has(i))return;t.add(i),G(i.upstreamExpression.referencedBindings,e)}else r.add(i)}else r.add(n)}(e),r}var $e=new class{constructor(e){this.compare=e}add(e,t){return e?Array.isArray(e)?H(this.compare,e,t):Q(this.compare,e,t):t}union(e,t){return e?Array.isArray(e)?t?Array.isArray(t)?function(e,t,r){const n=t.length,s=r.length;let i=0,o=0;const a=[];for(;i<n&&o<s;){const n=t[i],s=r[o],l=e(n,s);0===l?(i++,o++,a.push(n)):l<0?(i++,a.push(n)):(o++,a.push(s))}if(n===s&&i===n)return t;for(;i<n;)a.push(t[i++]);for(;o<s;)a.push(r[o++]);return a}(this.compare,e,t):H(this.compare,e,t):e:t?Array.isArray(t)?H(this.compare,[...t],e):Q(this.compare,t,e):e:t}find(e,t){if(e){if(Array.isArray(e))return K(this.compare,e,t);if(0===this.compare(e,t))return e}}}((function(e,t){return(e.section.id-t.section.id||e.type!==t.type&&(0===e.type||0===t.type))&&e.type-t.type||e.id-t.id})),[Re,_e]=re("intersections",(()=>[]));function Fe(e,t){const r=e.node.extra??={},n=de(e);r.referencedBindings=Je(n,r.referencedBindings,t),t.downstreamExpressions.add(r)}var[ze]=te((()=>new Set));function We(e){const t=ze();if(Array.isArray(e))for(const r of e)t.add(r);else t.add(e)}function Ve(e){return e&&(e.property?e:e.upstreamAlias||e)}function qe(e,t=[]){if(e.arguments)for(const r of e.arguments)t.push(r);for(const r of e.attributes)t.push(r.value);for(const r of e.attributeTags)switch(r.type){case"MarkoTag":qe(r,t);break;case"MarkoScriptlet":for(const e of r.body)t.push(e)}return t}function Je(e,t,r){return e!==r.section&&(e.closures=$e.add(e.closures,r)),Ze(e,$e.add(t,r))}function Ze(e,t){if(!t||!Array.isArray(t))return t;const r=Re(e);let n=K(Le,r,t);return n||(_e(e,H(Le,r,t)),n=t),n}function Ge(e){return Kr().optimize?R.types.numericLiteral(e.id):R.types.stringLiteral(e.name+(0===e.type?`/${e.id}`:""))}function Xe(e,t){let r=!t.downstreamExpressions.size;for(const n of t.aliases)Xe(e,n)?t.aliases.delete(n):r=!1;for(const[n,s]of t.propertyAliases)Xe(e,s)?t.propertyAliases.delete(n):r=!1;return r&&e.delete(t),r}var Ke=r("../../browser-shims/compiler/index.js"),He=r("../../node_modules/@marko/babel-utils/dist/index.js"),Qe=r("../../browser-shims/compiler/index.js");function Ye(e,t){return t?e:""}Symbol();var et=/^(--|ta|or|li|z)|n-c|i(do|nk|m|t)|w$|we/;function tt(e,t){return t||0===t?`${e}:${"number"==typeof t&&t&&!et.test(e)?t+"px":t}`:""}function rt(e,t,r){switch(typeof e){case"string":return e;case"object":if(null!==e){let n="",s="";if(Array.isArray(e))for(const i of e){const e=rt(i,t,r);""!==e&&(n+=s+e,s=t)}else for(const i in e){const o=r(i,e[i]);""!==o&&(n+=s+o,s=t)}return n}}return""}var{hasOwnProperty:nt}={};function st(e){return at("class",rt(e," ",Ye))}function it(e){return at("style",rt(e,";",tt))}function ot(e,t){return null==(r=t)||!1===r?"":function(e,t){switch(typeof t){case"string":return` ${e+lt(t)}`;case"boolean":return` ${e}`;case"number":return` ${e}=${t}`;case"object":if(t instanceof RegExp)return` ${e+lt(t.source)}`}return` ${e+lt(t+"")}`}(e,t);var r}function at(e,t){return t&&` ${e}=${pt(t)}`}function lt(e){return e?`=${pt(e)}`:""}(function*(){})().constructor,async function*(){}().constructor,(()=>{const e=new Map;for(const t of Object.getOwnPropertyNames(Symbol)){const r=Symbol[t];"symbol"==typeof r&&e.set(r,"Symbol."+t)}})(),new Map([[AggregateError,"AggregateError"],[Array,"Array"],[Array.from,"Array.from"],[Array.isArray,"Array.isArray"],[Array.of,"Array.of"],[ArrayBuffer,"ArrayBuffer"],[ArrayBuffer.isView,"ArrayBuffer.isView"],[Atomics.add,"Atomics.add"],[Atomics.and,"Atomics.and"],[Atomics.compareExchange,"Atomics.compareExchange"],[Atomics.exchange,"Atomics.exchange"],[Atomics.isLockFree,"Atomics.isLockFree"],[Atomics.load,"Atomics.load"],[Atomics.notify,"Atomics.notify"],[Atomics.or,"Atomics.or"],[Atomics.store,"Atomics.store"],[Atomics.sub,"Atomics.sub"],[Atomics.wait,"Atomics.wait"],[BigInt,"BigInt"],[BigInt.asIntN,"BigInt.asIntN"],[BigInt.asUintN,"BigInt.asUintN"],[BigInt64Array,"BigInt64Array"],[BigInt64Array.from,"BigInt64Array.from"],[BigInt64Array.of,"BigInt64Array.of"],[BigUint64Array,"BigUint64Array"],[BigUint64Array.from,"BigUint64Array.from"],[BigUint64Array.of,"BigUint64Array.of"],[Boolean,"Boolean"],[console.assert,"console.assert"],[console.clear,"console.clear"],[console.count,"console.count"],[console.countReset,"console.countReset"],[console.debug,"console.debug"],[console.dir,"console.dir"],[console.dirxml,"console.dirxml"],[console.error,"console.error"],[console.group,"console.group"],[console.groupCollapsed,"console.groupCollapsed"],[console.groupEnd,"console.groupEnd"],[console.info,"console.info"],[console.log,"console.log"],[console.table,"console.table"],[console.time,"console.time"],[console.timeEnd,"console.timeEnd"],[console.timeLog,"console.timeLog"],[console.timeStamp,"console.timeStamp"],[console.trace,"console.trace"],[console.warn,"console.warn"],[DataView,"DataView"],[Date,"Date"],[Date.now,"Date.now"],[Date.parse,"Date.parse"],[Date.UTC,"Date.UTC"],[decodeURI,"decodeURI"],[decodeURIComponent,"decodeURIComponent"],[encodeURI,"encodeURI"],[encodeURIComponent,"encodeURIComponent"],[Error,"Error"],[EvalError,"EvalError"],[Float32Array,"Float32Array"],[Float32Array.from,"Float32Array.from"],[Float32Array.of,"Float32Array.of"],[Float64Array,"Float64Array"],[Float64Array.from,"Float64Array.from"],[Float64Array.of,"Float64Array.of"],[Function,"Function"],[globalThis.atob,"atob"],[globalThis.btoa,"btoa"],[globalThis.clearImmediate,"clearImmediate"],[globalThis.clearInterval,"clearInterval"],[globalThis.clearTimeout,"clearTimeout"],[globalThis.crypto?.getRandomValues,"crypto.getRandomValues"],[globalThis.crypto?.randomUUID,"crypto.randomUUID"],[globalThis.fetch,"fetch"],[globalThis.performance?.now,"performance.now"],[globalThis.queueMicrotask,"queueMicrotask"],[globalThis.setImmediate,"setImmediate"],[globalThis.setInterval,"setInterval"],[globalThis.setTimeout,"setTimeout"],[globalThis.structuredClone,"structuredClone"],[globalThis.URL,"URL"],[globalThis.URLSearchParams,"URLSearchParams"],[globalThis.WritableStream,"WritableStream"],[Int16Array,"Int16Array"],[Int16Array.from,"Int16Array.from"],[Int16Array.of,"Int16Array.of"],[Int32Array,"Int32Array"],[Int32Array.from,"Int32Array.from"],[Int32Array.of,"Int32Array.of"],[Int8Array,"Int8Array"],[Int8Array.from,"Int8Array.from"],[Int8Array.of,"Int8Array.of"],[Intl.Collator,"Intl.Collator"],[Intl.DateTimeFormat,"Intl.DateTimeFormat"],[Intl.DisplayNames,"Intl.DisplayNames"],[Intl.getCanonicalLocales,"Intl.getCanonicalLocales"],[Intl.ListFormat,"Intl.ListFormat"],[Intl.Locale,"Intl.Locale"],[Intl.NumberFormat,"Intl.NumberFormat"],[Intl.PluralRules,"Intl.PluralRules"],[Intl.RelativeTimeFormat,"Intl.RelativeTimeFormat"],[Intl.Segmenter,"Intl.Segmenter"],[Intl.supportedValuesOf,"Intl.supportedValuesOf"],[isFinite,"isFinite"],[isNaN,"isNaN"],[JSON.parse,"JSON.parse"],[JSON.stringify,"JSON.stringify"],[Map,"Map"],[Map.groupBy,"Map.groupBy"],[Math.abs,"Math.abs"],[Math.acos,"Math.acos"],[Math.acosh,"Math.acosh"],[Math.asin,"Math.asin"],[Math.asinh,"Math.asinh"],[Math.atan,"Math.atan"],[Math.atan2,"Math.atan2"],[Math.atanh,"Math.atanh"],[Math.cbrt,"Math.cbrt"],[Math.ceil,"Math.ceil"],[Math.clz32,"Math.clz32"],[Math.cos,"Math.cos"],[Math.cosh,"Math.cosh"],[Math.exp,"Math.exp"],[Math.expm1,"Math.expm1"],[Math.floor,"Math.floor"],[Math.fround,"Math.fround"],[Math.hypot,"Math.hypot"],[Math.imul,"Math.imul"],[Math.log,"Math.log"],[Math.log10,"Math.log10"],[Math.log1p,"Math.log1p"],[Math.log2,"Math.log2"],[Math.max,"Math.max"],[Math.min,"Math.min"],[Math.pow,"Math.pow"],[Math.random,"Math.random"],[Math.round,"Math.round"],[Math.sign,"Math.sign"],[Math.sin,"Math.sin"],[Math.sinh,"Math.sinh"],[Math.sqrt,"Math.sqrt"],[Math.tan,"Math.tan"],[Math.tanh,"Math.tanh"],[Math.trunc,"Math.trunc"],[Number,"Number"],[Number.isFinite,"Number.isFinite"],[Number.isInteger,"Number.isInteger"],[Number.isNaN,"Number.isNaN"],[Number.isSafeInteger,"Number.isSafeInteger"],[Number.parseFloat,"Number.parseFloat"],[Number.parseInt,"Number.parseInt"],[Object,"Object"],[Object.assign,"Object.assign"],[Object.create,"Object.create"],[Object.defineProperties,"Object.defineProperties"],[Object.defineProperty,"Object.defineProperty"],[Object.entries,"Object.entries"],[Object.freeze,"Object.freeze"],[Object.fromEntries,"Object.fromEntries"],[Object.getOwnPropertyDescriptor,"Object.getOwnPropertyDescriptor"],[Object.getOwnPropertyDescriptors,"Object.getOwnPropertyDescriptors"],[Object.getOwnPropertyNames,"Object.getOwnPropertyNames"],[Object.getOwnPropertySymbols,"Object.getOwnPropertySymbols"],[Object.getPrototypeOf,"Object.getPrototypeOf"],[Object.is,"Object.is"],[Object.isExtensible,"Object.isExtensible"],[Object.isFrozen,"Object.isFrozen"],[Object.isSealed,"Object.isSealed"],[Object.keys,"Object.keys"],[Object.preventExtensions,"Object.preventExtensions"],[Object.seal,"Object.seal"],[Object.setPrototypeOf,"Object.setPrototypeOf"],[Object.values,"Object.values"],[parseFloat,"parseFloat"],[parseInt,"parseInt"],[Promise,"Promise"],[Proxy,"Proxy"],[RangeError,"RangeError"],[ReferenceError,"ReferenceError"],[Reflect.apply,"Reflect.apply"],[Reflect.construct,"Reflect.construct"],[Reflect.defineProperty,"Reflect.defineProperty"],[Reflect.deleteProperty,"Reflect.deleteProperty"],[Reflect.get,"Reflect.get"],[Reflect.getOwnPropertyDescriptor,"Reflect.getOwnPropertyDescriptor"],[Reflect.getPrototypeOf,"Reflect.getPrototypeOf"],[Reflect.has,"Reflect.has"],[Reflect.isExtensible,"Reflect.isExtensible"],[Reflect.ownKeys,"Reflect.ownKeys"],[Reflect.preventExtensions,"Reflect.preventExtensions"],[Reflect.set,"Reflect.set"],[Reflect.setPrototypeOf,"Reflect.setPrototypeOf"],[RegExp,"RegExp"],[Set,"Set"],[String,"String"],[String.fromCharCode,"String.fromCharCode"],[String.fromCodePoint,"String.fromCodePoint"],[String.raw,"String.raw"],[Symbol,"Symbol"],[Symbol.for,"Symbol.for"],[SyntaxError,"SyntaxError"],[TypeError,"TypeError"],[Uint16Array,"Uint16Array"],[Uint16Array.from,"Uint16Array.from"],[Uint16Array.of,"Uint16Array.of"],[Uint32Array,"Uint32Array"],[Uint32Array.from,"Uint32Array.from"],[Uint32Array.of,"Uint32Array.of"],[Uint8Array,"Uint8Array"],[Uint8Array.from,"Uint8Array.from"],[Uint8Array.of,"Uint8Array.of"],[Uint8ClampedArray,"Uint8ClampedArray"],[Uint8ClampedArray.from,"Uint8ClampedArray.from"],[Uint8ClampedArray.of,"Uint8ClampedArray.of"],[URIError,"URIError"],[WeakMap,"WeakMap"],[WeakSet,"WeakSet"]]),new Map([[Atomics,"Atomics"],[console,"console"],[globalThis,"globalThis"],[globalThis.crypto,"crypto"],[Intl,"Intl"],[JSON,"JSON"],[Math,"Math"],[Reflect,"Reflect"]]),Symbol("Scope ID"),Symbol("Pending Contexts"),globalThis.setImmediate||globalThis.setTimeout||globalThis.queueMicrotask,Symbol("selectedValue");var ct=/["'>\s]/g;function pt(e){if(ct.test(e)){const t=e[ct.lastIndex-1];return ct.lastIndex=0,'"'===t?`'${e.replace(/'/g,"&#39;")}'`:`"${e.replace(/"/g,"&#34;")}"`}return e}function dt(e){return e?e+"":0===e?"0":""}Symbol();var ut=/[<&]/g,ft=e=>"&"===e?"&amp;":"&lt;";function mt(e){return e?(t=e+"",ut.test(t)?t.replace(ut,ft):t):0===e?"0":"&zwj;";var t}var ht=/<\/script/g;function gt(e){return e?(t=e+"",ht.test(t)?t.replace(ht,"\\x3C/script"):t):0===e?"0":"";var t}var yt=/<\/style/g;function bt(e){return e?(t=e+"",yt.test(t)?t.replace(yt,"\\3C/style"):t):0===e?"0":"";var t}var xt=r("../../browser-shims/compiler/index.js");function vt(e,t){const r=e.depth,n=xt.types.objectPattern([]);let s;return G(t,(t=>{if(t.name.includes("#"))return;const i=Ge(t),o=xt.types.identifier(t.name),a=i.value===o.name;let l=n;if(t.section!==e){s||(s=[n]);const e=r-t.section.depth;let i=s.length,o=s[i-1];for(;i<=e;i++){const e=xt.types.objectPattern([]);o.properties.push(xt.types.objectProperty(xt.types.identifier("_"),e)),s.push(e),o=e}l=s[e]}l.properties.push(xt.types.objectProperty(a?o:i,o,!1,a))})),n}function wt(e,t){let r=Fr??xt.types.identifier("undefined");const n=e.depth-t.depth;for(let e=0;e<n;e++)r=xt.types.memberExpression(r,xt.types.identifier("_"));if(n<0)throw new Error("Unable to find scope for reference.");return r}function kt(e,t){return xt.types.memberExpression(wt(e,t.section),Ge(t),!0)}var St=["createTemplate","createRenderer","createRendererWithOwner","value","intersection","closure","dynamicClosure","loopOf","loopIn","loopTo","conditional"];function Et(e){const{output:t}=Kr();return(0,He.importNamed)(_r.hub.file,function(e){const{optimize:t}=Kr();return`@marko/runtime-tags/${t?"":"debug/"}${"html"===e?"html":"dom"}`}(t),e)}function At(e,...t){const r=Qe.types.callExpression(Et(e),function(e){const t=[];for(let r=e.length;r--;){const n=e[r];(n||t.length)&&(t[r]=n||Qe.types.unaryExpression("void",Qe.types.numericLiteral(0)))}return t}(t));return St.includes(e)&&(r.leadingComments=[{type:"CommentBlock",value:" @__PURE__ "}]),r}function Ct(){return{escapeXML:mt,toString:dt,attr:ot,classAttr:st,styleAttr:it,escapeScript:gt,escapeStyle:bt}}var Tt=r("../../node_modules/@marko/babel-utils/dist/index.js"),It=r("../../browser-shims/compiler/index.js"),Mt=r("../../node_modules/@marko/babel-utils/dist/index.js"),jt=r("../../browser-shims/compiler/index.js"),Pt=r("../../browser-shims/compiler/index.js"),Nt=r("../../browser-shims/compiler/index.js");function Bt(e){const t=[],r=[];let n=e[0];for(let s=1;s<e.length;s++){let i=e[s];if("object"==typeof i){if(!Nt.types.isStringLiteral(i)){if(Nt.types.isTemplateLiteral(i)){let t=s+1;const r=i.expressions.length;Lt(e,t,i.quasis.length+r);for(let n=0;n<r;n++)e[t++]=i.quasis[n].value.raw,e[t++]=i.expressions[n];e[t]=i.quasis[r].value.raw;continue}r.push(i),t.push(n),n="";continue}i=i.value}n+=i}return r.length?(t.push(n),Nt.types.templateLiteral(t.map((e=>Nt.types.templateElement({raw:e}))),r)):n?Nt.types.stringLiteral(n):void 0}function Dt(e,t){e[e.length-1]+=t}function Lt(e,t,r){for(let n=e.length-1;n>=t;n--)e[n+r]=e[n]}var Ut=r("../../browser-shims/compiler/index.js"),[Ot]=re("walks",(()=>[""])),[$t]=re("walkComment",(()=>[])),[Rt]=re("steps",(()=>[])),_t={32:"get",36:"inside",37:"replace",38:"endChild",47:"beginChild",67:"next",97:"over",107:"out",117:"multiplier",91:"nextEnd",106:"overEnd",116:"outEnd",126:"multiplierEnd"};function Ft(e){Rt(fe(e)).push(0)}function zt(e){Rt(fe(e)).push(1)}function Wt(e){Rt(fe(e)).push(0,1)}function Vt(e,t){if(Gr())return;const r=fe(e),n=Rt(r),s=Ot(r),i=$t(r);let o="";if(n.length){const e=[];let t=0;for(const r of n)0===r?(t++,e.push(67)):(t--,t>=0?(e.length=e.lastIndexOf(67),e.push(97)):(e.length=e.lastIndexOf(107)+1,e.push(107),t=0));let r=e[0],s=0;for(const t of e)t!==r?(i.push(`${_t[r]}(${s})`),o+=qt(r,s),r=t,s=1):s++;i.push(`${_t[r]}(${s})`),o+=qt(r,s),n.length=0}void 0!==t&&(32!==t&&Xt(e)`<!>`,i.push(`${_t[t]}`),o+=String.fromCharCode(t)),Dt(s,o)}function qt(e,t){switch(e){case 67:return Jt(t,e,20);case 97:case 107:return Jt(t,e,10);default:throw new Error(`Unexpected walk code: ${e}`)}}function Jt(e,t,r){let n="";if(e>=r){const t=Math.floor(e/r);n+=Jt(t,117,10),e-=t*r}return n+=String.fromCharCode(t+e),n}function Zt(e){const t=1===e.content?.startType?String.fromCharCode(68):"",r=1===e.content?.endType?String.fromCharCode(68):"",n=Bt([t,...Ot(e),r])||Ut.types.stringLiteral("");return""!==n.value&&(n.leadingComments=[{type:"CommentBlock",value:" "+$t(e).join(", ")+" "}]),n}var[Gt]=re("writes",(()=>[""]));function Xt(e){const t=fe(e);return(e,...r)=>{const n=r.length,s=Gt(t);Dt(s,e[0]);for(let t=0;t<n;t++)s.push(r[t],e[t+1])}}function Kt(e){const t=Gt(fe(e)),r=Bt(t);if(t.length=0,t[0]="",r)return Pt.types.expressionStatement(At("write",r))}function Ht(e){const t=Kt(e);t&&e.insertBefore(t)[0].skip()}function Qt(e){const t=e.isProgram()?e:e.get("body"),r=Kt(t);r&&t.pushContainer("body",r)[0].skip()}function Yt(e){const t=1===e.content?.startType?"<!>":"",r=1===e.content?.endType?"<!>":"",n=Gt(e);return{setup:Ur(e),walks:Zt(e),writes:Bt([t,...n,r])||Pt.types.stringLiteral("")}}function er(e,t){const r=fe(e);if(0!==t.type)throw e.buildCodeFrameError("Tried to mark a node that was not determined to need a mark during analyze.");Gr()&&Xt(e)`${At("markResumeNode",me(r),Ge(t))}`}var[tr,rr]=re("returnId"),nr=new WeakSet,sr={analyze(e){if((0,Mt.assertNoArgs)(e),(0,Mt.assertNoVar)(e),(0,Mt.assertNoParams)(e),j(e),M(e),nr.has(e.hub))throw e.get("name").buildCodeFrameError("The `return` tag can only be used once per template.");nr.add(e.hub);const{node:t}=e,[r]=t.attributes;if(!jt.types.isMarkoAttribute(r)||!r.default)throw e.get("name").buildCodeFrameError("The `return` tag requires a value.");if(t.attributes.length>1&&"valueChange"!==t.attributes[1].name){const r=t.attributes[1].loc?.start,n=t.attributes[t.attributes.length-1].loc?.end,s="The `return` tag only supports the `value` attribute.";throw null==r||null==n?e.get("name").buildCodeFrameError(s):e.hub.buildError({loc:{start:r,end:n}},s,Error)}},translate:{exit(e){const t=fe(e),{node:{attributes:[{value:r}]},hub:{file:n}}=e;if(Gr()){Ht(e);const s=n.path.scope.generateUidIdentifier("return");rr(t,s),e.replaceWith(jt.types.variableDeclaration("const",[jt.types.variableDeclarator(s,r)]))[0].skip()}else wr(t,r.extra?.referencedBindings,{identifier:Et("tagVarSignal"),hasDownstreamIntersections:()=>!0},r),e.remove()}},autocomplete:[{displayText:"return=<value>",description:"Provides a value for use in a parent template.",snippet:"return=${1:value}",descriptionMoreURL:"https://markojs.com/docs/core-tags/#return"}]},[ir]=re("signals",(()=>new Map)),[or,ar]=re("queue");function lr(e,t){ar(ue(e.get("body")),t)}var[cr,pr]=re("forceResumeScope");function dr(e){pr(e,!0)}var[ur]=re("serializedScopeProperties",(()=>new Map)),fr=()=>It.types.stringLiteral("SIGNAL NOT INITIALIZED");function mr(e,t,r=function(e){let t;if(e)if(Array.isArray(e)){t="expr";for(const r of e)t+=`_${r.name}`}else t=e.name;else t="setup";return t}(t)){const n=ir(e);let s=n.get(t);if(!s){const i=t?!Array.isArray(t)&&t.section===e&&t.export:!e.parent&&_r.node.extra.domExports?.setup;if(n.set(t,s={identifier:i?It.types.identifier(i):_r.scope.generateUidIdentifier(r+e.name.replace("_","$")),referencedBindings:t,section:e,values:[],intersection:void 0,render:[],effect:[],effectInlineReferences:void 0,subscribers:[],closures:new Map,hasDownstreamIntersections:()=>{let r=!(!s.intersection&&!s.closures.size);if(!r)for(const e of s.values)if(e.signal.hasDownstreamIntersections()){r=!0;break}if(!r&&!Array.isArray(t)&&t){for(const n of t.aliases)if(mr(e,n).hasDownstreamIntersections()){r=!0;break}if(!r)for(const[,n]of t.propertyAliases)if(mr(e,n).hasDownstreamIntersections()){r=!0;break}}return s.hasDownstreamIntersections=()=>r,r},build:fr,export:!!i}),Gr())return s;t?Array.isArray(t)?(br(t,s),s.build=()=>At("intersection",It.types.numericLiteral(t.length),gr(s,[Fr],t),yr(s))):t.section!==e&&(mr(t.section,t).closures.set(e,s),s.build=()=>{const r=or(e),n=wt(e,t.section),i=n.object===Fr;return At((s.isDynamicClosure=!(i&&r))?"dynamicClosure":"closure",Ge(t),gr(s,[Fr,It.types.identifier(t.name)]),i?null:It.types.arrowFunctionExpression([Fr],n),yr(s))}):s.build=()=>gr(s,[Fr])}return s}function hr(e){const t=Ge(e),r=mr(e.section,e);r.build=()=>{const n=gr(r,[Fr,It.types.identifier(e.name)]),s=yr(r),i=!e.upstreamAlias&&(3===e.type||2===e.type);return(!e.upstreamAlias||e.property)&&(e.downstreamExpressions.size||n.body.body.length>0)||s||i||s?At("value",t,n,s):n},r.valueAccessor=t;for(const t of e.aliases)hr(t);for(const t of e.propertyAliases.values())hr(t);return r}function gr(e,t,r){const n=e.section,s=e.referencedBindings;if(s&&!Array.isArray(s)&&s.section===n){const[r,n]=t;for(const t of s.aliases){const s=mr(t.section,t);e.render.push(It.types.expressionStatement(It.types.callExpression(s.callee||s.identifier,[r,n])))}for(const[t,i]of s.propertyAliases){const s=mr(i.section,i);e.render.push(It.types.expressionStatement(It.types.callExpression(s.callee||s.identifier,[r,Or(n,t)])))}}for(const t of e.values)e.render.push(It.types.expressionStatement(It.types.callExpression(t.signal.callee||t.signal.identifier,[t.scope,t.value])));return r&&e.render.unshift(It.types.variableDeclaration("const",[It.types.variableDeclarator(vt(n,r),Fr)])),It.types.arrowFunctionExpression(t,It.types.blockStatement(e.render))}function yr(e){const t=e.section;let r=e.intersection;const n=e.referencedBindings;if(n&&!Array.isArray(n)&&n.section===e.section){for(const e of n.aliases){const t=mr(e.section,e);t.hasDownstreamIntersections()&&(r=Z(r,It.types.identifier(t.identifier.name)))}for(const[,e]of n.propertyAliases){const t=mr(e.section,e);t.hasDownstreamIntersections()&&(r=Z(r,It.types.identifier(t.identifier.name)))}}for(const t of e.values)t.signal.hasDownstreamIntersections()&&(r=Z(r,t.intersectionExpression??It.types.identifier(t.signal.identifier.name)));const s=Array.from(e.closures.entries()).sort((([e],[t])=>e.id-t.id));for(const[n,i]of s){const s=or(n),o=n.parent===t;s&&o?r=Z(r,s(i.identifier)):e.hasDynamicSubscribers||(e.hasDynamicSubscribers=!0)}return e.hasDynamicSubscribers&&(e.hasDynamicSubscribers=!0,r=Z(r,At("dynamicSubscribers",e.valueAccessor))),r&&It.types.arrowFunctionExpression([],Array.isArray(r)?At("intersections",It.types.arrayExpression(r)):r)}function br(e,t){if(Array.isArray(e))return void e.forEach((e=>br(e,t)));const r=mr(t.section,e);r.intersection=Z(r.intersection,t.identifier)}function xr(e){for(let t=e.length-1;t>=0;t--){const r=e[t];if(It.types.isArrowFunctionExpression(r)){const n=r.body.body;n&&(0===n.length?e[t]=It.types.nullLiteral():1===n.length&&It.types.isExpressionStatement(n[0])&&(r.body=n[0].expression))}}for(let t=e.length-1;It.types.isNullLiteral(e[t]);)e.length=t--}function vr(e,t,r,n,s,i){const o=mr(t,r),a=o[e]??=[];if(Array.isArray(n)?a.push(...n):a.push(n),"effect"===e)if(Array.isArray(s))for(const e of s)!i&&It.types.isFunction(e)||kr(o,e);else!s||!i&&It.types.isFunction(s)||kr(o,s)}function wr(e,t,r,n,s=Fr,i){mr(e,t).values.push({signal:r,value:n,scope:s,intersectionExpression:i})}function kr(e,t){e.effectInlineReferences=$e.union(e.effectInlineReferences,t.extra?.referencedBindings)}function Sr(e,t,r){const{markoOpts:n,opts:{filename:s}}=_r.hub.file;let i="";if(t)if("string"==typeof t)i+=`_${t}`;else if(Array.isArray(t))for(const e of t)i+=`_${e.name}`;else i+=`_${t.name}`;return(0,Tt.getTemplateId)(n,s,`${e.id}${i}${r?"/"+r:""}`)}var Er=new WeakMap;function Ar(e,t){const{markoOpts:r,opts:{filename:n}}=_r.hub.file;let s=Er.get(e);s||Er.set(e,s=new Set);const i=(0,Tt.getTemplateId)(r,n,`${e.id}/${t}`);let o=0,a=i;for(;s.has(a);)a=i+"_"+ ++o;return s.add(a),a}function Cr(){It.types.traverseFast(_r.node,(e=>{if(It.types.isIdentifier(e)){const t=e.extra&&(e.extra.source||e.extra.binding);t&&t.name!==e.name&&(e.name=t.name)}}))}function Tr(e){const t=[...ir(e).values()].sort(Ir);for(const r of t){let t;if(r.effect.length){const n=It.types.identifier(`${r.identifier.name}_effect`);r.effectInlineReferences&&r.effect.unshift(It.types.variableDeclaration("const",[It.types.variableDeclarator(vt(e,r.effectInlineReferences),Fr)])),t=It.types.variableDeclarator(n,At("register",It.types.stringLiteral(Sr(e,r.referencedBindings)),It.types.arrowFunctionExpression([Fr],1===r.effect.length&&It.types.isExpressionStatement(r.effect[0])?r.effect[0].expression:It.types.blockStatement(r.effect)))),r.render.push(It.types.expressionStatement(At("queueEffect",Fr,n)))}let n=r.build();It.types.isCallExpression(n)&&xr(n.arguments),r.register&&(n=At("registerBoundSignal",It.types.stringLiteral(Sr(e,r.referencedBindings)),n)),r.isDynamicClosure&&q(r.referencedBindings)&&(n=At("registerSubscriber",It.types.stringLiteral(Sr(e,r.referencedBindings,"subscriber")),n));const s=It.types.variableDeclarator(r.identifier,n);let i=e.parent||r.referencedBindings||!It.types.isFunctionExpression(n)&&!It.types.isArrowFunctionExpression(n)?It.types.variableDeclaration("const",[s]):It.types.functionDeclaration(r.identifier,n.params,It.types.isExpression(n.body)?It.types.blockStatement([It.types.expressionStatement(n.body)]):n.body);r.export&&(i=It.types.exportNamedDeclaration(i));const o=_r.pushContainer("body",t?[It.types.variableDeclaration("const",[t]),i]:i);for(const t of o)t.traverse(Br,{root:t,section:e})}}function Ir(e,t){const r=Mr(e),n=Mr(t);for(let e=Math.max(r.length,n.length)-1;e>=0;e--){const t=(n[e]??-1)-(r[e]??-1);if(0!==t)return t}return 0}function Mr({referencedBindings:e}){return e?Array.isArray(e)?e.map(jr).sort():[jr(e)]:[]}function jr(e){return 1e4*(0===e.type?1:0)+e.id}function Pr(e,t){vr("effect",e,t,void 0,[])}function Nr(e,t){const r=ue(e);if(!r)return;const n=Array.from(ir(r).values()),s=me(r);G(r.closures,(t=>{if(q(t)){let n=r;for(;n!==t.section;)ur(n).set(It.types.stringLiteral("_"),At("ensureScopeWithId",me(n=n.parent)));dr(t.section);const i=r.parent?.id===t.section.id;(!or(r)||!i)&&e.pushContainer("body",It.types.expressionStatement(At("writeEffect",s,It.types.stringLiteral(Sr(r,t,"subscriber")))))}}));for(let t=n.length;t--;)if(n[t].effect.length){const i=n[t].referencedBindings;e.pushContainer("body",It.types.expressionStatement(At("writeEffect",s,It.types.stringLiteral(Sr(r,i)))))}const i=new Set,o=ur(r),a=[];G(r.bindings,(e=>{if(e.serialize&&0!==e.type){const t=Ge(e);a.push(It.types.objectProperty(t,It.types.identifier(e.name))),i.add(t.value)}})),t&&void 0!==tr(r)&&a.push(It.types.objectProperty(It.types.stringLiteral("/"),t));for(const[e,t]of o)i.has(e.value)||(a.push(It.types.objectProperty(e,t,!It.types.isLiteral(e))),i.add(e.value));(a.length||cr(r))&&e.pushContainer("body",It.types.expressionStatement(At("writeScope",s,It.types.objectExpression(a)))),e.get("body").length&&e.unshiftContainer("body",It.types.variableDeclaration("const",[It.types.variableDeclarator(s,At("nextScopeId"))]))}var Br={FunctionExpression:{exit:Lr},ArrowFunctionExpression:{exit:Lr}};function Dr(e,t,r,n,s){switch(n||(n={statement:e.getStatementParent(),end:e.getStatementParent()}),t.type){case"ObjectPattern":for(const s of t.properties)Dr(e,s,r,n);break;case"ArrayPattern":for(const s in t.elements)null!==t.elements[s]&&Dr(e,t.elements[s],r,n,(e=>t.elements[s]=e));break;case"RestElement":Dr(e,t.argument,r,n,(e=>t.argument=e));break;case"ObjectProperty":Dr(e,t.value,r,n,(e=>t.value=e));break;case"Identifier":{const e=t.extra?.source;if(e){const{buildAssignment:i}=mr(e.section,e);if(i){const e=n.statement.scope.generateUidIdentifier(t.name);n.statement.insertBefore(It.types.variableDeclaration("let",[It.types.variableDeclarator(e)])),s?.(e),[n.end]=n.end.insertAfter(It.types.expressionStatement(i(r,e)))}}}}}function Lr(e,{root:t,section:r}){const{node:n}=e,{extra:s}=n;if(!s?.referencedBindings)return;const{name:i,referencedBindings:o}=s,a=e.hub.file.path.scope.generateUidIdentifier(i);t.insertBefore(It.types.variableDeclaration("const",[It.types.variableDeclarator(a,It.types.arrowFunctionExpression([Fr],o?It.types.blockStatement([It.types.variableDeclaration("const",[It.types.variableDeclarator(vt(r,o),Fr)]),It.types.returnStatement(n)]):n))]))[0].skip(),e.replaceWith(It.types.callExpression(a,[Fr]))[0].skip()}function Ur(e){return ir(e).get(void 0)?.identifier}function Or(e,t){const r=function(e){return/^[a-z_$][a-z0-9_$]*$/i.test(e)?It.types.identifier(e):/^(?:0|[1-9][0-9]*)$/.test(e)?It.types.numericLiteral(parseInt(e,10)):It.types.stringLiteral(e)}(t);return It.types.memberExpression(e,r,"Identifier"!==r.type)}var $r={translate:{exit(e){Vt(e);const t=ue(e),{walks:r,writes:n,setup:s}=Yt(t),i=e.node.extra.domExports,o=Ke.types.identifier(i.template),a=Ke.types.identifier(i.walks),l=Ke.types.identifier(i.setup),c=Ke.types.identifier(i.closures),p=e.node.extra.binding,d=p&&D(p)?hr(p):void 0;!function(){if(_r.node.extra.assignments)for(const[e,t]of _r.node.extra.assignments){const{node:r}=t;if("UpdateExpression"===r.type){const n=r.argument.extra?.source;if(n){const{buildAssignment:s}=mr(n.section,n);if(s){const n=s(e,It.types.binaryExpression("++"===r.operator?"+":"-",r.argument,It.types.numericLiteral(1)));t.replaceWith(r.prefix||t.parentPath.isExpressionStatement()?n:It.types.sequenceExpression([n,r.argument]))}}}else if("ObjectPattern"===r.left.type||"ArrayPattern"===r.left.type)Dr(t,r.left,e);else if("Identifier"===r.left.type){const n=r.left.extra?.source;if(n){const{buildAssignment:s}=mr(n.section,n);if(s){const n=s(e,"="===r.operator?r.right:It.types.binaryExpression(r.operator.slice(0,-1),r.left,r.right));t.replaceWith(n)}}}}}(),function(e){const{sections:t}=_r.node.extra;for(let r=t.length;r--;)e(t[r])}((r=>{if(r!==t){const t=r.params&&hr(r.params),{walks:n,writes:s,setup:i}=Yt(r),o=Rr(r),a=Ke.types.identifier(r.name),l=At(he(r)?"createRenderer":"createRendererWithOwner",s,n,i,o&&Ke.types.arrowFunctionExpression([],o),void 0,t?.identifier&&Ke.types.arrowFunctionExpression([],t.identifier));Tr(r),e.node.body.push(Ke.types.variableDeclaration("const",[Ke.types.variableDeclarator(a,ke(r)?At("register",Ke.types.stringLiteral(Sr(r,"renderer")),l):l)]))}}));const u=Rr(t);Tr(t),Cr(),s||e.node.body.unshift(Ke.types.exportNamedDeclaration(Ke.types.variableDeclaration("const",[Ke.types.variableDeclarator(l,Ke.types.arrowFunctionExpression([],Ke.types.blockStatement([])))]))),e.node.body.unshift(Ke.types.exportNamedDeclaration(Ke.types.variableDeclaration("const",[Ke.types.variableDeclarator(o,n||Ke.types.stringLiteral(""))])),Ke.types.exportNamedDeclaration(Ke.types.variableDeclaration("const",[Ke.types.variableDeclarator(a,r||Ke.types.stringLiteral(""))]))),u&&e.node.body.push(Ke.types.exportNamedDeclaration(Ke.types.variableDeclaration("const",[Ke.types.variableDeclarator(c,u)]))),e.node.body.push(Ke.types.exportDefaultDeclaration(At("createTemplate",At("createRenderer",o,a,l,u&&Ke.types.arrowFunctionExpression([],c),void 0,d?.identifier&&Ke.types.arrowFunctionExpression([],d.identifier)),Ke.types.stringLiteral(e.hub.file.metadata.marko.id))))}}};function Rr(e){if(e.closures)return Ke.types.arrayExpression((t=e.closures,r=t=>mr(e,t).identifier,t?Array.isArray(t)?t.map(r):[r(t)]:[]).reverse());var t,r}var _r,Fr,zr,Wr=r("../../browser-shims/compiler/index.js"),Vr={translate:{exit(e){const t=ue(e),r=e.scope.generateUidIdentifier("tagVar");Qt(e),Nr(e,r),Cr();const n=tr(t);void 0!==n&&e.pushContainer("body",Wr.types.returnStatement(n));const s=[];for(const t of e.get("body"))(i=t).isImportDeclaration()||i.isExportDeclaration()||i.isMarkoScriptlet({static:!0})?t.isMarkoScriptlet()&&(t.node.target&&"server"!==t.node.target?t.remove():t.replaceWithMultiple(t.node.body)):(s.push(t.node),t.remove());var i;e.pushContainer("body",[Wr.types.variableDeclaration("const",[Wr.types.variableDeclarator(zr,At("createRenderer",Wr.types.arrowFunctionExpression([Wr.types.identifier("input"),r],Wr.types.blockStatement(s))))]),Wr.types.exportDefaultDeclaration(At("createTemplate",zr,Wr.types.stringLiteral(e.hub.file.metadata.marko.id)))])}}},qr=new WeakMap,Jr={migrate:{enter(e){qr.set(e,_r),e.node.params=[N.types.identifier("input")],_r=e},exit(){_r.scope.crawl(),_r=qr.get(_r)}},analyze:{enter(e){qr.set(e,_r),_r=e,pe(e),Me(e,2);const{scope:t}=e;(e.node.extra??={}).domExports={template:t.generateUid("template_"),walks:t.generateUid("walks_"),setup:t.generateUid("setup_"),params:void 0,closures:t.generateUid("closures_")}},exit(e){!function(){const e=ze();if(e.size){for(const t of e){const{extra:e}=t;e&&e.referencedBindings&&(G(e.referencedBindings,(({downstreamExpressions:t})=>{t.delete(e)})),e.referencedBindings=void 0)}e.clear()}const t=Be();if(t.size){for(const[e,{section:r,nodes:n}]of t){const t=e.extra??={};let{referencedBindings:s,isEffect:i}=t;for(const e of n){const r=e?.extra;if(r){const e=r.referencedBindings;i||=r.isEffect,e&&(s=$e.union(s,e),G(e,(({downstreamExpressions:e})=>{e.delete(r),e.add(t)})))}}s=Ze(r,s),t.referencedBindings=s,t.isEffect=i}t.clear()}const r=Ee();for(const e of r)if(0!==e.type&&!e.upstreamAlias&&Xe(r,e)){const{upstreamExpression:t}=e;t&&G(t.referencedBindings,(e=>{e.downstreamExpressions.delete(t),Xe(r,e)}))}const n=new Set;for(const e of r){const{name:t,section:r}=e;0!==e.type&&X(r.bindings,(({name:t})=>t===e.name))&&(e.name=_r.scope.generateUid(t)),r.bindings=$e.add(r.bindings,e);for(const{referencedBindings:t,isEffect:r}of e.downstreamExpressions)Array.isArray(t)&&n.add(t),G(t,(e=>{r&&(e.serialize=!0)}))}for(const e of n){const t=e.length;for(let r=0;r<t-1;r++)for(let n=r+1;n<t;n++){const t=e[r],s=e[n],i=Oe(t),o=Oe(s);t.serialize||Ue(i,o)||(t.serialize=!0),s.serialize||Ue(o,i)||(s.serialize=!0)}}xe((e=>{G(e.closures,(t=>{if(!t.serialize){let r=!1;const n=t.section;let s=e;for(;s!==n&&!(r=!s.upstreamExpression||q(s.upstreamExpression.referencedBindings));)s=s.parent;t.serialize=r}}))})),xe((({id:e,bindings:t})=>{G(function(e,t){if(e){if(Array.isArray(e)){const r=e.length;let n,s=0;for(;s<r;){let i=e[s++];if(t(i)){for(n=i;s<r;)if(i=e[s++],t(i)){for(n=[n,i];s<r;)i=e[s++],t(i)&&n.push(i);return n}return n}}return n}if(t(e))return e}}(t,(({section:t})=>t.id===e)),((e,t)=>{e.id=t}))}))}();const{scope:t,node:{extra:r}}=e;r.binding&&D(r.binding)&&(r.domExports.params=Zr(r.binding,t)),_r=qr.get(_r)}},translate:{enter(e){if(qr.set(e,_r),_r=e,Fr=Xr()?e.scope.generateUidIdentifier("scope"):null,Xr()&&e.scope.generateUidIdentifier("clean"),zr=Gr()?e.scope.generateUidIdentifier("renderer"):null,"hydrate"===Kr().output){const t=e.hub.file,r=new Set([(0,P.resolveRelativePath)(t,t.opts.filename)]);return $.visit(t,t,(function e(n){if(!r.has(n)){r.add(n);const s=(0,P.loadFileForImport)(t,n);s&&$.visit(s,t,(r=>e(function(e,t,r){return t===e?(0,P.resolveRelativePath)(t,r):(0,P.resolveRelativePath)(e,"."===r[0]?B.default.join(t.opts.filename,"..",r):r)}(t,s,r))))}})),e.node.body=$.build(t),void e.skip()}},exit(e){Gr()?Vr.translate.exit(e):$r.translate.exit(e),_r=qr.get(_r)}}};function Zr(e,t){const r={id:e.export??=t.generateUid(e.name+"_"),props:void 0},{aliases:n,propertyAliases:s,downstreamExpressions:i}=e;if(!i.size){r.props={};for(const[e,n]of s)r.props[e]=Zr(n,t);for(const e of n){const n=Zr(e,t);if(!n.props)return r.props=void 0,r;r.props={...r.props,...n.props}}}return r}function Gr(){return"html"===Kr().output}function Xr(){return!Gr()}function Kr(){return _r.hub.file.markoOpts}var Hr=r("../../browser-shims/compiler/index.js");function Qr(e,t,r="const"){const{node:{var:n}}=e;n&&e.insertBefore(Hr.types.variableDeclaration(r,[Hr.types.variableDeclarator(n,t)]))}var Yr={analyze(e){(0,T.assertNoArgs)(e),(0,T.assertNoParams)(e),j(e);const{node:t}=e,[r]=t.attributes;if(!t.var)throw e.get("name").buildCodeFrameError("The `const` tag requires a tag variable.");if(!r)throw e.get("name").buildCodeFrameError("The `const` tag requires a value.");if(t.attributes.length>1||!I.types.isMarkoAttribute(r)||!r.default&&"value"!==r.name)throw e.get("name").buildCodeFrameError("The `const` tag only supports the `value` attribute.");const n=I.types.isIdentifier(r.value)?e.scope.getBinding(r.value.name)?.identifier.extra?.binding:void 0;Ie(e,4,n,r.value.extra??={})},translate:{exit(e){const{node:t}=e,[r]=t.attributes,{value:n}=r;if(Xr()){const r=fe(e),s=t.var.extra?.binding;if(s&&!s.upstreamAlias){const e=hr(s);wr(r,n.extra?.referencedBindings,e,n)}}else Qr(e,n);e.remove()}},attributes:{},autocomplete:[{description:"Use to create an constant binding.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#const"}],types:"@marko/translator-tags/tag-types/const.d.marko"},en=r("../../node_modules/@marko/babel-utils/dist/index.js"),tn=r("../../browser-shims/compiler/index.js"),rn={analyze(e){const[t]=e.node.attributes;if((0,en.assertNoVar)(e),(0,en.assertNoArgs)(e),(0,en.assertNoParams)(e),j(e),e.node.attributes.length>1||1===e.node.attributes.length&&(!tn.types.isMarkoAttribute(t)||!t.default&&"value"!==t.name))throw e.get("name").buildCodeFrameError("The `debug` tag only supports the `value` attribute.")},translate:{exit(e){const t=fe(e),[r]=e.node.attributes,n=r?.value.extra?.referencedBindings,s=ie(tn.types.debuggerStatement(),e.node);Gr()?e.insertBefore(s):vr("render",t,n,s),e.remove()}},attributes:{},autocomplete:[{description:"Debug on value change.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#debug"}],types:"@marko/translator-tags/tag-types/debug.d.marko"},nn=r("../../node_modules/@marko/babel-utils/dist/index.js"),sn=(r("../../browser-shims/compiler/index.js"),r("../../node_modules/@marko/babel-utils/dist/index.js")),on=r("../../browser-shims/compiler/index.js"),an=r("../../node_modules/@marko/babel-utils/dist/index.js"),ln=r("../../browser-shims/compiler/index.js");function cn(e){const t={};for(const r of e.attributes)"MarkoAttribute"===r.type&&(t[r.name]=r.value);return t}var pn=r("../../browser-shims/compiler/index.js");function dn(e,t){if(!e)return!1;const{node:r}=t,n=fn(e)?e.default:e;return mn(n)?n(t,pn.types):n.enter&&n.enter(t,pn.types),r!==t.node}function un(e,t){if(!e)return!1;const{node:r}=t,n=fn(e)?e.default:e;return!mn(n)&&n.exit&&n.exit(t,pn.types),r!==t.node}function fn(e){return Boolean(e.default)}function mn(e){return"function"==typeof e}function hn({html:e,dom:t}){return{enter(r){dn(Gr()?e:t,r)},exit(r){un(Gr()?e:t,r)}}}var gn=r("../../node_modules/@marko/babel-utils/dist/index.js"),yn=r("../../browser-shims/compiler/index.js"),bn=r("../../node_modules/@marko/babel-utils/dist/index.js");function xn(e){let{extra:t}=e.node;if(t||(t=e.node.extra={}),void 0===t.confident){const r=(0,bn.computeNode)(e.node.value);r?(t.computed=r.value,t.confident=!0):(t.computed=void 0,t.confident=!1)}return t}var vn=r("../../browser-shims/compiler/index.js"),wn=/^[0-9A-Z_$]+$/i;function kn(e){return wn.test(e)?vn.types.identifier(e):vn.types.stringLiteral(e)}r("../../browser-shims/compiler/index.js");var Sn={translate:{exit(e){Xr()&&En(e,e.node.left)}}};function En(e,t){switch(t.type){case"ObjectPattern":for(const r of t.properties)En(e,r);break;case"ArrayPattern":for(const r in t.elements)null!==t.elements[r]&&En(e,t.elements[r]);break;case"RestElement":En(e,t.argument);break;case"ObjectProperty":En(e,t.value);break;case"Identifier":{const r=t.extra?.source;if(r){const t=fe(e);(_r.node.extra.assignments??=[]).push([t,e])}break}}}var An=r("../../node_modules/@marko/babel-utils/dist/index.js"),Cn=r("../../browser-shims/compiler/index.js"),Tn=new WeakMap,In=new WeakSet,Mn={analyze(e){const t=_(e);if(!jn(e,!t||t.isMarkoScriptlet({static:!0})))return;if(t&&(t.isMarkoPlaceholder()||t.isMarkoScriptlet({target:"server"})))return;const{node:r}=e,n=r.extra??={},s=n.name=e.node.id?.name||(Pn(t)?t.node.default?Cn.types.toIdentifier(t.parentPath.has("var")?t.parentPath.get("var"):t.parentPath.get("name")):t.node.name:"anonymous");if(Pn(t)&&((0,An.isNativeTag)(t.parentPath)&&/^on[A-Z-]/.test(t.node.name)||b(t.parentPath,"effect")||b(t.parentPath,"lifecycle")||b(t.parentPath,"for")||b(t.parentPath,"do")))return;const{markoOpts:i,opts:{filename:o}}=_r.hub.file,a=fe(e);let l=Tn.get(a);l||(l=new Map,Tn.set(a,l));const c=l.get(s);let p="";void 0===c?l.set(s,0):p=`_${c}`,n.registerId=(0,An.getTemplateId)(i,o,`${a.id}/${s+p}`)},translate:{exit(e){const t=_(e),r=!t||t.isMarkoScriptlet({static:!0});if(!jn(e,r))return;const{node:n}=e,{extra:s}=n;if(!s?.registerId)return;if(In.has(n))return;const i=fe(e);if(i)if(In.add(n),Gr()){const t=ur(i);if(G(s.referencedBindings,(e=>{t.set(Ge(e),Cn.types.identifier(e.name))})),Cn.types.isFunctionDeclaration(n))_r.unshiftContainer("body",Cn.types.expressionStatement(At("register",n.id,Cn.types.stringLiteral(s.registerId),r?void 0:me(i))))[0].skip();else{const t=At("register",n,Cn.types.stringLiteral(s.registerId),r?void 0:me(i));z(e.parentPath)&&(t.extra=n.extra),e.replaceWith(t)[0].skip()}}else{const{referencedBindings:t}=s,o=_r.scope.generateUidIdentifier(s.name);if(Cn.types.isFunctionDeclaration(n))_r.unshiftContainer("body",Cn.types.expressionStatement(At("register",Cn.types.stringLiteral(s.registerId),n.id)))[0].skip();else if(r){const t=At("register",Cn.types.stringLiteral(s.registerId),n);z(e.parentPath)&&(t.extra=n.extra),e.replaceWith(t)[0].skip()}else{const r=Cn.types.callExpression(o,[Fr]);z(e.parentPath)&&(r.extra=n.extra),_r.pushContainer("body",Cn.types.variableDeclaration("const",[Cn.types.variableDeclarator(o,At("register",Cn.types.stringLiteral(s.registerId),Cn.types.arrowFunctionExpression([Fr],t?Cn.types.blockStatement([Cn.types.variableDeclaration("const",[Cn.types.variableDeclarator(vt(i,t),Fr)]),Cn.types.returnStatement(n)]):n)))]))[0].skip(),e.replaceWith(r)[0].skip()}}}}};function jn(e,t){switch(e.node.type){case"FunctionDeclaration":return t;case"FunctionExpression":case"ArrowFunctionExpression":return!0;default:return!1}}function Pn(e){return!!e&&e.isMarkoAttribute()}r("../../browser-shims/compiler/index.js");var Nn={translate:{exit(e){if(Xr()){const t=e.node.argument.extra?.source;if(t){const t=fe(e);(_r.node.extra.assignments??=[]).push([t,e])}}}}},Bn=Symbol("native tag binding"),Dn=Symbol("serialize marker"),Ln=Symbol("node getter id"),Un=new WeakMap;function On(e,t){switch(e){case"input":if(t.checked||t.checkedChange)return{special:!1,helper:"controllable_input_checked",attrs:[t.checked,t.checkedChange]};if(t.checkedValue||t.checkedValueChange)return{special:!0,helper:"controllable_input_checkedValue",attrs:[t.checkedValue,t.checkedValueChange,t.value]};if(t.value||t.valueChange)return{special:!1,helper:"controllable_input_value",attrs:[t.value,t.valueChange]};break;case"select":if(t.value||t.valueChange)return{special:!0,helper:"controllable_select_value",attrs:[t.value,t.valueChange]};break;case"details":case"dialog":if(t.open||t.openChange)return{special:!1,helper:"controllable_detailsOrDialog_open",attrs:[t.open,t.openChange]}}}var $n={analyze:{enter(e){(0,gn.assertNoArgs)(e),(0,gn.assertNoParams)(e),(0,gn.assertNoAttributeTags)(e);const{node:t}=e;if(t.var&&!yn.types.isIdentifier(t.var))throw e.get("var").buildCodeFrameError("Tag variables on native elements cannot be destructured.");const r=h(e),n=de(e);let s=!1,i=!1;const o={},{attributes:a}=e.node;let l,c;for(let t=a.length;t--;){const n=a[t];if(yn.types.isMarkoAttribute(n)){if(o[n.name]){We(n.value);continue}o[n.name]=n,Rn(n.name)||(p=n.name,/^(?:value|checked(?:Values?)?|open)Change/.test(p))?((n.value.extra??={}).isEffect=!0,s=!0):xn(e.get("attributes")[t]).confident||(i=!0)}else yn.types.isMarkoSpreadAttribute(n)&&(s=!0,i=!0,(n.value.extra??={}).isEffect=!0);c?c.push(n.value):yn.types.isMarkoSpreadAttribute(n)&&(c=[n.value],l=On(r,o))}var p;if(function(e,t){const r=[t.open||t.openChange,t.checked||t.checkedChange,t.checkedValue||t.checkedValueChange,t.valueChange].filter(Boolean);if(r.length>1)throw e.get("name").buildCodeFrameError(`The attributes ${r.map((e=>`"${e.name}"`)).join(", ")} are mutually exclusive.`)}(e,o),c){if(l&&!l.attrs.every(Boolean)){for(const e of l.attrs)e&&c.push(e.value);l=void 0}De(n,e.node,c)}else l=On(r,o);if(l&&De(n,l.attrs.find(Boolean),l.attrs.map((e=>e?.value))),t.var||s||i){_r.node.extra.isInteractive||=s;const r="StringLiteral"===t.name.type?t.name.value:yn.types.toIdentifier(e.get("name")),i=t.extra??={},o="#"+r;if(i[Dn]=s||!!t.var,i[Bn]=Te(o,0,n),t.var)for(const r of e.scope.getBinding(t.var.name).referencePaths)if(!r.parentPath?.isCallExpression()){i[Ln]=Ar(n,o);break}}}},translate:{enter(e){const t=h(e),r=e.node.extra,n=r[Bn],s=Gr(),i=e.get("name"),o=(0,gn.getTagDef)(e),a=Xt(e),l=fe(e);if(s&&r.tagNameNullable&&Ht(e),e.has("var")){const t=r[Ln];if(s){const r=e.node.var.name,n=e.scope.getBinding(r).referencePaths;for(const e of n){let t=fe(e);for(;t!==l&&t.parent;)ur(t).set(yn.types.stringLiteral("_"),At("ensureScopeWithId",me(t=t.parent)))}Qr(e,At("nodeRef",t&&me(l),t&&yn.types.stringLiteral(t)))}else{const r=e.node.var.name,s=e.scope.getBinding(r).referencePaths;let i;t&&(i=_r.scope.generateUidIdentifier(`get_${r}`),_r.pushContainer("body",yn.types.variableDeclaration("const",[yn.types.variableDeclarator(i,At("nodeRef",yn.types.stringLiteral(t),Ge(n)))])));for(const t of s){const r=fe(t);t.parentPath?.isCallExpression()?t.parentPath.replaceWith(yn.types.expressionStatement(kt(r,n))):i&&t.replaceWith(yn.types.callExpression(i,[wt(r,fe(e))]))}}}let c;n&&(c=Ge(n),Vt(e,32)),a`<${i.node}`;const p=function(e,t){const r={},{attributes:n}=t,s=new Set;let i,o,a,l,c;for(let t=n.length;t--;){const i=n[t],{value:o}=i;if(yn.types.isMarkoSpreadAttribute(i)){if(!a&&(a=[],c=On(e,r),c&&!c.attrs.every(Boolean))){for(const e of c.attrs)e&&(a.push(_n(e)),s.delete(e));c=void 0}a.push(yn.types.spreadElement(o))}else r[i.name]||(r[i.name]=i,a?a.push(_n(i)):s.add(i))}if(a||(c=On(e,r),!1!==c?.special||c.attrs[1]||(c=void 0)),c)for(const e of c.attrs)e&&s.delete(e);const p=[...s].reverse();if(a){if(a.reverse(),c)for(const e of c.attrs)e&&(l||=[]).push(yn.types.objectProperty(kn(e.name),yn.types.numericLiteral(1)));for(const{name:e}of p)(l||=[]).push(yn.types.objectProperty(kn(e),yn.types.numericLiteral(1)));l&&(o=yn.types.objectExpression(l)),i=ps(a)}return{staticAttrs:p,staticControllable:c,spreadExpression:i,skipExpression:o}}(t,e.node),{staticAttrs:d,staticControllable:u,skipExpression:f}=p;let{spreadExpression:m}=p;if(u){const{helper:r,attrs:n}=u,i=n[1],o=n.find(Boolean),p=o.value.extra?.referencedBindings;i&&e.get("attributes").find((e=>e.node===i)).traverse(Fn);const d=n.map((e=>e?.value));s?("select"!==t&&a`${At(r,me(l),c,...d)}`,Pr(l,void 0)):(vr("render",l,p,yn.types.expressionStatement(At(r,Fr,c,...d))),vr("effect",l,void 0,yn.types.expressionStatement(At(`${r}_effect`,Fr,c))))}if(s&&"select"===t)if(u)Un.set(e.node,{value:u.attrs[0]?.value||zn(),valueChange:u.attrs[1]?.value||zn()});else if(m){const t=e.scope.generateUidIdentifier("select_input");e.insertBefore(yn.types.variableDeclaration("const",[yn.types.variableDeclarator(t,m)])),Un.set(e.node,{value:yn.types.memberExpression(t,yn.types.identifier("value")),valueChange:yn.types.memberExpression(t,yn.types.identifier("valueChange"))}),m=t}for(const e of d){const{name:r,value:n}=e,{confident:i,computed:o}=e.extra??{},p=n.extra?.referencedBindings;if(s&&"option"===t&&"value"===r)a`${At("optionValueAttr",n)}`;else switch(r){case"class":case"style":{const e=`${r}Attr`;i?a`${Ct()[e](o)}`:s?a`${At(e,n)}`:vr("render",l,p,yn.types.expressionStatement(At(e,yn.types.memberExpression(Fr,c,!0),n)));break}default:i?a`${Ct().attr(r,o)}`:s?Rn(r)?Pr(l,p):a`${At("attr",yn.types.stringLiteral(r),n)}`:Rn(r)?vr("effect",l,p,yn.types.expressionStatement(At("on",yn.types.memberExpression(Fr,c,!0),yn.types.stringLiteral("-"===(g=r).charAt(2)?g.slice(3):g.charAt(2).toLowerCase()+g.slice(3)),n)),n):vr("render",l,p,yn.types.expressionStatement(At("attr",yn.types.memberExpression(Fr,c,!0),yn.types.stringLiteral(r),n)))}}var g;if(m&&(s?(Pr(l,r.referencedBindings),f?a`${At("partialAttrs",m,f,c,me(l),i.node)}`:a`${At("attrs",m,c,me(l),i.node)}`):(vr("render",l,r.referencedBindings,f?yn.types.expressionStatement(At("partialAttrs",Fr,c,m,f)):yn.types.expressionStatement(At("attrs",Fr,c,m))),vr("effect",l,r.referencedBindings,yn.types.expressionStatement(At("attrsEvents",Fr,c)),m))),o&&o.parseOptions?.openTagOnly)switch(o.htmlType){case"svg":case"math":a`/>`;break;default:a`>`}else a`>`;s&&r.tagNameNullable&&e.insertBefore(yn.types.ifStatement(i.node,Kt(e)))[0].skip(),Ft(e)},exit(e){const t=e.node.extra,r=t[Bn],n=Gr(),s=(0,gn.getTagDef)(e)?.parseOptions?.openTagOnly,i=n&&Un.get(e.node);n&&t.tagNameNullable&&Qt(e),i?(Xt(e)`</${e.node.name}>`,Qt(e),e.insertBefore(yn.types.expressionStatement(At("controllable_select_value",me(fe(e)),Ge(r),i.value,i.valueChange,yn.types.arrowFunctionExpression([],yn.types.blockStatement(e.node.body.body)))))):e.insertBefore(e.node.body.body).forEach((e=>e.skip())),s||i||Xt(e)`</${e.node.name}>`,n&&t.tagNameNullable&&e.insertBefore(yn.types.ifStatement(e.node.name,Kt(e)))[0].skip(),r&&(t[Dn]||e.node.attributes.some((e=>q(e.value.extra?.referencedBindings))))&&er(e,r),zt(e),e.remove()}}};function Rn(e){return/^on[A-Z-]/.test(e)}function _n(e){return yn.types.objectProperty(kn(e.name),e.value)}var Fn={Function:Mn.translate,UpdateExpression:Nn.translate,AssignmentExpression:Sn.translate};function zn(){return yn.types.unaryExpression("void",yn.types.numericLiteral(0))}var Wn=Symbol("for marker binding"),Vn=Symbol("for scope start index"),qn=Symbol("only child in parent"),Jn={analyze(e){const t=e.node.extra??={},r=!!e.node.attributeTags.length;let n;switch((0,an.assertNoVar)(e),(0,an.assertNoArgs)(e),M(e),Gn(e.node)){case"of":n=["of"];break;case"in":n=["in"];break;case"to":n=["to","from","step"];break;default:throw e.buildCodeFrameError("Invalid `for` tag, missing an `of=`, `in=`, `to=` attribute.")}if(r||n.push("by"),(0,an.assertAllowedAttributes)(e,n),r)return;const s=e.get("body"),i=pe(s);if(!i)return void We(qe(e.node));const o=de(e);if(Kn(e)){const t=e.parentPath.parent,r=t.name?.value;(t.extra??={})[Bn]??=Te("#"+r,0,o)}else t[Wn]=Te("#text",0,o);Me(s,3,void 0,t),De(o,e.node,qe(e.node)),i.upstreamExpression=t},translate:hn({html:{enter(e){if(e.node.attributeTags.length)return;const t=e.get("body"),r=ue(t);if(!r)return void e.remove();const n=e.node.extra,s=q(n.referencedBindings);ge(r,!0),Kn(e)||(Vt(e,37),Wt(e)),Ht(e),s&&!r.content?.singleChild&&(n[Vn]=e.scope.generateUidIdentifier("k"),Xt(t)`${At("markResumeScopeStart",me(r),ln.types.updateExpression("++",n[Vn]))}`)},exit(e){if(e.node.attributeTags.length)return;const t=e.get("body"),r=fe(e),n=ue(t),{node:s}=e,i=s.extra,o=q(i.referencedBindings),a=Kn(e)?e.parentPath.parent.extra[Bn]:e.node.extra[Wn],l=cn(s),c=Gn(s),p=s.body.params,d=[],u=s.body.body,f=Se(n,!0);let m;if(o&&Kn(e)&&(e.parentPath.parent.extra[Dn]=!0),i[Vn]&&d.push(ln.types.variableDeclaration("let",[ln.types.variableDeclarator(i[Vn],ln.types.numericLiteral(0))])),o||f){const t=null===n.content||n.content.singleChild,s={of:["list","index"],in:["key","value"],to:["value"]}[c],i="of"===c?1:0,f=l.by?s.length-1:i;dr(n);for(let e=0;e<=f;e++){const t=p[e];if(!t||!ln.types.isIdentifier(t)){const r=p[e]=_r.scope.generateUidIdentifier(s[e]);t&&u.unshift(ln.types.variableDeclaration("let",[ln.types.variableDeclarator(t,r)]))}}if(l.by){const e=_r.scope.generateUidIdentifier("by");d.push(ln.types.variableDeclaration("const",[ln.types.variableDeclarator(e,l.by)])),m=ln.types.callExpression(e,p)}else m=p[i];const h=Xt(e),g=e.scope.generateUidIdentifier("forScopeIds"),y=be(n);d.push(ln.types.variableDeclaration("const",[o&&t&&ln.types.variableDeclarator(g,ln.types.arrayExpression([])),ln.types.variableDeclarator(y,ln.types.newExpression(ln.types.identifier("Map"),[]))].filter(Boolean))),o&&(t?(u.push(ln.types.expressionStatement(ln.types.callExpression(ln.types.memberExpression(g,ln.types.identifier("push")),[me(n)]))),h`${At("markResumeControlSingleNodeEnd",me(r),Ge(a),g)}`):h`${At("markResumeControlEnd",me(r),Ge(a))}`),ur(r).set(ln.types.stringLiteral(Ge(a).value+"("),ln.types.conditionalExpression(ln.types.memberExpression(y,ln.types.identifier("size")),y,ln.types.identifier("undefined")))}Qt(e),lr(e,(()=>{})),Nr(t),m&&(o||f)&&u.push(ln.types.expressionStatement(ln.types.callExpression(ln.types.memberExpression(be(n),ln.types.identifier("set")),[m,At("getScopeById",me(n))]))),d.push(Zn(c,l,p,u));for(const t of e.replaceWithMultiple(d))t.skip()}},dom:{enter(e){if(e.node.attributeTags.length)return;const t=ue(e.get("body"));t?(ge(t,!0),Kn(e)||(Vt(e,37),Wt(e))):e.remove()},exit(e){if(e.node.attributeTags.length)return;const t=e.get("body"),r=fe(e),n=ue(t),{node:s}=e,i=s.extra,{referencedBindings:o}=i,a=Kn(e)?e.parentPath.parent.extra[Bn]:e.node.extra[Wn];lr(e,(e=>At("inLoopScope",e,Ge(a))));const l=Gn(s),c=mr(r,a,"for");c.build=()=>At(function(e){switch(e){case"of":return"loopOf";case"in":return"loopIn";case"to":return"loopTo"}}(l),Ge(a),ln.types.identifier(n.name));const p=s.body.params;c.hasDownstreamIntersections=()=>{if(n.closures)return!0;for(const e of p){const t=e.extra?.binding;if(t)for(const{referencedBindings:e}of t.downstreamExpressions)if(mr(n,e).hasDownstreamIntersections())return!0}return!1};const d=cn(s),u=Xn(l,d);d.by&&u.push(d.by),wr(r,o,c,ln.types.arrayExpression(u)),e.remove()}}}),parseOptions:{controlFlow:!0},attributes:{of:{type:"expression",autocomplete:[{description:"Iterates over a list of items."}]},in:{type:"expression",autocomplete:[{description:"Iterates over the keys and values of an object."}]},to:{type:"number",autocomplete:[{description:"Iterates up to the provided number (inclusive)"}]},from:{type:"number",autocomplete:[{description:"Iterates starting from the provided number (inclusive)"}]},step:{type:"number",autocomplete:[{description:"The amount to increment during each interation (with from/to)"}]}},autocomplete:[{snippet:"for|${1:value, index}| of=${3:array}",description:"Use to iterate over lists, object properties, or between ranges.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#iterating-over-a-list"},{snippet:"for|${1:name, value}| in=${3:object}",descriptionMoreURL:"https://markojs.com/docs/core-tags/#iterating-over-an-objects-properties"},{snippet:"for|${1:index}| to=${2:number}",descriptionMoreURL:"https://markojs.com/docs/core-tags/#iterating-between-a-range-of-numbers"}]};function Zn(e,t,r,n){return ln.types.expressionStatement(At(function(e){switch(e){case"of":return"forOf";case"in":return"forIn";case"to":return"forTo"}}(e),...Xn(e,t),ln.types.arrowFunctionExpression(r,ln.types.blockStatement(n))))}function Gn(e){for(const t of e.attributes)if("MarkoAttribute"===t.type)switch(t.name){case"of":case"in":case"to":return t.name}}function Xn(e,t){switch(e){case"in":return[t.in];case"of":return[t.of];case"to":return[t.to,t.from||ln.types.numericLiteral(0),t.step||ln.types.numericLiteral(1)]}}function Kn(e){const t=e.node.extra;return void 0!==t[qn]?t[qn]:ln.types.isMarkoTag(e.parentPath?.parent)&&(0,an.getTagDef)(e.parentPath.parentPath)?.html?t[qn]=1===e.parent.body.length:t[qn]=!1}var Hn=r("../../node_modules/@marko/babel-utils/dist/index.js"),Qn=r("../../browser-shims/compiler/index.js"),Yn=new WeakMap;function es(e){let t=Yn.get(e);return t||(t=_r.scope.generateUid(e.name),Yn.set(e,t)),Qn.types.identifier(t)}function ts(e){if(e.node.extra?.attributeTags)return e.node.extra.attributeTags;if(!e.node.attributeTags.length)return;const t=(e.node.extra??={}).attributeTags={},r={},n=new Map;for(const s of e.get("attributeTags"))if(s.isMarkoTag())if((0,Hn.isAttributeTag)(s)){const e=h(s);t[e]||=rs(e,[e]),ts(s)}else{const e=(0,Hn.isLoopTag)(s);let i;for(const o of ns(s,r)){const r=t[o];if(r)if(i){if(i!==r.group)for(const e of r.group)t[e].group=i,i.push(e)}else i=r.group;let a=t[o];a||(a=t[o]=rs(o,[]),i=a.group,i.push(o)),a.dynamic=!0,e&&(a.repeated=!0),n.set(s,o)}}for(const[e,r]of n)(e.node.extra??={}).attributeTagGroup=t[r].group;for(const e in r){const n=t[e];if(!n.repeated){const t=r[e];t.length>1&&(n.repeated=!n.dynamic||ss(t))}}return t}function rs(e,t){return{name:e.slice(1),dynamic:!1,repeated:!1,group:t}}function ns(e,t,r=new Set){for(const n of e.get("attributeTags"))if(n.isMarkoTag())if((0,Hn.isAttributeTag)(n)){const e=h(n);r.add(e),(t[e]||=[]).push(n),ts(n)}else ns(n,t,r);return r}function ss(e){let t;const r=new Set;for(const n of e){const e=n.parentPath;if(r.has(e)||!x(e))return!0;const s=is(e);if(s&&s!==(t||=s))return!0;r.add(e)}return!1}function is(e){if("if"===h(e))return e;let t=e.getPrevSibling();for(;t.node;){if(t.isMarkoTag()&&"if"===h(t))return t;t=t.getPrevSibling()}}var os=new WeakSet;function as(e,t,r=[]){const n=new Set,s=[],i=e.node.extra?.attributeTags;if(i){for(const e in i){const o=i[e];us(t,o.name)&&(n.add(o.name),o.dynamic&&(r.push(on.types.variableDeclaration("let",[on.types.variableDeclarator(es(o))])),s.push(on.types.objectProperty(kn(o.name),es(o)))))}const o=e.get("attributeTags");for(let e=0;e<o.length;e++){const n=o[e];if(n.isMarkoTag())if((0,sn.isAttributeTag)(n)){const a=i[h(n)];if(a.dynamic)e=cs(o,e,i,r,t);else{const e=as(n,t?.[a.name]?.props,r);if(a.repeated){const t=fs(a.name,s);t?t.value=At("attrTags",t.value,ps(e.properties)):s.push(on.types.objectProperty(kn(a.name),At("attrTag",ps(e.properties))))}else s.push(on.types.objectProperty(kn(a.name),At("attrTag",ps(e.properties))))}}else e=cs(o,e,i,r,t)}}if(!n.has("renderBody")&&us(t,"renderBody")){n.add("renderBody");const t=function(e){const t=e.node.extra?.section;if(t)return Gr()?At("register",At("createRenderer",on.types.arrowFunctionExpression(e.node.params,on.types.blockStatement(e.node.body))),on.types.stringLiteral(Sr(t,"renderer")),me(fe(function(e){let t=e;for(;t.node&&"attributeTags"===t.listKey;)t=t.parentPath;return t}(e.parentPath)))):on.types.callExpression(on.types.identifier(t.name),[Fr])}(e.get("body"));if(t){const e=on.types.objectProperty(on.types.identifier("renderBody"),t);os.add(e),s.push(e)}}const{attributes:o}=e.node;for(let e=o.length;e--;){const r=o[e],{value:i}=r;on.types.isMarkoSpreadAttribute(r)?s.push(on.types.spreadElement(i)):!n.has(r.name)&&us(t,r.name)&&(n.add(r.name),s.push(on.types.objectProperty(kn(r.name),i)))}return s.reverse(),{properties:s,statements:r}}function ls(e){for(const t of e)if(os.has(t))return t}function cs(e,t,r,n,s){const i=e[t];if(i.isMarkoTag())if((0,sn.isAttributeTag)(i)){const e=r[h(i)];if(us(s,e.name)&&e.dynamic){const t=as(i,s?.[e.name]?.props,n);e.repeated?n.push(on.types.expressionStatement(on.types.assignmentExpression("=",es(e),At("attrTags",es(e),ps(t.properties))))):n.push(on.types.expressionStatement(on.types.assignmentExpression("=",es(e),At("attrTag",ps(t.properties)))))}}else switch(h(i)){case"if":return function(e,t,r,n,s){const i=e[t],o=[];let a=on.types.ifStatement(ms(i),on.types.blockStatement(o));n.push(a),ds(i,r,o,s);let l=t+1;for(;l<e.length;){const t=e[l];if(t.isMarkoTag())switch(h(t)){case"else-if":case"else":{const e=ms(t),n=[];if(ds(t,r,n,s),e){a.alternate=a=on.types.ifStatement(e,on.types.blockStatement(n)),l++;continue}a.alternate=on.types.blockStatement(n);break}}break}return l-1}(e,t,r,n,s);case"for":return function(e,t,r,n,s){const i=e[t],o=[];return ds(i,r,o,s),n.push(Zn(Gn(i.node),cn(i.node),i.node.body.params,o)),t}(e,t,r,n,s)}return t}function ps(e){return 1===e.length&&on.types.isSpreadElement(e[0])?e[0].argument:on.types.objectExpression(e)}function ds(e,t,r,n){const s=e.get("attributeTags");for(let e=0;e<s.length;e++)e=cs(s,e,t,r,n)}function us(e,t){return!e||!!e[t]}function fs(e,t){for(const r of t)if("ObjectProperty"===r.type)switch(r.key.type){case"StringLiteral":if(r.key.value===e)return r;break;case"Identifier":if(r.key.name===e)return r}return!1}function ms({node:{attributes:e}}){return 1===e.length?e[0].value:void 0}var hs={analyze(e){if((0,nn.assertNoArgs)(e),!e.node.var)throw e.get("name").buildCodeFrameError("The `define` tag requires a tag variable.");const t=e.get("body");pe(t),Ie(e,4),Me(t,3),De(de(e),e.node,qe(e.node))},translate:{enter(e){Gr()&&Ht(e)},exit(e){const{node:t}=e,r=as(e);if(Gr())Qt(e),Nr(e.get("body")),e.insertBefore(r.statements),Qr(e,ps(r.properties));else{const n=fe(e),s=t.extra?.referencedBindings,i=hr(e.get("var").node.extra.binding);r.statements.length&&vr("render",n,s,r.statements),wr(n,s,i,ps(r.properties))}e.remove()}},attributes:{},autocomplete:[{description:"Use to create a constant object binding that can be rendered.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#define"}],types:"@marko/translator-tags/tag-types/define.d.marko"},gs=r("../../node_modules/@marko/babel-utils/dist/index.js"),ys=r("../../browser-shims/compiler/index.js"),bs={analyze(e){const[t]=e.node.attributes;if((0,gs.assertNoArgs)(e),(0,gs.assertNoParams)(e),j(e),(0,gs.assertNoVar)(e),!t)throw e.get("name").buildCodeFrameError("The `do` tag requires a value.");if(e.node.attributes.length>1||!ys.types.isMarkoAttribute(t)||!t.default&&"value"!==t.name)throw e.get("name").buildCodeFrameError("The `do` tag only supports the `value` attribute.")},translate:{exit(e){const t=fe(e),[r]=e.node.attributes,{value:n}=r,s=n.extra?.referencedBindings;let i=null;if(ys.types.isFunctionExpression(n)||ys.types.isArrowFunctionExpression(n))if(ys.types.isBlockStatement(n.body)){let e=!1;for(const t of n.body.body)if(ys.types.isDeclaration(t)){e=!0;break}i=e?n.body:n.body.body}else i=ys.types.expressionStatement(n.body);Gr()?i?e.insertBefore(i):e.insertBefore(ys.types.expressionStatement(ys.types.callExpression(n,[]))):vr("render",t,s,i??ys.types.expressionStatement(ys.types.callExpression(n,[Fr]))),e.remove()}},attributes:{},autocomplete:[{description:"Use to run a function on render.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#do"}],types:"@marko/translator-tags/tag-types/do.d.marko"},xs=r("../../node_modules/@marko/babel-utils/dist/index.js"),vs=r("../../browser-shims/compiler/index.js"),ws={analyze(e){const{node:t}=e,[r]=t.attributes;if((0,xs.assertNoArgs)(e),(0,xs.assertNoVar)(e),(0,xs.assertNoParams)(e),j(e),!r)throw e.get("name").buildCodeFrameError("The `effect` tag requires a value.");if(t.attributes.length>1||!vs.types.isMarkoAttribute(r)||!r.default&&"value"!==r.name)throw e.get("name").buildCodeFrameError("The `effect` tag only supports the `value` attribute.");(r.value.extra??={}).isEffect=!0,(_r.node.extra??={}).isInteractive=!0},translate:{exit(e){const{node:t}=e,[r]=t.attributes,n=fe(e),{value:s}=r,i=s.extra?.referencedBindings;if(Xr()){const{value:e}=r;let t=null;if(vs.types.isFunctionExpression(e)||vs.types.isArrowFunctionExpression(e))if(vs.types.isBlockStatement(e.body)){let r=!1;for(const t of e.body.body)if(vs.types.isDeclaration(t)){r=!0;break}t=r?e.body:e.body.body}else t=vs.types.expressionStatement(e.body);vr("effect",n,i,t||vs.types.expressionStatement(vs.types.callExpression(e,[Fr])),e,!!t)}else Pr(n,i);e.remove()}},attributes:{},autocomplete:[{description:"Use to create a side effects.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#effect"}],types:"@marko/translator-tags/tag-types/effect.d.marko"},ks=r("../../node_modules/@marko/babel-utils/dist/index.js"),Ss={parse(e){const{node:t}=e;e.replaceWith((0,ks.parseStatements)(e.hub.file,t.rawValue,t.start,t.end)[0])},parseOptions:{statement:!0,rawOpenTag:!0},autocomplete:[{displayText:"export <value>"}]},Es=r("../../node_modules/@marko/babel-utils/dist/index.js"),As=r("../../browser-shims/compiler/index.js"),Cs=Symbol("comment tag binding"),Ts=Symbol("node getter id"),Is={analyze(e){(0,Es.assertNoArgs)(e),(0,Es.assertNoParams)(e),(0,Es.assertNoAttributes)(e);const t=e.node.var;let r=!1,n=!1;if(t){if(!As.types.isIdentifier(t))throw e.get("var").buildCodeFrameError("The `html-comment` tag variable cannot be destructured.");r=!0;for(const r of e.scope.getBinding(t.name).referencePaths)if(!r.parentPath?.isCallExpression()){n=!0;break}}const s=[];for(const t of e.get("body").get("body"))if(t.isMarkoPlaceholder())s.push(t.node.value),r=!0;else if(!t.isMarkoText())throw t.buildCodeFrameError("Invalid child. Only text is allowed inside an html comment.");if(r){const t=de(e),r=e.node.extra??={};n&&(r[Ts]=Ar(t,"comment")),r[Cs]=Te("#comment",0,t),De(t,e.node,s)}e.skip()},translate(e){const t=e.node.extra,r=t[Cs];if(e.node.var){const n=t[Ts];if(Gr())Qr(e,At("nodeRef",n&&me(fe(e)),n&&As.types.stringLiteral(n)));else{const t=e.node.var.name,s=e.scope.getBinding(t).referencePaths;let i;n&&(i=_r.scope.generateUidIdentifier(`get_${t}`),_r.pushContainer("body",As.types.variableDeclaration("const",[As.types.variableDeclarator(i,At("nodeRef",As.types.stringLiteral(n),Ge(r)))])));for(const t of s){const n=fe(t);t.parentPath?.isCallExpression()?t.parentPath.replaceWith(As.types.expressionStatement(kt(n,r))):i&&t.replaceWith(As.types.callExpression(i,[wt(n,fe(e))]))}}}t[Cs]&&Vt(e,32);const n=Xt(e);if(Ft(e),n`<!--`,Gr())for(const t of e.node.body.body)As.types.isMarkoText(t)?n`${t.value}`:As.types.isMarkoPlaceholder(t)&&n`${At("escapeXML",t.value)}`;else{const s=[],i=[];let o="";for(const t of e.node.body.body)As.types.isMarkoText(t)?o+=t.value:As.types.isMarkoPlaceholder(t)&&(s.push(As.types.templateElement({raw:o})),i.push(t.value),o="");0===i.length?n`${o}`:(s.push(As.types.templateElement({raw:o})),vr("render",fe(e),t.referencedBindings,As.types.expressionStatement(At("data",As.types.memberExpression(Fr,Ge(r),!0),As.types.templateLiteral(s,i)))))}zt(e),n`-->`,r&&er(e,r),e.remove()},parseOptions:{text:!0},attributes:{},autocomplete:[{description:"Use to create an html comment that is not stripped from the output.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#html-comment"}]},Ms=r("../../node_modules/@marko/babel-utils/dist/index.js"),js=r("../../browser-shims/compiler/index.js"),Ps={analyze(e){(0,Ms.assertNoArgs)(e),(0,Ms.assertNoParams)(e),(0,Ms.assertNoAttributes)(e),j(e),(0,Ms.assertNoAttributeTags)(e);const{node:t}=e;if(!t.var)throw e.get("name").buildCodeFrameError("The `id` tag requires a tag variable.");if(!js.types.isIdentifier(t.var))throw e.get("var").buildCodeFrameError("The `id` tag cannot be destructured");Ie(e,4)},translate:{exit(e){const{node:t}=e,r=Gr()?At("nextTagId"):At("nextTagId",Fr);if(Gr())e.replaceWith(js.types.variableDeclaration("const",[js.types.variableDeclarator(t.var,r)]));else{const n=hr(t.var.extra.binding);wr(fe(e),void 0,n,r),e.remove()}}},attributes:{},autocomplete:[{displayText:"id/<name>",description:"Use to create a unique identifier.",snippet:"id/${1:name}",descriptionMoreURL:"https://markojs.com/docs/core-tags/#id"}],types:"@marko/translator-tags/tag-types/id.d.marko"},Ns=r("../../node_modules/@marko/babel-utils/dist/index.js"),Bs=r("../../browser-shims/compiler/index.js"),Ds=r("../../browser-shims/compiler/index.js"),Ls=Symbol("if node binding"),Us=new WeakMap,Os={analyze(e){if(function(e){switch((0,Ns.assertNoVar)(e),(0,Ns.assertNoArgs)(e),(0,Ns.assertNoParams)(e),function(e){if(!e.node.body.body.length&&!e.node.attributeTags.length)throw e.get("name").buildCodeFrameError(`The \`${h(e)}\` tag requires body content.`)}(e),M(e),h(e)){case"if":Fs(e);break;case"else-if":Fs(e),_s(e);break;case"else":!function(e){const{node:t}=e,[r]=t.attributes;if(t.attributes.length>1||r&&"if"!==r.name){const r=t.attributes[1].loc?.start,n=t.attributes[t.attributes.length-1].loc?.end,s=`The \`${h(e)}\` tag only supports an \`if=\` attribute.`;throw null==r||null==n?e.get("name").buildCodeFrameError(s):e.hub.buildError({loc:{start:r,end:n}},s,Error)}}(e),_s(e)}}(e),e.node.attributeTags.length)return;const[t,r]=zs(e,pe(e.get("body")));if(t){const[t]=r[0],n=t.node.extra??={},s=[];let i=!0;for(const[e,t]of r)t&&(t.upstreamExpression=n,null===t.content||t.content?.singleChild||(i=!1)),e.node.attributes.length&&s.push(e.node.attributes[0].value);const o=de(e);n[Ls]=Te("#text",0,o,void 0,n),n.singleNodeOptimization=i,De(o,t.node,s)}},translate:hn({html:{enter(e){if(e.node.attributeTags.length)return;const t=e.get("body"),r=ue(t),n=function(e){return Ws(e)?e:Us.get(e)[0][0]}(e).node.extra,s=q(n.referencedBindings),i=n.singleNodeOptimization;Ws(e)&&Vt(e,37),Wt(e),Ht(e),r&&(ge(r,!0),s&&!i&&Xt(t)`${At("markResumeScopeStart",me(r))}`)},exit(e){if(e.node.attributeTags.length)return;const t=e.get("body"),r=fe(e),n=ue(t),[s,i]=zs(e,n),o=i[0][0].node.extra,a=o[Ls],l=q(o.referencedBindings),c=o.singleNodeOptimization,p=n&&Se(n,!0);if(n&&((l||p)&&dr(n),Qt(e),lr(e,(()=>{})),Nr(t)),s){const t=Xt(e),n=e.getNextSibling(),s=e.scope.generateUidIdentifier("ifScopeId"),o=e.scope.generateUidIdentifier("ifRenderer");let u;for(let e=i.length;e--;){const[t,r]=i[e],n=t.node.body.body;if(r){const e=Se(r,!0);l&&n.push(Bs.types.expressionStatement(At("register",Bs.types.assignmentExpression("=",o,At("createRenderer",Bs.types.arrowFunctionExpression([],Bs.types.blockStatement([])))),Bs.types.stringLiteral(Sr(r,"renderer"))))),(l||e)&&n.push(Bs.types.expressionStatement(Bs.types.assignmentExpression("=",s,me(r))))}const[a]=t.node.attributes,c=(d=n,Array.isArray(d)?1===d.length?d[0]:Ds.types.blockStatement(d):d);u=a?Bs.types.ifStatement(a.value,c,u):c,t.remove()}l||p?(n.insertBefore([Bs.types.variableDeclaration("let",[Bs.types.variableDeclarator(s),l&&Bs.types.variableDeclarator(o)].filter(Boolean)),u]),l&&(c?t`${At("markResumeControlSingleNodeEnd",me(r),Ge(a),s)}`:t`${At("markResumeControlEnd",me(r),Ge(a))}`,ur(r).set(Bs.types.stringLiteral(Ge(a).value+"("),o)),ur(r).set(Bs.types.stringLiteral(Ge(a).value+"!"),At("getScopeById",s))):n.insertBefore(u)}var d}},dom:{enter(e){if(e.node.attributeTags.length)return;const t=ue(e.get("body"));t&&ge(t,!0),Ws(e)&&Vt(e,37),Wt(e)},exit(e){if(e.node.attributeTags.length)return;const[t,r]=zs(e,ue(e.get("body")));if(t){const t=fe(e),n=r[0][0].node.extra,s=n[Ls];let i=Bs.types.nullLiteral();for(let e=r.length;e--;){const[t,n]=r[e],[o]=t.node.attributes,a=n?Bs.types.identifier(n.name):Bs.types.numericLiteral(0);lr(t,(e=>At("inConditionalScope",e,Ge(s)))),t.remove(),i=o?Bs.types.conditionalExpression(o.value,a,i):a}const o=mr(t,s,"if");o.build=()=>At("conditional",Ge(s),gr(o,[Fr])),o.hasDownstreamIntersections=()=>r.some((([,e])=>e?.closures)),wr(t,n.referencedBindings,o,i)}}}}),parseOptions:{controlFlow:!0},autocomplete:[{snippet:"if=${1:condition}",description:"Use to display content only if the condition is met.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#if-else-if-else"}]},$s={...Os,autocomplete:[{snippet:"else-if=${1:condition}",description:"Use after an <if> or <else-if> tag to display content if those conditions do not match and this one does.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#if-else-if-else"}]},Rs={...Os,autocomplete:[{description:"Use after an <if> or <else-if> tag to display content if those conditions do not match.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#if-else-if-else"}]};function _s(e){let t=e.getPrevSibling();for(;t.node&&t.isMarkoComment();)t=t.getPrevSibling();if(!x(t)||"else"!==h(t)&&!t.node.attributes.length)throw e.buildCodeFrameError(`The \`<${h(e)}>\` must have a preceding \`<if=cond>\`, \`<else-if=cond>\`, or \`<else if=cond>\`.`)}function Fs(e){const{node:t}=e,[r]=t.attributes;if(!Bs.types.isMarkoAttribute(r)||!r.default)throw e.get("name").buildCodeFrameError(`The \`${h(e)}\` tag requires a value.`);if(t.attributes.length>1){const r=t.attributes[1].loc?.start,n=t.attributes[t.attributes.length-1].loc?.end,s=`The \`${h(e)}\` tag only supports the \`value\` attribute.`;throw null==r||null==n?e.get("name").buildCodeFrameError(s):e.hub.buildError({loc:{start:r,end:n}},s,Error)}}function zs(e,t){const r=Us.get(e)??[];let n=e.getNextSibling();for(;n.isMarkoComment();)n=n.getNextSibling();const s=!(b(n,"else")||b(n,"else-if"));return r.push([e,t]),s||Us.set(n,r),[s,r]}function Ws(e){return b(e,"if")}var Vs=r("../../node_modules/@marko/babel-utils/dist/index.js"),qs={parse(e){const{node:t}=e;e.replaceWith((0,Vs.parseStatements)(e.hub.file,t.rawValue,t.start,t.end)[0])},parseOptions:{statement:!0,rawOpenTag:!0},autocomplete:[{displayText:'import <scope> from "<path>"',description:"Use to import external modules, follows the same syntax as JavaScript imports.",snippet:'import ${2} from "${1:path}"',descriptionMoreURL:"https://markojs.com/docs/syntax/#importing-external-files"}]},Js=r("../../node_modules/@marko/babel-utils/dist/index.js"),Zs=r("../../browser-shims/compiler/index.js"),Gs={analyze(e){const{node:t}=e,r=t.var,{optimize:n}=Kr();let s,i;for(const r of t.attributes)if(Zs.types.isMarkoAttribute(r))if("value"===r.name)s=r;else{if("valueChange"!==r.name){const t=r.loc?.start,n=r.loc?.end,s="The `let` tag only supports the `value` attribute and its change handler.";throw null==t||null==n?e.get("name").buildCodeFrameError(s):e.hub.buildError({loc:{start:t,end:n}},s,Error)}i=r}if((0,Js.assertNoArgs)(e),(0,Js.assertNoParams)(e),j(e),M(e),!r)throw e.get("name").buildCodeFrameError("The `let` tag requires a tag variable.");if(!Zs.types.isIdentifier(r))throw e.get("var").buildCodeFrameError("The `let` tag variable cannot be destructured.");if(i&&(0,Js.computeNode)(i.value))throw e.get("attributes").find((e=>e.node===i)).get("value").buildCodeFrameError("The `let` tag `valueChange` attribute must be a function.");if(i){const t=(i.value.extra??={})?.referencedBindings;i.value.extra.static=Zs.types.isFunction(i.value),n&&Zs.types.isIdentifier(i.value)&&1===((o=t)?Array.isArray(o)?o.length:1:0)?i.value.extra.binding=t:i.value.extra.binding=Te(e.scope.generateUid(r.name+"_change"),1,fe(e),void 0,i.value.extra)}var o;Ie(e,1,void 0,s?s.value.extra??={}:void 0,i?.value.extra?.binding)},translate:{exit(e){const{node:t}=e,r=t.var,{optimize:n}=Kr(),s=t.attributes.find((e=>Zs.types.isMarkoAttribute(e)&&(e.default||"value"===e.name)))??Zs.types.markoAttribute("value",Zs.types.identifier("undefined")),i=t.attributes.find((e=>Zs.types.isMarkoAttribute(e)&&"valueChange"===e.name)),o=i?.value.extra?.binding;if(Xr()){const t=fe(e),a=r.extra.binding,l=hr(a),c=s.value.extra?.referencedBindings,p=!c;if(o&&(!n||!Zs.types.isIdentifier(i.value))){const e=hr(o);if(!n&&!Zs.types.isFunction(i.value)){const t=e.build;e.build=()=>{const e=t();return At("changeHandler",Ge(o),e)}}wr(t,i.value.extra?.referencedBindings,e,i.value)}if(wr(t,c,l,s.value),!p&&!i?.value.extra?.static){let r;Object.defineProperty(l,"callee",{get(){if(!r){const n=e.scope.generateUidIdentifier(l.identifier.name+"_init");r=o?Zs.types.conditionalExpression(kt(t,o),l.identifier,n):n,_r.pushContainer("body",Zs.types.variableDeclaration("const",[Zs.types.variableDeclarator(n,At("initValue",Ge(a),l.identifier))]))}return r}})}l.buildAssignment=(e,t)=>function(e,t,r,n){if(!n)return At("queueSource",wt(r,e.section),e.identifier,t);const s=It.types.identifier(n.name);return n.upstreamExpression?.static?It.types.callExpression(s,[t]):At("queueControllableSource",wt(r,e.section),e.identifier,s,t)}(l,t,e,o)}else Qr(e,s.value),o&&e.insertBefore(Zs.types.variableDeclaration("const",[Zs.types.variableDeclarator(Zs.types.identifier(o.name),i.value)]));e.remove()}},attributes:{},autocomplete:[{description:"Use to create a mutable binding.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#let"}],types:"@marko/translator-tags/tag-types/let.d.marko"},Xs=r("../../node_modules/@marko/babel-utils/dist/index.js"),Ks=r("../../browser-shims/compiler/index.js"),Hs=Symbol("lifecycle attrs reference"),Qs=new Set(["onMount","onUpdate","onDestroy"]),Ys={analyze(e){(0,Xs.assertNoArgs)(e),(0,Xs.assertNoVar)(e),(0,Xs.assertNoParams)(e),j(e);const{node:t}=e,r=t.extra??={},n=de(e);if(r[Hs]=Te(e.scope.generateUid("lifecycle"),4,n,void 0,r),0===t.attributes.length)throw e.get("name").buildCodeFrameError("The `lifecycle` tag requires at least one attribute.");for(const r of t.attributes){if(Ks.types.isMarkoSpreadAttribute(r))throw e.get("name").buildCodeFrameError("The `lifecycle` tag does not support `...spread` attributes.");if(!Qs.has(r.name))throw e.get("name").buildCodeFrameError(`The \`lifecycle\` tag does not support the \`${r.name}\` attribute.`);(r.value.extra??={}).isEffect=!0}(_r.node.extra??={}).isInteractive=!0,De(n,e.node,qe(e.node))},translate:{exit(e){const{node:t}=e,r=fe(e),n=t.extra,{referencedBindings:s}=n,i=n[Hs];if(Xr()){const n=as(e);n.statements.push(Ks.types.expressionStatement(At("lifecycle",Fr,Ge(i),ps(n.properties)))),vr("effect",r,s,n.statements,t.attributes.map((e=>e.value)))}else Pr(r,s);e.remove()}},attributes:{},autocomplete:[{description:"Use to create a side effects.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#effect"}],types:"@marko/translator-tags/tag-types/lifecycle.d.marko"},ei=r("../../node_modules/@marko/babel-utils/dist/index.js"),ti=r("../../browser-shims/compiler/index.js"),ri={analyze(e){const[t]=e.node.attributes;if((0,ei.assertNoArgs)(e),(0,ei.assertNoVar)(e),(0,ei.assertNoParams)(e),j(e),!t)throw e.get("name").buildCodeFrameError("The `log` tag requires a value.");if(e.node.attributes.length>1||!ti.types.isMarkoAttribute(t)||!t.default&&"value"!==t.name)throw e.get("name").buildCodeFrameError("The `log` tag only supports the `value` attribute.")},translate:{exit(e){const t=fe(e),[r]=e.node.attributes,{value:n}=r,s=n.extra?.referencedBindings,i=ti.types.expressionStatement(ti.types.callExpression(ti.types.memberExpression(ti.types.identifier("console"),ti.types.identifier("log")),[n]));Gr()?e.insertBefore(i):vr("render",t,s,i),e.remove()}},attributes:{},autocomplete:[{description:"Use to log a value to the console.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#log"}],types:"@marko/translator-tags/tag-types/log.d.marko"},ni={migrate:[e=>e.remove()]},si=r("../../node_modules/@marko/babel-utils/dist/index.js"),ii=r("../../browser-shims/compiler/index.js"),oi={parse(e){const{node:t,hub:{file:r}}=e,n=t.rawValue,s=n.replace(/^server\s*/,"").trim(),i=t.name.start+(n.length-s.length);let o=(0,si.parseStatements)(r,s,i,i+s.length);1===o.length&&ii.types.isBlockStatement(o[0])&&(o=o[0].body),e.replaceWith(ii.types.markoScriptlet(o,!0,"server"))},parseOptions:{statement:!0,rawOpenTag:!0},autocomplete:[{displayText:"server <statement>",description:"A JavaScript statement which is only evaluated once your template is loaded on the server.",descriptionMoreURL:"https://markojs.com/docs/syntax/#server-javascript"}]},ai=r("../../node_modules/@marko/babel-utils/dist/index.js"),li=r("../../browser-shims/compiler/index.js"),ci={parse(e){const{node:t,hub:{file:r}}=e,n=t.rawValue,s=n.replace(/^static\s*/,"").trim(),i=t.name.start+(n.length-s.length);let o=(0,ai.parseStatements)(r,s,i,i+s.length);1===o.length&&li.types.isBlockStatement(o[0])&&(o=o[0].body),e.replaceWith(li.types.markoScriptlet(o,!0))},parseOptions:{statement:!0,rawOpenTag:!0},autocomplete:[{displayText:"static <statement>",description:"A JavaScript statement which is only evaluated once your template is loaded.",descriptionMoreURL:"https://markojs.com/docs/syntax/#static-javascript"}]},pi=r("../../node_modules/@marko/babel-utils/dist/index.js"),di=r("../../browser-shims/compiler/index.js"),ui=",".charCodeAt(0),fi=";".charCodeAt(0),mi=new Uint8Array(64),hi=new Uint8Array(128);for(let e=0;e<64;e++){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(e);mi[e]=t,hi[t]=e}function gi(e,t,r){let n=t-r;n=n<0?-n<<1|1:n<<1;do{let t=31&n;n>>>=5,n>0&&(t|=32),e.write(mi[t])}while(n>0);return t}var yi="undefined"!=typeof TextDecoder?new TextDecoder:void 0!==s?{decode:e=>s.from(e.buffer,e.byteOffset,e.byteLength).toString()}:{decode(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}},bi=class{constructor(){this.pos=0,this.out="",this.buffer=new Uint8Array(16384)}write(e){const{buffer:t}=this;t[this.pos++]=e,16384===this.pos&&(this.out+=yi.decode(t),this.pos=0)}flush(){const{buffer:e,out:t,pos:r}=this;return r>0?t+yi.decode(e.subarray(0,r)):t}},xi=class e{constructor(t){this.bits=t instanceof e?t.bits.slice():[]}add(e){this.bits[e>>5]|=1<<(31&e)}has(e){return!!(this.bits[e>>5]&1<<(31&e))}},vi=class e{constructor(e,t,r){this.start=e,this.end=t,this.original=r,this.intro="",this.outro="",this.content=r,this.storeName=!1,this.edited=!1,this.previous=null,this.next=null}appendLeft(e){this.outro+=e}appendRight(e){this.intro=this.intro+e}clone(){const t=new e(this.start,this.end,this.original);return t.intro=this.intro,t.outro=this.outro,t.content=this.content,t.storeName=this.storeName,t.edited=this.edited,t}contains(e){return this.start<e&&e<this.end}eachNext(e){let t=this;for(;t;)e(t),t=t.next}eachPrevious(e){let t=this;for(;t;)e(t),t=t.previous}edit(e,t,r){return this.content=e,r||(this.intro="",this.outro=""),this.storeName=t,this.edited=!0,this}prependLeft(e){this.outro=e+this.outro}prependRight(e){this.intro=e+this.intro}reset(){this.intro="",this.outro="",this.edited&&(this.content=this.original,this.storeName=!1,this.edited=!1)}split(t){const r=t-this.start,n=this.original.slice(0,r),s=this.original.slice(r);this.original=n;const i=new e(t,this.end,s);return i.outro=this.outro,this.outro="",this.end=t,this.edited?(i.edit("",!1),this.content=""):this.content=n,i.next=this.next,i.next&&(i.next.previous=i),i.previous=this,this.next=i,i}toString(){return this.intro+this.content+this.outro}trimEnd(e){if(this.outro=this.outro.replace(e,""),this.outro.length)return!0;const t=this.content.replace(e,"");return t.length?(t!==this.content&&(this.split(this.start+t.length).edit("",void 0,!0),this.edited&&this.edit(t,this.storeName,!0)),!0):(this.edit("",void 0,!0),this.intro=this.intro.replace(e,""),!!this.intro.length||void 0)}trimStart(e){if(this.intro=this.intro.replace(e,""),this.intro.length)return!0;const t=this.content.replace(e,"");if(t.length){if(t!==this.content){const e=this.split(this.end-t.length);this.edited&&e.edit(t,this.storeName,!0),this.edit("",void 0,!0)}return!0}return this.edit("",void 0,!0),this.outro=this.outro.replace(e,""),!!this.outro.length||void 0}},wi="undefined"!=typeof globalThis&&"function"==typeof globalThis.btoa?e=>globalThis.btoa(unescape(encodeURIComponent(e))):"function"==typeof s?e=>s.from(e,"utf-8").toString("base64"):()=>{throw new Error("Unsupported environment: `window.btoa` or `Buffer` should be supported.")},ki=class{constructor(e){this.version=3,this.file=e.file,this.sources=e.sources,this.sourcesContent=e.sourcesContent,this.names=e.names,this.mappings=function(e){const t=new bi;let r=0,n=0,s=0,i=0;for(let o=0;o<e.length;o++){const a=e[o];if(o>0&&t.write(fi),0===a.length)continue;let l=0;for(let e=0;e<a.length;e++){const o=a[e];e>0&&t.write(ui),l=gi(t,o[0],l),1!==o.length&&(r=gi(t,o[1],r),n=gi(t,o[2],n),s=gi(t,o[3],s),4!==o.length&&(i=gi(t,o[4],i)))}}return t.flush()}(e.mappings),void 0!==e.x_google_ignoreList&&(this.x_google_ignoreList=e.x_google_ignoreList)}toString(){return JSON.stringify(this)}toUrl(){return"data:application/json;charset=utf-8;base64,"+wi(this.toString())}};function Si(e,t){const r=e.split(/[/\\]/),n=t.split(/[/\\]/);for(r.pop();r[0]===n[0];)r.shift(),n.shift();if(r.length){let e=r.length;for(;e--;)r[e]=".."}return r.concat(n).join("/")}var Ei=Object.prototype.toString;function Ai(e){const t=e.split("\n"),r=[];for(let e=0,n=0;e<t.length;e++)r.push(n),n+=t[e].length+1;return function(e){let t=0,n=r.length;for(;t<n;){const s=t+n>>1;e<r[s]?n=s:t=s+1}const s=t-1;return{line:s,column:e-r[s]}}}var Ci=/\w/,Ti=class{constructor(e){this.hires=e,this.generatedCodeLine=0,this.generatedCodeColumn=0,this.raw=[],this.rawSegments=this.raw[this.generatedCodeLine]=[],this.pending=null}addEdit(e,t,r,n){if(t.length){const s=t.length-1;let i=t.indexOf("\n",0),o=-1;for(;i>=0&&s>i;){const s=[this.generatedCodeColumn,e,r.line,r.column];n>=0&&s.push(n),this.rawSegments.push(s),this.generatedCodeLine+=1,this.raw[this.generatedCodeLine]=this.rawSegments=[],this.generatedCodeColumn=0,o=i,i=t.indexOf("\n",i+1)}const a=[this.generatedCodeColumn,e,r.line,r.column];n>=0&&a.push(n),this.rawSegments.push(a),this.advance(t.slice(o+1))}else this.pending&&(this.rawSegments.push(this.pending),this.advance(t));this.pending=null}addUneditedChunk(e,t,r,n,s){let i=t.start,o=!0,a=!1;for(;i<t.end;){if("\n"===r[i])n.line+=1,n.column=0,this.generatedCodeLine+=1,this.raw[this.generatedCodeLine]=this.rawSegments=[],this.generatedCodeColumn=0,o=!0;else{if(this.hires||o||s.has(i)){const t=[this.generatedCodeColumn,e,n.line,n.column];"boundary"===this.hires?Ci.test(r[i])?a||(this.rawSegments.push(t),a=!0):(this.rawSegments.push(t),a=!1):this.rawSegments.push(t)}n.column+=1,this.generatedCodeColumn+=1,o=!1}i+=1}this.pending=null}advance(e){if(!e)return;const t=e.split("\n");if(t.length>1){for(let e=0;e<t.length-1;e++)this.generatedCodeLine++,this.raw[this.generatedCodeLine]=this.rawSegments=[];this.generatedCodeColumn=0}this.generatedCodeColumn+=t[t.length-1].length}},Ii="\n",Mi={insertLeft:!1,insertRight:!1,storeName:!1},ji=class e{constructor(e,t={}){const r=new vi(0,e.length,e);Object.defineProperties(this,{original:{writable:!0,value:e},outro:{writable:!0,value:""},intro:{writable:!0,value:""},firstChunk:{writable:!0,value:r},lastChunk:{writable:!0,value:r},lastSearchedChunk:{writable:!0,value:r},byStart:{writable:!0,value:{}},byEnd:{writable:!0,value:{}},filename:{writable:!0,value:t.filename},indentExclusionRanges:{writable:!0,value:t.indentExclusionRanges},sourcemapLocations:{writable:!0,value:new xi},storedNames:{writable:!0,value:{}},indentStr:{writable:!0,value:void 0},ignoreList:{writable:!0,value:t.ignoreList}}),this.byStart[0]=r,this.byEnd[e.length]=r}addSourcemapLocation(e){this.sourcemapLocations.add(e)}append(e){if("string"!=typeof e)throw new TypeError("outro content must be a string");return this.outro+=e,this}appendLeft(e,t){if("string"!=typeof t)throw new TypeError("inserted content must be a string");this._split(e);const r=this.byEnd[e];return r?r.appendLeft(t):this.intro+=t,this}appendRight(e,t){if("string"!=typeof t)throw new TypeError("inserted content must be a string");this._split(e);const r=this.byStart[e];return r?r.appendRight(t):this.outro+=t,this}clone(){const t=new e(this.original,{filename:this.filename});let r=this.firstChunk,n=t.firstChunk=t.lastSearchedChunk=r.clone();for(;r;){t.byStart[n.start]=n,t.byEnd[n.end]=n;const e=r.next,s=e&&e.clone();s&&(n.next=s,s.previous=n,n=s),r=e}return t.lastChunk=n,this.indentExclusionRanges&&(t.indentExclusionRanges=this.indentExclusionRanges.slice()),t.sourcemapLocations=new xi(this.sourcemapLocations),t.intro=this.intro,t.outro=this.outro,t}generateDecodedMap(e){e=e||{};const t=Object.keys(this.storedNames),r=new Ti(e.hires),n=Ai(this.original);return this.intro&&r.advance(this.intro),this.firstChunk.eachNext((e=>{const s=n(e.start);e.intro.length&&r.advance(e.intro),e.edited?r.addEdit(0,e.content,s,e.storeName?t.indexOf(e.original):-1):r.addUneditedChunk(0,e,this.original,s,this.sourcemapLocations),e.outro.length&&r.advance(e.outro)})),{file:e.file?e.file.split(/[/\\]/).pop():void 0,sources:[e.source?Si(e.file||"",e.source):e.file||""],sourcesContent:e.includeContent?[this.original]:void 0,names:t,mappings:r.raw,x_google_ignoreList:this.ignoreList?[0]:void 0}}generateMap(e){return new ki(this.generateDecodedMap(e))}_ensureindentStr(){void 0===this.indentStr&&(this.indentStr=function(e){const t=e.split("\n"),r=t.filter((e=>/^\t+/.test(e))),n=t.filter((e=>/^ {2,}/.test(e)));if(0===r.length&&0===n.length)return null;if(r.length>=n.length)return"\t";const s=n.reduce(((e,t)=>{const r=/^ +/.exec(t)[0].length;return Math.min(r,e)}),1/0);return new Array(s+1).join(" ")}(this.original))}_getRawIndentString(){return this._ensureindentStr(),this.indentStr}getIndentString(){return this._ensureindentStr(),null===this.indentStr?"\t":this.indentStr}indent(e,t){const r=/^[^\r\n]/gm;var n;if(n=e,"[object Object]"===Ei.call(n)&&(t=e,e=void 0),void 0===e&&(this._ensureindentStr(),e=this.indentStr||"\t"),""===e)return this;const s={};(t=t||{}).exclude&&("number"==typeof t.exclude[0]?[t.exclude]:t.exclude).forEach((e=>{for(let t=e[0];t<e[1];t+=1)s[t]=!0}));let i=!1!==t.indentStart;const o=t=>i?`${e}${t}`:(i=!0,t);this.intro=this.intro.replace(r,o);let a=0,l=this.firstChunk;for(;l;){const t=l.end;if(l.edited)s[a]||(l.content=l.content.replace(r,o),l.content.length&&(i="\n"===l.content[l.content.length-1]));else for(a=l.start;a<t;){if(!s[a]){const t=this.original[a];"\n"===t?i=!0:"\r"!==t&&i&&(i=!1,a===l.start||(this._splitChunk(l,a),l=l.next),l.prependRight(e))}a+=1}a=l.end,l=l.next}return this.outro=this.outro.replace(r,o),this}insert(){throw new Error("magicString.insert(...) is deprecated. Use prependRight(...) or appendLeft(...)")}insertLeft(e,t){return Mi.insertLeft||(console.warn("magicString.insertLeft(...) is deprecated. Use magicString.appendLeft(...) instead"),Mi.insertLeft=!0),this.appendLeft(e,t)}insertRight(e,t){return Mi.insertRight||(console.warn("magicString.insertRight(...) is deprecated. Use magicString.prependRight(...) instead"),Mi.insertRight=!0),this.prependRight(e,t)}move(e,t,r){if(r>=e&&r<=t)throw new Error("Cannot move a selection inside itself");this._split(e),this._split(t),this._split(r);const n=this.byStart[e],s=this.byEnd[t],i=n.previous,o=s.next,a=this.byStart[r];if(!a&&s===this.lastChunk)return this;const l=a?a.previous:this.lastChunk;return i&&(i.next=o),o&&(o.previous=i),l&&(l.next=n),a&&(a.previous=s),n.previous||(this.firstChunk=s.next),s.next||(this.lastChunk=n.previous,this.lastChunk.next=null),n.previous=l,s.next=a||null,l||(this.firstChunk=n),a||(this.lastChunk=s),this}overwrite(e,t,r,n){return n=n||{},this.update(e,t,r,{...n,overwrite:!n.contentOnly})}update(e,t,r,n){if("string"!=typeof r)throw new TypeError("replacement content must be a string");if(0!==this.original.length){for(;e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length}if(t>this.original.length)throw new Error("end is out of bounds");if(e===t)throw new Error("Cannot overwrite a zero-length range – use appendLeft or prependRight instead");this._split(e),this._split(t),!0===n&&(Mi.storeName||(console.warn("The final argument to magicString.overwrite(...) should be an options object. See https://github.com/rich-harris/magic-string"),Mi.storeName=!0),n={storeName:!0});const s=void 0!==n&&n.storeName,i=void 0!==n&&n.overwrite;if(s){const r=this.original.slice(e,t);Object.defineProperty(this.storedNames,r,{writable:!0,value:!0,enumerable:!0})}const o=this.byStart[e],a=this.byEnd[t];if(o){let e=o;for(;e!==a;){if(e.next!==this.byStart[e.end])throw new Error("Cannot overwrite across a split point");e=e.next,e.edit("",!1)}o.edit(r,s,!i)}else{const n=new vi(e,t,"").edit(r,s);a.next=n,n.previous=a}return this}prepend(e){if("string"!=typeof e)throw new TypeError("outro content must be a string");return this.intro=e+this.intro,this}prependLeft(e,t){if("string"!=typeof t)throw new TypeError("inserted content must be a string");this._split(e);const r=this.byEnd[e];return r?r.prependLeft(t):this.intro=t+this.intro,this}prependRight(e,t){if("string"!=typeof t)throw new TypeError("inserted content must be a string");this._split(e);const r=this.byStart[e];return r?r.prependRight(t):this.outro=t+this.outro,this}remove(e,t){if(0!==this.original.length){for(;e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length}if(e===t)return this;if(e<0||t>this.original.length)throw new Error("Character is out of bounds");if(e>t)throw new Error("end must be greater than start");this._split(e),this._split(t);let r=this.byStart[e];for(;r;)r.intro="",r.outro="",r.edit(""),r=t>r.end?this.byStart[r.end]:null;return this}reset(e,t){if(0!==this.original.length){for(;e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length}if(e===t)return this;if(e<0||t>this.original.length)throw new Error("Character is out of bounds");if(e>t)throw new Error("end must be greater than start");this._split(e),this._split(t);let r=this.byStart[e];for(;r;)r.reset(),r=t>r.end?this.byStart[r.end]:null;return this}lastChar(){if(this.outro.length)return this.outro[this.outro.length-1];let e=this.lastChunk;do{if(e.outro.length)return e.outro[e.outro.length-1];if(e.content.length)return e.content[e.content.length-1];if(e.intro.length)return e.intro[e.intro.length-1]}while(e=e.previous);return this.intro.length?this.intro[this.intro.length-1]:""}lastLine(){let e=this.outro.lastIndexOf(Ii);if(-1!==e)return this.outro.substr(e+1);let t=this.outro,r=this.lastChunk;do{if(r.outro.length>0){if(e=r.outro.lastIndexOf(Ii),-1!==e)return r.outro.substr(e+1)+t;t=r.outro+t}if(r.content.length>0){if(e=r.content.lastIndexOf(Ii),-1!==e)return r.content.substr(e+1)+t;t=r.content+t}if(r.intro.length>0){if(e=r.intro.lastIndexOf(Ii),-1!==e)return r.intro.substr(e+1)+t;t=r.intro+t}}while(r=r.previous);return e=this.intro.lastIndexOf(Ii),-1!==e?this.intro.substr(e+1)+t:this.intro+t}slice(e=0,t=this.original.length){if(0!==this.original.length){for(;e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length}let r="",n=this.firstChunk;for(;n&&(n.start>e||n.end<=e);){if(n.start<t&&n.end>=t)return r;n=n.next}if(n&&n.edited&&n.start!==e)throw new Error(`Cannot use replaced character ${e} as slice start anchor.`);const s=n;for(;n;){!n.intro||s===n&&n.start!==e||(r+=n.intro);const i=n.start<t&&n.end>=t;if(i&&n.edited&&n.end!==t)throw new Error(`Cannot use replaced character ${t} as slice end anchor.`);const o=s===n?e-n.start:0,a=i?n.content.length+t-n.end:n.content.length;if(r+=n.content.slice(o,a),!n.outro||i&&n.end!==t||(r+=n.outro),i)break;n=n.next}return r}snip(e,t){const r=this.clone();return r.remove(0,e),r.remove(t,r.original.length),r}_split(e){if(this.byStart[e]||this.byEnd[e])return;let t=this.lastSearchedChunk;const r=e>t.end;for(;t;){if(t.contains(e))return this._splitChunk(t,e);t=r?this.byStart[t.end]:this.byEnd[t.start]}}_splitChunk(e,t){if(e.edited&&e.content.length){const r=Ai(this.original)(t);throw new Error(`Cannot split a chunk that has already been edited (${r.line}:${r.column} – "${e.original}")`)}const r=e.split(t);return this.byEnd[t]=e,this.byStart[t]=r,this.byEnd[r.end]=r,e===this.lastChunk&&(this.lastChunk=r),this.lastSearchedChunk=e,!0}toString(){let e=this.intro,t=this.firstChunk;for(;t;)e+=t.toString(),t=t.next;return e+this.outro}isEmpty(){let e=this.firstChunk;do{if(e.intro.length&&e.intro.trim()||e.content.length&&e.content.trim()||e.outro.length&&e.outro.trim())return!1}while(e=e.next);return!0}length(){let e=this.firstChunk,t=0;do{t+=e.intro.length+e.content.length+e.outro.length}while(e=e.next);return t}trimLines(){return this.trim("[\\r\\n]")}trim(e){return this.trimStart(e).trimEnd(e)}trimEndAborted(e){const t=new RegExp((e||"\\s")+"+$");if(this.outro=this.outro.replace(t,""),this.outro.length)return!0;let r=this.lastChunk;do{const e=r.end,n=r.trimEnd(t);if(r.end!==e&&(this.lastChunk===r&&(this.lastChunk=r.next),this.byEnd[r.end]=r,this.byStart[r.next.start]=r.next,this.byEnd[r.next.end]=r.next),n)return!0;r=r.previous}while(r);return!1}trimEnd(e){return this.trimEndAborted(e),this}trimStartAborted(e){const t=new RegExp("^"+(e||"\\s")+"+");if(this.intro=this.intro.replace(t,""),this.intro.length)return!0;let r=this.firstChunk;do{const e=r.end,n=r.trimStart(t);if(r.end!==e&&(r===this.lastChunk&&(this.lastChunk=r.next),this.byEnd[r.end]=r,this.byStart[r.next.start]=r.next,this.byEnd[r.next.end]=r.next),n)return!0;r=r.next}while(r);return!1}trimStart(e){return this.trimStartAborted(e),this}hasChanged(){return this.original!==this.toString()}_replaceRegexp(e,t){function r(e,r){return"string"==typeof t?t.replace(/\$(\$|&|\d+)/g,((t,r)=>"$"===r?"$":"&"===r?e[0]:+r<e.length?e[+r]:`$${r}`)):t(...e,e.index,r,e.groups)}if(e.global)(function(e,t){let r;const n=[];for(;r=e.exec(t);)n.push(r);return n})(e,this.original).forEach((e=>{if(null!=e.index){const t=r(e,this.original);t!==e[0]&&this.overwrite(e.index,e.index+e[0].length,t)}}));else{const t=this.original.match(e);if(t&&null!=t.index){const e=r(t,this.original);e!==t[0]&&this.overwrite(t.index,t.index+t[0].length,e)}}return this}_replaceString(e,t){const{original:r}=this,n=r.indexOf(e);return-1!==n&&this.overwrite(n,n+e.length,t),this}replace(e,t){return"string"==typeof e?this._replaceString(e,t):this._replaceRegexp(e,t)}_replaceAllString(e,t){const{original:r}=this,n=e.length;for(let s=r.indexOf(e);-1!==s;s=r.indexOf(e,s+n))r.slice(s,s+n)!==t&&this.overwrite(s,s+n,t);return this}replaceAll(e,t){if("string"==typeof e)return this._replaceAllString(e,t);if(!e.global)throw new TypeError("MagicString.prototype.replaceAll called with a non-global RegExp argument");return this._replaceRegexp(e,t)}},Pi=u(r("../../node_modules/path-browserify/index.js")),Ni={taglibId:g,"<import>":qs,"<export>":Ss,"<attrs>":S,"<if>":Os,"<else-if>":$s,"<else>":Rs,"<for>":Jn,"<let>":Gs,"<const>":Yr,"<define>":hs,"<effect>":ws,"<do>":bs,"<log>":ri,"<debug>":rn,"<lifecycle>":Ys,"<id>":Ps,"<html-comment>":Is,"<return>":sr,"<style>":{analyze(e){(0,pi.assertNoArgs)(e),(0,pi.assertNoParams)(e),(0,pi.assertNoAttributeTags)(e)},translate(e){const{hub:{file:t}}=e,{filename:r,sourceMaps:n}=t.opts;(0,pi.assertNoParams)(e),M(e);let s="text/css";const i=e.get("attributes"),o=Pi.default.basename(r),a=i.find((e=>e.isMarkoAttribute()&&"type"===e.node.name)),l=i.find((e=>e.isMarkoAttribute()&&"class"===e.node.name));if(a&&l)throw l.buildCodeFrameError("The `style` tag must only use `type` or `class` and not both.");if(a){const e=a.get("value");if(!e.isStringLiteral())throw e.buildCodeFrameError("The `style` tag `type` attribute can only be a string literal.");s=e.node.value}else if(l){const e=l.get("value");if(!e.isStringLiteral())throw e.buildCodeFrameError("The `style` tag `class` attribute can only be a string literal.");s=e.node.value}"text/css"===s&&(s="css"),e.node.var&&!s.startsWith("module")&&(s="module."+s);const c=e.get("body").get("body"),p=c[0];if(1!==c.length||!p.isMarkoText())throw(p.isMarkoText()?c[1]:c[0]).buildCodeFrameError("The `style` tag currently only supports static content.");const{resolveVirtualDependency:d}=Kr(),u=(0,pi.getStart)(t,p.node),f=(0,pi.getEnd)(t,p.node);let m,h=p.node.value;if(d&&n&&null!==u&&null!==f){const e=new ji(t.code,{filename:r});e.remove(0,u),e.remove(f,t.code.length),m=e.generateMap({source:r,includeContent:!0}),"inline"!==n&&"both"!==n||(h+=`\n/*# sourceMappingURL=${m.toUrl()}*/`,"inline"===n&&(m=void 0))}const g=d?.(r,{virtualPath:`./${o}.${s}`,code:h,map:m});g&&(e.node.var?di.types.isIdentifier(e.node.var)?_r.pushContainer("body",di.types.importDeclaration([di.types.importDefaultSpecifier(e.node.var)],di.types.stringLiteral(g))):_r.pushContainer("body",di.types.variableDeclaration("const",[di.types.variableDeclarator(e.node.var,(0,pi.importDefault)(t,g,"style"))])):_r.pushContainer("body",di.types.importDeclaration([],di.types.stringLiteral(g)))),e.remove()},attributes:{}},"<await-reorderer>":ni,"<init-widgets>":ni,"<init-components>":ni,"<static>":ci,"<server>":oi,"<client>":C,"<__flush_here_and_after__>":w},Bi={translate:{enter(e){throw e.buildCodeFrameError("CDATA sections are not supported in Marko.")}}},Di={translate:{exit(e){e.remove()}}},Li={translate:{enter(e){throw e.buildCodeFrameError("XML declarations sections are not supported in Marko.")}}},Ui={translate:{exit(e){Gr()&&Xt(e)`<!${e.node.value}>`,e.remove()}}},Oi=r("../../node_modules/@marko/babel-utils/dist/index.js"),$i={analyze(e){const{node:t}=e,{source:r}=t,{value:n}=r,s=(0,Oi.resolveTagImport)(e,n);if(s){t.extra??={},t.extra.tagImport=s;const r=e.hub.file.metadata.marko.tags;r.includes(s)||r.push(s)}},translate:{exit(e){const{node:t}=e,{extra:r}=t,n=r?.tagImport;n&&(t.source.value=n)}}},Ri=r("../../node_modules/@marko/babel-utils/dist/index.js"),_i=r("../../browser-shims/compiler/index.js"),Fi=Symbol("placeholder node binding"),zi=Symbol("placeholder has sibling text"),Wi={script:"escapeScript",style:"escapeStyle"},Vi={analyze(e){const{node:t}=e,{confident:r,computed:n}=xn(e);(!r||!t.escape&&n)&&((t.extra??={})[Fi]=Te("#text",0,de(e),void 0,t.value.extra),function(e){const t=e.node.extra;let r=e.getPrevSibling();for(;r.node;){const e=we(r,"endType");if(null!==e){if(4===e||1===e||2===e)return t[zi]=1;break}r=r.getPrevSibling()}if(!r.node&&_i.types.isProgram(e.parentPath))return t[zi]=1;let n=e.getNextSibling();for(;n.node;){const e=we(n,"startType");if(null!==e){if(4===e||1===e||2===e)return t[zi]=2;break}n=n.getNextSibling()}if(!n.node&&_i.types.isProgram(e.parentPath))return t[zi]=2;t[zi]=0}(e))},translate:{exit(e){const t=Gr(),r=Xt(e),{node:n}=e,{value:s}=n,i=n.extra,{confident:o,computed:a}=i,l=i[Fi],c=t||o&&(n.escape||!a),p=c?n.escape?Wi[function({parentPath:e}){return e.isMarkoTag()&&(0,Ri.isNativeTag)(e)&&e.node.name.value||""}(e)]||"escapeXML":"toString":n.escape?"data":"html",d=q(s.extra?.referencedBindings),u=i[zi];o&&c?r`${Ct()[p](a)}`:(1===u?(t&&d&&r`<!>`,Vt(e,37)):2===u?Vt(e,37):(t||r` `,Vt(e,32)),t?(r`${At(p,s)}`,d&&er(e,l)):vr("render",fe(e),s.extra?.referencedBindings,_i.types.expressionStatement("data"===p?At("data",_i.types.memberExpression(Fr,Ge(l),!0),s):At("html",Fr,s,Ge(l))))),Wt(e),e.remove()}}},qi=r("../../browser-shims/compiler/index.js"),Ji=new WeakMap,Zi={migrate(e){const{name:t}=e.node;if(!e.scope.hasBinding(t)&&"out"===t){if(!qi.types.isMemberExpression(e.parent)||!qi.types.isIdentifier(e.parent.property)||"global"!==e.parent.property.name)throw e.buildCodeFrameError("Only `out.global` is supported for compatibility.");e.parentPath.replaceWith(qi.types.identifier("$global"))}},translate(e){const{name:t}=e.node;if(!e.scope.hasBinding(t))switch(t){case"$global":Gr()?e.replaceWith(qi.types.memberExpression(qi.types.callExpression(Et("getStreamData"),[]),qi.types.identifier("global"))):e.replaceWith(qi.types.memberExpression(Fr,qi.types.identifier("$global")));break;case"$signal":if(Gr()){const t=fe(e);t.hasCleanup||(t.hasCleanup=!0,Xt(F(e))`${At("markResumeCleanup",me(t))}`),e.replaceWith(qi.types.callExpression(qi.types.arrowFunctionExpression([],qi.types.blockStatement([qi.types.throwStatement(qi.types.newExpression(qi.types.identifier("Error"),[qi.types.stringLiteral("Cannot use $signal in a server render.")]))])),[]))}else{const t=fe(e),r=F(e);let n,s=Ji.get(t);s?n=s.get(r):(s=new Map,Ji.set(t,s)),n||(n=s.size,s.set(r,n),vr("render",t,r.node.extra?.referencedBindings,qi.types.expressionStatement(qi.types.callExpression(Et("resetAbortSignal"),[Fr,qi.types.numericLiteral(n)])))),e.replaceWith(qi.types.callExpression(Et("getAbortSignal"),[Fr,qi.types.numericLiteral(n)]))}}}},Gi={analyze(e){De(de(e),e.node,e.node.body)},translate:{exit(e){const{node:t}=e;if(Gr()){if(t.static)return;e.replaceWithMultiple(t.body)}else t.target&&"client"!==t.target?e.remove():t.static?e.replaceWithMultiple(t.body):(vr("render",fe(e),t.extra?.referencedBindings,t.body),e.remove())}}},Xi=r("../../node_modules/@marko/babel-utils/dist/index.js"),Ki=r("../../browser-shims/compiler/index.js"),Hi=r("../../node_modules/@marko/babel-utils/dist/index.js"),Qi=(r("../../browser-shims/compiler/index.js"),{analyze:{enter(e){if((0,Hi.assertNoVar)(e),(0,Hi.assertNoArgs)(e),pe(e.get("body")),!(0,Hi.findParentTag)(e))throw e.get("name").buildCodeFrameError("@tags must be nested within another tag.")}},translate:{enter(e){Gr()&&Ht(e)},exit(e){Gr()&&(Qt(e),Nr(e.get("body")))}}}),Yi=r("../../node_modules/@marko/babel-utils/dist/index.js"),eo=r("../../browser-shims/compiler/index.js"),to=u(r("../../node_modules/path-browserify/index.js")),ro=Symbol("custom tag child scope"),no={analyze:{enter(e){if((0,Yi.assertAttributesOrSingleArg)(e),ts(e),!(0,Yi.getTagTemplate)(e)){const t=h(e);if(t&&e.scope.hasBinding(t))throw e.get("name").buildCodeFrameError(`Local variables must in a dynamic tag unless they are PascalCase. Use \`<\${${t}}/>\` or rename to \`${t.charAt(0).toUpperCase()+t.slice(1)}\`.`);throw e.get("name").buildCodeFrameError("Unable to find entry point for custom tag.")}const t=de(e),r=e.get("body"),n=e.node.extra??={};pe(r),Ie(e,4),Me(r,3),n[ro]=Te("#childScope",0,t,void 0,n);const s=(0,Yi.loadFileForTag)(e);if(s.opts.filename===e.hub.file.opts.filename)De(t,e.node,qe(e.node));else{const r=s?.ast.program.extra;io(t,e,r?.domExports.params?.props?.[0]),_r.node.extra.hasInteractiveChild=r?.isInteractive||r?.hasInteractiveChild||!1}}},translate:{enter(e){Vt(e),Gr()&&Ht(e)},exit(e){Gr()?function(e){const t=e.get("body"),{node:r}=e;let n;if(Qt(e),Nr(t),eo.types.isStringLiteral(r.name)){const t=so(e);n=lo(e.hub.file,t)?zr:(0,Yi.importDefault)(e.hub.file,t,h(e))}else n=r.name;const s=r.var,i=fe(e),o=r.extra[ro],a=e.scope.generateUidIdentifier(o?.name);e.insertBefore(eo.types.variableDeclaration("const",[eo.types.variableDeclarator(a,At("peekNextScope"))])),ur(i).set(Ge(o),At("writeExistingScope",a));const l=(0,Yi.loadFileForTag)(e)?.ast.program.extra?.domExports?.params?.props?.[0],{properties:c,statements:p}=l?as(e,l.props):{properties:[],statements:[]};if(r.extra.tagNameNullable){const t=ls(c);let r;if(t){const n=t.value;t.value=r=e.scope.generateUidIdentifier("renderBody");const[s]=e.insertBefore(eo.types.variableDeclaration("const",[eo.types.variableDeclarator(r,n)]));s.skip()}let i=po(n,ps(c));s&&(Qr(e,eo.types.unaryExpression("void",eo.types.numericLiteral(0)),"let"),i=eo.types.assignmentExpression("=",s,i)),p.push(eo.types.ifStatement(n,eo.types.expressionStatement(i),r&&co(r)))}else s?(Qr(e,po(n,ps(c),At("register",eo.types.arrowFunctionExpression([],eo.types.blockStatement([])),eo.types.stringLiteral(Sr(i,r.var.extra?.binding)),me(i)))),dr(i)):p.push(co(n,ps(c)));for(const t of e.replaceWithMultiple(p))t.skip()}(e):function(e){const t=fe(e),{node:r}=e,n=r.extra[ro],s=Xt(e),{file:i}=e.hub,o=eo.types.isIdentifier(r.name)?r.name.name:eo.types.isStringLiteral(r.name)?r.name.value:"tag",a=so(e),l=(0,Yi.loadFileForTag)(e),c=l.ast.program.extra.domExports,p=ao(i,a,c.setup,o),d=c.params?.props?.[0];if(d&&oo(e,d,`${h(e)||"tag"}_input`,{circular:l.opts.filename===i.opts.filename,tagSection:t,relativePath:a,childScopeBinding:n}),s`${(0,Yi.importNamed)(i,a,c.template,`${o}_template`)}`,function(e,t){const r=Ot(fe(e));$t(fe(e)).push(`${_t[47]}`,t.name,_t[38]),Dt(r,String.fromCharCode(47)),r.push(t,String.fromCharCode(38))}(e,(0,Yi.importNamed)(i,a,c.walks,`${o}_walks`)),r.var){const e=hr(r.var.extra.binding);e.register=!0,vr("render",t,void 0,eo.types.expressionStatement(At("setTagVar",Fr,Ge(n),e.identifier)))}vr("render",t,void 0,eo.types.expressionStatement(eo.types.callExpression(p,[kt(t,n)]))),e.remove()}(e)}}};function so(e){const{node:t,hub:{file:r}}=e;let n;if(eo.types.isStringLiteral(t.name)){const t=(0,Yi.getTagTemplate)(e);n=t&&(0,Yi.resolveRelativePath)(r,t)}else t.extra?.tagNameImported&&(n=t.extra.tagNameImported);if(!n){const t=h(e);if(t&&e.scope.hasBinding(t))throw e.get("name").buildCodeFrameError(`Local variables must in a dynamic tag unless they are PascalCase. Use \`<\${${t}}/>\` or rename to \`${t.charAt(0).toUpperCase()+t.slice(1)}\`.`);throw e.get("name").buildCodeFrameError("Unable to find entry point for custom tag.")}return n}function io(e,t,r){if(!r)return void We(qe(t.node));if(!r.props||t.node.arguments?.length)return void De(e,t.node,qe(t.node));const n=ts(t),s=new Set;if(n){const i=new Map,o=(e,t)=>{const r=qe(t.node),n=i.get(e);n?n.referenceNodes=n.referenceNodes.concat(r):i.set(e,{firstTag:t,referenceNodes:r})};for(const e in n)s.add(n[e].name);for(const s of t.get("attributeTags"))if(s.isMarkoTag())if((0,Yi.isAttributeTag)(s)){const t=n[h(s)],i=r.props[t.name];i?i.props&&!t.dynamic?io(e,s,i):o(t.group,s):We(qe(s.node))}else{const e=s.node.extra.attributeTagGroup;let t=!1;for(const s of e)if(r.props[n[s].name]){t=!0;break}t?o(e,s):We(qe(s.node))}for(const{firstTag:t,referenceNodes:r}of i.values())De(e,t.node,r)}const{attributes:i}=t.node;let o;for(let e=i.length;e--;){const t=i[e];if(eo.types.isMarkoAttribute(t)){if(s.has(t.name)||!r.props[t.name]){We(t.value);continue}s.add(t.name)}o?o.push(t.value):eo.types.isMarkoSpreadAttribute(t)&&(o=[t.value])}o&&De(e,t.node,o)}function oo(e,t,r,n){if(e.node.arguments?.length){const[s]=e.node.arguments,i=ao(e.hub.file,n.relativePath,t.id,r);return void wr(n.tagSection,e.node.extra?.referencedBindings,uo(i),eo.types.isSpreadElement(s)?eo.types.memberExpression(s.argument,eo.types.numericLiteral(0)):s,kt(n.tagSection,n.childScopeBinding),At("inChild",Ge(n.childScopeBinding),eo.types.identifier(i.name)))}if(!t.props||n.circular){const s=e.node.extra?.referencedBindings,i=ao(e.hub.file,n.relativePath,t.id,r),o=as(e);return o.statements.length&&vr("render",n.tagSection,s,o.statements),void wr(n.tagSection,s,uo(i),ps(o.properties),kt(n.tagSection,n.childScopeBinding),At("inChild",Ge(n.childScopeBinding),eo.types.identifier(i.name)))}const s=new Set,i=ts(e);if(i){const o=e.get("attributeTags"),a=new Map,l=(e,r)=>{const n=o[r];let s=a.get(e)?.statements;return s||(s=[],a.set(e,{referencedBindings:n.node.extra?.referencedBindings,statements:s})),cs(o,r,i,s,t.props)};for(const e in i)s.add(i[e].name);for(let e=0;e<o.length;e++){const s=o[e];if(s.isMarkoTag())if((0,Yi.isAttributeTag)(s)){const o=i[h(s)],a=t.props[o.name];a&&(o.dynamic?e=l(o.group,e):oo(s,a,`${r}_${o.name}`,n))}else s.node.extra?.attributeTagGroup&&(e=l(s.node.extra.attributeTagGroup,e))}for(const[s,{referencedBindings:o,statements:l}]of a){const a=[];for(const l of s){const s=i[l],c=t.props[s.name];if(!c)continue;const p=ao(e.hub.file,n.relativePath,c.id,`${r}_${s.name}`);a.push(eo.types.variableDeclarator(es(s))),wr(n.tagSection,o,uo(p),es(s),kt(n.tagSection,n.childScopeBinding),At("inChild",Ge(n.childScopeBinding),eo.types.identifier(p.name)))}vr("render",n.tagSection,o,[eo.types.variableDeclaration("let",a),...l])}}const o=e.node.body.extra?.section;if(o&&!s.has("renderBody")&&(s.add("renderBody"),t.props.renderBody)){const s=(0,Yi.importNamed)(e.hub.file,n.relativePath,t.props.renderBody.id,`${r}_renderBody`);wr(n.tagSection,void 0,uo(s),eo.types.callExpression(eo.types.identifier(o.name),[Fr]),kt(n.tagSection,n.childScopeBinding),At("inChild",Ge(n.childScopeBinding),eo.types.identifier(s.name)))}const{attributes:a}=e.node,l=[];let c;for(let e=a.length;e--;){const r=a[e];if(eo.types.isMarkoAttribute(r)){if(!t.props[r.name]||s.has(r.name))continue;if(s.add(r.name),c){c.push(eo.types.objectProperty(kn(r.name),r.value));continue}l.push(r)}else c?c.push(eo.types.spreadElement(r.value)):c=[eo.types.spreadElement(r.value)]}for(const s of l.reverse()){const i=t.props[s.name],o=ao(e.hub.file,n.relativePath,i.id,`${r}_${s.name}`);wr(n.tagSection,s.value.extra?.referencedBindings,uo(o),s.value,kt(n.tagSection,n.childScopeBinding),At("inChild",Ge(n.childScopeBinding),eo.types.identifier(o.name)))}const p=new Set(Object.keys(t.props));for(const e of s)p.delete(e);if(p.size){const s=e.node.extra?.referencedBindings;let i=fo;if(c){const t=e.scope.generateUidIdentifier(`${r}_spread`);c.reverse(),i=e=>eo.types.memberExpression(t,kn(e)),vr("render",n.tagSection,s,[eo.types.variableDeclaration("const",[eo.types.variableDeclarator(t,ps(c))])])}for(const o of p){const a=t.props[o],l=ao(e.hub.file,n.relativePath,a.id,`${r}_${o}`);wr(n.tagSection,s,uo(l),i(o),kt(n.tagSection,n.childScopeBinding),At("inChild",Ge(n.childScopeBinding),eo.types.identifier(l.name)))}}}function ao(e,t,r,n){return lo(e,t)?eo.types.identifier(r):(0,Yi.importNamed)(e,t,r,n)}function lo(e,t){const{filename:r}=e.opts;return t===r||"."===t[0]&&to.default.resolve(r,"..",t)===r}function co(e,...t){return eo.types.expressionStatement(po(e,...t))}function po(e,...t){return eo.types.callExpression(e,t.filter(Boolean))}function uo(e){return{identifier:e,hasDownstreamIntersections:mo}}function fo(){return eo.types.unaryExpression("void",eo.types.numericLiteral(0))}function mo(){return!0}var ho=r("../../node_modules/@marko/babel-utils/dist/index.js"),go=r("../../browser-shims/compiler/index.js"),yo=Symbol("dynamic tag dom binding"),bo={analyze:{enter(e){(0,ho.assertAttributesOrArgs)(e),ts(e);const t=de(e),r=e.node.extra??={},n=e.get("body"),s=r[yo]=Te("#text",0,t,void 0,r);pe(n),Ie(e,4),Me(n,3),De(t,e.node,qe(e.node)),Fe(e,s)}},translate:{enter(e){Vt(e,37),Wt(e),Gr()&&Ht(e)},exit(e){const{node:t}=e,r=t.extra,n=r[yo],s=fe(e);let i=t.name;if(go.types.isStringLiteral(i)&&(i=(0,ho.importDefault)(e.hub.file,so(e),i.value)),"class"===r.featureType){const t=(o=e.hub.file.markoOpts,`marko/src/runtime/helpers/tags-compat/${Gr()?"html":"dom"}${o.optimize?"":"-debug"}.${"esm"===o.modules?"mjs":"js"}`);(0,ho.importDefault)(e.hub.file,t),Gr()?_r.pushContainer("body",go.types.expressionStatement(go.types.callExpression((0,ho.importNamed)(e.hub.file,t,"s"),[go.types.identifier(i.name),go.types.stringLiteral((0,ho.loadFileForTag)(e).metadata.marko.id)]))):_r.pushContainer("body",go.types.expressionStatement(At("register",go.types.stringLiteral((0,ho.loadFileForTag)(e).metadata.marko.id),go.types.identifier(i.name))))}var o;const{properties:a,statements:l}=as(e),c=[];let p=!1;if(t.arguments?.length)c.push(...t.arguments),a.length?(p=!0,c.push(ps(a))):p=t.arguments.length>1||go.types.isSpreadElement(t.arguments[0]);else{const e=ls(a);e?(a.splice(a.indexOf(e),1),c.push(ps(a),e.value)):c.push(ps(a))}if(Gr()){Qt(e),Nr(e.get("body"));const r=Xt(e);t.var&&(p||1!==c.length||c.push(go.types.unaryExpression("void",go.types.numericLiteral(0))),c.push(At("register",go.types.arrowFunctionExpression([],go.types.blockStatement([])),go.types.stringLiteral(Sr(s,t.var.extra?.binding)),me(s))));const o=_r.scope.generateUidIdentifier("dynamicScope"),a=p?At("dynamicTagArgs",o,i,go.types.arrayExpression(c)):At("dynamicTagInput",o,i,...c);l.push(go.types.variableDeclaration("const",[go.types.variableDeclarator(o,At("peekNextScope"))])),l.push(t.var?go.types.variableDeclaration("const",[go.types.variableDeclarator(t.var,a)]):go.types.expressionStatement(a)),r`${At("markResumeControlEnd",me(s),Ge(n))}`,ur(s).set(go.types.stringLiteral(Ge(n).value+"!"),At("writeExistingScope",o)),ur(s).set(go.types.stringLiteral(Ge(n).value+"("),At("normalizeDynamicRenderer",go.types.isIdentifier(i)?go.types.identifier(i.name):i));for(const t of e.replaceWithMultiple(l))t.skip()}else{const s=fe(e),o=ue(e.get("body")),a=mr(s,n,"dynamicTagName");if(a.build=()=>At("conditional",Ge(n),gr(a,[Fr]),yr(a)),a.hasDownstreamIntersections=()=>!0,wr(s,t.name.extra?.referencedBindings,a,o?go.types.logicalExpression("||",i,go.types.callExpression(go.types.identifier(o.name),[Fr])):i),e.node.var){const t=hr(e.node.var.extra.binding);t.register=!0,vr("render",s,n,go.types.expressionStatement(At("setTagVar",Fr,go.types.stringLiteral(Ge(r[yo]).value+"!"),t.identifier)))}if(c.length){const r=p?go.types.arrayExpression(c):c[0],i=go.types.arrowFunctionExpression([],l.length?go.types.blockStatement(l.concat(go.types.returnStatement(r))):r),a=_r.scope.generateUidIdentifier(e.get("name").toString()+"_input");let d=!1;wr(s,t.extra?.referencedBindings,{get identifier(){return d||(_r.pushContainer("body",go.types.variableDeclaration("const",[go.types.variableDeclarator(a,At("dynamicTagAttrs",Ge(n),o&&go.types.identifier(o.name),p&&go.types.numericLiteral(1)))])),d=!0),a},hasDownstreamIntersections:()=>!0},i)}e.remove()}}}},xo={transform:{enter(e){const t=e.get("attributes");for(let r=0;r<t.length;r++){const n=t[r];if(Ki.types.isMarkoAttribute(n.node)&&n.node.bound){n.node.bound=!1;const t=vo(e,n);if(null===t)throw n.buildCodeFrameError("Attributes may only be bound to identifiers or member expressions");e.node.attributes.splice(++r,0,Ki.types.markoAttribute(n.node.name+"Change",t)),e.scope.crawl()}}}},analyze:{enter(e){const t=(0,Xi.getTagDef)(e),r=le(e),n=t?.analyzer?.hook;if(n)dn(n,e);else if(0!==r)switch(r){case 1:no.analyze.enter(e);break;case 3:Qi.analyze.enter(e);break;case 2:bo.analyze.enter(e)}else $n.analyze.enter(e)},exit(e){const t=(0,Xi.getTagDef)(e)?.analyzer?.hook;t&&un(t,e)}},translate:{enter(e){const t=(0,Xi.getTagDef)(e),r=e.node.extra;if(t?.translator)return t.translator.path&&e.hub.file.metadata.marko.watchFiles.push(t.translator.path),void dn(t.translator.hook,e);for(const t of e.get("attributes"))if(t.isMarkoAttribute()){if(t.node.arguments)throw t.buildCodeFrameError(`Unsupported arguments on the \`${t.node.name}\` attribute.`);if(t.node.modifier){if(!(0,Xi.isNativeTag)(t.parentPath))throw t.buildCodeFrameError(`Unsupported modifier \`${t.node.modifier}\`.`);t.node.name+=`:${t.node.modifier}`}}if(r.tagNameDynamic&&r.tagNameNullable&&!e.get("name").isIdentifier()&&Gr()){const t=e.scope.generateUidIdentifier("tagName"),[r]=e.insertBefore(Ki.types.variableDeclaration("const",[Ki.types.variableDeclarator(t,e.node.name)]));r.skip(),e.set("name",t)}switch(r.tagNameType){case 0:$n.translate.enter(e);break;case 1:no.translate.enter(e);break;case 2:bo.translate.enter(e);break;case 3:Qi.translate.enter(e)}},exit(e){const t=(0,Xi.getTagDef)(e)?.translator;if(t)un(t.hook,e);else switch(e.node.extra.tagNameType){case 0:$n.translate.exit(e);break;case 1:no.translate.exit(e);break;case 2:bo.translate.exit(e);break;case 3:Qi.translate.exit(e)}}}};function vo(e,t){if(Ki.types.isIdentifier(t.node.value)){const r=e.scope.generateUidIdentifier("new_"+t.node.value.name);return Ki.types.functionExpression(null,[r],Ki.types.blockStatement([Ki.types.expressionStatement(Ki.types.assignmentExpression("=",t.node.value,r))]))}if(Ki.types.isMemberExpression(t.node.value)){const e=t.node.value.property;return Ki.types.isPrivateName(e)?null:Ki.types.isIdentifier(e)?Ki.types.memberExpression(Ki.types.cloneNode(t.node.value.object),Ki.types.identifier(e.name+"Change")):Ki.types.memberExpression(Ki.types.cloneNode(t.node.value.object),Ki.types.binaryExpression("+",Ki.types.cloneNode(e),Ki.types.stringLiteral("Change")),!0)}return null}r("../../browser-shims/compiler/index.js");var wo=function(e){const t={migrate:{},transform:{},analyze:{},translate:{}};for(const r in e){const n=r,s=e[n];s.migrate&&(t.migrate[n]=s.migrate),s.transform&&(t.transform[n]=s.transform),s.analyze&&(t.analyze[n]=s.analyze),s.translate&&(t.translate[n]=s.translate)}return t}({Program:Jr,Function:Mn,AssignmentExpression:Sn,UpdateExpression:Nn,ReferencedIdentifier:Zi,ImportDeclaration:$i,MarkoDocumentType:Ui,MarkoDeclaration:Li,MarkoCDATA:Bi,MarkoText:{translate:{exit(e){Xt(e)`${e.node.value}`,Wt(e),e.remove()}}},MarkoTag:xo,MarkoPlaceholder:Vi,MarkoScriptlet:Gi,MarkoComment:Di}),{transform:ko,analyze:So,translate:Eo}=wo,Ao=[["../../node_modules/@marko/translator-tags/dist",{...Ni,migrate:wo.migrate}]];function Co(e,t){return[`@marko/runtime-tags${t?"":"/debug"}/${"html"===e?"html":"dom"}`]}}}]);
//# sourceMappingURL=215.0e5fbbe7.js.map