"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[215],{"../../node_modules/@marko/translator-tags/dist/index.js":(e,t,r)=>{var n,s=r("../../node_modules/buffer/index.js").Buffer,i=Object.create,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,l=Object.getOwnPropertyNames,c=Object.getPrototypeOf,p=Object.prototype.hasOwnProperty,d=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let s of l(t))p.call(e,s)||s===r||o(e,s,{get:()=>t[s],enumerable:!(n=a(t,s))||n.enumerable});return e},u=(e,t,r)=>(r=null!=e?i(c(e)):{},d(!t&&e&&e.__esModule?r:o(r,"default",{value:e,enumerable:!0}),e)),f={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(f,{analyze:()=>Xi,getRuntimeEntryFiles:()=>Hi,internalEntryBuilder:()=>O,taglibs:()=>Gi,transform:()=>Zi,translate:()=>Ki}),e.exports=(n=f,d(o({},"__esModule",{value:!0}),n));var m=r("../../node_modules/@marko/babel-utils/dist/index.js"),h="marko-core";function g(e,t){return function(e){const t=e.isMarkoTag()&&(0,m.getTagDef)(e)?.taglibId;return t===h||"@marko/translator-interop-class-tags"===t}(e)&&e.node.name.value===t}var y=r("../../node_modules/@marko/babel-utils/dist/index.js"),b={transform:[e=>{(0,y.getTagDef)(e)?.renderer||e.replaceWithMultiple(e.node.body.body)}]},x=r("../../browser-shims/compiler/index.js"),v={migrate:[e=>{const t=e.node.var;if(!t||"Identifier"===t.type&&"input"===t.name)e.remove();else{const r=x.types.markoTag(x.types.stringLiteral("const"),[x.types.markoAttribute("value",x.types.identifier("input"))],x.types.markoTagBody([]));r.var=t,e.replaceWith(r)}}],attributes:{},autocomplete:[{displayText:"attrs/{ ... }",description:"Use to receive the attributes passed into this template.",snippet:"attrs/{ $1 }$2"}]},w=r("../../node_modules/@marko/babel-utils/dist/index.js"),E=r("../../browser-shims/compiler/index.js"),k={parse(e){const{node:t,hub:{file:r}}=e,n=t.rawValue,s=n.replace(/^client\s*/,"").trim(),i=t.name.start+(n.length-s.length);let o=(0,w.parseStatements)(r,s,i,i+s.length);1===o.length&&E.types.isBlockStatement(o[0])&&(o=o[0].body),e.replaceWith(E.types.markoScriptlet(o,!0,"client"))},parseOptions:{statement:!0,rawOpenTag:!0},autocomplete:[{displayText:"client <statement>",description:"A JavaScript statement which is only evaluated once your template is loaded on the client.",descriptionMoreURL:"https://markojs.com/docs/syntax/#client-javascript"}]},S=r("../../node_modules/@marko/babel-utils/dist/index.js"),A=r("../../node_modules/@marko/babel-utils/dist/index.js"),C=r("../../browser-shims/compiler/index.js"),I=r("../../browser-shims/compiler/index.js"),j=r("../../node_modules/@marko/babel-utils/dist/index.js"),T=r("../../browser-shims/compiler/index.js"),M=u(r("../../node_modules/path-browserify/index.js"));function D(e){if(e.downstreamExpressions.size)return!0;for(const t of e.aliases)if(D(t))return!0;for(const t of e.propertyAliases.values())if(D(t))return!0;return!1}var N=r("../../node_modules/@marko/babel-utils/dist/index.js"),L=r("../../browser-shims/compiler/index.js"),P=Symbol(),O={build(e){const t=e[P];if(!t)throw e.path.buildCodeFrameError("Unable to build hydrate code, no files were visited before finalizing the build");const r=t.imports.map((e=>L.types.importDeclaration([],L.types.stringLiteral(e))));return t.init&&(r.unshift(L.types.importDeclaration([L.types.importSpecifier(L.types.identifier("init"),L.types.identifier("init"))],L.types.stringLiteral(`@marko/runtime-tags/${e.markoOpts.optimize?"":"debug/"}dom`))),r.push(L.types.expressionStatement(L.types.callExpression(L.types.identifier("init"),[])))),r},visit(e,t,r){const n=t[P]||={imports:[],init:!1},{analyzedTags:s}=e.metadata.marko;n.imports.push((0,N.resolveRelativePath)(t,e.opts.filename)),n.init||=e.path.node.extra.hasInteractiveChild||e.path.node.extra.isInteractive||!1;for(const e of s||[])r(e)}};function U(){return"html"===R().output}function B(){return!U()}function R(){return lr.hub.file.markoOpts}var F=r("../../node_modules/@marko/babel-utils/dist/index.js"),$=r("../../browser-shims/compiler/index.js"),_=e=>{const t=new WeakMap;return[()=>{let r=t.get(lr);return r||t.set(lr,r=e()),r},e=>{t.set(lr,e)}]};function z(e,t){return[r=>{const n=lr.state[e]??={};return n[r.id]??=t&&t(r)},(t,r)=>{(lr.state[e]??={})[t.id]=r}]}var W=r("../../node_modules/@marko/babel-utils/dist/index.js"),V=r("../../browser-shims/compiler/index.js");function q(e,t){return e.start=t.start,e.loc=t.loc,e.end=t.end,e}var J=/^<.*>$|\.marko$/,Z=/^[A-Z][a-zA-Z0-9_$]*$/;function X(e){const t=e.node.extra??={};if(void 0===t.tagNameType){const r=e.get("name");if(r.isStringLiteral()){if(t.tagNameType="@"===r.node.value[0]?3:(0,W.isNativeTag)(e)?0:1,1===t.tagNameType){const n=r.node.value,s=e.scope.getBinding(n)?.identifier;if(s&&Z.test(s.name)){const e=q(V.types.identifier(n),r.node);e.extra={referencedBindings:s.extra?.binding},K(r.replaceWith(e)[0],t)}else{const r=(0,W.loadFileForTag)(e),n=r?.ast.program;"class"===n?.extra.featureType&&(t.tagNameType=2,t.featureType="class")}}t.tagNameNullable=t.tagNameNullable=!1}else K(r,t);void 0===t.tagNameType&&(t.tagNameType=2)}return t.tagNameType}function K(e,t){const r=[e];let n,s,i,o=!1;for(;(n=r.pop())&&2!==s;)if(n.isConditionalExpression())r.push(n.get("consequent")),n.node.alternate&&r.push(n.get("alternate"));else if(n.isLogicalExpression())"||"===n.node.operator?r.push(n.get("left")):o=!0,r.push(n.get("right"));else if(n.isAssignmentExpression())r.push(n.get("right"));else if(n.isBinaryExpression())s="+"!==n.node.operator||void 0!==s?2:0;else if(n.isStringLiteral()||n.isTemplateLiteral())s=void 0!==s?2:0;else if(n.isNullLiteral())o=!0;else if(n.isIdentifier()){if("undefined"===n.node.name){o=!0;continue}const t=n.scope.getBinding(n.node.name);if(!t){s=2;continue}if("module"===t.kind){const r=t.path.parent;if(J.test(r.source.value)&&r.specifiers.some((e=>V.types.isImportDefaultSpecifier(e)))){const t=(0,W.resolveTagImport)(e,r.source.value)||r.source.value;0===s||i&&i!==t?(s=2,i=void 0):(s=1,i=t)}else s=2;continue}const a=t.path;if(a.isMarkoTag()&&"local"===t.kind){const e=a.get("name").node.value;if("const"===e){r.push(a.get("attributes")[0].get("value"));continue}if("let"===e){s=2;continue}continue}s=2}else s=2;t.tagNameType=s,t.tagNameNullable=o,t.tagNameDynamic=!0,1===s&&i&&(t.tagNameImported=i)}function G(e){const t=e.node.extra??={};let r=t.section;if(!r&&("Program"===e.type||e.get("body").length)){const n=e.parentPath?H(e.parentPath):void 0,s=e.parentPath?.get("name"),i=e.isProgram()?"":lr.scope.generateUid(s.toString()+"Body"),o=e.hub.file.path.node.extra??={},a=o.sections??=[];r=t.section={id:a.length,name:i,depth:n?n.depth+1:0,parent:n,closures:new Set,bindings:new Set,content:ae(e),upstreamExpression:void 0,hasCleanup:!1},a.push(r)}return r}function H(e){let t=e;for(;;){if("Program"===t.type||"MarkoTagBody"===t.type&&0!==X(t.parentPath)&&"html-comment"!==t.parent.name.value)return G(t);t=t.parentPath}}function Q(e){let t,r=e;for(;void 0===(t=r.node.extra?.section);)r=r.parentPath;return ne(t,r),t}var[Y]=z("scopeIdIdentifier",(e=>lr.scope.generateUidIdentifier(`scope${e.id}_id`))),[ee,te]=z("parentIsOwner",(()=>!1)),[re,ne]=z("sectionPath"),[se]=z("scopeIdentifier",(()=>$.types.identifier("undefined"))),ie=(e,t)=>{const r=se(e);return t||"undefined"!==r.name||(r.name=lr.scope.generateUid(`scope${e.id}_`)),r};function oe(e){const{sections:t}=lr.node.extra;t?.forEach(e)}function ae(e){const t=e.get("body"),r={startType:null,endType:null,singleChild:!0};for(let e=t.length;e--;){const n=le(t[e],"endType",r);if(null!==n){r.endType=n;for(let n=0;n<e;n++){const e=le(t[n],"startType");if(null!==e)return r.startType=e,r.singleChild=!1,r}return r.startType=le(t[e],"startType"),r}}return null}function le(e,t,r){if($.types.isMarkoText(e))return 4;if($.types.isMarkoPlaceholder(e))return 2;if($.types.isMarkoScriptlet(e)||$.types.isMarkoComment(e))return null;if($.types.isMarkoTag(e.node)){const n=e;if((0,F.isNativeTag)(n))return 3;if((0,F.isAttributeTag)(n))return null;if($.types.isStringLiteral(e.node.name)){switch(e.node.name.value){case"html-comment":return 0;case"let":case"const":case"attrs":case"effect":case"lifecycle":case"return":case"id":case"define":return null}const s=(0,F.loadFileForTag)(n)?.ast.program.extra.section;if(s)return s.content?(r&&!s.content.singleChild&&"endType"===t&&(r.startType=s.content.startType,r.singleChild=!1),s.content[t]):null}}return 1}var ce=e=>{const t=e.upstreamExpression;return!t||Vr(t.referencedBindings)},pe=(e,t)=>{for(const r of e.closures)if((!t||e.parent===r.section)&&Vr(r))return!0},de=r("../../browser-shims/compiler/index.js"),ue=r("../../node_modules/@marko/babel-utils/dist/index.js"),fe=r("../../browser-shims/compiler/index.js");function me(e,t){return t?e:""}var he=/^(--|ta|or|li|z)|n-c|i(do|nk|m|t)|w$|we/;function ge(e,t){return t||0===t?`${e}:${"number"==typeof t&&t&&!he.test(e)?t+"px":t}`:""}function ye(e,t,r){switch(typeof e){case"string":return e;case"object":if(null!==e){let n="",s="";if(Array.isArray(e))for(const i of e){const e=ye(i,t,r);""!==e&&(n+=s+e,s=t)}else for(const i in e){const o=r(i,e[i]);""!==o&&(n+=s+o,s=t)}return n}}return""}var{hasOwnProperty:be}={};function xe(e){return Ee("class",ye(e," ",me))}function ve(e){return Ee("style",ye(e,";",ge))}function we(e,t){return null==(r=t)||!1===r?"":function(e,t){switch(typeof t){case"string":return` ${e+ke(t)}`;case"boolean":return` ${e}`;case"number":return` ${e}=${t}`;case"object":if(t instanceof RegExp)return` ${e+ke(t.source)}`}return` ${e+ke(t+"")}`}(e,t);var r}function Ee(e,t){return t&&` ${e}=${Ae(t)}`}function ke(e){return e?`=${Ae(e)}`:""}(function*(){})().constructor,async function*(){}().constructor,(()=>{const e=new Map;for(const t of Object.getOwnPropertyNames(Symbol)){const r=Symbol[t];"symbol"==typeof r&&e.set(r,"Symbol."+t)}})(),new Map([[AggregateError,"AggregateError"],[Array,"Array"],[Array.from,"Array.from"],[Array.isArray,"Array.isArray"],[Array.of,"Array.of"],[ArrayBuffer,"ArrayBuffer"],[ArrayBuffer.isView,"ArrayBuffer.isView"],[Atomics.add,"Atomics.add"],[Atomics.and,"Atomics.and"],[Atomics.compareExchange,"Atomics.compareExchange"],[Atomics.exchange,"Atomics.exchange"],[Atomics.isLockFree,"Atomics.isLockFree"],[Atomics.load,"Atomics.load"],[Atomics.notify,"Atomics.notify"],[Atomics.or,"Atomics.or"],[Atomics.store,"Atomics.store"],[Atomics.sub,"Atomics.sub"],[Atomics.wait,"Atomics.wait"],[BigInt,"BigInt"],[BigInt.asIntN,"BigInt.asIntN"],[BigInt.asUintN,"BigInt.asUintN"],[BigInt64Array,"BigInt64Array"],[BigInt64Array.from,"BigInt64Array.from"],[BigInt64Array.of,"BigInt64Array.of"],[BigUint64Array,"BigUint64Array"],[BigUint64Array.from,"BigUint64Array.from"],[BigUint64Array.of,"BigUint64Array.of"],[Boolean,"Boolean"],[console.assert,"console.assert"],[console.clear,"console.clear"],[console.count,"console.count"],[console.countReset,"console.countReset"],[console.debug,"console.debug"],[console.dir,"console.dir"],[console.dirxml,"console.dirxml"],[console.error,"console.error"],[console.group,"console.group"],[console.groupCollapsed,"console.groupCollapsed"],[console.groupEnd,"console.groupEnd"],[console.info,"console.info"],[console.log,"console.log"],[console.table,"console.table"],[console.time,"console.time"],[console.timeEnd,"console.timeEnd"],[console.timeLog,"console.timeLog"],[console.timeStamp,"console.timeStamp"],[console.trace,"console.trace"],[console.warn,"console.warn"],[DataView,"DataView"],[Date,"Date"],[Date.now,"Date.now"],[Date.parse,"Date.parse"],[Date.UTC,"Date.UTC"],[decodeURI,"decodeURI"],[decodeURIComponent,"decodeURIComponent"],[encodeURI,"encodeURI"],[encodeURIComponent,"encodeURIComponent"],[Error,"Error"],[EvalError,"EvalError"],[Float32Array,"Float32Array"],[Float32Array.from,"Float32Array.from"],[Float32Array.of,"Float32Array.of"],[Float64Array,"Float64Array"],[Float64Array.from,"Float64Array.from"],[Float64Array.of,"Float64Array.of"],[Function,"Function"],[globalThis.atob,"atob"],[globalThis.btoa,"btoa"],[globalThis.clearImmediate,"clearImmediate"],[globalThis.clearInterval,"clearInterval"],[globalThis.clearTimeout,"clearTimeout"],[globalThis.crypto?.getRandomValues,"crypto.getRandomValues"],[globalThis.crypto?.randomUUID,"crypto.randomUUID"],[globalThis.fetch,"fetch"],[globalThis.performance?.now,"performance.now"],[globalThis.queueMicrotask,"queueMicrotask"],[globalThis.setImmediate,"setImmediate"],[globalThis.setInterval,"setInterval"],[globalThis.setTimeout,"setTimeout"],[globalThis.structuredClone,"structuredClone"],[globalThis.URL,"URL"],[globalThis.URLSearchParams,"URLSearchParams"],[globalThis.WritableStream,"WritableStream"],[Int16Array,"Int16Array"],[Int16Array.from,"Int16Array.from"],[Int16Array.of,"Int16Array.of"],[Int32Array,"Int32Array"],[Int32Array.from,"Int32Array.from"],[Int32Array.of,"Int32Array.of"],[Int8Array,"Int8Array"],[Int8Array.from,"Int8Array.from"],[Int8Array.of,"Int8Array.of"],[Intl.Collator,"Intl.Collator"],[Intl.DateTimeFormat,"Intl.DateTimeFormat"],[Intl.DisplayNames,"Intl.DisplayNames"],[Intl.getCanonicalLocales,"Intl.getCanonicalLocales"],[Intl.ListFormat,"Intl.ListFormat"],[Intl.Locale,"Intl.Locale"],[Intl.NumberFormat,"Intl.NumberFormat"],[Intl.PluralRules,"Intl.PluralRules"],[Intl.RelativeTimeFormat,"Intl.RelativeTimeFormat"],[Intl.Segmenter,"Intl.Segmenter"],[Intl.supportedValuesOf,"Intl.supportedValuesOf"],[isFinite,"isFinite"],[isNaN,"isNaN"],[JSON.parse,"JSON.parse"],[JSON.stringify,"JSON.stringify"],[Map,"Map"],[Map.groupBy,"Map.groupBy"],[Math.abs,"Math.abs"],[Math.acos,"Math.acos"],[Math.acosh,"Math.acosh"],[Math.asin,"Math.asin"],[Math.asinh,"Math.asinh"],[Math.atan,"Math.atan"],[Math.atan2,"Math.atan2"],[Math.atanh,"Math.atanh"],[Math.cbrt,"Math.cbrt"],[Math.ceil,"Math.ceil"],[Math.clz32,"Math.clz32"],[Math.cos,"Math.cos"],[Math.cosh,"Math.cosh"],[Math.exp,"Math.exp"],[Math.expm1,"Math.expm1"],[Math.floor,"Math.floor"],[Math.fround,"Math.fround"],[Math.hypot,"Math.hypot"],[Math.imul,"Math.imul"],[Math.log,"Math.log"],[Math.log10,"Math.log10"],[Math.log1p,"Math.log1p"],[Math.log2,"Math.log2"],[Math.max,"Math.max"],[Math.min,"Math.min"],[Math.pow,"Math.pow"],[Math.random,"Math.random"],[Math.round,"Math.round"],[Math.sign,"Math.sign"],[Math.sin,"Math.sin"],[Math.sinh,"Math.sinh"],[Math.sqrt,"Math.sqrt"],[Math.tan,"Math.tan"],[Math.tanh,"Math.tanh"],[Math.trunc,"Math.trunc"],[Number,"Number"],[Number.isFinite,"Number.isFinite"],[Number.isInteger,"Number.isInteger"],[Number.isNaN,"Number.isNaN"],[Number.isSafeInteger,"Number.isSafeInteger"],[Number.parseFloat,"Number.parseFloat"],[Number.parseInt,"Number.parseInt"],[Object,"Object"],[Object.assign,"Object.assign"],[Object.create,"Object.create"],[Object.defineProperties,"Object.defineProperties"],[Object.defineProperty,"Object.defineProperty"],[Object.entries,"Object.entries"],[Object.freeze,"Object.freeze"],[Object.fromEntries,"Object.fromEntries"],[Object.getOwnPropertyDescriptor,"Object.getOwnPropertyDescriptor"],[Object.getOwnPropertyDescriptors,"Object.getOwnPropertyDescriptors"],[Object.getOwnPropertyNames,"Object.getOwnPropertyNames"],[Object.getOwnPropertySymbols,"Object.getOwnPropertySymbols"],[Object.getPrototypeOf,"Object.getPrototypeOf"],[Object.is,"Object.is"],[Object.isExtensible,"Object.isExtensible"],[Object.isFrozen,"Object.isFrozen"],[Object.isSealed,"Object.isSealed"],[Object.keys,"Object.keys"],[Object.preventExtensions,"Object.preventExtensions"],[Object.seal,"Object.seal"],[Object.setPrototypeOf,"Object.setPrototypeOf"],[Object.values,"Object.values"],[parseFloat,"parseFloat"],[parseInt,"parseInt"],[Promise,"Promise"],[Proxy,"Proxy"],[RangeError,"RangeError"],[ReferenceError,"ReferenceError"],[Reflect.apply,"Reflect.apply"],[Reflect.construct,"Reflect.construct"],[Reflect.defineProperty,"Reflect.defineProperty"],[Reflect.deleteProperty,"Reflect.deleteProperty"],[Reflect.get,"Reflect.get"],[Reflect.getOwnPropertyDescriptor,"Reflect.getOwnPropertyDescriptor"],[Reflect.getPrototypeOf,"Reflect.getPrototypeOf"],[Reflect.has,"Reflect.has"],[Reflect.isExtensible,"Reflect.isExtensible"],[Reflect.ownKeys,"Reflect.ownKeys"],[Reflect.preventExtensions,"Reflect.preventExtensions"],[Reflect.set,"Reflect.set"],[Reflect.setPrototypeOf,"Reflect.setPrototypeOf"],[RegExp,"RegExp"],[Set,"Set"],[String,"String"],[String.fromCharCode,"String.fromCharCode"],[String.fromCodePoint,"String.fromCodePoint"],[String.raw,"String.raw"],[Symbol,"Symbol"],[Symbol.for,"Symbol.for"],[SyntaxError,"SyntaxError"],[TypeError,"TypeError"],[Uint16Array,"Uint16Array"],[Uint16Array.from,"Uint16Array.from"],[Uint16Array.of,"Uint16Array.of"],[Uint32Array,"Uint32Array"],[Uint32Array.from,"Uint32Array.from"],[Uint32Array.of,"Uint32Array.of"],[Uint8Array,"Uint8Array"],[Uint8Array.from,"Uint8Array.from"],[Uint8Array.of,"Uint8Array.of"],[Uint8ClampedArray,"Uint8ClampedArray"],[Uint8ClampedArray.from,"Uint8ClampedArray.from"],[Uint8ClampedArray.of,"Uint8ClampedArray.of"],[URIError,"URIError"],[WeakMap,"WeakMap"],[WeakSet,"WeakSet"]]),new Map([[Atomics,"Atomics"],[console,"console"],[globalThis,"globalThis"],[globalThis.crypto,"crypto"],[Intl,"Intl"],[JSON,"JSON"],[Math,"Math"],[Reflect,"Reflect"]]),Symbol("Scope ID"),globalThis.setImmediate||globalThis.setTimeout||globalThis.queueMicrotask;var Se=/["'>\s]/g;function Ae(e){if(Se.test(e)){const t=e[Se.lastIndex-1];return Se.lastIndex=0,'"'===t?`'${e.replace(/'/g,"&#39;")}'`:`"${e.replace(/"/g,"&#34;")}"`}return e}function Ce(e){return e?e+"":0===e?"0":""}Symbol();var Ie=/[<&]/g,je=e=>"&"===e?"&amp;":"&lt;";function Te(e){return e?(t=e+"",Ie.test(t)?t.replace(Ie,je):t):0===e?"0":"&zwj;";var t}var Me=/<\/script/g;function De(e){return e?(t=e+"",Me.test(t)?t.replace(Me,"\\x3C/script"):t):0===e?"0":"";var t}var Ne=/<\/style/g;function Le(e){return e?(t=e+"",Ne.test(t)?t.replace(Ne,"\\3C/style"):t):0===e?"0":"";var t}var Pe=r("../../browser-shims/compiler/index.js");function Oe(e,t){return e?Array.isArray(e)?(e.push(t),e):[e,t]:t}function Ue(e,t){if(e)if(Array.isArray(e))for(const r of e)t(r);else t(e)}function Be(e,t,r){let n=t.length,s=0;for(;s<n;){const i=s+n>>>1,o=t[i],a=e(o,r);if(0===a)return o;a>0?n=i:s=i+1}}function Re(e,t,r){const n=t.length;let s=n,i=0;for(;i<s;){const n=i+s>>>1,o=e(t[n],r);if(0===o)return t;o>0?s=n:i=n+1}const o=new Array(n+1);for(let e=0;e<i;e++)o[e]=t[e];let a=r;for(;i<n;){const e=a;a=t[i],o[i++]=e}return o[n]=a,o}function Fe(e,t,r){const n=e(t,r);return 0===n?t:n<0?[t,r]:[r,t]}function $e(e,t){const r=e.depth,n=Pe.types.objectPattern([]);let s;return Ue(t,(t=>{if(t.name.includes("#"))return;const i=zr(t),o=Pe.types.identifier(t.name),a=i.value===o.name;let l=n;if(t.section!==e){s||(s=[n]);const e=r-t.section.depth;let i=s.length,o=s[i-1];for(;i<=e;i++){const e=Pe.types.objectPattern([]);o.properties.push(Pe.types.objectProperty(Pe.types.identifier("_"),e)),s.push(e),o=e}l=s[e]}l.properties.push(Pe.types.objectProperty(a?o:i,o,!1,a))})),n}function _e(e,t){let r=cr??Pe.types.identifier("undefined");const n=e.depth-t.depth;for(let e=0;e<n;e++)r=Pe.types.memberExpression(r,Pe.types.identifier("_"));if(n<0)throw new Error("Unable to find scope for reference.");return r}function ze(e,t){return Pe.types.memberExpression(_e(e,t.section),zr(t),!0)}var We=["createTemplate","createRenderer","createRendererWithOwner","value","intersection","closure","dynamicClosure","loopOf","loopIn","loopTo","conditional"];function Ve(e){const{output:t}=R();return(0,ue.importNamed)(lr.hub.file,function(e){const{optimize:t}=R();return`@marko/runtime-tags/${t?"":"debug/"}${"html"===e?"html":"dom"}`}(t),e)}function qe(e,...t){const r=fe.types.callExpression(Ve(e),function(e){const t=[];for(let r=e.length;r--;){const n=e[r];(n||t.length)&&(t[r]=n||fe.types.unaryExpression("void",fe.types.numericLiteral(0)))}return t}(t));return We.includes(e)&&(r.leadingComments=[{type:"CommentBlock",value:" @__PURE__ "}]),r}function Je(){return{escapeXML:Te,toString:Ce,attr:we,classAttr:xe,styleAttr:ve,escapeScript:De,escapeStyle:Le}}var Ze=r("../../node_modules/@marko/babel-utils/dist/index.js"),Xe=r("../../browser-shims/compiler/index.js"),Ke=r("../../node_modules/@marko/babel-utils/dist/index.js"),Ge=r("../../browser-shims/compiler/index.js");function He(e){for(const t of e.get("attributes"))if(t.isMarkoSpreadAttribute())throw t.buildCodeFrameError(`The \`${e.get("name").node.value}\` tag does not support \`...spread\` attributes.`)}function Qe(e){if(e.node.body.body.length)throw e.get("name").buildCodeFrameError(`The \`${e.get("name").node.value}\` tag does not support body content.`)}var Ye=r("../../browser-shims/compiler/index.js"),et=r("../../browser-shims/compiler/index.js");function tt(e){const t=[],r=[];let n=e[0];for(let s=1;s<e.length;s++){let i=e[s];if("object"==typeof i){if(!et.types.isStringLiteral(i)){if(et.types.isTemplateLiteral(i)){let t=s+1;const r=i.expressions.length;nt(e,t,i.quasis.length+r);for(let n=0;n<r;n++)e[t++]=i.quasis[n].value.raw,e[t++]=i.expressions[n];e[t]=i.quasis[r].value.raw;continue}r.push(i),t.push(n),n="";continue}i=i.value}n+=i}return r.length?(t.push(n),et.types.templateLiteral(t.map((e=>et.types.templateElement({raw:e}))),r)):n?et.types.stringLiteral(n):void 0}function rt(e,t){e[e.length-1]+=t}function nt(e,t,r){for(let n=e.length-1;n>=t;n--)e[n+r]=e[n]}var st=r("../../browser-shims/compiler/index.js"),[it]=z("walks",(()=>[""])),[ot]=z("walkComment",(()=>[])),[at]=z("steps",(()=>[])),lt={32:"get",36:"inside",37:"replace",38:"endChild",47:"beginChild",67:"next",97:"over",107:"out",117:"multiplier",91:"nextEnd",106:"overEnd",116:"outEnd",126:"multiplierEnd"};function ct(e){at(Q(e)).push(0)}function pt(e){at(Q(e)).push(1)}function dt(e){at(Q(e)).push(0,1)}function ut(e,t){if(U())return;const r=Q(e),n=at(r),s=it(r),i=ot(r);let o="";if(n.length){const e=[];let t=0;for(const r of n)0===r?(t++,e.push(67)):(t--,t>=0?(e.length=e.lastIndexOf(67),e.push(97)):(e.length=e.lastIndexOf(107)+1,e.push(107),t=0));let r=e[0],s=0;for(const t of e)t!==r?(i.push(`${lt[r]}(${s})`),o+=ft(r,s),r=t,s=1):s++;i.push(`${lt[r]}(${s})`),o+=ft(r,s),n.length=0}void 0!==t&&(32!==t&&yt(e)`<!>`,i.push(`${lt[t]}`),o+=String.fromCharCode(t)),rt(s,o)}function ft(e,t){switch(e){case 67:return mt(t,e,20);case 97:case 107:return mt(t,e,10);default:throw new Error(`Unexpected walk code: ${e}`)}}function mt(e,t,r){let n="";if(e>=r){const t=Math.floor(e/r);n+=mt(t,117,10),e-=t*r}return n+=String.fromCharCode(t+e),n}function ht(e){const t=1===e.content?.startType?String.fromCharCode(68):"",r=1===e.content?.endType?String.fromCharCode(68):"",n=tt([t,...it(e),r])||st.types.stringLiteral("");return""!==n.value&&(n.leadingComments=[{type:"CommentBlock",value:" "+ot(e).join(", ")+" "}]),n}var[gt]=z("writes",(()=>[""]));function yt(e){const t=Q(e);return(e,...r)=>{const n=r.length,s=gt(t);rt(s,e[0]);for(let t=0;t<n;t++)s.push(r[t],e[t+1])}}function bt(e){const t=gt(Q(e)),r=tt(t);if(t.length=0,t[0]="",r)return Ye.types.expressionStatement(qe("write",r))}function xt(e){const t=bt(e);t&&e.insertBefore(t)[0].skip()}function vt(e){const t=e.isProgram()?e:e.get("body"),r=bt(t);r&&t.pushContainer("body",r)[0].skip()}function wt(e){const t=1===e.content?.startType?"<!>":"",r=1===e.content?.endType?"<!>":"",n=gt(e);return{setup:or(e),walks:ht(e),writes:tt([t,...n,r])||Ye.types.stringLiteral("")}}function Et(e,t){const r=Q(e);if(0!==t.type)throw e.buildCodeFrameError("Tried to mark a node that was not determined to need a mark during analyze.");U()&&yt(e)`${qe("markResumeNode",Y(r),zr(t))}`}var[kt,St]=z("returnId"),At=new WeakSet,Ct={analyze(e){if((0,Ke.assertNoArgs)(e),(0,Ke.assertNoVar)(e),(0,Ke.assertNoParams)(e),Qe(e),He(e),At.has(e.hub))throw e.get("name").buildCodeFrameError("The `return` tag can only be used once per template.");At.add(e.hub);const{node:t}=e,[r]=t.attributes;if(!Ge.types.isMarkoAttribute(r)||!r.default)throw e.get("name").buildCodeFrameError("The `return` tag requires a value.");if(t.attributes.length>1&&"valueChange"!==t.attributes[1].name){const r=t.attributes[1].loc?.start,n=t.attributes[t.attributes.length-1].loc?.end,s="The `return` tag only supports the `value` attribute.";throw null==r||null==n?e.get("name").buildCodeFrameError(s):e.hub.buildError({loc:{start:r,end:n}},s,Error)}},translate:{exit(e){const t=Q(e),{node:{attributes:[{value:r}]},hub:{file:n}}=e;if(U()){xt(e);const s=n.path.scope.generateUidIdentifier("return");St(t,s),e.replaceWith(Ge.types.variableDeclaration("const",[Ge.types.variableDeclarator(s,r)]))[0].skip()}else qt(t,r.extra?.referencedBindings,{identifier:Ve("tagVarSignal"),hasDownstreamIntersections:()=>!0},r),e.remove()}},autocomplete:[{displayText:"return=<value>",description:"Provides a value for use in a parent template.",snippet:"return=${1:value}",descriptionMoreURL:"https://markojs.com/docs/core-tags/#return"}]},[It]=z("signals",(()=>new Map)),[jt,Tt]=z("queue");function Mt(e,t){Tt(Q(e.get("body")),t)}var[Dt]=z("closures",(()=>[])),Nt=(e,t,r)=>{let n=e;for(;void 0!==n&&n!==t;)Dt(n).push(r),n=n.parent},[Lt,Pt]=z("forceResumeScope");function Ot(e){Pt(e,!0)}var[Ut]=z("serializedScopeProperties",(()=>new Map)),Bt=()=>Xe.types.stringLiteral("SIGNAL NOT INITIALIZED");function Rt(e,t,r=function(e){let t;if(e)if(Array.isArray(e)){t="expr";for(const r of e)t+=`_${r.name}`}else t=e.name;else t="setup";return t}(t)){const n=It(e);let s=n.get(t);if(!s){const i=t?!Array.isArray(t)&&t.section===e&&t.export:!e.parent&&lr.node.extra.domExports?.setup;if(n.set(t,s={identifier:i?Xe.types.identifier(i):lr.scope.generateUidIdentifier(r+e.name.replace("_","$")),referencedBindings:t,section:e,values:[],intersection:void 0,render:[],effect:[],effectInlineReferences:void 0,subscribers:[],closures:new Map,hasDownstreamIntersections:()=>{let r=!(!s.intersection&&!s.closures.size);if(!r)for(const e of s.values)if(e.signal.hasDownstreamIntersections()){r=!0;break}if(!r&&!Array.isArray(t)&&t){for(const n of t.aliases)if(Rt(e,n).hasDownstreamIntersections()){r=!0;break}if(!r)for(const[,n]of t.propertyAliases)if(Rt(e,n).hasDownstreamIntersections()){r=!0;break}}return s.hasDownstreamIntersections=()=>r,r},build:Bt,export:!!i}),U())return s;if(t){if(Array.isArray(t))zt(t,s),s.build=()=>qe("intersection",Xe.types.numericLiteral(t.length),$t(s,[cr],t),_t(s));else if(t.section!==e){const r=Rt(t.section,t);Nt(e,e.parent,s.identifier),r.closures.set(e,s),s.build=()=>{const r=jt(e),n=_e(e,t.section),i=n.object===cr;return qe((s.isDynamicClosure=!(i&&r))?"dynamicClosure":"closure",zr(t),$t(s,[cr,Xe.types.identifier(t.name)]),i?null:Xe.types.arrowFunctionExpression([cr],n),_t(s))}}}else s.build=()=>$t(s,[cr])}return s}function Ft(e){const t=zr(e),r=Rt(e.section,e);r.build=()=>{const n=$t(r,[cr,Xe.types.identifier(e.name)]),s=_t(r),i=!e.upstreamAlias&&(3===e.type||2===e.type);return(!e.upstreamAlias||e.property)&&(e.downstreamExpressions.size||n.body.body.length>0)||s||i||s?qe("value",t,n,s):n},r.valueAccessor=t;for(const t of e.aliases)Ft(t);for(const t of e.propertyAliases.values())Ft(t);return r}function $t(e,t,r){const n=e.section,s=e.referencedBindings;if(s&&!Array.isArray(s)&&s.section===n){const[r,n]=t;for(const t of s.aliases){const s=Rt(t.section,t);e.render.push(Xe.types.expressionStatement(Xe.types.callExpression(s.callee||s.identifier,[r,n])))}for(const[t,i]of s.propertyAliases){const s=Rt(i.section,i);e.render.push(Xe.types.expressionStatement(Xe.types.callExpression(s.callee||s.identifier,[r,ar(n,t)])))}}for(const t of e.values)e.render.push(Xe.types.expressionStatement(Xe.types.callExpression(t.signal.callee||t.signal.identifier,[t.scope,t.value])));return r&&e.render.unshift(Xe.types.variableDeclaration("const",[Xe.types.variableDeclarator($e(n,r),cr)])),Xe.types.arrowFunctionExpression(t,Xe.types.blockStatement(e.render))}function _t(e){const t=e.section;let r=e.intersection;const n=e.referencedBindings;if(n&&!Array.isArray(n)&&n.section===e.section){for(const e of n.aliases){const t=Rt(e.section,e);t.hasDownstreamIntersections()&&(r=Oe(r,Xe.types.identifier(t.identifier.name)))}for(const[,e]of n.propertyAliases){const t=Rt(e.section,e);t.hasDownstreamIntersections()&&(r=Oe(r,Xe.types.identifier(t.identifier.name)))}}for(const t of e.values)t.signal.hasDownstreamIntersections()&&(r=Oe(r,t.intersectionExpression??Xe.types.identifier(t.signal.identifier.name)));const s=Array.from(e.closures.entries()).sort((([e],[t])=>e.id-t.id));for(const[n,i]of s){const s=jt(n),o=n.parent===t;s&&o?r=Oe(r,s(i.identifier)):e.hasDynamicSubscribers||(e.hasDynamicSubscribers=!0)}return e.hasDynamicSubscribers&&(e.hasDynamicSubscribers=!0,r=Oe(r,qe("dynamicSubscribers",e.valueAccessor))),r&&Xe.types.arrowFunctionExpression([],Array.isArray(r)?qe("intersections",Xe.types.arrayExpression(r)):r)}function zt(e,t){if(Array.isArray(e))return void e.forEach((e=>zt(e,t)));const r=Rt(t.section,e);r.intersection=Oe(r.intersection,t.identifier)}function Wt(e){for(let t=e.length-1;t>=0;t--){const r=e[t];if(Xe.types.isArrowFunctionExpression(r)){const n=r.body.body;n&&(0===n.length?e[t]=Xe.types.nullLiteral():1===n.length&&Xe.types.isExpressionStatement(n[0])&&(r.body=n[0].expression))}}for(let t=e.length-1;Xe.types.isNullLiteral(e[t]);)e.length=t--}function Vt(e,t,r,n,s,i){const o=Rt(t,r),a=o[e]??=[];if(Array.isArray(n)?a.push(...n):a.push(n),"effect"===e)if(Array.isArray(s))for(const e of s)!i&&Xe.types.isFunction(e)||Jt(o,e);else!i&&Xe.types.isFunction(s)||Jt(o,s)}function qt(e,t,r,n,s=cr,i){Rt(e,t).values.push({signal:r,value:n,scope:s,intersectionExpression:i})}function Jt(e,t){e.effectInlineReferences=Or.union(e.effectInlineReferences,t.extra?.referencedBindings)}function Zt(e,t,r){const{markoOpts:n,opts:{filename:s}}=lr.hub.file;let i="";if(t)if("string"==typeof t)i+=`_${t}`;else if(Array.isArray(t))for(const e of t)i+=`_${e.name}`;else i+=`_${t.name}`;return(0,Ze.getTemplateId)(n,s,`${e.id}${i}${r?"/"+r:""}`)}var Xt=new WeakMap;function Kt(e,t){const{markoOpts:r,opts:{filename:n}}=lr.hub.file;let s=Xt.get(e);s||Xt.set(e,s=new Set);const i=(0,Ze.getTemplateId)(r,n,`${e.id}/${t}`);let o=0,a=i;for(;s.has(a);)a=i+"_"+ ++o;return s.add(a),a}function Gt(){Xe.types.traverseFast(lr.node,(e=>{if(Xe.types.isIdentifier(e)){const t=e.extra&&(e.extra.source||e.extra.binding);t&&t.name!==e.name&&(e.name=t.name)}}))}function Ht(e){const t=[...It(e).values()].sort(Qt);for(const r of t){let t;if(r.effect.length){const n=Xe.types.identifier(`${r.identifier.name}_effect`);r.effectInlineReferences&&r.effect.unshift(Xe.types.variableDeclaration("const",[Xe.types.variableDeclarator($e(e,r.effectInlineReferences),cr)])),t=Xe.types.variableDeclarator(n,qe("register",Xe.types.stringLiteral(Zt(e,r.referencedBindings)),Xe.types.arrowFunctionExpression([cr],1===r.effect.length&&Xe.types.isExpressionStatement(r.effect[0])?r.effect[0].expression:Xe.types.blockStatement(r.effect)))),r.render.push(Xe.types.expressionStatement(qe("queueEffect",cr,n)))}let n=r.build();Xe.types.isCallExpression(n)&&Wt(n.arguments),r.register&&(n=qe("registerBoundSignal",Xe.types.stringLiteral(Zt(e,r.referencedBindings)),n)),r.isDynamicClosure&&Vr(r.referencedBindings)&&(n=qe("registerSubscriber",Xe.types.stringLiteral(Zt(e,r.referencedBindings,"subscriber")),n));const s=Xe.types.variableDeclarator(r.identifier,n);let i=e.parent||r.referencedBindings||!Xe.types.isFunctionExpression(n)&&!Xe.types.isArrowFunctionExpression(n)?Xe.types.variableDeclaration("const",[s]):Xe.types.functionDeclaration(r.identifier,n.params,Xe.types.isExpression(n.body)?Xe.types.blockStatement([Xe.types.expressionStatement(n.body)]):n.body);r.export&&(i=Xe.types.exportNamedDeclaration(i));const o=lr.pushContainer("body",t?[Xe.types.variableDeclaration("const",[t]),i]:i);for(const t of o)t.traverse(nr,{root:t,section:e})}}function Qt(e,t){const r=Yt(e),n=Yt(t);for(let e=Math.max(r.length,n.length)-1;e>=0;e--){const t=(n[e]??-1)-(r[e]??-1);if(0!==t)return t}return 0}function Yt({referencedBindings:e}){return e?Array.isArray(e)?e.map(er).sort():[er(e)]:[]}function er(e){return 1e4*(0===e.type?1:0)+e.id}function tr(e,t){Vt("effect",e,t,void 0,[])}function rr(e,t){if(!function(e){return void 0!==e.node.extra?.section}(e))return;const r=Q(e),n=Array.from(It(r).values()),s=Y(r);for(const t of r.closures)if(Vr(t)){let n=r;for(;n!==t.section;)Ut(n).set(Xe.types.stringLiteral("_"),qe("ensureScopeWithId",Y(n=n.parent)));Ot(t.section);const i=r.parent?.id===t.section.id;(!jt(r)||!i)&&e.pushContainer("body",Xe.types.expressionStatement(qe("writeEffect",s,Xe.types.stringLiteral(Zt(r,t,"subscriber")))))}for(let t=n.length;t--;)if(n[t].effect.length){const i=n[t].referencedBindings;e.pushContainer("body",Xe.types.expressionStatement(qe("writeEffect",s,Xe.types.stringLiteral(Zt(r,i)))))}const i=new Set,o=Ut(r),a=[];for(const e of r.bindings)if(e.serialize&&0!==e.type){const t=zr(e);a.push(Xe.types.objectProperty(t,Xe.types.identifier(e.name))),i.add(t.value)}t&&void 0!==kt(r)&&a.push(Xe.types.objectProperty(Xe.types.stringLiteral("/"),t));for(const[e,t]of o)i.has(e.value)||(a.push(Xe.types.objectProperty(e,t,!Xe.types.isLiteral(e))),i.add(e.value));(a.length||Lt(r))&&e.pushContainer("body",Xe.types.expressionStatement(qe("writeScope",s,Xe.types.objectExpression(a)))),e.get("body").length&&e.unshiftContainer("body",Xe.types.variableDeclaration("const",[Xe.types.variableDeclarator(s,qe("nextScopeId"))]))}var nr={FunctionExpression:{exit:ir},ArrowFunctionExpression:{exit:ir}};function sr(e,t,r,n,s){switch(n||(n={statement:e.getStatementParent(),end:e.getStatementParent()}),t.type){case"ObjectPattern":for(const s of t.properties)sr(e,s,r,n);break;case"ArrayPattern":for(const s in t.elements)null!==t.elements[s]&&sr(e,t.elements[s],r,n,(e=>t.elements[s]=e));break;case"RestElement":sr(e,t.argument,r,n,(e=>t.argument=e));break;case"ObjectProperty":sr(e,t.value,r,n,(e=>t.value=e));break;case"Identifier":{const e=t.extra?.source;if(e){const{buildAssignment:i}=Rt(e.section,e);if(i){const e=n.statement.scope.generateUidIdentifier(t.name);n.statement.insertBefore(Xe.types.variableDeclaration("let",[Xe.types.variableDeclarator(e)])),s?.(e),[n.end]=n.end.insertAfter(Xe.types.expressionStatement(i(r,e)))}}}}}function ir(e,{root:t,section:r}){const{node:n}=e,{extra:s}=n;if(!s?.referencedBindings)return;const{name:i,referencedBindings:o}=s,a=e.hub.file.path.scope.generateUidIdentifier(i);t.insertBefore(Xe.types.variableDeclaration("const",[Xe.types.variableDeclarator(a,Xe.types.arrowFunctionExpression([cr],o?Xe.types.blockStatement([Xe.types.variableDeclaration("const",[Xe.types.variableDeclarator($e(r,o),cr)]),Xe.types.returnStatement(n)]):n))]))[0].skip(),e.replaceWith(Xe.types.callExpression(a,[cr]))[0].skip()}function or(e){return It(e).get(void 0)?.identifier}function ar(e,t){const r=function(e){return/^[a-z_$][a-z0-9_$]*$/i.test(e)?Xe.types.identifier(e):/^(?:0|[1-9][0-9]*)$/.test(e)?Xe.types.numericLiteral(parseInt(e,10)):Xe.types.stringLiteral(e)}(t);return Xe.types.memberExpression(e,r,"Identifier"!==r.type)}var lr,cr,pr={translate:{exit(e){ut(e);const t=Q(e),{walks:r,writes:n,setup:s}=wt(t),i=e.node.extra.domExports,o=de.types.identifier(i.template),a=de.types.identifier(i.walks),l=de.types.identifier(i.setup),c=de.types.identifier(i.closures),p=e.node.extra.binding,d=p&&D(p)?Ft(p):void 0;!function(){if(lr.node.extra.assignments)for(const[e,t]of lr.node.extra.assignments){const{node:r}=t;if("UpdateExpression"===r.type){const n=r.argument.extra?.source;if(n){const{buildAssignment:s}=Rt(n.section,n);if(s){const n=s(e,Xe.types.binaryExpression("++"===r.operator?"+":"-",r.argument,Xe.types.numericLiteral(1)));t.replaceWith(r.prefix||t.parentPath.isExpressionStatement()?n:Xe.types.sequenceExpression([n,r.argument]))}}}else if("ObjectPattern"===r.left.type||"ArrayPattern"===r.left.type)sr(t,r.left,e);else if("Identifier"===r.left.type){const n=r.left.extra?.source;if(n){const{buildAssignment:s}=Rt(n.section,n);if(s){const n=s(e,"="===r.operator?r.right:Xe.types.binaryExpression(r.operator.slice(0,-1),r.left,r.right));t.replaceWith(n)}}}}}(),function(e){const{sections:t}=lr.node.extra;for(let r=t.length;r--;)e(t[r])}((r=>{if(r!==t){const t=re(r),n=t.node.extra?.binding,s=n&&Ft(n),{walks:i,writes:o,setup:a}=wt(r),l=Dt(r),c=de.types.identifier(r.name),p=qe(ee(r)?"createRenderer":"createRendererWithOwner",o,i,a,l.length&&de.types.arrowFunctionExpression([],de.types.arrayExpression(l)),void 0,s?.identifier&&de.types.arrowFunctionExpression([],s.identifier));Ht(r),e.node.body.push(de.types.variableDeclaration("const",[de.types.variableDeclarator(c,ce(r)?qe("register",de.types.stringLiteral(Zt(r,"renderer")),p):p)]))}}));const u=Dt(t);Ht(t),Gt(),s||e.node.body.unshift(de.types.exportNamedDeclaration(de.types.variableDeclaration("const",[de.types.variableDeclarator(l,de.types.arrowFunctionExpression([],de.types.blockStatement([])))]))),e.node.body.unshift(de.types.exportNamedDeclaration(de.types.variableDeclaration("const",[de.types.variableDeclarator(o,n||de.types.stringLiteral(""))])),de.types.exportNamedDeclaration(de.types.variableDeclaration("const",[de.types.variableDeclarator(a,r||de.types.stringLiteral(""))]))),u.length&&e.node.body.push(de.types.exportNamedDeclaration(de.types.variableDeclaration("const",[de.types.variableDeclarator(c,de.types.arrayExpression(u))]))),e.node.body.push(de.types.exportDefaultDeclaration(qe("createTemplate",qe("createRenderer",o,a,l,u.length&&de.types.arrowFunctionExpression([],c),void 0,d?.identifier&&de.types.arrowFunctionExpression([],d.identifier)),de.types.stringLiteral(e.hub.file.metadata.marko.id))))}}},dr=r("../../browser-shims/compiler/index.js"),ur={translate:{exit(e){const t=Q(e),r=e.scope.generateUidIdentifier("tagVar");vt(e),rr(e,r),Gt();const n=kt(t);void 0!==n&&e.pushContainer("body",dr.types.returnStatement(n));const s=[];for(const t of e.get("body"))(i=t).isImportDeclaration()||i.isExportDeclaration()||i.isMarkoScriptlet({static:!0})?t.isMarkoScriptlet()&&(t.node.target&&"server"!==t.node.target?t.remove():t.replaceWithMultiple(t.node.body)):(s.push(t.node),t.remove());var i;const o=e.scope.generateUidIdentifier("renderer");e.pushContainer("body",[dr.types.variableDeclaration("const",[dr.types.variableDeclarator(o,qe("createRenderer",dr.types.arrowFunctionExpression([dr.types.identifier("input"),r],dr.types.blockStatement(s))))]),dr.types.exportDefaultDeclaration(qe("createTemplate",o,dr.types.stringLiteral(e.hub.file.metadata.marko.id)))])}}},fr=new WeakMap,mr={migrate:{enter(e){fr.set(e,lr),e.node.params=[T.types.identifier("input")],lr=e},exit(){lr.scope.crawl(),lr=fr.get(lr)}},analyze:{enter(e){fr.set(e,lr),lr=e,G(e),Cr(e,2);const{scope:t}=e;(e.node.extra??={}).domExports={template:t.generateUid("template_"),walks:t.generateUid("walks_"),setup:t.generateUid("setup_"),params:void 0,closures:t.generateUid("closures_")}},exit(e){!function(){const e=Mr();if(e.size){for(const[t,r]of e){const e=t.node.extra??={};let{referencedBindings:n,isEffect:s}=e;for(const t of r){const r=t?.extra;if(r){const t=r.referencedBindings;s||=r.isEffect,t&&(n=Or.union(n,t),Ue(t,(({downstreamExpressions:t})=>{t.delete(r),t.add(e)})))}}n=_r(H(t),n),e.referencedBindings=n,e.isEffect=s}e.clear()}const t=wr();for(const e of t)if(0!==e.type&&!e.upstreamAlias&&Wr(t,e)){const{upstreamExpression:r}=e;r&&Ue(r.referencedBindings,(e=>{e.downstreamExpressions.delete(r),Wr(t,e)}))}const r=new Set;for(const e of t){const{name:t,section:n}=e;if(0!==e.type)for(const r of n.bindings)if(r.name===e.name){e.name=lr.scope.generateUid(t);break}n.bindings.add(e);for(const{referencedBindings:t,isEffect:n}of e.downstreamExpressions)Array.isArray(t)&&r.add(t),Ue(t,(e=>{n&&(e.serialize=!0)}))}for(const e of r){const t=e.length;for(let r=0;r<t-1;r++)for(let n=r+1;n<t;n++){const t=e[r],s=e[n],i=Pr(t),o=Pr(s);t.serialize||Lr(i,o)||(t.serialize=!0),s.serialize||Lr(o,i)||(s.serialize=!0)}}oe((e=>{for(const t of e.closures)if(!t.serialize){let r=!1;const n=t.section;let s=e;for(;s!==n&&!(r=!s.upstreamExpression||Vr(s.upstreamExpression.referencedBindings));)s=s.parent;t.serialize=r}})),oe((({id:e,bindings:t})=>{const r=[...t].filter((t=>t.section.id===e)).sort(Or.compare);for(let e=r.length;e--;)r[e].id=e}))}();const{scope:t,node:{extra:r}}=e;r.binding&&D(r.binding)&&(r.domExports.params=hr(r.binding,t)),lr=fr.get(lr)}},translate:{enter(e){if(fr.set(e,lr),lr=e,cr=B()?e.scope.generateUidIdentifier("scope"):null,B()&&e.scope.generateUidIdentifier("clean"),"hydrate"===R().output){const t=e.hub.file,r=new Set([(0,j.resolveRelativePath)(t,t.opts.filename)]);return O.visit(t,t,(function e(n){if(!r.has(n)){r.add(n);const s=(0,j.loadFileForImport)(t,n);s&&O.visit(s,t,(r=>e(function(e,t,r){return t===e?(0,j.resolveRelativePath)(t,r):(0,j.resolveRelativePath)(e,"."===r[0]?M.default.join(t.opts.filename,"..",r):r)}(t,s,r))))}})),e.node.body=O.build(t),void e.skip()}},exit(e){U()?ur.translate.exit(e):pr.translate.exit(e),lr=fr.get(lr)}}};function hr(e,t){const r={id:e.export??=t.generateUid(e.name+"_"),props:void 0},{aliases:n,propertyAliases:s,downstreamExpressions:i}=e;if(!i.size){r.props={};for(const[e,n]of s)r.props[e]=hr(n,t);for(const e of n){const n=hr(e,t);if(!n.props)return r.props=void 0,r;r.props={...r.props,...n.props}}}return r}function gr(e){let t=e;do{t=t.parentPath}while(t&&!br(t));return t}function yr(e){let t=e;for(;!br(t.parentPath);)if(t=t.parentPath,"AssignmentExpression"===t.type){const e=vr(t);if(br(e.parentPath)){t=t.get("right");break}t=e.parentPath}return t}function br(e){switch(e.type){case"MarkoTag":case"MarkoTagBody":case"MarkoAttribute":case"MarkoSpreadAttribute":case"MarkoPlaceholder":case"MarkoScriptlet":return!0;default:return!1}}function xr(e){switch(e.type){case"FunctionExpression":case"ArrowFunctionExpression":return!0;default:return!1}}function vr(e){switch(e.parent.type){case"ArrayPattern":case"ObjectPattern":case"ObjectProperty":return vr(e.parentPath);default:return e}}var[wr]=_((()=>new Set)),[Er,kr]=_((()=>0));function Sr(e,t,r,n,s,i){const o=Er(),a={id:o,name:e,type:t,section:r,property:i,excludeProperties:void 0,serialize:!1,aliases:new Set,propertyAliases:new Map,upstreamAlias:n,upstreamExpression:s,downstreamExpressions:new Set,export:void 0};if(i){const e=n.propertyAliases.get(i);e?(a.property=void 0,a.upstreamAlias=e,e.aliases.add(a)):n.propertyAliases.set(i,a)}else n&&n.aliases.add(a);return kr(o+1),wr().add(a),a}function Ar(e,t,r,n,s){const i=e.node.var;if(i){const o=H(e),a=Fr(r);r?.downstreamExpressions.delete(n),jr(i,t,e.scope,o,a,n,void 0,s)}}function Cr(e,t,r,n){const s=e.node.params;if(e.get("body").length&&s.length){r?.downstreamExpressions.delete(n);const i=H(e),o=Fr(r),a=o||((e.node.extra??={}).binding=Sr(e.scope.generateUid("params_"),t,i,o,n,void 0));for(let r=0;r<s.length;r++)jr(s[r],t,e.scope,i,a,void 0,r+"")}}function Ir(e,t){switch(e.type){case"ObjectPattern":for(const r of e.properties)Ir(r,t);break;case"ArrayPattern":for(const r of e.elements)null!==r&&Ir(r,t);break;case"RestElement":Ir(e.argument,t);break;case"ObjectProperty":Ir(e.value,t);break;case"Identifier":e.name===t.name&&((e.extra??={}).source=t)}}function jr(e,t,r,n,s,i,o,a){switch(e.type){case"Identifier":(e.extra??={}).binding=Sr(e.name,t,n,s,i,o),function(e,t){const{identifier:r,referencePaths:n,constantViolations:s}=e,i=r.extra.binding;for(const e of n)Tr(e,i);for(const e of s){const r=e.node;I.types.isAssignmentExpression(r)&&Ir(r.left,i),I.types.isUpdateExpression(r)&&Ir(r.argument,i),I.types.isAssignmentExpression(r)&&I.types.isIdentifier(r.left)&&"="!==r.operator&&Tr(e.get("left"),i),t&&(e.isUpdateExpression()?Tr(e.get("argument"),t):e.isAssignmentExpression()&&Tr(e.get("left"),t))}}(r.getBinding(e.name),a);break;case"ObjectPattern":{const a=(o?s.propertyAliases.get(o):s)||((e.extra??={}).binding=Sr(r.generateUid("pattern_"),t,n,s,i,o));for(const s of e.properties)if("RestElement"===s.type)jr(s.argument,t,r,n,a,void 0,o);else{let e;if("Identifier"===s.key.type)e=s.key.name;else{if("StringLiteral"!==s.key.type)throw new Error("computed keys not supported in object pattern");e=s.key.value}jr(s.value,t,r,n,a,void 0,e)}break}case"ArrayPattern":{const a=(o?s.propertyAliases.get(o):s)||((e.extra??={}).binding=Sr(r.generateUid("pattern_"),t,n,s,i,o));let l=-1;for(const s of e.elements)l++,s&&("RestElement"===s.type?jr(s.argument,t,r,n,a,void 0,o):jr(s,t,r,n,a,void 0,`${l}`));break}case"AssignmentPattern":jr(e.left,t,r,n,s,i,o)}}function Tr(e,t){const r=function(e){let t=e;if(!t.isProgram()){for(;!xr(t);){if(br(t))return;t=t.parentPath}return t}}(e.scope.path),n=yr(r||e),s=H(n),i=t,o=n.node.extra??={};if(Rr(n,t),Ir(e.node,t),r){let e=o;r!==n&&(e=r.node.extra??={},e.referencedBindings=$r(s,e.referencedBindings,i))}}var[Mr]=_((()=>new Map));function Dr(e,t){Mr().set(e,t)}function Nr(e,t){const r=e.length,n=r-t.length;if(0!==n)return n;for(let n=0;n<r;n++){const r=Or.compare(e[n],t[n]);if(0!==r)return r}return 0}function Lr(e,t){for(const r of t)if(!e.has(r))return!1;return!0}function Pr(e){const t=new Set,r=new Set;return function e(n){if(4===n.type||3===n.type){let s,i=n;for(;s=i.upstreamAlias;)i=s;if(i.upstreamExpression){if(t.has(i))return;t.add(i),Ue(i.upstreamExpression.referencedBindings,e)}else r.add(i)}else r.add(n)}(e),r}var Or=new class{constructor(e){this.compare=e}add(e,t){return e?Array.isArray(e)?Re(this.compare,e,t):Fe(this.compare,e,t):t}union(e,t){return e?Array.isArray(e)?t?Array.isArray(t)?function(e,t,r){const n=t.length,s=r.length;let i=0,o=0;const a=[e(t[i],r[o])<=0?t[i++]:r[o++],e(t[i],r[o])<=0?t[i++]:r[o++]];for(;i<n&&o<s;)a.push(e(t[i],r[o])<=0?t[i++]:r[o++]);if(n===s&&i===n)return t;for(;i<n;)a.push(t[i++]);for(;o<s;)a.push(r[o++]);return a}(this.compare,e,t):Re(this.compare,e,t):e:t?Array.isArray(t)?Re(this.compare,t,e):Fe(this.compare,t,e):e:t}find(e,t){if(e){if(Array.isArray(e))return Be(this.compare,e,t);if(0===this.compare(e,t))return e}}}((function(e,t){return(e.section.id-t.section.id||e.type!==t.type&&(0===e.type||0===t.type))&&e.type-t.type||e.id-t.id})),[Ur,Br]=z("intersections",(()=>[]));function Rr(e,t){const r=e.node.extra??={},n=H(e);r.referencedBindings=$r(n,r.referencedBindings,t),t.downstreamExpressions.add(r)}function Fr(e){return e&&(e.property?e:e.upstreamAlias||e)}function $r(e,t,r){return e!==r.section&&e.closures.add(r),_r(e,Or.add(t,r))}function _r(e,t){if(!t||!Array.isArray(t))return t;const r=Ur(e);let n=Be(Nr,r,t);return n||(Br(e,Re(Nr,r,t)),n=t),n}function zr(e){return R().optimize?I.types.numericLiteral(e.id):I.types.stringLiteral(e.name+(0===e.type?`/${e.id}`:""))}function Wr(e,t){let r=!t.downstreamExpressions.size;for(const n of t.aliases)Wr(e,n)?t.aliases.delete(n):r=!1;for(const[n,s]of t.propertyAliases)Wr(e,s)?t.propertyAliases.delete(n):r=!1;return r&&e.delete(t),r}function Vr(e){if(e){if(!Array.isArray(e))return qr(e);for(const t of e)if(qr(t))return!0}return!1}function qr(e){switch(e.type){case 1:case 2:return!0;default:return!e.upstreamExpression||Vr(e.upstreamExpression.referencedBindings)}}var Jr=r("../../browser-shims/compiler/index.js");function Zr(e){const t=e.body;return 1===t.length?t[0]:Jr.types.isBlockStatement(e)?e:Jr.types.blockStatement(t)}var Xr=Symbol("if node binding"),Kr={analyze(e){const{node:t}=e,[r]=t.attributes;if((0,A.assertNoArgs)(e),(0,A.assertNoVar)(e),(0,A.assertNoParams)(e),!C.types.isMarkoAttribute(r)||!r.default)throw e.get("name").buildCodeFrameError("The `if` tag requires a value.");if(0===t.body.body.length)throw e.get("name").buildCodeFrameError("The `if` tag requires body content.");if(t.attributes.length>1){const r=t.attributes[1].loc?.start,n=t.attributes[t.attributes.length-1].loc?.end,s="The `if` tag only supports the `value` attribute.";throw null==r||null==n?e.get("name").buildCodeFrameError(s):e.hub.buildError({loc:{start:r,end:n}},s,Error)}const n=e.get("body"),s=H(e),i=e.node.extra??={};G(n),i[Xr]=Sr("#text",0,s,void 0,i),Qr(e)},translate:{enter(e){ut(e,37),dt(e),U()&&xt(e),Yr.enter(e)},exit(e){Yr.exit(e)}},attributes:{},autocomplete:[{snippet:"if=${1:condition}",description:"Use to display content only if the condition is met.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#if-else-if-else"}]},Gr=new WeakMap;function Hr(e,t){const r=Gr.get(e)??[],n=e.getNextSibling(),s=!(g(n,"else")||g(n,"else-if"));return r.push({tag:e,section:t}),s||Gr.set(n,r),[s,r]}function Qr(e){const t=H(e.get("body")),[r,n]=Hr(e,t);if(r){const e=n[0].tag,t=e.node.extra;Dr(e,n.map((({tag:e})=>e.node.attributes[0]?.value))),t.singleNodeOptimization=n.every((({section:e})=>null===e.content||e.content.singleChild)),n.forEach((({section:e})=>{e.upstreamExpression=t}))}}var Yr={enter(e){const t=e.get("body"),r=Q(t),n=function(e){return g(e,"if")?e:Gr.get(e)[0].tag}(e).node.extra,s=Vr(n.referencedBindings),i=n.singleNodeOptimization;U()&&s&&!i&&yt(t)`${qe("markResumeScopeStart",Y(r))}`},exit(e){const t=e.get("body"),r=Q(e),n=Q(t),[s,i]=Hr(e,n),o=i[0].tag.node.extra,a=o[Xr],l=Vr(o.referencedBindings),c=o.singleNodeOptimization,p=pe(n,!0);if(te(n,!0),U()&&((l||p)&&Ot(n),vt(e),Mt(e,(()=>{})),rr(t)),s){const t=i[0].tag.node.extra;if(B()){let e=C.types.nullLiteral();for(let t=i.length;t--;){const{tag:r,section:n}=i[t],[s]=r.node.attributes,o=C.types.identifier(n.name);Mt(r,(e=>qe("inConditionalScope",e,zr(a)))),r.remove(),e=s?C.types.conditionalExpression(s.value,o,e):o}const n=Rt(r,a,"if");n.build=()=>qe("conditional",zr(a),$t(n,[cr])),n.hasDownstreamIntersections=()=>i.some((e=>Dt(e.section).length>0)),qt(r,t.referencedBindings,n,e)}else{const t=yt(e),n=e.getNextSibling(),s=e.scope.generateUidIdentifier("ifScopeId"),o=e.scope.generateUidIdentifier("ifRenderer");let d;for(let e=i.length;e--;){const{tag:t,section:r}=i[e],n=pe(r,!0);l&&t.node.body.body.push(C.types.expressionStatement(qe("register",C.types.assignmentExpression("=",o,qe("createRenderer",C.types.arrowFunctionExpression([],C.types.blockStatement([])))),C.types.stringLiteral(Zt(r,"renderer"))))),(l||n)&&t.node.body.body.push(C.types.expressionStatement(C.types.assignmentExpression("=",s,Y(r))));const[a]=t.node.attributes,c=Zr(t.node.body);d=a?C.types.ifStatement(a.value,c,d):c,t.remove()}l||p?(n.insertBefore([C.types.variableDeclaration("let",[C.types.variableDeclarator(s),l&&C.types.variableDeclarator(o)].filter(Boolean)),d]),l&&(c?t`${qe("markResumeControlSingleNodeEnd",Y(r),zr(a),s)}`:t`${qe("markResumeControlEnd",Y(r),zr(a))}`,Ut(r).set(C.types.stringLiteral(zr(a).value+"("),o)),Ut(r).set(C.types.stringLiteral(zr(a).value+"!"),qe("getScopeById",s))):n.insertBefore(d)}}}},en={analyze(e){const{node:t}=e,[r]=t.attributes;if((0,S.assertNoVar)(e),(0,S.assertNoArgs)(e),(0,S.assertNoParams)(e),0===t.body.body.length)throw e.get("name").buildCodeFrameError("The `else` tag requires body content.");if(t.attributes.length>1||r&&"if"!==r.name){const r=t.attributes[1].loc?.start,n=t.attributes[t.attributes.length-1].loc?.end,s="The `else` tag only supports an `if=` attribute.";throw null==r||null==n?e.get("name").buildCodeFrameError(s):e.hub.buildError({loc:{start:r,end:n}},s,Error)}Qr(e)},translate:Yr,attributes:{},autocomplete:[{description:"Use after an <if> or <else-if> tag to display content if those conditions do not match.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#if-else-if-else"}]},tn=r("../../node_modules/@marko/babel-utils/dist/index.js"),rn=r("../../browser-shims/compiler/index.js"),nn={analyze(e){const{node:t}=e,[r]=t.attributes;if((0,tn.assertNoArgs)(e),(0,tn.assertNoVar)(e),(0,tn.assertNoParams)(e),!rn.types.isMarkoAttribute(r)||!r.default)throw e.get("name").buildCodeFrameError("The `else-if` tag requires a value.");if(0===t.body.body.length)throw e.get("name").buildCodeFrameError("The `else-if` tag requires body content.");if(t.attributes.length>1){const r=t.attributes[1].loc?.start,n=t.attributes[t.attributes.length-1].loc?.end,s="The `else-if` tag only supports the `value` attribute.";throw null==r||null==n?e.get("name").buildCodeFrameError(s):e.hub.buildError({loc:{start:r,end:n}},s,Error)}Qr(e)},translate:Yr,attributes:{},autocomplete:[{snippet:"else-if=${1:condition}",description:"Use after an <if> or <else-if> tag to display content if those conditions do not match and this one does.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#if-else-if-else"}]},sn=r("../../node_modules/@marko/babel-utils/dist/index.js"),on=r("../../browser-shims/compiler/index.js"),an=r("../../browser-shims/compiler/index.js");function ln(e,t,r="const"){const{node:{var:n}}=e;n&&e.insertBefore(an.types.variableDeclaration(r,[an.types.variableDeclarator(n,t)]))}var cn={analyze(e){(0,sn.assertNoArgs)(e),(0,sn.assertNoParams)(e),Qe(e);const{node:t}=e,[r]=t.attributes;if(!t.var)throw e.get("name").buildCodeFrameError("The `const` tag requires a tag variable.");if(!r)throw e.get("name").buildCodeFrameError("The `const` tag requires a value.");if(t.attributes.length>1||!on.types.isMarkoAttribute(r)||!r.default&&"value"!==r.name)throw e.get("name").buildCodeFrameError("The `const` tag only supports the `value` attribute.");const n=on.types.isIdentifier(r.value)?e.scope.getBinding(r.value.name)?.identifier.extra?.binding:void 0;Ar(e,4,n,r.value.extra??={})},translate:{exit(e){const{node:t}=e,[r]=t.attributes,{value:n}=r;if(B()){const r=Q(e),s=t.var.extra?.binding;if(s&&!s.upstreamAlias){const e=Ft(s);qt(r,n.extra?.referencedBindings,e,n)}}else ln(e,n);e.remove()}},attributes:{},autocomplete:[{description:"Use to create an constant binding.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#const"}],types:"@marko/translator-tags/tag-types/const.d.marko"},pn=r("../../node_modules/@marko/babel-utils/dist/index.js"),dn=r("../../browser-shims/compiler/index.js"),un={analyze(e){const[t]=e.node.attributes;if((0,pn.assertNoVar)(e),(0,pn.assertNoArgs)(e),(0,pn.assertNoParams)(e),Qe(e),e.node.attributes.length>1||1===e.node.attributes.length&&(!dn.types.isMarkoAttribute(t)||!t.default&&"value"!==t.name))throw e.get("name").buildCodeFrameError("The `debug` tag only supports the `value` attribute.")},translate:{exit(e){const t=Q(e),[r]=e.node.attributes,n=r?.value.extra?.referencedBindings,s=q(dn.types.debuggerStatement(),e.node);U()?e.insertBefore(s):Vt("render",t,n,s),e.remove()}},attributes:{},autocomplete:[{description:"Debug on value change.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#debug"}],types:"@marko/translator-tags/tag-types/debug.d.marko"},fn=r("../../node_modules/@marko/babel-utils/dist/index.js"),mn=r("../../browser-shims/compiler/index.js"),hn=r("../../node_modules/@marko/babel-utils/dist/index.js"),gn=r("../../browser-shims/compiler/index.js"),yn=r("../../browser-shims/compiler/index.js"),bn=/^[0-9A-Z_$]+$/i,xn=new WeakMap;function vn(e,t=!1){const{node:r}=e;let n=gn.types.objectExpression([]);const s=n.extra={};for(const t of e.get("attributes")){const e=t.node.value;t.isMarkoSpreadAttribute()?n.properties.push(gn.types.spreadElement(e)):n.properties.push(gn.types.objectProperty((i=t.node.name,bn.test(i)?yn.types.identifier(i):yn.types.stringLiteral(i)),e))}var i;if(t){const{body:t,params:s}=r.body;let i=r.extra.hoistedControlFlows;if(i)for(const t of e.get("body").get("body"))if(e.insertBefore(t.node),t.remove(),(t.isConditional()||t.isLoop())&&! --i)break;if(t.length){const r=Q(e.get("body")),i=gn.types.arrowFunctionExpression(s,gn.types.blockStatement(t));xn.set(n,i),U()?n.properties.push(gn.types.objectProperty(gn.types.identifier("renderBody"),qe("register",qe("createRenderer",i),gn.types.stringLiteral(Zt(r,"renderer")),Y(Q(function(e){let t=e;for(;t.node&&(0,hn.isAttributeTag)(t)||(0,hn.isTransparentTag)(t);)t=t.parentPath.parentPath;return t}(e)))))):n.properties.push(gn.types.objectProperty(gn.types.identifier("renderBody"),i))}}if(n.properties.length&&1===n.properties.length){const[e]=n.properties;gn.types.isSpreadElement(e)&&(n=e.argument,n.extra=s)}if(r.arguments?.length)if(n.properties.length)n=gn.types.arrayExpression([...r.arguments,n]);else if(1==r.arguments.length){const e=r.arguments[0];n=gn.types.isSpreadElement(e)?e.argument:e}else n=gn.types.arrayExpression(r.arguments);return n}function wn(e){if(gn.types.isObjectExpression(e)){const t=e.properties[e.properties.length-1];if(gn.types.isObjectProperty(t)&&"renderBody"===t.key.name)return xn.get(e)}}var En={analyze(e){if((0,fn.assertNoArgs)(e),!e.node.var)throw e.get("name").buildCodeFrameError("The `define` tag requires a tag variable.");const t=e.get("body");G(t),Ar(e,4),Cr(t,3),Dr(e,e.node.attributes.map((e=>e.value)))},translate:{enter(e){U()&&xt(e)},exit(e){const{node:t}=e;if(U())vt(e),rr(e.get("body")),ln(e,vn(e,!0));else{const r=Q(e),n=Q(e.get("body")),s=t.extra?.referencedBindings,i=Ft(e.get("var").node.extra.binding);let o=vn(e);n!==r&&(o??=mn.types.objectExpression([]),o.properties.push(mn.types.objectProperty(mn.types.identifier("renderBody"),mn.types.callExpression(mn.types.identifier(n.name),[cr])))),qt(r,s,i,o)}e.remove()}},attributes:{},autocomplete:[{description:"Use to create a constant object binding that can be rendered.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#define"}],types:"@marko/translator-tags/tag-types/define.d.marko"},kn=r("../../node_modules/@marko/babel-utils/dist/index.js"),Sn=r("../../browser-shims/compiler/index.js"),An={analyze(e){const[t]=e.node.attributes;if((0,kn.assertNoArgs)(e),(0,kn.assertNoParams)(e),Qe(e),(0,kn.assertNoVar)(e),!t)throw e.get("name").buildCodeFrameError("The `do` tag requires a value.");if(e.node.attributes.length>1||!Sn.types.isMarkoAttribute(t)||!t.default&&"value"!==t.name)throw e.get("name").buildCodeFrameError("The `do` tag only supports the `value` attribute.")},translate:{exit(e){const t=Q(e),[r]=e.node.attributes,{value:n}=r,s=n.extra?.referencedBindings;let i=null;if(Sn.types.isFunctionExpression(n)||Sn.types.isArrowFunctionExpression(n))if(Sn.types.isBlockStatement(n.body)){let e=!1;for(const t of n.body.body)if(Sn.types.isDeclaration(t)){e=!0;break}i=e?n.body:n.body.body}else i=Sn.types.expressionStatement(n.body);U()?i?e.insertBefore(i):e.insertBefore(Sn.types.expressionStatement(Sn.types.callExpression(n,[]))):Vt("render",t,s,i??Sn.types.expressionStatement(Sn.types.callExpression(n,[cr]))),e.remove()}},attributes:{},autocomplete:[{description:"Use to run a function on render.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#do"}],types:"@marko/translator-tags/tag-types/do.d.marko"},Cn=r("../../node_modules/@marko/babel-utils/dist/index.js"),In=r("../../browser-shims/compiler/index.js"),jn={analyze(e){const{node:t}=e,[r]=t.attributes;if((0,Cn.assertNoArgs)(e),(0,Cn.assertNoVar)(e),(0,Cn.assertNoParams)(e),Qe(e),!r)throw e.get("name").buildCodeFrameError("The `effect` tag requires a value.");if(t.attributes.length>1||!In.types.isMarkoAttribute(r)||!r.default&&"value"!==r.name)throw e.get("name").buildCodeFrameError("The `effect` tag only supports the `value` attribute.");(r.value.extra??={}).isEffect=!0,(lr.node.extra??={}).isInteractive=!0},translate:{exit(e){const{node:t}=e,[r]=t.attributes,n=Q(e),{value:s}=r,i=s.extra?.referencedBindings;if(B()){const{value:e}=r;let t=null;if(In.types.isFunctionExpression(e)||In.types.isArrowFunctionExpression(e))if(In.types.isBlockStatement(e.body)){let r=!1;for(const t of e.body.body)if(In.types.isDeclaration(t)){r=!0;break}t=r?e.body:e.body.body}else t=In.types.expressionStatement(e.body);Vt("effect",n,i,t||In.types.expressionStatement(In.types.callExpression(e,[cr])),e,!!t)}else tr(n,i);e.remove()}},attributes:{},autocomplete:[{description:"Use to create a side effects.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#effect"}],types:"@marko/translator-tags/tag-types/effect.d.marko"},Tn=r("../../node_modules/@marko/babel-utils/dist/index.js"),Mn={parse(e){const{node:t}=e;e.replaceWith((0,Tn.parseStatements)(e.hub.file,t.rawValue,t.start,t.end)[0])},parseOptions:{statement:!0,rawOpenTag:!0},autocomplete:[{displayText:"export <value>"}]},Dn=r("../../node_modules/@marko/babel-utils/dist/index.js"),Nn=r("../../browser-shims/compiler/index.js"),Ln=r("../../node_modules/@marko/babel-utils/dist/index.js");function Pn(e){const t=e.node.extra??={};t.nestedAttributeTags={},t.hoistedControlFlows=0,On(t,!1,!1,e)}function On(e,t,r,n){let s=!1;for(const i of n.get("body").get("body"))i.isMarkoTag()&&Un(e,t,r,i)&&(s=!0);return s}function Un(e,t,r,n){if((0,Ln.isTransparentTag)(n)){if(On(e,t||(0,Ln.isLoopTag)(n),!0,n))return(0,Ln.isTransparentTag)(n.parentPath.parentPath)||e.hoistedControlFlows++,!0}else if((0,Ln.isAttributeTag)(n)){const s=n.node.name.value.slice(1),i=e.nestedAttributeTags,o=i[s],a=o||(i[s]={dynamic:!1,repeated:!1});return a.dynamic||=r,a.repeated||=t||void 0!==o,!0}return!1}var Bn=r("../../node_modules/@marko/babel-utils/dist/index.js"),Rn=r("../../browser-shims/compiler/index.js"),Fn=r("../../node_modules/@marko/babel-utils/dist/index.js");function $n(e){let{extra:t}=e.node;if(t||(t=e.node.extra={}),void 0===t.confident){const r=(0,Fn.computeNode)(e.node.value);r?(t.computed=r.value,t.confident=!0):(t.computed=void 0,t.confident=!1)}return t}var _n=Symbol("native tag binding"),zn=Symbol("serialize marker"),Wn=Symbol("node getter id"),Vn={analyze:{enter(e){const{node:t}=e,r=e.get("attributes"),n=e.node.var;let s=!1,i=!1;for(const t of r)qn(t)?((t.node.value.extra??={}).isEffect=!0,s=!0,i=!0,Dr(e,r.map((e=>e.node.value)))):Jn(t.node.name)?((t.node.value.extra??={}).isEffect=!0,s=!0):$n(t).confident||(i=!0);if(n||s||i){lr.node.extra.isInteractive||=s;const r=H(e),i="StringLiteral"===t.name.type?t.name.value:Rn.types.toIdentifier(e.get("name")),o=t.extra??={},a="#"+i;if(o[zn]=!!n||s,o[_n]=Sr(a,0,r),n&&Rn.types.isIdentifier(n))for(const t of e.scope.getBinding(n.name).referencePaths)if(!t.parentPath?.isCallExpression()){o[Wn]=Kt(r,a);break}}}},translate:{enter(e){(0,Bn.assertNoArgs)(e);const t=e.node.extra,r=t[_n],n=U(),s=e.get("name"),i=e.get("attributes"),o=(0,Bn.getTagDef)(e),a=i.some((e=>e.isMarkoSpreadAttribute())),l=yt(e),c=Q(e);if(n&&t.tagNameNullable&&xt(e),e.has("var")){const s=t[Wn];if(n){const t=e.node.var.name,r=e.scope.getBinding(t).referencePaths;for(const e of r){let t=Q(e);for(;t!==c&&t.parent;)Ut(t).set(Rn.types.stringLiteral("_"),qe("ensureScopeWithId",Y(t=t.parent)))}ln(e,qe("nodeRef",s&&Y(c),s&&Rn.types.stringLiteral(s)))}else{const t=e.node.var.name,n=e.scope.getBinding(t).referencePaths;let i;s&&(i=lr.scope.generateUidIdentifier(`get_${t}`),lr.pushContainer("body",Rn.types.variableDeclaration("const",[Rn.types.variableDeclarator(i,qe("nodeRef",Rn.types.stringLiteral(s),zr(r)))])));for(const t of n){const n=Q(t);t.parentPath?.isCallExpression()?t.parentPath.replaceWith(Rn.types.expressionStatement(ze(n,r))):i&&t.replaceWith(Rn.types.callExpression(i,[_e(n,Q(e))]))}}}let p;if(r&&(p=zr(r),ut(e,32)),l`<${s.node}`,a){const r=vn(e);n?(tr(c,t.referencedBindings),l`${qe("attrs",r,p,Y(c))}`):(Vt("render",c,t.referencedBindings,Rn.types.expressionStatement(qe("attrs",cr,p,r))),Vt("effect",c,t.referencedBindings,Rn.types.expressionStatement(qe("attrsEvents",cr,p)),r))}else for(const e of i){const t=e.node.name,r=e.get("value"),{confident:s,computed:i}=e.node.extra??{},o=r.node.extra?.referencedBindings;switch(t){case"class":case"style":{const e=`${t}Attr`;s?l`${Je()[e](i)}`:n?l`${qe(e,r.node)}`:Vt("render",c,o,Rn.types.expressionStatement(qe(e,Rn.types.memberExpression(cr,p,!0),r.node)));break}default:s?l`${Je().attr(t,i)}`:n?Jn(t)?tr(c,o):l`${qe("attr",Rn.types.stringLiteral(t),r.node)}`:Jn(t)?Vt("effect",c,o,Rn.types.expressionStatement(qe("on",Rn.types.memberExpression(cr,p,!0),Rn.types.stringLiteral("-"===(d=t).charAt(2)?d.slice(3):d.charAt(2).toLowerCase()+d.slice(3)),r.node)),r.node):Vt("render",c,o,Rn.types.expressionStatement(qe("attr",Rn.types.memberExpression(cr,p,!0),Rn.types.stringLiteral(t),r.node)))}}var d;if(o&&o.parseOptions?.openTagOnly)switch(o.htmlType){case"svg":case"math":l`/>`;break;default:l`>`}else l`>`;n&&t.tagNameNullable&&e.insertBefore(Rn.types.ifStatement(s.node,bt(e)))[0].skip(),ct(e)},exit(e){const t=e.node.extra,r=t[_n],n=U(),s=(0,Bn.getTagDef)(e)?.parseOptions?.openTagOnly;n&&t.tagNameNullable&&vt(e),e.insertBefore(e.node.body.body).forEach((e=>e.skip())),s||yt(e)`</${e.node.name}>`,n&&t.tagNameNullable&&e.insertBefore(Rn.types.ifStatement(e.node.name,bt(e)))[0].skip(),r&&(t[zn]||e.node.attributes.some((e=>Vr(e.value.extra?.referencedBindings))))&&Et(e,r),pt(e),e.remove()}}};function qn(e){return"MarkoSpreadAttribute"===e.type}function Jn(e){return/^on[A-Z-]/.test(e)}var Zn=Symbol("for marker binding"),Xn=Symbol("for scope start index"),Kn={analyze(e){!function(e){const t=e.node.attributes,r=e.node.body.params.length>0;if((0,Dn.assertNoVar)(e),Qn(t,"of")){if((0,Dn.assertAllowedAttributes)(e,["of","by"]),!r)throw e.buildCodeFrameError("Invalid `for of` tag, missing `|value, index|` params.")}else if(Qn(t,"in")){if((0,Dn.assertAllowedAttributes)(e,["in","by"]),!r)throw e.buildCodeFrameError("Invalid `for in` tag, missing `|key, value|` params.")}else{if(!Qn(t,"to"))throw e.buildCodeFrameError("Invalid `for` tag, missing an `of=`, `in=` or `to=` attribute.");(0,Dn.assertAllowedAttributes)(e,["from","to","step","by"])}}(e);const t=function(e){const t=e.node.extra;return Nn.types.isMarkoTag(e.parentPath?.parent)&&(0,Dn.getTagDef)(e.parentPath.parentPath)?.html?t.isOnlyChild=1===e.parent.body.length:t.isOnlyChild=!1}(e),r=e.node.extra??={},n=e.get("body"),s=H(e),i=G(n);if(t){const t=e.parentPath.parent,r=t.name?.value;(t.extra??={})[_n]??=Sr("#"+r,0,s)}else r[Zn]=Sr("#text",0,s);Cr(n,3,void 0,r),Pn(e),Dr(e,e.node.attributes.map((e=>e.value))),i.upstreamExpression=r},translate:{enter(e){const t=e.get("body"),r=Q(t),n=e.node.extra,{isOnlyChild:s}=n,i=Vr(n.referencedBindings),o=n.nestedAttributeTags&&Object.keys(n.nestedAttributeTags).length>0;te(r,!0),s||(ut(e,37),dt(e)),U()&&(xt(e),!i||r.content?.singleChild||o||(n[Xn]=e.scope.generateUidIdentifier("k"),yt(t)`${qe("markResumeScopeStart",Y(r),Nn.types.updateExpression("++",n[Xn]))}`))},exit(e){U()?Hn.exit(e):Gn.exit(e)}},attributes:{of:{type:"expression",autocomplete:[{description:"Iterates over a list of items."}]},in:{type:"expression",autocomplete:[{description:"Iterates over the keys and values of an object."}]},to:{type:"number",autocomplete:[{description:"Iterates up to the provided number (inclusive)"}]},from:{type:"number",autocomplete:[{description:"Iterates starting from the provided number (inclusive)"}]},step:{type:"number",autocomplete:[{description:"The amount to increment during each interation (with from/to)"}]}},autocomplete:[{snippet:"for|${1:value, index}| of=${3:array}",description:"Use to iterate over lists, object properties, or between ranges.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#iterating-over-a-list"},{snippet:"for|${1:name, value}| in=${3:object}",descriptionMoreURL:"https://markojs.com/docs/core-tags/#iterating-over-an-objects-properties"},{snippet:"for|${1:index}| from=${2:number} to=${3:number} step=${4:number}",descriptionMoreURL:"https://markojs.com/docs/core-tags/#iterating-between-a-range-of-numbers"}]},Gn={exit(e){const t=e.get("body"),r=Q(e),n=Q(t),{node:s}=e,{attributes:i}=s,{isOnlyChild:o,referencedBindings:a}=s.extra,l=o?e.parentPath.parent.extra[_n]:e.node.extra[Zn];Mt(e,(e=>qe("inLoopScope",e,zr(l)))),e.remove();const c=Nn.types.identifier(n.name),p=Qn(i,"of"),d=Qn(i,"to"),u=Qn(i,"in"),f=[];let m;if(p)m="loopOf",f.push(p.value);else if(u)m="loopIn",f.push(u.value);else if(d){const e=Qn(i,"from"),t=Qn(i,"step");m="loopTo",f.push(d.value,e?e.value:Nn.types.numericLiteral(0),t?t.value:Nn.types.numericLiteral(1))}const h=Qn(i,"by");h&&f.push(h.value);const g=Rt(r,l,"for");g.build=()=>qe(m,zr(l),c);const y=Object.values(t.getBindingIdentifiers());g.hasDownstreamIntersections=()=>{if(Dt(n).length>0)return!0;if(y.length){const e=y[0].extra.binding;for(const{referencedBindings:t}of e.downstreamExpressions)if(Rt(n,t).hasDownstreamIntersections())return!0}return!1},qt(r,a,g,Nn.types.arrayExpression(f))}},Hn={exit(e){const t=e.get("body"),r=Q(e),n=Q(t),{node:s}=e,{attributes:i,body:{body:o,params:a}}=s,l=s.extra,{isOnlyChild:c}=l,p=Vr(l.referencedBindings),d=l.nestedAttributeTags&&Object.keys(l.nestedAttributeTags).length>0,u=c?e.parentPath.parent.extra[_n]:e.node.extra[Zn],f=Qn(i,"of"),m=Qn(i,"in"),h=Qn(i,"to"),g=Qn(i,"by"),y=Nn.types.blockStatement(o),b=yt(e),x=[],v=pe(n,!0);let w,E=Nn.types.identifier("NOO");if(p&&c&&(e.parentPath.parent.extra[zn]=!0),(p||v)&&Ot(n),g&&p){const e=lr.scope.generateUidIdentifier("by");x.push(Nn.types.variableDeclaration("const",[Nn.types.variableDeclarator(e,g.value)])),w=[],E=Nn.types.callExpression(e,w)}if(m){const[e,t]=a;E=e,t&&y.body.unshift(Nn.types.variableDeclaration("const",[Nn.types.variableDeclarator(t,Nn.types.memberExpression(m.value,e,!0))])),x.push(Nn.types.forInStatement(Nn.types.variableDeclaration("const",[Nn.types.variableDeclarator(e)]),m.value,y))}else if(f){let t=f.value,[r,n,s]=a;if(!Nn.types.isIdentifier(r)&&w){const e=lr.scope.generateUidIdentifier("v");y.body.unshift(Nn.types.variableDeclaration("const",[Nn.types.variableDeclarator(r,e)])),r=e}if(n||p||v){n??=lr.scope.generateUidIdentifier("i");const t=e.scope.generateUidIdentifierBasedOnNode(n,"i");x.push(Nn.types.variableDeclaration("let",[Nn.types.variableDeclarator(t,Nn.types.numericLiteral(0))])),y.body.unshift(Nn.types.variableDeclaration("let",[Nn.types.variableDeclarator(n,Nn.types.updateExpression("++",t))]))}s&&(Nn.types.isIdentifier(s)&&(t=s),x.push(Nn.types.variableDeclaration("const",[Nn.types.variableDeclarator(s,f.value)]))),w?w.push(r,n):E=n,x.push(Nn.types.forOfStatement(Nn.types.variableDeclaration("const",[Nn.types.variableDeclarator(r)]),t,y))}else if(h){const t=Qn(i,"step")?.value??Nn.types.numericLiteral(1),r=Qn(i,"from")?.value??Nn.types.numericLiteral(0);let[n]=a;const s=e.scope.generateUidIdentifier("steps"),o=e.scope.generateUidIdentifier("i"),l=e.scope.generateUidIdentifier("step"),c=e.scope.generateUidIdentifier("from");(n||p||v)&&(n??=lr.scope.generateUidIdentifier("i"),E=n,y.body.unshift(Nn.types.variableDeclaration("const",[Nn.types.variableDeclarator(n,Nn.types.binaryExpression("+",c,Nn.types.binaryExpression("*",o,l)))]))),x.push(Nn.types.forStatement(Nn.types.variableDeclaration("let",[Nn.types.variableDeclarator(c,Nn.types.logicalExpression("??",r,Nn.types.numericLiteral(0))),Nn.types.variableDeclarator(l,Nn.types.logicalExpression("??",t,Nn.types.numericLiteral(1))),Nn.types.variableDeclarator(s,Nn.types.binaryExpression("/",Nn.types.binaryExpression("-",h.value,c),l)),Nn.types.variableDeclarator(o,Nn.types.numericLiteral(0))]),Nn.types.binaryExpression("<=",o,s),Nn.types.updateExpression("++",o),y))}if(l[Xn]&&x.unshift(Nn.types.variableDeclaration("let",[Nn.types.variableDeclarator(l[Xn],Nn.types.numericLiteral(0))])),(p||v)&&!d){const t=null===n.content||n.content.singleChild,s=e.scope.generateUidIdentifier("forScopeIds"),i=ie(n);x.unshift(Nn.types.variableDeclaration("const",[p&&t&&Nn.types.variableDeclarator(s,Nn.types.arrayExpression([])),Nn.types.variableDeclarator(i,Nn.types.newExpression(Nn.types.identifier("Map"),[]))].filter(Boolean))),p&&(t?(y.body.push(Nn.types.expressionStatement(Nn.types.callExpression(Nn.types.memberExpression(s,Nn.types.identifier("push")),[Y(n)]))),b`${qe("markResumeControlSingleNodeEnd",Y(r),zr(u),s)}`):b`${qe("markResumeControlEnd",Y(r),zr(u))}`),Ut(r).set(Nn.types.stringLiteral(zr(u).value+"("),Nn.types.conditionalExpression(Nn.types.memberExpression(i,Nn.types.identifier("size")),i,Nn.types.identifier("undefined")))}vt(e),Mt(e,(()=>{})),rr(t),(p||v)&&e.node.body.body.push(Nn.types.expressionStatement(Nn.types.callExpression(Nn.types.memberExpression(ie(n),Nn.types.identifier("set")),[E,qe("getScopeById",Y(n))]))),e.replaceWithMultiple(x)}};function Qn(e,t){return e.find((e=>Nn.types.isMarkoAttribute(e)&&e.name===t))}var Yn=r("../../node_modules/@marko/babel-utils/dist/index.js"),es=r("../../browser-shims/compiler/index.js"),ts=Symbol("comment tag binding"),rs=Symbol("node getter id"),ns={analyze(e){(0,Yn.assertNoArgs)(e),(0,Yn.assertNoParams)(e),(0,Yn.assertNoAttributes)(e);const t=e.node.var;let r=!1,n=!1;if(t){if(!es.types.isIdentifier(t))throw e.get("var").buildCodeFrameError("The `html-comment` tag variable cannot be destructured.");r=!0;for(const r of e.scope.getBinding(t.name).referencePaths)if(!r.parentPath?.isCallExpression()){n=!0;break}}const s=[];for(const t of e.get("body").get("body"))if(t.isMarkoPlaceholder())s.push(t.node.value),r=!0;else if(!t.isMarkoText())throw t.buildCodeFrameError("Invalid child. Only text is allowed inside an html comment.");if(r){const t=H(e),r=e.node.extra??={};n&&(r[rs]=Kt(t,"comment")),r[ts]=Sr("#comment",0,t),Dr(e,s)}e.skip()},translate(e){const t=e.node.extra,r=t[ts];if(e.node.var){const n=t[rs];if(U())ln(e,qe("nodeRef",n&&Y(Q(e)),n&&es.types.stringLiteral(n)));else{const t=e.node.var.name,s=e.scope.getBinding(t).referencePaths;let i;n&&(i=lr.scope.generateUidIdentifier(`get_${t}`),lr.pushContainer("body",es.types.variableDeclaration("const",[es.types.variableDeclarator(i,qe("nodeRef",es.types.stringLiteral(n),zr(r)))])));for(const t of s){const n=Q(t);t.parentPath?.isCallExpression()?t.parentPath.replaceWith(es.types.expressionStatement(ze(n,r))):i&&t.replaceWith(es.types.callExpression(i,[_e(n,Q(e))]))}}}t[ts]&&ut(e,32);const n=yt(e);if(ct(e),n`<!--`,U())for(const t of e.node.body.body)es.types.isMarkoText(t)?n`${t.value}`:es.types.isMarkoPlaceholder(t)&&n`${qe("escapeXML",t.value)}`;else{const s=[],i=[];let o="";for(const t of e.node.body.body)es.types.isMarkoText(t)?o+=t.value:es.types.isMarkoPlaceholder(t)&&(s.push(es.types.templateElement({raw:o})),i.push(t.value),o="");0===i.length?n`${o}`:(s.push(es.types.templateElement({raw:o})),Vt("render",Q(e),t.referencedBindings,es.types.expressionStatement(qe("data",es.types.memberExpression(cr,zr(r),!0),es.types.templateLiteral(s,i)))))}pt(e),n`-->`,r&&Et(e,r),e.remove()},parseOptions:{text:!0},attributes:{},autocomplete:[{description:"Use to create an html comment that is not stripped from the output.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#html-comment"}]},ss=r("../../node_modules/@marko/babel-utils/dist/index.js"),is=r("../../browser-shims/compiler/index.js"),os={translate:{exit(e){const{node:t}=e,{var:r}=t,n=U()?qe("nextTagId"):qe("nextTagId",cr);if((0,ss.assertNoArgs)(e),(0,ss.assertNoAttributes)(e),Qe(e),(0,ss.assertNoParams)(e),!t.var)throw e.get("name").buildCodeFrameError("The `id` tag requires a tag variable.");if(!is.types.isIdentifier(r))throw e.get("var").buildCodeFrameError("The `id` tag cannot be destructured");if(U())e.replaceWith(is.types.variableDeclaration("const",[is.types.variableDeclarator(t.var,n)]));else{const t=Ft(r.extra.binding);qt(Q(e),void 0,t,n),e.remove()}}},attributes:{},autocomplete:[{displayText:"id/<name>",description:"Use to create a unique identifier.",snippet:"id/${1:name}",descriptionMoreURL:"https://markojs.com/docs/core-tags/#id"}],types:"@marko/translator-tags/tag-types/id.d.marko"},as=r("../../node_modules/@marko/babel-utils/dist/index.js"),ls={parse(e){const{node:t}=e;e.replaceWith((0,as.parseStatements)(e.hub.file,t.rawValue,t.start,t.end)[0])},parseOptions:{statement:!0,rawOpenTag:!0},autocomplete:[{displayText:'import <scope> from "<path>"',description:"Use to import external modules, follows the same syntax as JavaScript imports.",snippet:'import ${2} from "${1:path}"',descriptionMoreURL:"https://markojs.com/docs/syntax/#importing-external-files"}]},cs=r("../../node_modules/@marko/babel-utils/dist/index.js"),ps=r("../../browser-shims/compiler/index.js"),ds={analyze(e){const{node:t}=e,r=t.var,{optimize:n}=R();let s,i;for(const r of t.attributes)if(ps.types.isMarkoAttribute(r))if("value"===r.name)s=r;else{if("valueChange"!==r.name){const t=r.loc?.start,n=r.loc?.end,s="The `let` tag only supports the `value` attribute and its change handler.";throw null==t||null==n?e.get("name").buildCodeFrameError(s):e.hub.buildError({loc:{start:t,end:n}},s,Error)}i=r}if((0,cs.assertNoArgs)(e),(0,cs.assertNoParams)(e),Qe(e),He(e),!r)throw e.get("name").buildCodeFrameError("The `let` tag requires a tag variable.");if(!ps.types.isIdentifier(r))throw e.get("var").buildCodeFrameError("The `let` tag variable cannot be destructured.");if(i&&(0,cs.computeNode)(i.value))throw e.get("attributes").find((e=>e.node===i)).get("value").buildCodeFrameError("The `let` tag `valueChange` attribute must be a function.");if(i){const t=(i.value.extra??={})?.referencedBindings;i.value.extra.static=ps.types.isFunction(i.value),n&&ps.types.isIdentifier(i.value)&&1===((o=t)?Array.isArray(o)?o.length:1:0)?i.value.extra.binding=t:i.value.extra.binding=Sr(e.scope.generateUid(r.name+"_change"),1,Q(e),void 0,i.value.extra)}var o;Ar(e,1,void 0,s?s.value.extra??={}:void 0,i?.value.extra?.binding)},translate:{exit(e){const{node:t}=e,r=t.var,{optimize:n}=R(),s=t.attributes.find((e=>ps.types.isMarkoAttribute(e)&&(e.default||"value"===e.name)))??ps.types.markoAttribute("value",ps.types.identifier("undefined")),i=t.attributes.find((e=>ps.types.isMarkoAttribute(e)&&"valueChange"===e.name)),o=i?.value.extra?.binding;if(B()){const t=Q(e),a=r.extra.binding,l=Ft(a),c=s.value.extra?.referencedBindings,p=!c;if(o&&(!n||!ps.types.isIdentifier(i.value))){const e=Ft(o);if(!n&&!ps.types.isFunction(i.value)){const t=e.build;e.build=()=>{const e=t();return qe("changeHandler",zr(o),e)}}qt(t,i.value.extra?.referencedBindings,e,i.value)}if(qt(t,c,l,s.value),!p&&!i?.value.extra?.static){let r;Object.defineProperty(l,"callee",{get(){if(!r){const n=e.scope.generateUidIdentifier(l.identifier.name+"_init");r=o?ps.types.conditionalExpression(ze(t,o),l.identifier,n):n,lr.pushContainer("body",ps.types.variableDeclaration("const",[ps.types.variableDeclarator(n,qe("initValue",zr(a),l.identifier))]))}return r}})}l.buildAssignment=(e,t)=>function(e,t,r,n){if(!n)return qe("queueSource",_e(r,e.section),e.identifier,t);const s=Xe.types.identifier(n.name);return n.upstreamExpression?.static?Xe.types.callExpression(s,[t]):qe("queueControllableSource",_e(r,e.section),e.identifier,s,t)}(l,t,e,o)}else ln(e,s.value),o&&e.insertBefore(ps.types.variableDeclaration("const",[ps.types.variableDeclarator(ps.types.identifier(o.name),i.value)]));e.remove()}},attributes:{},autocomplete:[{description:"Use to create a mutable binding.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#let"}],types:"@marko/translator-tags/tag-types/let.d.marko"},us=r("../../node_modules/@marko/babel-utils/dist/index.js"),fs=r("../../browser-shims/compiler/index.js"),ms=Symbol("lifecycle attrs reference"),hs=new Set(["onMount","onUpdate","onDestroy"]),gs={analyze(e){(0,us.assertNoArgs)(e),(0,us.assertNoVar)(e),(0,us.assertNoParams)(e),Qe(e);const{node:t}=e,r=t.extra??={};if(r[ms]=Sr(e.scope.generateUid("lifecycle"),4,H(e),void 0,r),0===t.attributes.length)throw e.get("name").buildCodeFrameError("The `lifecycle` tag requires at least one attribute.");for(const r of t.attributes){if(fs.types.isMarkoSpreadAttribute(r))throw e.get("name").buildCodeFrameError("The `lifecycle` tag does not support `...spread` attributes.");if(!hs.has(r.name))throw e.get("name").buildCodeFrameError(`The \`lifecycle\` tag does not support the \`${r.name}\` attribute.`);(r.value.extra??={}).isEffect=!0}(lr.node.extra??={}).isInteractive=!0,Dr(e,e.node.attributes.map((e=>e.value)))},translate:{exit(e){const{node:t}=e,r=Q(e),n=t.extra,{referencedBindings:s}=n,i=n[ms];if(B()){const n=vn(e);Vt("effect",r,s,fs.types.expressionStatement(qe("lifecycle",cr,zr(i),n)),t.attributes.map((e=>e.value)))}else tr(r,s);e.remove()}},attributes:{},autocomplete:[{description:"Use to create a side effects.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#effect"}],types:"@marko/translator-tags/tag-types/lifecycle.d.marko"},ys=r("../../node_modules/@marko/babel-utils/dist/index.js"),bs=r("../../browser-shims/compiler/index.js"),xs={analyze(e){const[t]=e.node.attributes;if((0,ys.assertNoArgs)(e),(0,ys.assertNoVar)(e),(0,ys.assertNoParams)(e),Qe(e),!t)throw e.get("name").buildCodeFrameError("The `log` tag requires a value.");if(e.node.attributes.length>1||!bs.types.isMarkoAttribute(t)||!t.default&&"value"!==t.name)throw e.get("name").buildCodeFrameError("The `log` tag only supports the `value` attribute.")},translate:{exit(e){const t=Q(e),[r]=e.node.attributes,{value:n}=r,s=n.extra?.referencedBindings,i=bs.types.expressionStatement(bs.types.callExpression(bs.types.memberExpression(bs.types.identifier("console"),bs.types.identifier("log")),[n]));U()?e.insertBefore(i):Vt("render",t,s,i),e.remove()}},attributes:{},autocomplete:[{description:"Use to log a value to the console.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#log"}],types:"@marko/translator-tags/tag-types/log.d.marko"},vs={migrate:[e=>e.remove()]},ws=r("../../node_modules/@marko/babel-utils/dist/index.js"),Es=r("../../browser-shims/compiler/index.js"),ks={parse(e){const{node:t,hub:{file:r}}=e,n=t.rawValue,s=n.replace(/^server\s*/,"").trim(),i=t.name.start+(n.length-s.length);let o=(0,ws.parseStatements)(r,s,i,i+s.length);1===o.length&&Es.types.isBlockStatement(o[0])&&(o=o[0].body),e.replaceWith(Es.types.markoScriptlet(o,!0,"server"))},parseOptions:{statement:!0,rawOpenTag:!0},autocomplete:[{displayText:"server <statement>",description:"A JavaScript statement which is only evaluated once your template is loaded on the server.",descriptionMoreURL:"https://markojs.com/docs/syntax/#server-javascript"}]},Ss=r("../../node_modules/@marko/babel-utils/dist/index.js"),As=r("../../browser-shims/compiler/index.js"),Cs={parse(e){const{node:t,hub:{file:r}}=e,n=t.rawValue,s=n.replace(/^static\s*/,"").trim(),i=t.name.start+(n.length-s.length);let o=(0,Ss.parseStatements)(r,s,i,i+s.length);1===o.length&&As.types.isBlockStatement(o[0])&&(o=o[0].body),e.replaceWith(As.types.markoScriptlet(o,!0))},parseOptions:{statement:!0,rawOpenTag:!0},autocomplete:[{displayText:"static <statement>",description:"A JavaScript statement which is only evaluated once your template is loaded.",descriptionMoreURL:"https://markojs.com/docs/syntax/#static-javascript"}]},Is=r("../../node_modules/@marko/babel-utils/dist/index.js"),js=r("../../browser-shims/compiler/index.js"),Ts=",".charCodeAt(0),Ms=";".charCodeAt(0),Ds=new Uint8Array(64),Ns=new Uint8Array(128);for(let e=0;e<64;e++){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(e);Ds[e]=t,Ns[t]=e}function Ls(e,t,r){let n=t-r;n=n<0?-n<<1|1:n<<1;do{let t=31&n;n>>>=5,n>0&&(t|=32),e.write(Ds[t])}while(n>0);return t}var Ps="undefined"!=typeof TextDecoder?new TextDecoder:void 0!==s?{decode:e=>s.from(e.buffer,e.byteOffset,e.byteLength).toString()}:{decode(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}},Os=class{constructor(){this.pos=0,this.out="",this.buffer=new Uint8Array(16384)}write(e){const{buffer:t}=this;t[this.pos++]=e,16384===this.pos&&(this.out+=Ps.decode(t),this.pos=0)}flush(){const{buffer:e,out:t,pos:r}=this;return r>0?t+Ps.decode(e.subarray(0,r)):t}},Us=class e{constructor(t){this.bits=t instanceof e?t.bits.slice():[]}add(e){this.bits[e>>5]|=1<<(31&e)}has(e){return!!(this.bits[e>>5]&1<<(31&e))}},Bs=class e{constructor(e,t,r){this.start=e,this.end=t,this.original=r,this.intro="",this.outro="",this.content=r,this.storeName=!1,this.edited=!1,this.previous=null,this.next=null}appendLeft(e){this.outro+=e}appendRight(e){this.intro=this.intro+e}clone(){const t=new e(this.start,this.end,this.original);return t.intro=this.intro,t.outro=this.outro,t.content=this.content,t.storeName=this.storeName,t.edited=this.edited,t}contains(e){return this.start<e&&e<this.end}eachNext(e){let t=this;for(;t;)e(t),t=t.next}eachPrevious(e){let t=this;for(;t;)e(t),t=t.previous}edit(e,t,r){return this.content=e,r||(this.intro="",this.outro=""),this.storeName=t,this.edited=!0,this}prependLeft(e){this.outro=e+this.outro}prependRight(e){this.intro=e+this.intro}reset(){this.intro="",this.outro="",this.edited&&(this.content=this.original,this.storeName=!1,this.edited=!1)}split(t){const r=t-this.start,n=this.original.slice(0,r),s=this.original.slice(r);this.original=n;const i=new e(t,this.end,s);return i.outro=this.outro,this.outro="",this.end=t,this.edited?(i.edit("",!1),this.content=""):this.content=n,i.next=this.next,i.next&&(i.next.previous=i),i.previous=this,this.next=i,i}toString(){return this.intro+this.content+this.outro}trimEnd(e){if(this.outro=this.outro.replace(e,""),this.outro.length)return!0;const t=this.content.replace(e,"");return t.length?(t!==this.content&&(this.split(this.start+t.length).edit("",void 0,!0),this.edited&&this.edit(t,this.storeName,!0)),!0):(this.edit("",void 0,!0),this.intro=this.intro.replace(e,""),!!this.intro.length||void 0)}trimStart(e){if(this.intro=this.intro.replace(e,""),this.intro.length)return!0;const t=this.content.replace(e,"");if(t.length){if(t!==this.content){const e=this.split(this.end-t.length);this.edited&&e.edit(t,this.storeName,!0),this.edit("",void 0,!0)}return!0}return this.edit("",void 0,!0),this.outro=this.outro.replace(e,""),!!this.outro.length||void 0}},Rs="undefined"!=typeof globalThis&&"function"==typeof globalThis.btoa?e=>globalThis.btoa(unescape(encodeURIComponent(e))):"function"==typeof s?e=>s.from(e,"utf-8").toString("base64"):()=>{throw new Error("Unsupported environment: `window.btoa` or `Buffer` should be supported.")},Fs=class{constructor(e){this.version=3,this.file=e.file,this.sources=e.sources,this.sourcesContent=e.sourcesContent,this.names=e.names,this.mappings=function(e){const t=new Os;let r=0,n=0,s=0,i=0;for(let o=0;o<e.length;o++){const a=e[o];if(o>0&&t.write(Ms),0===a.length)continue;let l=0;for(let e=0;e<a.length;e++){const o=a[e];e>0&&t.write(Ts),l=Ls(t,o[0],l),1!==o.length&&(r=Ls(t,o[1],r),n=Ls(t,o[2],n),s=Ls(t,o[3],s),4!==o.length&&(i=Ls(t,o[4],i)))}}return t.flush()}(e.mappings),void 0!==e.x_google_ignoreList&&(this.x_google_ignoreList=e.x_google_ignoreList)}toString(){return JSON.stringify(this)}toUrl(){return"data:application/json;charset=utf-8;base64,"+Rs(this.toString())}};function $s(e,t){const r=e.split(/[/\\]/),n=t.split(/[/\\]/);for(r.pop();r[0]===n[0];)r.shift(),n.shift();if(r.length){let e=r.length;for(;e--;)r[e]=".."}return r.concat(n).join("/")}var _s=Object.prototype.toString;function zs(e){const t=e.split("\n"),r=[];for(let e=0,n=0;e<t.length;e++)r.push(n),n+=t[e].length+1;return function(e){let t=0,n=r.length;for(;t<n;){const s=t+n>>1;e<r[s]?n=s:t=s+1}const s=t-1;return{line:s,column:e-r[s]}}}var Ws=/\w/,Vs=class{constructor(e){this.hires=e,this.generatedCodeLine=0,this.generatedCodeColumn=0,this.raw=[],this.rawSegments=this.raw[this.generatedCodeLine]=[],this.pending=null}addEdit(e,t,r,n){if(t.length){const s=t.length-1;let i=t.indexOf("\n",0),o=-1;for(;i>=0&&s>i;){const s=[this.generatedCodeColumn,e,r.line,r.column];n>=0&&s.push(n),this.rawSegments.push(s),this.generatedCodeLine+=1,this.raw[this.generatedCodeLine]=this.rawSegments=[],this.generatedCodeColumn=0,o=i,i=t.indexOf("\n",i+1)}const a=[this.generatedCodeColumn,e,r.line,r.column];n>=0&&a.push(n),this.rawSegments.push(a),this.advance(t.slice(o+1))}else this.pending&&(this.rawSegments.push(this.pending),this.advance(t));this.pending=null}addUneditedChunk(e,t,r,n,s){let i=t.start,o=!0,a=!1;for(;i<t.end;){if(this.hires||o||s.has(i)){const t=[this.generatedCodeColumn,e,n.line,n.column];"boundary"===this.hires?Ws.test(r[i])?a||(this.rawSegments.push(t),a=!0):(this.rawSegments.push(t),a=!1):this.rawSegments.push(t)}"\n"===r[i]?(n.line+=1,n.column=0,this.generatedCodeLine+=1,this.raw[this.generatedCodeLine]=this.rawSegments=[],this.generatedCodeColumn=0,o=!0):(n.column+=1,this.generatedCodeColumn+=1,o=!1),i+=1}this.pending=null}advance(e){if(!e)return;const t=e.split("\n");if(t.length>1){for(let e=0;e<t.length-1;e++)this.generatedCodeLine++,this.raw[this.generatedCodeLine]=this.rawSegments=[];this.generatedCodeColumn=0}this.generatedCodeColumn+=t[t.length-1].length}},qs="\n",Js={insertLeft:!1,insertRight:!1,storeName:!1},Zs=class e{constructor(e,t={}){const r=new Bs(0,e.length,e);Object.defineProperties(this,{original:{writable:!0,value:e},outro:{writable:!0,value:""},intro:{writable:!0,value:""},firstChunk:{writable:!0,value:r},lastChunk:{writable:!0,value:r},lastSearchedChunk:{writable:!0,value:r},byStart:{writable:!0,value:{}},byEnd:{writable:!0,value:{}},filename:{writable:!0,value:t.filename},indentExclusionRanges:{writable:!0,value:t.indentExclusionRanges},sourcemapLocations:{writable:!0,value:new Us},storedNames:{writable:!0,value:{}},indentStr:{writable:!0,value:void 0},ignoreList:{writable:!0,value:t.ignoreList}}),this.byStart[0]=r,this.byEnd[e.length]=r}addSourcemapLocation(e){this.sourcemapLocations.add(e)}append(e){if("string"!=typeof e)throw new TypeError("outro content must be a string");return this.outro+=e,this}appendLeft(e,t){if("string"!=typeof t)throw new TypeError("inserted content must be a string");this._split(e);const r=this.byEnd[e];return r?r.appendLeft(t):this.intro+=t,this}appendRight(e,t){if("string"!=typeof t)throw new TypeError("inserted content must be a string");this._split(e);const r=this.byStart[e];return r?r.appendRight(t):this.outro+=t,this}clone(){const t=new e(this.original,{filename:this.filename});let r=this.firstChunk,n=t.firstChunk=t.lastSearchedChunk=r.clone();for(;r;){t.byStart[n.start]=n,t.byEnd[n.end]=n;const e=r.next,s=e&&e.clone();s&&(n.next=s,s.previous=n,n=s),r=e}return t.lastChunk=n,this.indentExclusionRanges&&(t.indentExclusionRanges=this.indentExclusionRanges.slice()),t.sourcemapLocations=new Us(this.sourcemapLocations),t.intro=this.intro,t.outro=this.outro,t}generateDecodedMap(e){e=e||{};const t=Object.keys(this.storedNames),r=new Vs(e.hires),n=zs(this.original);return this.intro&&r.advance(this.intro),this.firstChunk.eachNext((e=>{const s=n(e.start);e.intro.length&&r.advance(e.intro),e.edited?r.addEdit(0,e.content,s,e.storeName?t.indexOf(e.original):-1):r.addUneditedChunk(0,e,this.original,s,this.sourcemapLocations),e.outro.length&&r.advance(e.outro)})),{file:e.file?e.file.split(/[/\\]/).pop():void 0,sources:[e.source?$s(e.file||"",e.source):e.file||""],sourcesContent:e.includeContent?[this.original]:void 0,names:t,mappings:r.raw,x_google_ignoreList:this.ignoreList?[0]:void 0}}generateMap(e){return new Fs(this.generateDecodedMap(e))}_ensureindentStr(){void 0===this.indentStr&&(this.indentStr=function(e){const t=e.split("\n"),r=t.filter((e=>/^\t+/.test(e))),n=t.filter((e=>/^ {2,}/.test(e)));if(0===r.length&&0===n.length)return null;if(r.length>=n.length)return"\t";const s=n.reduce(((e,t)=>{const r=/^ +/.exec(t)[0].length;return Math.min(r,e)}),1/0);return new Array(s+1).join(" ")}(this.original))}_getRawIndentString(){return this._ensureindentStr(),this.indentStr}getIndentString(){return this._ensureindentStr(),null===this.indentStr?"\t":this.indentStr}indent(e,t){const r=/^[^\r\n]/gm;var n;if(n=e,"[object Object]"===_s.call(n)&&(t=e,e=void 0),void 0===e&&(this._ensureindentStr(),e=this.indentStr||"\t"),""===e)return this;const s={};(t=t||{}).exclude&&("number"==typeof t.exclude[0]?[t.exclude]:t.exclude).forEach((e=>{for(let t=e[0];t<e[1];t+=1)s[t]=!0}));let i=!1!==t.indentStart;const o=t=>i?`${e}${t}`:(i=!0,t);this.intro=this.intro.replace(r,o);let a=0,l=this.firstChunk;for(;l;){const t=l.end;if(l.edited)s[a]||(l.content=l.content.replace(r,o),l.content.length&&(i="\n"===l.content[l.content.length-1]));else for(a=l.start;a<t;){if(!s[a]){const t=this.original[a];"\n"===t?i=!0:"\r"!==t&&i&&(i=!1,a===l.start||(this._splitChunk(l,a),l=l.next),l.prependRight(e))}a+=1}a=l.end,l=l.next}return this.outro=this.outro.replace(r,o),this}insert(){throw new Error("magicString.insert(...) is deprecated. Use prependRight(...) or appendLeft(...)")}insertLeft(e,t){return Js.insertLeft||(console.warn("magicString.insertLeft(...) is deprecated. Use magicString.appendLeft(...) instead"),Js.insertLeft=!0),this.appendLeft(e,t)}insertRight(e,t){return Js.insertRight||(console.warn("magicString.insertRight(...) is deprecated. Use magicString.prependRight(...) instead"),Js.insertRight=!0),this.prependRight(e,t)}move(e,t,r){if(r>=e&&r<=t)throw new Error("Cannot move a selection inside itself");this._split(e),this._split(t),this._split(r);const n=this.byStart[e],s=this.byEnd[t],i=n.previous,o=s.next,a=this.byStart[r];if(!a&&s===this.lastChunk)return this;const l=a?a.previous:this.lastChunk;return i&&(i.next=o),o&&(o.previous=i),l&&(l.next=n),a&&(a.previous=s),n.previous||(this.firstChunk=s.next),s.next||(this.lastChunk=n.previous,this.lastChunk.next=null),n.previous=l,s.next=a||null,l||(this.firstChunk=n),a||(this.lastChunk=s),this}overwrite(e,t,r,n){return n=n||{},this.update(e,t,r,{...n,overwrite:!n.contentOnly})}update(e,t,r,n){if("string"!=typeof r)throw new TypeError("replacement content must be a string");if(0!==this.original.length){for(;e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length}if(t>this.original.length)throw new Error("end is out of bounds");if(e===t)throw new Error("Cannot overwrite a zero-length range  use appendLeft or prependRight instead");this._split(e),this._split(t),!0===n&&(Js.storeName||(console.warn("The final argument to magicString.overwrite(...) should be an options object. See https://github.com/rich-harris/magic-string"),Js.storeName=!0),n={storeName:!0});const s=void 0!==n&&n.storeName,i=void 0!==n&&n.overwrite;if(s){const r=this.original.slice(e,t);Object.defineProperty(this.storedNames,r,{writable:!0,value:!0,enumerable:!0})}const o=this.byStart[e],a=this.byEnd[t];if(o){let e=o;for(;e!==a;){if(e.next!==this.byStart[e.end])throw new Error("Cannot overwrite across a split point");e=e.next,e.edit("",!1)}o.edit(r,s,!i)}else{const n=new Bs(e,t,"").edit(r,s);a.next=n,n.previous=a}return this}prepend(e){if("string"!=typeof e)throw new TypeError("outro content must be a string");return this.intro=e+this.intro,this}prependLeft(e,t){if("string"!=typeof t)throw new TypeError("inserted content must be a string");this._split(e);const r=this.byEnd[e];return r?r.prependLeft(t):this.intro=t+this.intro,this}prependRight(e,t){if("string"!=typeof t)throw new TypeError("inserted content must be a string");this._split(e);const r=this.byStart[e];return r?r.prependRight(t):this.outro=t+this.outro,this}remove(e,t){if(0!==this.original.length){for(;e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length}if(e===t)return this;if(e<0||t>this.original.length)throw new Error("Character is out of bounds");if(e>t)throw new Error("end must be greater than start");this._split(e),this._split(t);let r=this.byStart[e];for(;r;)r.intro="",r.outro="",r.edit(""),r=t>r.end?this.byStart[r.end]:null;return this}reset(e,t){if(0!==this.original.length){for(;e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length}if(e===t)return this;if(e<0||t>this.original.length)throw new Error("Character is out of bounds");if(e>t)throw new Error("end must be greater than start");this._split(e),this._split(t);let r=this.byStart[e];for(;r;)r.reset(),r=t>r.end?this.byStart[r.end]:null;return this}lastChar(){if(this.outro.length)return this.outro[this.outro.length-1];let e=this.lastChunk;do{if(e.outro.length)return e.outro[e.outro.length-1];if(e.content.length)return e.content[e.content.length-1];if(e.intro.length)return e.intro[e.intro.length-1]}while(e=e.previous);return this.intro.length?this.intro[this.intro.length-1]:""}lastLine(){let e=this.outro.lastIndexOf(qs);if(-1!==e)return this.outro.substr(e+1);let t=this.outro,r=this.lastChunk;do{if(r.outro.length>0){if(e=r.outro.lastIndexOf(qs),-1!==e)return r.outro.substr(e+1)+t;t=r.outro+t}if(r.content.length>0){if(e=r.content.lastIndexOf(qs),-1!==e)return r.content.substr(e+1)+t;t=r.content+t}if(r.intro.length>0){if(e=r.intro.lastIndexOf(qs),-1!==e)return r.intro.substr(e+1)+t;t=r.intro+t}}while(r=r.previous);return e=this.intro.lastIndexOf(qs),-1!==e?this.intro.substr(e+1)+t:this.intro+t}slice(e=0,t=this.original.length){if(0!==this.original.length){for(;e<0;)e+=this.original.length;for(;t<0;)t+=this.original.length}let r="",n=this.firstChunk;for(;n&&(n.start>e||n.end<=e);){if(n.start<t&&n.end>=t)return r;n=n.next}if(n&&n.edited&&n.start!==e)throw new Error(`Cannot use replaced character ${e} as slice start anchor.`);const s=n;for(;n;){!n.intro||s===n&&n.start!==e||(r+=n.intro);const i=n.start<t&&n.end>=t;if(i&&n.edited&&n.end!==t)throw new Error(`Cannot use replaced character ${t} as slice end anchor.`);const o=s===n?e-n.start:0,a=i?n.content.length+t-n.end:n.content.length;if(r+=n.content.slice(o,a),!n.outro||i&&n.end!==t||(r+=n.outro),i)break;n=n.next}return r}snip(e,t){const r=this.clone();return r.remove(0,e),r.remove(t,r.original.length),r}_split(e){if(this.byStart[e]||this.byEnd[e])return;let t=this.lastSearchedChunk;const r=e>t.end;for(;t;){if(t.contains(e))return this._splitChunk(t,e);t=r?this.byStart[t.end]:this.byEnd[t.start]}}_splitChunk(e,t){if(e.edited&&e.content.length){const r=zs(this.original)(t);throw new Error(`Cannot split a chunk that has already been edited (${r.line}:${r.column}  "${e.original}")`)}const r=e.split(t);return this.byEnd[t]=e,this.byStart[t]=r,this.byEnd[r.end]=r,e===this.lastChunk&&(this.lastChunk=r),this.lastSearchedChunk=e,!0}toString(){let e=this.intro,t=this.firstChunk;for(;t;)e+=t.toString(),t=t.next;return e+this.outro}isEmpty(){let e=this.firstChunk;do{if(e.intro.length&&e.intro.trim()||e.content.length&&e.content.trim()||e.outro.length&&e.outro.trim())return!1}while(e=e.next);return!0}length(){let e=this.firstChunk,t=0;do{t+=e.intro.length+e.content.length+e.outro.length}while(e=e.next);return t}trimLines(){return this.trim("[\\r\\n]")}trim(e){return this.trimStart(e).trimEnd(e)}trimEndAborted(e){const t=new RegExp((e||"\\s")+"+$");if(this.outro=this.outro.replace(t,""),this.outro.length)return!0;let r=this.lastChunk;do{const e=r.end,n=r.trimEnd(t);if(r.end!==e&&(this.lastChunk===r&&(this.lastChunk=r.next),this.byEnd[r.end]=r,this.byStart[r.next.start]=r.next,this.byEnd[r.next.end]=r.next),n)return!0;r=r.previous}while(r);return!1}trimEnd(e){return this.trimEndAborted(e),this}trimStartAborted(e){const t=new RegExp("^"+(e||"\\s")+"+");if(this.intro=this.intro.replace(t,""),this.intro.length)return!0;let r=this.firstChunk;do{const e=r.end,n=r.trimStart(t);if(r.end!==e&&(r===this.lastChunk&&(this.lastChunk=r.next),this.byEnd[r.end]=r,this.byStart[r.next.start]=r.next,this.byEnd[r.next.end]=r.next),n)return!0;r=r.next}while(r);return!1}trimStart(e){return this.trimStartAborted(e),this}hasChanged(){return this.original!==this.toString()}_replaceRegexp(e,t){function r(e,r){return"string"==typeof t?t.replace(/\$(\$|&|\d+)/g,((t,r)=>"$"===r?"$":"&"===r?e[0]:+r<e.length?e[+r]:`$${r}`)):t(...e,e.index,r,e.groups)}if(e.global)(function(e,t){let r;const n=[];for(;r=e.exec(t);)n.push(r);return n})(e,this.original).forEach((e=>{if(null!=e.index){const t=r(e,this.original);t!==e[0]&&this.overwrite(e.index,e.index+e[0].length,t)}}));else{const t=this.original.match(e);if(t&&null!=t.index){const e=r(t,this.original);e!==t[0]&&this.overwrite(t.index,t.index+t[0].length,e)}}return this}_replaceString(e,t){const{original:r}=this,n=r.indexOf(e);return-1!==n&&this.overwrite(n,n+e.length,t),this}replace(e,t){return"string"==typeof e?this._replaceString(e,t):this._replaceRegexp(e,t)}_replaceAllString(e,t){const{original:r}=this,n=e.length;for(let s=r.indexOf(e);-1!==s;s=r.indexOf(e,s+n))r.slice(s,s+n)!==t&&this.overwrite(s,s+n,t);return this}replaceAll(e,t){if("string"==typeof e)return this._replaceAllString(e,t);if(!e.global)throw new TypeError("MagicString.prototype.replaceAll called with a non-global RegExp argument");return this._replaceRegexp(e,t)}},Xs=u(r("../../node_modules/path-browserify/index.js")),Ks={taglibId:h,"<import>":ls,"<export>":Mn,"<attrs>":v,"<if>":Kr,"<else-if>":nn,"<else>":en,"<for>":Kn,"<let>":ds,"<const>":cn,"<define>":En,"<effect>":jn,"<do>":An,"<log>":xs,"<debug>":un,"<lifecycle>":gs,"<id>":os,"<html-comment>":ns,"<return>":Ct,"<style>":{translate(e){const{hub:{file:t}}=e,{filename:r,sourceMaps:n}=t.opts;(0,Is.assertNoParams)(e),He(e);let s="text/css";const i=e.get("attributes"),o=Xs.default.basename(r),a=i.find((e=>e.isMarkoAttribute()&&"type"===e.node.name)),l=i.find((e=>e.isMarkoAttribute()&&"class"===e.node.name));if(a&&l)throw l.buildCodeFrameError("The `style` tag must only use `type` or `class` and not both.");if(a){const e=a.get("value");if(!e.isStringLiteral())throw e.buildCodeFrameError("The `style` tag `type` attribute can only be a string literal.");s=e.node.value}else if(l){const e=l.get("value");if(!e.isStringLiteral())throw e.buildCodeFrameError("The `style` tag `class` attribute can only be a string literal.");s=e.node.value}"text/css"===s&&(s="css"),e.node.var&&!s.startsWith("module")&&(s="module."+s);const c=e.get("body").get("body"),p=c[0];if(1!==c.length||!p.isMarkoText())throw(p.isMarkoText()?c[1]:c[0]).buildCodeFrameError("The `style` tag currently only supports static content.");const{resolveVirtualDependency:d}=R(),u=(0,Is.getStart)(t,p.node),f=(0,Is.getEnd)(t,p.node);let m,h=p.node.value;if(d&&n&&null!==u&&null!==f){const e=new Zs(t.code,{filename:r});e.remove(0,u),e.remove(f,t.code.length),m=e.generateMap({source:r,includeContent:!0}),"inline"!==n&&"both"!==n||(h+=`\n/*# sourceMappingURL=${m.toUrl()}*/`,"inline"===n&&(m=void 0))}const g=d?.(r,{virtualPath:`./${o}.${s}`,code:h,map:m});g&&(e.node.var?js.types.isIdentifier(e.node.var)?lr.pushContainer("body",js.types.importDeclaration([js.types.importDefaultSpecifier(e.node.var)],js.types.stringLiteral(g))):lr.pushContainer("body",js.types.variableDeclaration("const",[js.types.variableDeclarator(e.node.var,(0,Is.importDefault)(t,g,"style"))])):lr.pushContainer("body",js.types.importDeclaration([],js.types.stringLiteral(g)))),e.remove()},attributes:{}},"<await-reorderer>":vs,"<init-widgets>":vs,"<init-components>":vs,"<static>":Cs,"<server>":ks,"<client>":k,"<__flush_here_and_after__>":b},Gs=(r("../../browser-shims/compiler/index.js"),{translate:{exit(e){B()&&Hs(e,e.node.left)}}});function Hs(e,t){switch(t.type){case"ObjectPattern":for(const r of t.properties)Hs(e,r);break;case"ArrayPattern":for(const r in t.elements)null!==t.elements[r]&&Hs(e,t.elements[r]);break;case"RestElement":Hs(e,t.argument);break;case"ObjectProperty":Hs(e,t.value);break;case"Identifier":{const r=t.extra?.source;if(r){const t=Q(e);(lr.node.extra.assignments??=[]).push([t,e])}break}}}var Qs={translate:{enter(e){throw e.buildCodeFrameError("CDATA sections are not supported in Marko.")}}},Ys={translate:{exit(e){e.remove()}}},ei={translate:{exit(e){U()&&yt(e)`<?${e.node.value}?>`,e.remove()}}},ti={translate:{exit(e){U()&&yt(e)`<!${e.node.value}>`,e.remove()}}},ri=r("../../node_modules/@marko/babel-utils/dist/index.js"),ni=r("../../browser-shims/compiler/index.js"),si=new WeakMap,ii=new WeakSet,oi={analyze(e){const t=gr(e);if(!ai(e,!t||t.isMarkoScriptlet({static:!0})))return;if(t&&(t.isMarkoPlaceholder()||t.isMarkoScriptlet({target:"server"})))return;const{node:r}=e,n=r.extra??={},s=n.name=e.node.id?.name||(t?.isMarkoAttribute()?t.node.default?ni.types.toIdentifier(t.parentPath.parentPath.get("name")):t.node.name:"anonymous");if(t&&t.isMarkoAttribute()&&((0,ri.isNativeTag)(t.parentPath)||g(t.parentPath,"effect")||g(t.parentPath,"lifecycle")||g(t.parentPath,"for")||g(t.parentPath,"do")))return;const{markoOpts:i,opts:{filename:o}}=lr.hub.file,a=Q(e);let l=si.get(a);l||(l=new Map,si.set(a,l));const c=l.get(s);let p="";void 0===c?l.set(s,0):p=`_${c}`,n.registerId=(0,ri.getTemplateId)(i,o,`${a.id}/${s+p}`)},translate:{exit(e){const t=gr(e),r=!t||t.isMarkoScriptlet({static:!0});if(!ai(e,r))return;const{node:n}=e,{extra:s}=n;if(!s?.registerId)return;if(ii.has(n))return;const i=Q(e);if(i)if(ii.add(n),U()){const t=Ut(i);if(Ue(s.referencedBindings,(e=>{t.set(zr(e),ni.types.identifier(e.name))})),ni.types.isFunctionDeclaration(n))lr.unshiftContainer("body",ni.types.expressionStatement(qe("register",n.id,ni.types.stringLiteral(s.registerId),r?void 0:Y(i))))[0].skip();else{const t=qe("register",n,ni.types.stringLiteral(s.registerId),r?void 0:Y(i));br(e.parentPath)&&(t.extra=n.extra),e.replaceWith(t)[0].skip()}}else{const{referencedBindings:t}=s,o=lr.scope.generateUidIdentifier(s.name);if(ni.types.isFunctionDeclaration(n))lr.unshiftContainer("body",ni.types.expressionStatement(qe("register",ni.types.stringLiteral(s.registerId),n.id)))[0].skip();else if(r){const t=qe("register",ni.types.stringLiteral(s.registerId),n);br(e.parentPath)&&(t.extra=n.extra),e.replaceWith(t)[0].skip()}else{const r=ni.types.callExpression(o,[cr]);br(e.parentPath)&&(r.extra=n.extra),lr.pushContainer("body",ni.types.variableDeclaration("const",[ni.types.variableDeclarator(o,qe("register",ni.types.stringLiteral(s.registerId),ni.types.arrowFunctionExpression([cr],t?ni.types.blockStatement([ni.types.variableDeclaration("const",[ni.types.variableDeclarator($e(i,t),cr)]),ni.types.returnStatement(n)]):n)))]))[0].skip(),e.replaceWith(r)[0].skip()}}}}};function ai(e,t){switch(e.node.type){case"FunctionDeclaration":return t;case"FunctionExpression":case"ArrowFunctionExpression":return!0;default:return!1}}var li=r("../../node_modules/@marko/babel-utils/dist/index.js"),ci={analyze(e){const{node:t}=e,{source:r}=t,{value:n}=r,s=(0,li.resolveTagImport)(e,n);if(s){t.extra??={},t.extra.tagImport=s;const r=e.hub.file.metadata.marko.tags;r.includes(s)||r.push(s)}},translate:{exit(e){const{node:t}=e,{extra:r}=t,n=r?.tagImport;n&&(t.source.value=n)}}},pi=r("../../node_modules/@marko/babel-utils/dist/index.js"),di=r("../../browser-shims/compiler/index.js"),ui=Symbol("placeholder node binding"),fi=Symbol("placeholder has sibling text"),mi={script:"escapeScript",style:"escapeStyle"},hi={analyze(e){const{node:t}=e,{confident:r,computed:n}=$n(e);(!r||!t.escape&&n)&&((t.extra??={})[ui]=Sr("#text",0,H(e),void 0,t.value.extra),function(e){const t=e.node.extra;let r=e.getPrevSibling();for(;r.node;){const e=le(r,"endType");if(null!==e){if(4===e||1===e||2===e)return t[fi]=1;break}r=r.getPrevSibling()}if(!r.node&&di.types.isProgram(e.parentPath))return t[fi]=1;let n=e.getNextSibling();for(;n.node;){const e=le(n,"startType");if(null!==e){if(4===e||1===e||2===e)return t[fi]=2;break}n=n.getNextSibling()}if(!n.node&&di.types.isProgram(e.parentPath))return t[fi]=2;t[fi]=0}(e))},translate:{exit(e){const t=U(),r=yt(e),{node:n}=e,{value:s}=n,i=n.extra,{confident:o,computed:a}=i,l=i[ui],c=t||o&&(n.escape||!a),p=c?n.escape?mi[function({parentPath:e}){return e.isMarkoTag()&&(0,pi.isNativeTag)(e)&&e.node.name.value||""}(e)]||"escapeXML":"toString":n.escape?"data":"html",d=Vr(s.extra?.referencedBindings),u=i[fi];o&&c?r`${Je()[p](a)}`:(1===u?(t&&d&&r`<!>`,ut(e,37)):2===u?ut(e,37):(t||r` `,ut(e,32)),t?(r`${qe(p,s)}`,d&&Et(e,l)):Vt("render",Q(e),s.extra?.referencedBindings,di.types.expressionStatement("data"===p?qe("data",di.types.memberExpression(cr,zr(l),!0),s):qe("html",cr,s,zr(l))))),dt(e),e.remove()}}},gi=r("../../browser-shims/compiler/index.js"),yi=new WeakMap,bi={migrate(e){const{name:t}=e.node;if(!e.scope.hasBinding(t)&&"out"===t){if(!gi.types.isMemberExpression(e.parent)||!gi.types.isIdentifier(e.parent.property)||"global"!==e.parent.property.name)throw e.buildCodeFrameError("Only `out.global` is supported for compatibility.");e.parentPath.replaceWith(gi.types.identifier("$global"))}},translate(e){const{name:t}=e.node;if(!e.scope.hasBinding(t))switch(t){case"$global":U()?e.replaceWith(gi.types.memberExpression(gi.types.callExpression(Ve("getStreamData"),[]),gi.types.identifier("global"))):e.replaceWith(gi.types.memberExpression(cr,gi.types.identifier("$global")));break;case"$signal":if(U()){const t=Q(e);t.hasCleanup||(t.hasCleanup=!0,yt(yr(e))`${qe("markResumeCleanup",Y(t))}`),e.replaceWith(gi.types.callExpression(gi.types.arrowFunctionExpression([],gi.types.blockStatement([gi.types.throwStatement(gi.types.newExpression(gi.types.identifier("Error"),[gi.types.stringLiteral("Cannot use $signal in a server render.")]))])),[]))}else{const t=Q(e),r=yr(e);let n,s=yi.get(t);s?n=s.get(r):(s=new Map,yi.set(t,s)),n||(n=s.size,s.set(r,n),Vt("render",t,r.node.extra?.referencedBindings,gi.types.expressionStatement(gi.types.callExpression(Ve("resetAbortSignal"),[cr,gi.types.numericLiteral(n)])))),e.replaceWith(gi.types.callExpression(Ve("getAbortSignal"),[cr,gi.types.numericLiteral(n)]))}}}},xi={analyze(e){Dr(e,e.node.body)},translate:{exit(e){const{node:t}=e;if(U()){if(t.static)return;e.replaceWithMultiple(t.body)}else t.target&&"client"!==t.target?e.remove():t.static?e.replaceWithMultiple(t.body):(Vt("render",Q(e),t.extra?.referencedBindings,t.body),e.remove())}}},vi=r("../../node_modules/@marko/babel-utils/dist/index.js"),wi=r("../../browser-shims/compiler/index.js"),Ei=r("../../browser-shims/compiler/index.js");function ki(e,t){if(!e)return!1;const{node:r}=t,n=Ai(e)?e.default:e;return Ci(n)?n(t,Ei.types):n.enter&&n.enter(t,Ei.types),r!==t.node}function Si(e,t){if(!e)return!1;const{node:r}=t,n=Ai(e)?e.default:e;return!Ci(n)&&n.exit&&n.exit(t,Ei.types),r!==t.node}function Ai(e){return Boolean(e.default)}function Ci(e){return"function"==typeof e}var Ii=r("../../node_modules/@marko/babel-utils/dist/index.js"),ji=r("../../browser-shims/compiler/index.js"),Ti={analyze:{enter(e){(0,Ii.assertNoVar)(e),(0,Ii.assertNoArgs)(e),G(e.get("body"))}},translate:{exit(e){const t=(0,Ii.findParentTag)(e);if(!t)throw e.get("name").buildCodeFrameError("@tags must be nested within another tag.");const r=t.node.extra;if(0===r.tagNameType)throw e.get("name").buildCodeFrameError("@tags cannot be nested under native tags.");U()?vt(e):e.node.attributes.push(ji.types.markoAttribute("renderBody",ji.types.callExpression(ji.types.identifier(Q(e.get("body")).name),[cr])));const n=e.node.name.value.slice(1),s=r.nestedAttributeTags[n],i=vn(e,!0);if(s.dynamic)s.identifier||(s.identifier=t.scope.generateUidIdentifier(n),t.insertBefore(s.repeated?ji.types.variableDeclaration("const",[ji.types.variableDeclarator(s.identifier,ji.types.arrayExpression([]))]):ji.types.variableDeclaration("let",[ji.types.variableDeclarator(s.identifier)])),t.pushContainer("attributes",ji.types.markoAttribute(n,s.identifier))),e.replaceWith(ji.types.expressionStatement(s.repeated?ji.types.callExpression(ji.types.memberExpression(s.identifier,ji.types.identifier("push")),[i]):ji.types.assignmentExpression("=",s.identifier,i)));else if(s.repeated){const r=t.get("attributes").find((e=>e.node.name===n));r?r.get("value").pushContainer("elements",i):t.pushContainer("attributes",ji.types.markoAttribute(n,ji.types.arrayExpression([i]))),e.remove()}else t.pushContainer("attributes",ji.types.markoAttribute(n,i)),e.remove()}}},Mi=r("../../node_modules/@marko/babel-utils/dist/index.js"),Di=r("../../browser-shims/compiler/index.js"),Ni=Symbol("custom tag child scope"),Li={analyze:{enter(e){const t=H(e),r=e.get("body");if(G(r),Ar(e,4),Cr(r,3),(0,Mi.getTagTemplate)(e)){const r=e.node.extra??={};r[Ni]=Sr("#childScope",0,t,void 0,r)}const n=(0,Mi.loadFileForTag)(e),s=n?.ast.program.extra,i=s?.isInteractive||s?.hasInteractiveChild,o=s?.domExports?.params?.props?.[0];o?.props&&!e.node.attributes.find((e=>Di.types.isMarkoSpreadAttribute(e)))||Dr(e,e.node.attributes.map((e=>e.value))),i&&((lr.node.extra??{}).hasInteractiveChild=!0)}},translate:{enter(e){(0,Mi.assertAttributesOrSingleArg)(e),ut(e),U()&&xt(e)},exit(e){U()?function(e){const t=e.get("body"),{node:r}=e;let n;if(vt(e),rr(t),Di.types.isStringLiteral(r.name)){const{file:t}=e.hub,s=r.name.value,i=Pi(e);n=(0,Mi.importDefault)(t,i,s)}else n=r.name;const s=r.var,i=vn(e,!0),o=wn(i),a=Q(e),l=r.extra[Ni],c=e.scope.generateUidIdentifier(l?.name);if(e.insertBefore(Di.types.variableDeclaration("const",[Di.types.variableDeclarator(c,qe("peekNextScope"))])),Ut(a).set(zr(l),qe("writeExistingScope",c)),r.extra.tagNameNullable){let t,r=Ui(n,vn(e));if(o){t=e.scope.generateUidIdentifier("renderBody");const r=Q(e.get("body")),[n]=e.insertBefore(Di.types.variableDeclaration("const",[Di.types.variableDeclarator(t,qe("register",qe("createRenderer",Di.types.arrowFunctionExpression(o.params,o.body)),Di.types.stringLiteral(Zt(r,"renderer")),Y(r.parent)))]));n.skip(),i.properties[i.properties.length-1]=Di.types.objectProperty(Di.types.identifier("renderBody"),t)}s&&(ln(e,Di.types.unaryExpression("void",Di.types.numericLiteral(0)),"let"),r=Di.types.assignmentExpression("=",s,r)),e.replaceWith(Di.types.ifStatement(n,Di.types.expressionStatement(r),t&&Oi(t)))[0].skip()}else s?(ln(e,Ui(n,i,qe("register",Di.types.arrowFunctionExpression([],Di.types.blockStatement([])),Di.types.stringLiteral(Zt(a,r.var.extra?.binding)),Y(a)))),Ot(a),e.remove()):e.replaceWith(Oi(n,i))[0].skip()}(e):function(e){const t=Q(e),r=Q(e.get("body")),{node:n}=e,s=n.extra,i=s[Ni],o=yt(e),{file:a}=e.hub,l=Di.types.isIdentifier(n.name)?n.name.name:Di.types.isStringLiteral(n.name)?n.name.value:"tag",c=Pi(e),p=(0,Mi.loadFileForTag)(e).ast.program,d=(0,Mi.importNamed)(a,c,p.extra.domExports.setup,l),u=p.extra.domExports.params?.props?.[0];if(u)if(!u.props||e.node.attributes.some((e=>Di.types.isMarkoSpreadAttribute(e)))){let n=vn(e);r!==t&&(n??=Di.types.objectExpression([]),n.properties.push(Di.types.objectProperty(Di.types.identifier("renderBody"),Di.types.callExpression(Di.types.identifier(r.name),[cr]))));const o=(0,Mi.importNamed)(a,c,u.id,`${l}_input`);qt(t,s.referencedBindings,{identifier:o,hasDownstreamIntersections:()=>!0},n,ze(t,i),qe("inChild",zr(i),Di.types.identifier(o.name)))}else{for(const r of e.get("attributes")){const e=r.node,n=u.props[e.name];if(n){const r=(0,Mi.importNamed)(a,c,n.id,`${l}_${n.id}`),s=e.value.extra?.referencedBindings;qt(t,s,{identifier:r,hasDownstreamIntersections:()=>!0},e.value,ze(t,i),qe("inChild",zr(i),Di.types.identifier(r.name)))}}if(u.props.renderBody&&r!==t){const e=(0,Mi.importNamed)(a,c,u.props.renderBody.id,`${l}_renderBody`);qt(t,void 0,{identifier:e,hasDownstreamIntersections:()=>!0},Di.types.callExpression(Di.types.identifier(r.name),[cr]),ze(t,i),qe("inChild",zr(i),Di.types.identifier(e.name)))}}if(o`${(0,Mi.importNamed)(a,c,p.extra.domExports.template,`${l}_template`)}`,function(e,t){const r=it(Q(e));ot(Q(e)).push(`${lt[47]}`,t.name,lt[38]),rt(r,String.fromCharCode(47)),r.push(t,String.fromCharCode(38))}(e,(0,Mi.importNamed)(a,c,p.extra.domExports.walks,`${l}_walks`)),n.var){const e=Ft(n.var.extra.binding);e.register=!0,Vt("render",t,void 0,Di.types.expressionStatement(qe("setTagVar",cr,zr(i),e.identifier)))}Vt("render",t,void 0,Di.types.expressionStatement(Di.types.callExpression(d,[ze(t,i)]))),e.remove()}(e)}}};function Pi(e){const{node:t,hub:{file:r}}=e,n=Di.types.isStringLiteral(t.name);let s;if(n){const t=(0,Mi.getTagTemplate)(e);s=t&&(0,Mi.resolveRelativePath)(r,t)}else t.extra?.tagNameImported&&(s=t.extra.tagNameImported);if(!s){const r=n?t.name.value:t.name;if(n&&e.scope.getBinding(r)){const t=r;throw e.get("name").buildCodeFrameError(`Local variables must in a dynamic tag unless they are PascalCase. Use \`<\${${t}}/>\` or rename to \`${t.charAt(0).toUpperCase()+t.slice(1)}\`.`)}throw e.get("name").buildCodeFrameError(`Unable to find entry point for custom tag \`${r}\`.`)}const i=r.metadata.marko.tags;return i.includes(s)||i.push(s),s}function Oi(e,...t){return Di.types.expressionStatement(Ui(e,...t))}function Ui(e,...t){return Di.types.callExpression(e,t.filter(Boolean))}var Bi=r("../../node_modules/@marko/babel-utils/dist/index.js"),Ri=r("../../browser-shims/compiler/index.js"),Fi=r("../../browser-shims/compiler/index.js"),$i=Symbol("dynamic tag dom binding"),_i={analyze:{enter(e){const t=H(e),r=e.node.extra??={},n=e.get("body"),s=r[$i]=Sr("#text",0,t,void 0,r);G(n),Ar(e,4),Cr(n,3);const i=[];if(e.node.arguments)for(const t of e.node.arguments)i.push(t);for(const t of e.node.attributes)i.push(t.value);Dr(e,i),Rr(e,s)}},translate:{enter(e){ut(e,37),(0,Bi.assertAttributesOrArgs)(e),dt(e),U()&&xt(e)},exit(e){const{node:t}=e,r=t.extra,n=r[$i];let s=t.name;if(Ri.types.isStringLiteral(s)){const{file:t}=e.hub,r=Pi(e);s=(0,Bi.importDefault)(t,r,s.value)}if("class"===r.featureType){const{markoOpts:t}=e.hub.file,r=`marko/src/runtime/helpers/tags-compat/${U()?"html":"dom"}${t.optimize?"":"-debug"}.${"esm"===t.modules?"mjs":"js"}`;if((0,Bi.importDefault)(e.hub.file,r),U()){const t=(0,Bi.importNamed)(e.hub.file,r,"s");lr.pushContainer("body",Ri.types.expressionStatement(Ri.types.callExpression(t,[Ri.types.identifier(s.name),Ri.types.stringLiteral((0,Bi.loadFileForTag)(e).metadata.marko.id)])))}else lr.pushContainer("body",Ri.types.expressionStatement(qe("register",Ri.types.stringLiteral((0,Bi.loadFileForTag)(e).metadata.marko.id),Ri.types.identifier(s.name))))}if(U()){vt(e),rr(e.get("body"));const r=Q(e),i=yt(e),o=vn(e,!0),a=wn(o),l=lr.scope.generateUidIdentifier("dynamicScope"),c=[l,s,o];if(Ri.types.isObjectExpression(o)&&a){const t=Q(e.get("body"));o.properties.pop(),c.push(qe("register",qe("createRenderer",Ri.types.arrowFunctionExpression(a.params,function(e){const t=e.body;return 1===t.length&&Fi.types.isExpressionStatement(t[0])?t[0].expression:Fi.types.isBlockStatement(e)?e:Fi.types.blockStatement(t)}(a.body))),Ri.types.stringLiteral(Zt(t,"renderer")),t.closures.size&&Y(t.parent)))}t.var&&(3===c.length&&c.push(Ri.types.unaryExpression("void",Ri.types.numericLiteral(0))),c.push(qe("register",Ri.types.arrowFunctionExpression([],Ri.types.blockStatement([])),Ri.types.stringLiteral(Zt(r,t.var.extra?.binding)),Y(r))));const p=Ri.types.isArrayExpression(o)?qe("dynamicTagArgs",...c):qe("dynamicTagInput",...c);e.insertBefore(Ri.types.variableDeclaration("const",[Ri.types.variableDeclarator(l,qe("peekNextScope"))]))[0].skip(),t.var?ln(e,p):e.insertBefore(Ri.types.expressionStatement(p)),e.remove(),i`${qe("markResumeControlEnd",Y(r),zr(n))}`,Ut(r).set(Ri.types.stringLiteral(zr(n).value+"!"),qe("writeExistingScope",l)),Ut(r).set(Ri.types.stringLiteral(zr(n).value+"("),qe("normalizeDynamicRenderer",Ri.types.isIdentifier(s)?Ri.types.identifier(s.name):s))}else{const i=Q(e),o=Q(e.get("body")),a=i!==o&&Ri.types.identifier(o.name),l=Rt(i,n,"dynamicTagName");if(l.build=()=>qe("conditional",zr(n),$t(l,[cr]),_t(l)),l.hasDownstreamIntersections=()=>!0,qt(i,t.name.extra?.referencedBindings,l,a?Ri.types.logicalExpression("||",s,Ri.types.callExpression(a,[cr])):s),e.node.var){const t=Ft(e.node.var.extra.binding);t.register=!0,Vt("render",i,n,Ri.types.expressionStatement(qe("setTagVar",cr,Ri.types.stringLiteral(zr(r[$i]).value+"!"),t.identifier)))}const c=vn(e,!0);if(!Ri.types.isObjectExpression(c)||c.properties.length||a){const r=Ri.types.arrowFunctionExpression([],c),s=lr.scope.generateUidIdentifier(e.get("name").toString()+"_input");let o=!1;qt(i,t.extra?.referencedBindings,{get identifier(){return o||(lr.pushContainer("body",Ri.types.variableDeclaration("const",[Ri.types.variableDeclarator(s,qe("dynamicTagAttrs",zr(n),a,!!Ri.types.isArrayExpression(c)&&Ri.types.booleanLiteral(!0)))])),o=!0),s},hasDownstreamIntersections:()=>!0},r)}e.remove()}}}},zi={transform:{enter(e){const t=e.get("attributes");for(let r=0;r<t.length;r++){const n=t[r];if(wi.types.isMarkoAttribute(n.node)&&n.node.bound){n.node.bound=!1;const t=Wi(e,n);if(null===t)throw n.buildCodeFrameError("Attributes may only be bound to identifiers or member expressions");e.node.attributes.splice(++r,0,wi.types.markoAttribute(n.node.name+"Change",t)),e.scope.crawl()}}}},analyze:{enter(e){const t=(0,vi.getTagDef)(e),r=X(e),n=t?.analyzer?.hook;if(n)ki(n,e);else if(0!==r)switch(Pn(e),r){case 1:Li.analyze.enter(e);break;case 3:Ti.analyze.enter(e);break;case 2:_i.analyze.enter(e)}else Vn.analyze.enter(e)},exit(e){const t=(0,vi.getTagDef)(e)?.analyzer?.hook;t&&Si(t,e)}},translate:{enter(e){const t=(0,vi.getTagDef)(e),r=e.node.extra;if(t?.translator)return t.translator.path&&e.hub.file.metadata.marko.watchFiles.push(t.translator.path),void ki(t.translator.hook,e);for(const t of e.get("attributes"))if(t.isMarkoAttribute()){if(t.node.arguments)throw t.buildCodeFrameError(`Unsupported arguments on the \`${t.node.name}\` attribute.`);if(t.node.modifier){if(!(0,vi.isNativeTag)(t.parentPath))throw t.buildCodeFrameError(`Unsupported modifier \`${t.node.modifier}\`.`);t.node.name+=`:${t.node.modifier}`}}if(r.tagNameDynamic&&r.tagNameNullable&&!e.get("name").isIdentifier()&&U()){const t=e.scope.generateUidIdentifier("tagName"),[r]=e.insertBefore(wi.types.variableDeclaration("const",[wi.types.variableDeclarator(t,e.node.name)]));r.skip(),e.set("name",t)}switch(r.tagNameType){case 0:Vn.translate.enter(e);break;case 1:Li.translate.enter(e);break;case 2:_i.translate.enter(e)}},exit(e){const t=(0,vi.getTagDef)(e)?.translator;if(t)Si(t.hook,e);else switch(e.node.extra.tagNameType){case 0:Vn.translate.exit(e);break;case 1:Li.translate.exit(e);break;case 2:_i.translate.exit(e);break;case 3:Ti.translate.exit(e)}}}};function Wi(e,t){if(wi.types.isIdentifier(t.node.value)){const r=e.scope.generateUidIdentifier("new_"+t.node.value.name);return wi.types.functionExpression(null,[r],wi.types.blockStatement([wi.types.expressionStatement(wi.types.assignmentExpression("=",t.node.value,r))]))}if(wi.types.isMemberExpression(t.node.value)){const e=t.node.value.property;return wi.types.isPrivateName(e)?null:wi.types.isIdentifier(e)?wi.types.memberExpression(wi.types.cloneNode(t.node.value.object),wi.types.identifier(e.name+"Change")):wi.types.memberExpression(wi.types.cloneNode(t.node.value.object),wi.types.binaryExpression("+",wi.types.cloneNode(e),wi.types.stringLiteral("Change")),!0)}return null}r("../../browser-shims/compiler/index.js");var Vi={translate:{exit(e){yt(e)`${e.node.value}`,dt(e),e.remove()}}},qi=(r("../../browser-shims/compiler/index.js"),{Program:mr,Function:oi,AssignmentExpression:Gs,UpdateExpression:{translate:{exit(e){if(B()){const t=e.node.argument.extra?.source;if(t){const t=Q(e);(lr.node.extra.assignments??=[]).push([t,e])}}}}},ReferencedIdentifier:bi,ImportDeclaration:ci,MarkoDocumentType:ti,MarkoDeclaration:ei,MarkoCDATA:Qs,MarkoText:Vi,MarkoTag:zi,MarkoPlaceholder:hi,MarkoScriptlet:xi,MarkoComment:Ys}),Ji=e=>Object.entries(qi).reduce(((t,[r,n])=>(e in n&&(t[r]=n[e]),t)),{}),Zi=Ji("transform"),Xi=Ji("analyze"),Ki=Ji("translate"),Gi=[["../../node_modules/@marko/translator-tags/dist",{...Ks,migrate:Ji("migrate")}]];function Hi(e,t){return[`@marko/runtime-tags${t?"":"/debug"}/${"html"===e?"html":"dom"}`]}}}]);
//# sourceMappingURL=215.e0e8d002.js.map