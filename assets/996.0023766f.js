"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[996],{"./try-online-new/components/preview.marko":(e,t,n)=>{n.r(t),n.d(t,{default:()=>M});var o=n("../../node_modules/marko/dist/runtime/vdom/index.js"),r=n("../../node_modules/path-browserify/index.js"),s=n.n(r),l=n("../../node_modules/prettier/standalone.js"),i=n("../../node_modules/prettier/parser-html.js"),a=n.n(i),d=n("../../node_modules/prettier/parser-babel.js"),m=n.n(d),c=n("../utils/highlight.js"),u=n.n(c),p=n("../utils/compiler/index.js"),h=n("../../node_modules/memfs/lib/index.js"),v=n("../../node_modules/@marko/tags-api-preview/dist/transform/native-tag-var/index-browser.js"),f=n.n(v),w=n("../../node_modules/@marko/tags-api-preview/dist/transform/cached-function/index-browser.js"),b=n("../../node_modules/marko/dist/runtime/vdom/helpers/v-element.js"),g=n.n(b),k=n("../../node_modules/@marko/tags-api-preview/dist/components/_instance/index.marko"),j=n("../../node_modules/marko/dist/runtime/helpers/render-tag.js"),_=n.n(j),y=n("../../node_modules/@marko/tags-api-preview/dist/components/effect/index.js"),S=n.n(y),x=n("../../node_modules/@marko/tags-api-preview/dist/translate/track-rendering/index.js"),C=n("../../node_modules/marko/dist/runtime/components/renderer.js"),T=n.n(C),E=n("../../node_modules/marko/dist/runtime/components/registry/index-browser.js"),F=n("../../node_modules/marko/dist/runtime/components/defineComponent.js"),N=n.n(F);const I="6Z/ZKJFt",O=(0,o.t)(I),M=O,Z=g()("small",null,"6",null,1,0).t("Open the dev tools to view the full error.");(0,E.r)(I,(()=>O));const A={onCreate(){this.state={}}};O._=T()((function(e,t,n,o,r){(0,x.begin)();try{var i,d=o,c=r,v=e=>i=e;const{type:b,files:g,selectedFile:j,onSelectError:y,onSyntaxError:C}=e,T=d.elId("@0"),E=s().join("/",T,j.path),F=s().join("/",T,g[0].path),N="0"in c?c[0]:c[0]=null,I="1"in c?c[1]:c[1]=null,O=/(.+?)(?:\((\d+),(\d+)\)|:(\d+)): (.*(?=\s+\d+ | ))/;N?(t.be("div",{class:"preview-error"},"0",o,null,1),t.be("h1",{class:"error-name"},"1",o,null,1),t.t(N.name,o),N.file&&(t.t(" :  ",o),t.be("a",null,"2",o,null,0,{onclick:n.d("click",(function(){y(N)}),!1)}),t.t(N.file.slice(1),o),t.t("(",o),t.t(N.line,o),t.t(",",o),t.t(N.column,o),t.t(")",o),t.ee()),t.ee(),t.be("div",null,"3",o,null,0),t.t(N.message,o),t.ee(),E!==N.file&&(N.codeFrame?(t.be("pre",null,"4",o,null,0),t.be("code",null,"5",o,null,0),t.t(N.codeFrame,o),t.ee(),t.ee()):t.n(Z,o)),t.ee()):"preview"===b?_()(k.default,{renderBody:(e,t,n,o)=>{var r=n;const s=f()(n,"0");e.e("div",{class:"preview-output"},"@0",r,0,1),v(s)}},t,n,"7"):(t.be("div",{class:"preview-compiled"},"8",o,null,1),t.h(I,o),t.ee()),S()(o,(0,w.cache)((0,w.cached)(d,[N,b,g,T,F,E,C])||function(){const e=!N&&"preview"===b&&i(),t=setTimeout((async()=>{for(const e of g){const t=s().join("/",T,e.path);h.vol.mkdirSync(s().dirname(t),{recursive:!0}),h.vol.writeFileSync(t,e.content)}try{if("preview"===b||"html"===b){const t=await(0,p.g)({entry:F,markoOptions:{output:"vdom"}}),n=(0,eval)(t.js),o=await n.render({});if("preview"===b&&e){let n=e.shadowRoot;if(n)for(;n.firstChild;)n.removeChild(n.firstChild);else n=e.attachShadow({mode:"open"});const r=document.createElement("style");r.innerHTML=t.css,n.createElementNS=document.createElementNS.bind(document),n.createTextNode=document.createTextNode.bind(document),n.appendChild(r),o.appendTo(n)}else d.setState("1",u()("html",(0,l.format)(String(o),{parser:"html",plugins:[a()]})))}else{const e="compiled-html"===b?"html":"vdom",t=await(0,p.M)({entry:E,markoOptions:{output:e}});d.setState("1",u()("javascript",(0,l.format)(t.replaceAll(`${T}/`,""),{parser:"babel",plugins:[m()]})))}d.setState("0",null)}catch(e){d.setState("1",null);const t="SyntaxError"===e.name&&O.exec(e.message);if(t){let[n,o,r,l,i,a]=t;i&&(r=i,l=0),o=s().resolve(o),r=parseInt(r,10),l=parseInt(l,10)+1;const m=e.message.slice(n.length);d.setState("0",{name:e.name,file:o,message:a,line:r,column:l,codeFrame:m}),o===E&&C&&C(N)}else d.setState("0",e),console.error(e)}}),150);return()=>{clearTimeout(t);try{h.vol.rmdirSync(T,{recursive:!0})}catch(e){}}}))}finally{(0,x.end)()}}),{t:I},A),O.Component=N()(A,O._)}}]);
//# sourceMappingURL=996.0023766f.js.map