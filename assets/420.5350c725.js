"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[420],{"../../node_modules/@marko/runtime-tags/dist/translator/index.js":(e,t,r)=>{var s,n=Object.create,o=Object.defineProperty,a=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,c=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,p=(e,t,r,s)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let n of i(t))l.call(e,n)||n===r||o(e,n,{get:()=>t[n],enumerable:!(s=a(t,n))||s.enumerable});return e},u=(e,t,r)=>(r=null!=e?n(c(e)):{},p(!t&&e&&e.__esModule?r:o(r,"default",{value:e,enumerable:!0}),e)),d={};((e,t)=>{for(var r in t)o(e,r,{get:t[r],enumerable:!0})})(d,{analyze:()=>Wc,getRuntimeEntryFiles:()=>Hc,internalEntryBuilder:()=>Le,preferAPI:()=>_c,tagDiscoveryDirs:()=>Uc,taglibs:()=>Gc,transform:()=>Vc,translate:()=>qc}),e.exports=(s=d,p(o({},"__esModule",{value:!0}),s));var f={name:r("../../node_modules/@marko/runtime-tags/package.json").name,taglibId:"marko-core"},m=r("../../browser-shims/compiler/index.js"),y=r("../../browser-shims/compiler/babel-utils.js");function g(e){for(const t of e.get("attributes"))if(t.isMarkoSpreadAttribute())throw t.buildCodeFrameError(`The \`${e.get("name").node.value}\` tag does not support \`...spread\` attributes.`)}function b(e){if(e.node.body.body.length)throw e.get("name").buildCodeFrameError(`The \`${e.get("name").node.value}\` tag does not support body content.`)}var h,v,x={migrate:[e=>{(0,y.assertNoArgs)(e),(0,y.assertNoParams)(e),(0,y.assertNoAttributes)(e),b(e),(0,y.assertNoAttributeTags)(e),(0,y.diagnosticDeprecate)(e,{label:"The `attrs` tag is deprecated, prefer destructuring `input` via the `const` tag.",fix(){const t=e.node.var;if(!t||"Identifier"===t.type&&"input"===t.name)e.remove();else{const r=m.types.markoTag(m.types.stringLiteral("const"),[m.types.markoAttribute("value",m.types.identifier("input"))],m.types.markoTagBody([]));r.var=t,e.replaceWith(r)}}})}],attributes:{},autocomplete:[{displayText:"attrs/{ ... }",description:"Use to receive the attributes passed into this template.",snippet:"attrs/{ $1 }$2"}]},w=r("../../browser-shims/compiler/index.js"),A=r("../../browser-shims/compiler/babel-utils.js"),S=((h=S||{}).ClosureScopes="ClosureScopes:",h.ClosureSignalIndex="ClosureSignalIndex:",h.ConditionalRenderer="ConditionalRenderer:",h.ConditionalScope="ConditionalScope:",h.ControlledHandler="ControlledHandler:",h.ControlledType="ControlledType:",h.ControlledValue="ControlledValue:",h.DynamicPlaceholderLastChild="DynamicPlaceholderLastChild:",h.EventAttributes="EventAttributes:",h.Getter="Getter:",h.LifecycleAbortController="LifecycleAbortController:",h.LoopScopeArray="LoopScopeArray:",h.LoopScopeMap="LoopScopeMap:",h.Promise="Promise:",h.TagVariableChange="TagVariableChange:",h),k=((v=k||{}).Owner="_",v.BranchAccessor="#BranchAccessor",v.CatchContent="#CatchContent",v.PlaceholderBranch="#PlaceholderBranch",v.PlaceholderContent="#PlaceholderContent",v.TagVariable="#TagVariable",v.TagVariableChange="#TagVariableChange",v.ClosestBranchId="#ClosestBranchId",v),E=r("../../browser-shims/compiler/babel-utils.js");function T(e){let{extra:t}=e;if(t||(t=e.extra={}),void 0===t.confident){const r=(0,E.computeNode)(e);r?(t.computed=r.value,t.confident=!0,t.nullable=null==r.value):(t.computed=void 0,t.confident=!1,t.nullable=M(e))}return t}function M(e){switch(e.type){case"ArrayExpression":case"ArrowFunctionExpression":case"BigIntLiteral":case"BinaryExpression":case"BooleanLiteral":case"ClassExpression":case"FunctionExpression":case"NewExpression":case"NumericLiteral":case"ObjectExpression":case"RegExpLiteral":case"StringLiteral":case"TemplateLiteral":case"UpdateExpression":return!1;case"AssignmentExpression":switch(e.operator){case"=":return M(e.right);case"*=":case"/=":case"%=":case"+=":case"-=":case"<<=":case">>=":case">>>=":case"&=":case"^=":case"|=":case"**=":return!1;case"||=":case"??=":return M(e.right)||M(e.left);case"&&=":return M(e.left)&&M(e.right);default:return!0}case"AwaitExpression":return M(e.argument);case"ConditionalExpression":return M(e.consequent)&&M(e.alternate);case"LogicalExpression":switch(e.operator){case"||":case"??":return M(e.right)||M(e.left);case"&&":return M(e.left)&&M(e.right);default:return!0}case"ParenthesizedExpression":return M(e.expression);case"SequenceExpression":return M(e.expressions[e.expressions.length-1]);case"UnaryExpression":return"void"===e.operator;default:return!0}}var C=r("../../browser-shims/compiler/index.js"),j=r("../../browser-shims/compiler/babel-utils.js"),I=Symbol(),{hasOwnProperty:P}={},L=function*(){}().constructor,O=async function*(){}().constructor;function B(e){const t=e[0];return'"'===t||t>="0"&&t<="9"?"["+e+"]":"."+e}function $(e){const{next:t}=e;e.next=function(e){return this[I]=1,t.call(this,e)}}function N(e,t){switch(e.type){case"ObjectPattern":for(const r of e.properties)switch(r.type){case"ObjectProperty":"AssignmentPattern"===r.value.type?N(r.value.left,t):N(r.value,t);break;case"RestElement":N(r.argument,t)}break;case"ArrayPattern":for(const r of e.elements)if(null!=r)switch(r.type){case"RestElement":N(r.argument,t);break;case"AssignmentPattern":N(r.left,t);break;default:N(r,t)}break;case"Identifier":t(e)}}$(L.prototype),$(O.prototype),(()=>{const e=new Map;for(const t of Object.getOwnPropertyNames(Symbol)){const r=Symbol[t];"symbol"==typeof r&&e.set(r,"Symbol."+t)}})(),new Map([[AggregateError,"AggregateError"],[Array,"Array"],[Array.from,"Array.from"],[Array.isArray,"Array.isArray"],[Array.of,"Array.of"],[ArrayBuffer,"ArrayBuffer"],[ArrayBuffer.isView,"ArrayBuffer.isView"],[Atomics.add,"Atomics.add"],[Atomics.and,"Atomics.and"],[Atomics.compareExchange,"Atomics.compareExchange"],[Atomics.exchange,"Atomics.exchange"],[Atomics.isLockFree,"Atomics.isLockFree"],[Atomics.load,"Atomics.load"],[Atomics.notify,"Atomics.notify"],[Atomics.or,"Atomics.or"],[Atomics.store,"Atomics.store"],[Atomics.sub,"Atomics.sub"],[Atomics.wait,"Atomics.wait"],[BigInt,"BigInt"],[BigInt.asIntN,"BigInt.asIntN"],[BigInt.asUintN,"BigInt.asUintN"],[BigInt64Array,"BigInt64Array"],[BigInt64Array.from,"BigInt64Array.from"],[BigInt64Array.of,"BigInt64Array.of"],[BigUint64Array,"BigUint64Array"],[BigUint64Array.from,"BigUint64Array.from"],[BigUint64Array.of,"BigUint64Array.of"],[Boolean,"Boolean"],[console.assert,"console.assert"],[console.clear,"console.clear"],[console.count,"console.count"],[console.countReset,"console.countReset"],[console.debug,"console.debug"],[console.dir,"console.dir"],[console.dirxml,"console.dirxml"],[console.error,"console.error"],[console.group,"console.group"],[console.groupCollapsed,"console.groupCollapsed"],[console.groupEnd,"console.groupEnd"],[console.info,"console.info"],[console.log,"console.log"],[console.table,"console.table"],[console.time,"console.time"],[console.timeEnd,"console.timeEnd"],[console.timeLog,"console.timeLog"],[console.timeStamp,"console.timeStamp"],[console.trace,"console.trace"],[console.warn,"console.warn"],[DataView,"DataView"],[Date,"Date"],[Date.now,"Date.now"],[Date.parse,"Date.parse"],[Date.UTC,"Date.UTC"],[decodeURI,"decodeURI"],[decodeURIComponent,"decodeURIComponent"],[encodeURI,"encodeURI"],[encodeURIComponent,"encodeURIComponent"],[Error,"Error"],[EvalError,"EvalError"],[Float32Array,"Float32Array"],[Float32Array.from,"Float32Array.from"],[Float32Array.of,"Float32Array.of"],[Float64Array,"Float64Array"],[Float64Array.from,"Float64Array.from"],[Float64Array.of,"Float64Array.of"],[Function,"Function"],[globalThis.atob,"atob"],[globalThis.btoa,"btoa"],[globalThis.clearImmediate,"clearImmediate"],[globalThis.clearInterval,"clearInterval"],[globalThis.clearTimeout,"clearTimeout"],[globalThis.crypto?.getRandomValues,"crypto.getRandomValues"],[globalThis.crypto?.randomUUID,"crypto.randomUUID"],[globalThis.fetch,"fetch"],[globalThis.performance?.now,"performance.now"],[globalThis.queueMicrotask,"queueMicrotask"],[globalThis.setImmediate,"setImmediate"],[globalThis.setInterval,"setInterval"],[globalThis.setTimeout,"setTimeout"],[globalThis.structuredClone,"structuredClone"],[globalThis.URL,"URL"],[globalThis.URLSearchParams,"URLSearchParams"],[globalThis.WritableStream,"WritableStream"],[Int16Array,"Int16Array"],[Int16Array.from,"Int16Array.from"],[Int16Array.of,"Int16Array.of"],[Int32Array,"Int32Array"],[Int32Array.from,"Int32Array.from"],[Int32Array.of,"Int32Array.of"],[Int8Array,"Int8Array"],[Int8Array.from,"Int8Array.from"],[Int8Array.of,"Int8Array.of"],[Intl.Collator,"Intl.Collator"],[Intl.DateTimeFormat,"Intl.DateTimeFormat"],[Intl.DisplayNames,"Intl.DisplayNames"],[Intl.getCanonicalLocales,"Intl.getCanonicalLocales"],[Intl.ListFormat,"Intl.ListFormat"],[Intl.Locale,"Intl.Locale"],[Intl.NumberFormat,"Intl.NumberFormat"],[Intl.PluralRules,"Intl.PluralRules"],[Intl.RelativeTimeFormat,"Intl.RelativeTimeFormat"],[Intl.Segmenter,"Intl.Segmenter"],[Intl.supportedValuesOf,"Intl.supportedValuesOf"],[isFinite,"isFinite"],[isNaN,"isNaN"],[JSON.parse,"JSON.parse"],[JSON.stringify,"JSON.stringify"],[Map,"Map"],[Map.groupBy,"Map.groupBy"],[Math.abs,"Math.abs"],[Math.acos,"Math.acos"],[Math.acosh,"Math.acosh"],[Math.asin,"Math.asin"],[Math.asinh,"Math.asinh"],[Math.atan,"Math.atan"],[Math.atan2,"Math.atan2"],[Math.atanh,"Math.atanh"],[Math.cbrt,"Math.cbrt"],[Math.ceil,"Math.ceil"],[Math.clz32,"Math.clz32"],[Math.cos,"Math.cos"],[Math.cosh,"Math.cosh"],[Math.exp,"Math.exp"],[Math.expm1,"Math.expm1"],[Math.floor,"Math.floor"],[Math.fround,"Math.fround"],[Math.hypot,"Math.hypot"],[Math.imul,"Math.imul"],[Math.log,"Math.log"],[Math.log10,"Math.log10"],[Math.log1p,"Math.log1p"],[Math.log2,"Math.log2"],[Math.max,"Math.max"],[Math.min,"Math.min"],[Math.pow,"Math.pow"],[Math.random,"Math.random"],[Math.round,"Math.round"],[Math.sign,"Math.sign"],[Math.sin,"Math.sin"],[Math.sinh,"Math.sinh"],[Math.sqrt,"Math.sqrt"],[Math.tan,"Math.tan"],[Math.tanh,"Math.tanh"],[Math.trunc,"Math.trunc"],[Number,"Number"],[Number.isFinite,"Number.isFinite"],[Number.isInteger,"Number.isInteger"],[Number.isNaN,"Number.isNaN"],[Number.isSafeInteger,"Number.isSafeInteger"],[Number.parseFloat,"Number.parseFloat"],[Number.parseInt,"Number.parseInt"],[Object,"Object"],[Object.assign,"Object.assign"],[Object.create,"Object.create"],[Object.defineProperties,"Object.defineProperties"],[Object.defineProperty,"Object.defineProperty"],[Object.entries,"Object.entries"],[Object.freeze,"Object.freeze"],[Object.fromEntries,"Object.fromEntries"],[Object.getOwnPropertyDescriptor,"Object.getOwnPropertyDescriptor"],[Object.getOwnPropertyDescriptors,"Object.getOwnPropertyDescriptors"],[Object.getOwnPropertyNames,"Object.getOwnPropertyNames"],[Object.getOwnPropertySymbols,"Object.getOwnPropertySymbols"],[Object.getPrototypeOf,"Object.getPrototypeOf"],[Object.is,"Object.is"],[Object.isExtensible,"Object.isExtensible"],[Object.isFrozen,"Object.isFrozen"],[Object.isSealed,"Object.isSealed"],[Object.keys,"Object.keys"],[Object.preventExtensions,"Object.preventExtensions"],[Object.seal,"Object.seal"],[Object.setPrototypeOf,"Object.setPrototypeOf"],[Object.values,"Object.values"],[parseFloat,"parseFloat"],[parseInt,"parseInt"],[Promise,"Promise"],[Proxy,"Proxy"],[RangeError,"RangeError"],[ReferenceError,"ReferenceError"],[Reflect.apply,"Reflect.apply"],[Reflect.construct,"Reflect.construct"],[Reflect.defineProperty,"Reflect.defineProperty"],[Reflect.deleteProperty,"Reflect.deleteProperty"],[Reflect.get,"Reflect.get"],[Reflect.getOwnPropertyDescriptor,"Reflect.getOwnPropertyDescriptor"],[Reflect.getPrototypeOf,"Reflect.getPrototypeOf"],[Reflect.has,"Reflect.has"],[Reflect.isExtensible,"Reflect.isExtensible"],[Reflect.ownKeys,"Reflect.ownKeys"],[Reflect.preventExtensions,"Reflect.preventExtensions"],[Reflect.set,"Reflect.set"],[Reflect.setPrototypeOf,"Reflect.setPrototypeOf"],[RegExp,"RegExp"],[Set,"Set"],[String,"String"],[String.fromCharCode,"String.fromCharCode"],[String.fromCodePoint,"String.fromCodePoint"],[String.raw,"String.raw"],[Symbol,"Symbol"],[Symbol.for,"Symbol.for"],[SyntaxError,"SyntaxError"],[TypeError,"TypeError"],[Uint16Array,"Uint16Array"],[Uint16Array.from,"Uint16Array.from"],[Uint16Array.of,"Uint16Array.of"],[Uint32Array,"Uint32Array"],[Uint32Array.from,"Uint32Array.from"],[Uint32Array.of,"Uint32Array.of"],[Uint8Array,"Uint8Array"],[Uint8Array.from,"Uint8Array.from"],[Uint8Array.of,"Uint8Array.of"],[Uint8ClampedArray,"Uint8ClampedArray"],[Uint8ClampedArray.from,"Uint8ClampedArray.from"],[Uint8ClampedArray.of,"Uint8ClampedArray.of"],[URIError,"URIError"],[WeakMap,"WeakMap"],[WeakSet,"WeakSet"]]),new Map([[Atomics,"Atomics"],[console,"console"],[globalThis,"globalThis"],[globalThis.crypto,"crypto"],[Intl,"Intl"],[JSON,"JSON"],[Math,"Math"],[Reflect,"Reflect"]]);var F=r("../../browser-shims/compiler/index.js"),R=r("../../browser-shims/compiler/babel-utils.js"),D=r("../../browser-shims/compiler/babel-utils.js");function z(){return"translate"===(0,D.getFile)().___compileStage}var U=r("../../browser-shims/compiler/index.js"),_=Symbol("skip");function V(e,t,r){const s=e[t];if(s)if(Array.isArray(s))for(let e=s.length;e--;)V(s,e,r);else{const n=U.types.VISITOR_KEYS[s.type];for(let e=n.length;e--;)V(s,n[e],r);const o=r(s,e,t);o&&(e[t]=o)}}function W(e,t){if(e)if(Array.isArray(e)){for(const r of e)if(W(r,t))return!0}else{switch(t(e)){case!0:return!0;case _:return!1}for(const r of U.types.VISITOR_KEYS[e.type])if(W(e[r],t))return!0}return!1}function q(e,t,r,s){if(t)if(Array.isArray(t))for(const n of t)q(e,n,r,s);else if(e(t,r,s)!==_)for(const s of U.types.VISITOR_KEYS[t.type])q(e,t[s],t,r)}var G=new WeakMap;function H(e=""){const t=(0,R.getFile)();let r=G.get(t);if(!r){const{cache:e}=t.markoOpts,{filename:s}=t.opts,n=`uid-counts:${s}`;r=e.get(n),r?z()&&(r=new Map(r)):(r=function(e){const t=new Map,r=e.path,s=e=>{const r=/^$(.*?)([1-9]\d*)?$/.exec(e);if(r){const e=r[1],s=r[2]?+r[2]+1:1;t.set(e,Math.max(t.get(e)||0,s))}};for(const e in r.scope.globals)s(e);return q(((e,t,r)=>{"Identifier"===e.type&&F.types.isBinding(e,t,r)&&s(e.name)}),r.node),t}(t),z()||e.set(n,r)),G.set(t,r)}e=e.replace(/^[^a-z$_]|[^a-z$_0-9]/gi,"")||"temp",e=/^\$?(.*?)\d*$/.exec(e)?.[1]||e;const s=(r.get(e)||0)+1,n=`$${s>1?e+s:e}`;return r.set(e,s),n}function J(e){return F.types.identifier(H(e))}var Z=new WeakMap;function K(e){const t=(0,R.getFile)();let r=Z.get(t);if(!r){const{cache:e}=t.markoOpts,{filename:s}=t.opts,n=`uid-shared:${s}`;r=e.get(n),r?z()&&(r=new Map(r)):(r=new Map,z()||e.set(n,r)),Z.set(t,r)}let s=r.get(e);return s||(s=H(e),r.set(e,s)),s}function X(e){return!!Z.get((0,R.getFile)())?.has(e)}var Y=(e=>(e.ClosureScopes="a",e.ClosureSignalIndex="b",e.ConditionalRenderer="c",e.ConditionalScope="d",e.ControlledHandler="e",e.ControlledType="f",e.ControlledValue="g",e.DynamicPlaceholderLastChild="h",e.EventAttributes="i",e.Getter="j",e.LifecycleAbortController="k",e.LoopScopeArray="l",e.LoopScopeMap="m",e.Promise="n",e.TagVariableChange="o",e))(Y||{}),Q=(e=>(e.Owner="_",e.BranchAccessor="a",e.CatchContent="b",e.PlaceholderBranch="c",e.PlaceholderContent="d",e.TagVariable="e",e.TagVariableChange="f",e.ClosestBranchId="g",e))(Q||{}),ee=r("../../browser-shims/compiler/babel-utils.js");function te(){return"html"===se().output}function re(){return!te()}function se(){return(0,ee.getFile)().markoOpts}function ne(){return se().optimize}function oe(){return ne()?Y:S}function ae(){return ne()?Q:k}function ie(e){let t=e;do{t=t.parentPath}while(t&&!pe(t));return t}function ce(e){let t=e;for(;!pe(t.parentPath);)t=t.parentPath;return t}function le(e){let t,r=e;if(!r.isProgram()){for(;!pe(r);){if(ue(r))t=r;else switch(r.type){case"CallExpression":case"NewExpression":t=void 0}r=r.parentPath}return t}}function pe(e){switch(e.type){case"MarkoTag":case"MarkoTagBody":case"MarkoAttribute":case"MarkoSpreadAttribute":case"MarkoPlaceholder":case"MarkoScriptlet":return!0;default:return!1}}function ue(e){switch(e.type){case"FunctionDeclaration":return!e.node.declare;case"FunctionExpression":case"ArrowFunctionExpression":case"ObjectMethod":return!0;default:return!1}}function de(e){let t=e;for(;t;){const{parent:e,node:r}=t;switch(e.type){case"CallExpression":return e.callee===r;case"TSNonNullExpression":t=t.parentPath;break;default:return!1}}return!1}r("../../browser-shims/compiler/index.js");var fe=class{constructor(e){this.compare=e}add(e,t){return e?Array.isArray(e)?Ae(this.compare,e,t):Se(this.compare,e,t):t}union(e,t){return e?Array.isArray(e)?t?Array.isArray(t)?function(e,t,r){const s=t.length,n=r.length;let o=0,a=0;const i=[];for(;o<s&&a<n;){const s=t[o],n=r[a],c=e(s,n);0===c?(o++,a++,i.push(s)):c<0?(o++,i.push(s)):(a++,i.push(n))}if(s===n&&o===s)return t;for(;o<s;)i.push(t[o++]);for(;a<n;)i.push(r[a++]);return i}(this.compare,e,t):Ae(this.compare,e,t):e:t?Array.isArray(t)?Ae(this.compare,t,e):Se(this.compare,t,e):e:t}find(e,t){if(e){if(Array.isArray(e))return xe(this.compare,e,t);if(0===this.compare(e,t))return e}}findIndex(e,t){if(e){if(Array.isArray(e))return we(this.compare,e,t);if(0===this.compare(e,t))return 0}return-1}isSuperset(e,t){if(!t)return!0;if(!Array.isArray(t))return-1!==this.findIndex(e,t);if(!Array.isArray(e))return!1;const r=t.length,s=e.length;if(r>s)return!1;for(let n=r;n--;){const r=this.findIndex(e,t[n]);if(-1===r||s-r<=n)return!1}return!0}};function me(e,t){return e?Array.isArray(e)?(e.push(t),e):[e,t]:t}function ye(e,t){return e?t?Array.isArray(e)?e.concat(t):Array.isArray(t)?[e,...t]:[e,t]:e:t}function ge(e,t){if(e){if(Array.isArray(e)){const r=e.length;let s,n=0;for(;n<r;){let o=e[n++];if(t(o)){for(s=o;n<r;)if(o=e[n++],t(o)){for(s=[s,o];n<r;)o=e[n++],t(o)&&s.push(o);return s}return s}}return s}if(t(e))return e}}function be(e,t){if(e)if(Array.isArray(e)){let r=0;for(const s of e)t(s,r++)}else t(e,0)}function he(e,t){if(e){if(Array.isArray(e))return e.find(t);if(t(e,0))return e}}function ve(e,t,r){if(e){if(Array.isArray(e)){let s="",n="";for(let o=0;o<e.length;o++)s+=n+r(e[o],o),n=t;return s}return r(e,0)}return""}function xe(e,t,r){let s=t.length,n=0;for(;n<s;){const o=n+s>>>1,a=t[o],i=e(a,r);if(0===i)return a;i>0?s=o:n=o+1}}function we(e,t,r){let s=t.length,n=0;for(;n<s;){const o=n+s>>>1,a=e(t[o],r);if(0===a)return o;a>0?s=o:n=o+1}return-1}function Ae(e,t,r){const s=t.length;let n=s,o=0;for(;o<n;){const s=o+n>>>1,a=e(t[s],r);if(0===a)return t;a>0?n=s:o=s+1}const a=new Array(s+1);for(let e=0;e<o;e++)a[e]=t[e];let i=r;for(;o<s;){const e=i;i=t[o],a[o++]=e}return a[s]=i,a}function Se(e,t,r){const s=e(t,r);return 0===s?t:s<0?[t,r]:[r,t]}var ke=r("../../browser-shims/compiler/index.js"),Ee=r("../../browser-shims/compiler/index.js"),Te=r("../../browser-shims/compiler/babel-utils.js"),Me=u(r("../../node_modules/path-browserify/index.js"));function Ce(e){if(e.downstreamExpressions.size)return!0;for(const t of e.aliases)if(Ce(t))return!0;for(const t of e.propertyAliases.values())if(Ce(t))return!0;return!1}var je=r("../../browser-shims/compiler/index.js"),Ie=r("../../browser-shims/compiler/babel-utils.js"),Pe=Symbol(),Le={build(e){const t=e[Pe];if(!t)throw e.path.buildCodeFrameError("Unable to build hydrate code, no files were visited before finalizing the build");const r=t.imports.map((e=>je.types.importDeclaration([],je.types.stringLiteral(e))));return t.init&&(r.unshift(je.types.importDeclaration([je.types.importSpecifier(je.types.identifier("init"),je.types.identifier("init"))],je.types.stringLiteral(`${f.name}/${e.markoOpts.optimize?"":"debug/"}dom`))),r.push(je.types.expressionStatement(je.types.callExpression(je.types.identifier("init"),[])))),r},visit(e,t,r){const s=t[Pe]||={imports:[],init:!1},{analyzedTags:n}=e.metadata.marko;s.imports.push((0,Ie.resolveRelativePath)(t,e.opts.filename)),s.init||=e.path.node.extra.hasInteractiveChild||e.path.node.extra.isInteractive||!1;for(const e of n||[])r(e)}};function Oe(e){const t={};for(const r of e.attributes)"MarkoAttribute"===r.type&&(t[r.name]=r.value);return t}var Be=r("../../browser-shims/compiler/babel-utils.js");function $e(e){return e.node.name.value}var{taglibId:Ne}=f;function Fe(e){if(e.isMarkoTag()){const t=(0,Be.getTagDef)(e);if(t)switch(t.taglibId){case Ne:case"@marko/translator-interop-class-tags":return!0;case"marko-html":switch(t.name){case"script":case"style":return!0}}}return!1}function Re(e,t){return Fe(e)&&$e(e)===t}function De(e){if(Fe(e))switch($e(e)){case"if":case"else-if":case"else":return!0}return!1}var ze=r("../../browser-shims/compiler/index.js"),Ue=r("../../browser-shims/compiler/babel-utils.js");function _e(e,t){return t?e:""}function Ve(e,t){return t||0===t?e+":"+t:""}function We(e,t,r){let s,n="",o="";if(e)if("object"!=typeof e)n+=e;else if(Array.isArray(e))for(const a of e)s=We(a,t,r),s&&(n+=o+s,o=t);else for(const a in e)s=r(a,e[a]),s&&(n+=o+s,o=t);return n}function qe(e){return/^on[A-Z-]/.test(e)}function Ge(e){return"-"===e[2]?e.slice(3):e.slice(2).toLowerCase()}function He(e){return e?e+"":0===e?"0":""}Symbol();var Je=/[<&]/g,Ze=e=>"&"===e?"&amp;":"&lt;";function Ke(e){return e?(t=e+"",Je.test(t)?t.replace(Je,Ze):t):0===e?"0":"&zwj;";var t}var Xe=/<\/script/g;function Ye(e){return e?(t=e+"",Xe.test(t)?t.replace(Xe,"\\x3C/script"):t):0===e?"0":"";var t}var Qe=/<\/style/g;function et(e){return e?(t=e+"",Qe.test(t)?t.replace(Qe,"\\3C/style"):t):0===e?"0":"";var t}function tt(e){return nt("class",We(e," ",_e))}function rt(e){return nt("style",We(e,";",Ve))}function st(e,t){return function(e){return null==e||!1===e}(t)?"":function(e,t){switch(typeof t){case"string":return" "+e+ct(t);case"boolean":return" "+e;case"number":return" "+e+"="+t;case"object":if(t instanceof RegExp)return" "+e+ct(t.source)}return" "+e+ct(t+"")}(e,t)}function nt(e,t){return t&&" "+e+ct(t)}Symbol("Scope ID"),Symbol("Pending Contexts"),Symbol(),globalThis.setImmediate||globalThis.setTimeout||globalThis.queueMicrotask,Symbol("selectedValue");var ot=/'|&(?=#?\w+;)/g,at=/"|&(?=#?\w+;)/g,it=/["'>\s]|&#?\w+;|\/$/g;function ct(e){return e?it.test(e)?e[it.lastIndex-1]===(it.lastIndex=0,'"')?"='"+function(e){return ot.test(e)?e.replace(ot,lt):e}(e)+"'":'="'+function(e){return at.test(e)?e.replace(at,pt):e}(e)+'"':"="+e:""}function lt(e){return"'"===e?"&#39;":"&amp;"}function pt(e){return'"'===e?"&#34;":"&amp;"}Symbol();var ut=r("../../browser-shims/compiler/index.js");function dt(e){return/^[a-z_$][a-z0-9_$]*$/i.test(e)}function ft(e){return dt(e)?ut.types.identifier(e):/^(?:0|[1-9][0-9]*)$/.test(e)?ut.types.numericLiteral(parseInt(e,10)):ut.types.stringLiteral(e)}function mt(e,t){return ut.types.objectProperty(ft(e),t)}function yt(e,t,r){const s=ft(t),n="Identifier"!==s.type;return r?ut.types.optionalMemberExpression(e,s,n,!0):ut.types.memberExpression(e,s,n)}var gt=new Set(["awaitTag","conditional","conditionalClosure","createTry","dynamicTag","createRenderer","createContent","createTemplate","dynamicClosure","dynamicClosureRead","intersection","loopClosure","loopIn","loopOf","loopTo","state","value"]);function bt(e){const{output:t}=se();return yt((0,Ue.importStar)((0,Ue.getFile)(),function(e){const{optimize:t}=se();return`${f.name}/${t?"":"debug/"}${"html"===e?"html":"dom"}`}(t),"$"),e)}function ht(e,...t){const r=ze.types.callExpression(bt(e),function(e){const t=[];for(let r=e.length;r--;){const s=e[r];(s||t.length)&&(t[r]=s||ze.types.unaryExpression("void",ze.types.numericLiteral(0)))}return t}(t));return re()&&gt.has(e)&&(r.leadingComments=[{type:"CommentBlock",value:" @__PURE__ "}]),r}function vt(){return{escapeXML:Ke,toString:He,attr:st,classAttr:tt,styleAttr:rt,escapeScript:Ye,escapeStyle:et}}function xt(){const e=se();return`marko/src/runtime/helpers/tags-compat/${te()?"html":"dom"}${e.optimize?"":"-debug"}.${"esm"===e.modules?"mjs":"js"}`}var wt=r("../../browser-shims/compiler/index.js"),At=r("../../browser-shims/compiler/babel-utils.js"),St=(r("../../browser-shims/compiler/index.js"),new WeakMap),kt=new WeakMap,Et=new WeakMap,Tt={};function Mt(e,t,r){let s=e;for(;s!==t&&s.parent;)jt(s,r),s=s.parent}function Ct(e,t,r,s){if(r){let n=e;for(;n!==t&&n.parent;)$t(n,r,s),n=n.parent}}function jt(e,t){t?Pt(e,zt(e,t)):!0!==e.serializeReason&&(St.delete(e),Ht(e,!0))}function It(e,t,r){Pt(e,Ut(t,r))}function Pt(e,t){!0!==e.serializeReasons.get(t)&&(Jt(e,t,!0),kt.get(e)?.delete(t))}function Lt(e,t,r){return!0===e.serializeReasons.get(Ut(t,r))}function Ot(e,t,r,s){const n=Ut(t,s);r&&!0!==e.serializeReasons.get(n)&&Bt(e,n,r)}function Bt(e,t,r){if(!0===r)Pt(e,t);else{let s,n=kt.get(e);n?s=n.get(t):(n=new Map,kt.set(e,n)),n.set(t,s?ye(s,r):r)}}function $t(e,t,r){if(t)if(r)Ft(e,zt(e,r),t);else{const r=e.serializeReason;!0!==r&&(!0===t?jt(e):Ht(e,Gt(r,t)))}}function Nt(e,t,r,s){r&&Ft(e,Ut(t,s),r)}function Ft(e,t,r){const s=e.serializeReasons.get(t);!0!==s&&(!0===r?Pt(e,t):Jt(e,t,Gt(s,r)))}function Rt(e,t){return t?e.serializeReasons.get(zt(e,t)):e.serializeReason}function Dt(e,t,r){return e.serializeReasons.get(Ut(t,r))}function zt(e,t){const r=Tt[t]||=new WeakMap;let s=r.get(e);return s||r.set(e,s=Symbol("symbol"==typeof t?`Symbol(${t.description})`:t)),s}function Ut(e,t){const r=t?Tt[t]||=new WeakMap:Et;let s=r.get(e);return s||r.set(e,s=Symbol((t?"symbol"==typeof t?`Symbol(${t.description})`:t:"")+e.name)),s}function _t(e){const t=kt.get(e);if(t){kt.delete(e);for(const[r,s]of t){const t=Wt(s);t&&Jt(e,r,Gt(e.serializeReasons.get(r),t))}}const r=Wt(St.get(e));r&&Ht(e,Gt(e.serializeReason,r)),St.delete(e)}function Vt(e){if(xo(e))return qt(e.referencedBindings)}function Wt(e){if(e){if(Array.isArray(e)){let t;for(const r of e)t=Xn(t,Vt(r));return t}return Vt(e)}}function qt(e){if(e){let t;if(Array.isArray(e)){for(const{sources:r}of e)t=Xn(t,r);return t}return e.sources}}function Gt(e,t){return!0===e||!0===t||Xn(e,t)}function Ht(e,t){e.serializeReason=t}function Jt(e,t,r){e.serializeReasons.set(t,r)}var Zt=r("../../browser-shims/compiler/babel-utils.js"),Kt=e=>{const t=new WeakMap;return[()=>{let r=t.get((0,Zt.getProgram)());return r||t.set((0,Zt.getProgram)(),r=e()),r},e=>{t.set((0,Zt.getProgram)(),e)}]};function Xt(e,t){return[r=>{const s=(0,Zt.getProgram)().state[e]??={};return s[r.id]??=t&&t(r)},(t,r)=>{((0,Zt.getProgram)().state[e]??={})[t.id]=r}]}var Yt=r("../../browser-shims/compiler/index.js"),Qt=r("../../browser-shims/compiler/babel-utils.js"),er=/^<.*>$|\.marko$/;function tr(e){const t=e.node.extra??={};if(void 0===t.tagNameType){const r=e.get("name");if(r.isStringLiteral()?(t.tagNameType="@"===r.node.value[0]?3:(0,Qt.isNativeTag)(e)?0:1,t.tagNameNullable=t.tagNameNullable=!1):r.isIdentifier()?(function(e,t){const r=[e];let s,n,o,a=!1;for(;(s=r.pop())&&2!==n;)if(s.isConditionalExpression())r.push(s.get("consequent")),s.node.alternate&&r.push(s.get("alternate"));else if(s.isLogicalExpression())"||"===s.node.operator?r.push(s.get("left")):a=!0,r.push(s.get("right"));else if(s.isAssignmentExpression())r.push(s.get("right"));else if(s.isBinaryExpression())n="+"!==s.node.operator||void 0!==n?2:0;else if(s.isStringLiteral()||s.isTemplateLiteral())n=void 0!==n?2:0;else if(s.isNullLiteral())a=!0;else if(s.isIdentifier()){if("undefined"===s.node.name){a=!0;continue}const t=s.scope.getBinding(s.node.name);if(!t){n=2;continue}if("module"===t.kind){const r=t.path.parent;if(er.test(r.source.value)&&r.specifiers.some((e=>Yt.types.isImportDefaultSpecifier(e)))){const t=(0,Qt.resolveTagImport)(e,r.source.value)||r.source.value;0===n||o&&o!==t?(n=2,o=void 0):(n=1,o=t)}else n=2;continue}const i=t.path;if(i.isMarkoTag()&&"local"===t.kind){const e=i.get("name").node.value;if("const"===e){r.push(i.get("attributes")[0].get("value"));continue}if("let"===e){n=2;continue}continue}n=2}else n=2;t.tagNameType=n,t.tagNameNullable=a,t.tagNameDynamic=!0,1===n&&o&&(t.tagNameImported=o)}(r,t),0===t.tagNameType&&(t.tagNameType=2)):r.isTemplateLiteral()&&!r.node.expressions.length?t.tagNameType=0:t.tagNameType=2,void 0===t.tagNameType&&(t.tagNameType=2),1===t.tagNameType){const r=(0,Qt.loadFileForTag)(e);r?"class"===r.ast.program.extra.featureType&&(t.tagNameType=2,t.featureType="class",((0,Qt.getProgram)().node.extra??={}).needsCompat=!0):t.tagNameType=2}}return t.tagNameType}var rr=new fe((function(e,t){return e.id-t.id}));function sr(e){const t=e.node.extra??={};let r=t.section;if(!r&&("Program"===e.type||e.get("body").length)){const s=e.parentPath?nr(e.parentPath):void 0,n=e.parentPath?.get("name"),o=e.isProgram()?"":H(n.toString()+"_content"),a=e.hub.file.path.node.extra??={},i=a.sections??=[];r=t.section={id:i.length,name:o,loc:n?.node.loc||void 0,depth:s?s.depth+1:0,parent:s,sectionAccessor:void 0,params:void 0,referencedClosures:void 0,referencedHoists:void 0,bindings:void 0,hoisted:void 0,isHoistThrough:void 0,serializeReason:void 0,serializeReasons:new Map,content:dr(e),upstreamExpression:void 0,downstreamBinding:void 0,hasAbortSignal:!1,isBranch:!1},i.push(r)}return r}function nr(e){let t=e;for(;;){if("Program"===t.type||"MarkoTagBody"===t.type&&!t.node.attributeTags&&!hr(t.parentPath))return(e.node.extra??={}).section=sr(t);t=t.parentPath}}function or(e){return e.node.extra?.section}function ar(e){let t,r=e;for(;void 0===(t=r.node.extra?.section);)r=r.parentPath;return t}var[ir]=Xt("scopeIdIdentifier",(e=>J(`scope${e.id}_id`))),[cr,lr]=Xt("parentIsOwner",(()=>!1)),[pr]=Xt("scopeIdentifier",(()=>wt.types.identifier("undefined")));function ur(e){const{sections:t}=(0,At.getProgram)().node.extra;t?.forEach(e)}function dr(e){const t=e.get("body"),r={startType:null,endType:null,singleChild:!0};for(let e=t.length;e--;){const s=fr(t[e],"endType",r);if(null!==s){r.endType=s,1===s&&(r.singleChild=!1);for(let s=0;s<e;s++){const e=fr(t[s],"startType");if(null!==e)return r.startType=e,r.singleChild=!1,r}return r.startType=fr(t[e],"startType"),r}}return null}function fr(e,t,r){switch(e.type){case"MarkoText":return 4;case"MarkoPlaceholder":return 2;case"MarkoScriptlet":case"MarkoComment":case"ImportDeclaration":case"ExportAllDeclaration":case"ExportNamedDeclaration":return null;case"MarkoTag":{const s=e;if(Fe(s))switch(s.node.name.value){case"html-comment":return 0;case"html-script":case"html-style":return 3;case"for":case"if":case"await":case"try":return 1;default:return null}else{if((0,At.isNativeTag)(s))return 3;if((0,At.isAttributeTag)(s))return null;if(wt.types.isStringLiteral(s.node.name)){const e=(0,At.loadFileForTag)(s)?.ast.program.extra.section;if(e)return e.content?(r&&!e.content.singleChild&&"endType"===t&&(r.startType=e.content.startType,r.singleChild=!1),e.content[t]):null}}}}return 1}var mr=e=>{if(e.isBranch)return!1;const{downstreamBinding:t}=e;return!t||!!Dt(t.section,t)};function yr(e,t){return e.parent?.id===t.section.id}function gr(e,t){return!function(e,t){return e.isBranch&&yr(e,t)}(e,t)}function br(e,t){do{if(t===e)return!0}while(t=t.parent);return!1}function hr(e){if(Fe(e))switch(e.node.name.value){case"html-comment":case"html-script":case"html-style":return!0;default:return!1}return 0===tr(e)}var vr=r("../../browser-shims/compiler/index.js"),xr=r("../../browser-shims/compiler/babel-utils.js"),wr=u(r("../../node_modules/path-browserify/index.js"));var Ar=/[\\^$.*+?()[\]{}|]/g,Sr=r("../../browser-shims/compiler/index.js"),kr=r("../../browser-shims/compiler/babel-utils.js"),Er=r("../../browser-shims/compiler/index.js"),Tr=r("../../browser-shims/compiler/babel-utils.js");function Mr(e){const t="MarkoTagBody"===e.parent.type?e.parentPath.parentPath:e.parentPath;if("MarkoTag"===t.type)return t}var Cr=r("../../browser-shims/compiler/index.js");function jr(e,t){if(!e)return!1;const{node:r}=t,s=Pr(e)?e.default:e;return Lr(s)?s(t,Cr.types):s.enter&&s.enter(t,Cr.types),r!==t.node}function Ir(e,t){if(!e)return!1;const{node:r}=t,s=Pr(e)?e.default:e;return!Lr(s)&&s.exit&&s.exit(t,Cr.types),r!==t.node}function Pr(e){return Boolean(e.default)}function Lr(e){return"function"==typeof e}function Or({html:e,dom:t}){return{enter(r){jr(te()?e:t,r)},exit(r){Ir(te()?e:t,r)}}}var Br=r("../../browser-shims/compiler/index.js"),$r=r("../../browser-shims/compiler/index.js"),Nr=r("../../browser-shims/compiler/babel-utils.js"),Fr=r("../../browser-shims/compiler/index.js");function Rr(e){switch(e.type){case"FunctionDeclaration":case"FunctionExpression":case"ArrowFunctionExpression":return e;default:return Fr.types.functionExpression(null,e.params,e.body,e.async,e.generator)}}function Dr(e,t){const r={type:"CommentBlock",value:` ${t} `};return e.leadingComments=e.leadingComments?[...e.leadingComments,r]:[r],e}function zr(){return K("content")}function Ur(e,t){return e?!0===e||e.state?t?void 0:!0===e?$r.types.numericLiteral(1):Dr($r.types.numericLiteral(1),`state: ${ve(e.state,", ",io)}`):function(e){return ht("serializeGuard",$r.types.identifier(K("serialize")),Dr($r.types.numericLiteral(vn((0,Nr.getProgram)().node.extra.inputSerializeReasons,e)),ve(e,",",io)))}(e.input):$r.types.numericLiteral(0)}function _r(e,t){return e?!0===e||e.state?t:$r.types.logicalExpression("&&",ht("serializeIf",$r.types.identifier(K("serialize")),Dr($r.types.numericLiteral(vn((0,Nr.getProgram)().node.extra.inputSerializeReasons,e.input)),ve(e.input,", ",co))),t):void 0}var Vr={translate:{exit(e){fs(e),on(e),V(e.node,"body",Wr);const t=[];for(const s of e.get("body"))(r=s).isImportDeclaration()||r.isExportDeclaration()||r.isMarkoScriptlet({static:!0})?s.isMarkoScriptlet()&&(s.node.target&&"server"!==s.node.target?s.remove():s.replaceWithMultiple(s.node.body)):(t.push(s.node),s.remove());var r;const s=X("serialize")&&K("serialize"),n=X("content")&&zr(),o=$r.types.arrowFunctionExpression(s?[$r.types.identifier("input"),$r.types.identifier(s)]:[$r.types.identifier("input")],$r.types.blockStatement(t)),a=$r.types.exportDefaultDeclaration(ht("createTemplate",$r.types.stringLiteral(e.hub.file.metadata.marko.id),n?$r.types.identifier(n):o));n?e.node.body.push($r.types.variableDeclaration("const",[$r.types.variableDeclarator($r.types.identifier(n),o)]),a):e.node.body.push(a)}}};function Wr(e,t){return function(e){switch(e.type){case"Identifier":case"MemberExpression":{const{extra:t}=e;if(t&&!(t.read&&!t.read.binding.declared||t.binding&&!t.binding.declared))return uo(e)}}}(e)||function(e,t){switch(e.type){case"ClassMethod":{const t=Gr(e);return t&&$r.types.classProperty(e.key,t)}case"ClassPrivateMethod":{const t=Gr(e);return t&&$r.types.classPrivateProperty(e.key,t)}case"ObjectMethod":{const t=Gr(e);return t&&$r.types.objectProperty(e.key,t)}case"FunctionDeclaration":{const{extra:r}=e;if(Ao(r)){let s=qr.get(t);s||qr.set(t,s=[]),s.push({id:e.id.name,registerId:r.registerId})}break}case"ArrowFunctionExpression":case"FunctionExpression":return Gr(e);case"BlockStatement":case"MarkoScriptlet":!function(e){const t=qr.get(e);if(t)for(const{id:r,registerId:s}of t)e.push($r.types.expressionStatement(ht("register",$r.types.identifier(r),$r.types.stringLiteral(s))))}(e.body)}}(e,t)}var qr=new WeakMap;function Gr(e){const{extra:t}=e;if(Ao(t))return ht("register",Rr(e),$r.types.stringLiteral(t.registerId),(t.referencedBindingsInFunction||t.referencesScope)&&ir(t.section))}var Hr=r("../../browser-shims/compiler/index.js");function Jr(e){const t=[],r=[];let s=e[0];for(let n=1;n<e.length;n++){let o=e[n];if("object"==typeof o){if(!Hr.types.isStringLiteral(o)){if(Hr.types.isTemplateLiteral(o)){let t=n+1;const r=o.expressions.length;Kr(e,t,o.quasis.length+r);for(let s=0;s<r;s++)e[t++]=o.quasis[s].value.raw,e[t++]=o.expressions[s];e[t]=o.quasis[r].value.raw;continue}r.push(o),t.push(s),s="";continue}o=o.value}s+=o}return r.length?1!==r.length||s||t[0]?(t.push(s),Hr.types.templateLiteral(t.map((e=>Hr.types.templateElement({raw:e}))),r)):r[0]:s?Hr.types.stringLiteral(s):void 0}function Zr(e,t){e[e.length-1]+=t}function Kr(e,t,r){for(let s=e.length-1;s>=t;s--)e[s+r]=e[s]}r("../../browser-shims/compiler/index.js");var[Xr]=Xt("walks",(()=>[""])),[Yr]=Xt("walkComment",(()=>[])),[Qr]=Xt("steps",(()=>[])),es={32:"get",36:"inside",37:"replace",38:"endChild",47:"beginChild",48:"beginChildWithVar",49:"dynamicTagWithVar",67:"next",97:"over",107:"out",117:"multiplier",91:"nextEnd",106:"overEnd",116:"outEnd",126:"multiplierEnd"};function ts(e){Qr(ar(e)).push(0)}function rs(e){Qr(ar(e)).push(1)}function ss(e){Qr(ar(e)).push(0,1)}function ns(e,t){if(te())return;const r=ar(e),s=Qr(r),n=Xr(r),o=Yr(r);let a="";if(s.length){const e=[];let t=0;for(const r of s)0===r?(t++,e.push(67)):(t--,t>=0?(e.length=e.lastIndexOf(67),e.push(97)):(e.length=e.lastIndexOf(107)+1,e.push(107),t=0));let r=e[0],n=0;for(const t of e)t!==r?(o.push(`${es[r]}(${n})`),a+=os(r,n),r=t,n=1):n++;o.push(`${es[r]}(${n})`),a+=os(r,n),s.length=0}void 0!==t&&(32!==t&&ps(e)`<!>`,o.push(`${es[t]}`),a+=String.fromCharCode(t)),Zr(n,a)}function os(e,t){switch(e){case 67:return as(t,e,20);case 97:case 107:return as(t,e,10);default:throw new Error(`Unexpected walk code: ${e}`)}}function as(e,t,r){let s="";if(e>=r){const t=Math.floor(e/r);s+=as(t,117,10),e-=t*r}return s+=String.fromCharCode(t+e),s}function is(e){const t=1===e.content?.startType?String.fromCharCode(68):"",r=1===e.content?.endType?String.fromCharCode(68):"",s=Jr([t,...Xr(e),r]);return s&&""!==s.value&&Dr(s,Yr(e).join(", ")),s}var[cs]=Xt("writes",(()=>[""])),[ls]=Xt("trailerWrites",(()=>[""]));function ps(e,t){const r=ar(e),s=t?ls:cs;return(e,...t)=>{const n=t.length,o=s(r);Zr(o,e[0]);for(let r=0;r<n;r++)o.push(t[r],e[r+1])}}function us(e){const t=ar(e),r=cs(t),s=ls(t),n=Jr(r),o=Jr(s);return r.length=0,r[0]="",s.length=0,s[0]="",n&&o?Br.types.expressionStatement(Br.types.sequenceExpression([ht("write",n),ht("writeTrailers",o)])):n?Br.types.expressionStatement(ht("write",n)):o?Br.types.expressionStatement(ht("writeTrailers",o)):void 0}function ds(e){const t=us(e);t&&e.insertBefore(t)[0].skip()}function fs(e){const t=e.isProgram()?e:e.get("body"),r=us(t);r&&t.node.body.push(r)}function ms(e){const t=1===e.content?.startType?"<!>":"",r=1===e.content?.endType?"<!>":"",s=cs(e);return{setup:an(e),walks:is(e),writes:Jr([t,...s,r])}}function ys(e,t,r){if(0!==t.type)throw e.buildCodeFrameError("Tried to mark a node that was not determined to need a mark during analyze.");if(te()&&r){const s=ar(e);ps(e)`${ht("markResumeNode",ir(s),no(t),Ur(r,!0))}`}}var gs=new WeakSet,[bs,hs]=Xt("returnValue"),vs={analyze(e){(0,Tr.assertNoArgs)(e),(0,Tr.assertNoVar)(e),(0,Tr.assertNoParams)(e),b(e),(0,Tr.assertAllowedAttributes)(e,["value","valueChange"]);const t=Mr(e);if(t){if((0,Tr.isNativeTag)(t))throw e.get("name").buildCodeFrameError("The `return` tag can not be used in a native tag.");if(function(e){if(Fe(e))switch($e(e)){case"if":case"else-if":case"else":case"for":case"await":case"try":return!0}return!1}(t))throw e.get("name").buildCodeFrameError(`The \`return\` tag can not be used under an \`${t.get("name").toString()}\` tag.`)}if(gs.has(e.parentPath))throw e.get("name").buildCodeFrameError(`Cannot have multiple \`return\` tags ${"Program"===e.parent.type?"for the template":"within a tag's body content"}.`);gs.add(e.parentPath);const r=Oe(e.node);if(!r.value)throw e.get("name").buildCodeFrameError("The `return` tag requires a value.");r.valueChange&&jt(nr(e),ae().TagVariableChange)},translate:Or({html:{exit(e){const t=ar(e),r=Oe(e.node);if(ds(e),r.valueChange&&function(e,t,r){const s=Rt(e,t);s&&js(e).set(t,{expression:r,reason:s})}(t,ae().TagVariableChange,r.valueChange),r.value){const s=J("return");hs(t,s),e.replaceWith(Er.types.variableDeclaration("const",[Er.types.variableDeclarator(s,r.value)]))[0].skip()}}},dom:{exit(e){const t=ar(e),r=Oe(e.node);r.value&&Zs("render",t,r.value.extra?.referencedBindings,Er.types.expressionStatement(ht("tagVarSignal",yn,r.value))),r.valueChange&&Zs("render",t,r.valueChange.extra?.referencedBindings,Er.types.expressionStatement(ht("setTagVarChange",yn,r.valueChange))),e.remove()}}}),parseOptions:{openTagOnly:!0},autocomplete:[{displayText:"return=<value>",description:"Provides a value for use in a parent template.",snippet:"return=${1:value}",descriptionMoreURL:"https://markojs.com/docs/core-tags/#return"}]},xs=r("../../browser-shims/compiler/index.js");function ws(e){const t=ro(e);return t.declared||!t.upstreamAlias?xs.types.identifier(t.name):void 0!==t.property?yt(ws(t.upstreamAlias),t.property,t.upstreamAlias.nullable):ws(t.upstreamAlias)}var As=r("../../browser-shims/compiler/index.js");function Ss(e){if(1===e.length&&As.types.isExpressionStatement(e[0])){const{expression:t}=e[0];switch(t.type){case"ObjectExpression":case"AssignmentExpression":return ks(t);default:return t}}return As.types.blockStatement(e)}function ks(e){switch(e.type){case"ObjectExpression":case"AssignmentExpression":return As.types.parenthesizedExpression(e);default:return e}}var[Es]=Xt("signals",(()=>new Map)),[Ts,Ms]=Xt("queue");function Cs(e,t){Ms(or(e.get("body")),t)}var[js]=Xt("serializedScopeProperties",(()=>new Map));function Is(e,t,r,s){const n=Dt(e,t,s);n&&js(e).set((s||"")+oo(t),{expression:r,reason:n})}var Ps=new WeakSet;function Ls(e,t,r){Ps.add(e),js(e).set(t,{expression:r,reason:!0})}var[Os,Bs]=Xt("sectionWriteScopeBuilder");function $s(e,t){const r=Os(e);Bs(e,r?e=>t(r(e)):t)}var Ns=new WeakMap,[Fs]=Xt("htmlScopeStatements",(()=>[])),[Rs]=Xt("hoistFunctionsIdsMap",(()=>new Map));function Ds(e){const t=Rs(e.section);let r=t.get(e);return r||t.set(e,r=J(`get${e.name}`)),r}var zs=()=>Sr.types.stringLiteral("SIGNAL NOT INITIALIZED");function Us(e,t,r=function(e){let t;if(e)if(Array.isArray(e)){t="expr";for(const r of e)t+=`_${r.name}`}else t=e.name;else t="setup";return t}(t)){const s=Es(e);let n=s.get(t);if(!n){const o=t?!Array.isArray(t)&&t.section===e&&t.export:!e.parent&&(0,kr.getProgram)().node.extra.domExports?.setup;if(s.set(t,n={identifier:o?Sr.types.identifier(o):J(r+e.name.replace("_","$")),referencedBindings:t,section:e,values:[],intersection:void 0,render:[],renderReferencedBindings:void 0,effect:[],effectReferencedBindings:void 0,subscribers:[],build:zs,export:!!o}),te())return n;t?Array.isArray(t)?(Hs(t,n),n.build=()=>{const{id:e,scopeOffset:r}=Vn.get(t);return ht("intersection",Sr.types.numericLiteral(e),Vs(n),r||t.length>2?Sr.types.numericLiteral(t.length-1):void 0,r&&no(r))}):t.section!==e&&Yn.find(e.referencedClosures,t)&&(n.build=()=>{const r=ro(t),s=Vs(n);return!Ts(e)||gr(e,r)?ht("dynamicClosureRead",no(r),s,yr(e,r)?void 0:Sr.types.arrowFunctionExpression([yn],An(e,r.section))):Ts(e)(r,s)}):n.build=()=>Vs(n)}return n}function _s(e,t="value"){const r=Us(e.section,e);r.build=()=>{const s=Vs(r),n=!e.upstreamAlias&&(3===e.type||2===e.type),o=!(e.upstreamAlias&&!e.property)&&(e.closureSections||e.downstreamExpressions.size||"ArrowFunctionExpression"===s.type&&s.body.body.length>0)||r.intersection,a=n||r.intersection;return o||a||e.hoists.size?ht(t,no(e,"state"===t),s):s},r.valueAccessor=no(e);for(const t of e.aliases)_s(t);for(const t of e.propertyAliases.values())_s(t);return r}function Vs(e){const t=e.section,r=e.referencedBindings,s=[yn],n=Array.isArray(r),o=r&&!n,a=o&&r.section===t;if(o&&(e.renderReferencedBindings||r.aliases.size||r.propertyAliases.size)){const e=Sr.types.identifier(r.name);r.loc&&(e.loc=r.loc,e.start=r.loc.start.index,e.end=r.loc.end.index),s.push(e)}if(a){for(const t of r.aliases){const s=Us(t.section,t);(s.render.length||s.values.length||s.effect.length)&&e.render.push(Sr.types.expressionStatement(Sr.types.callExpression(s.identifier,[yn,Sr.types.identifier(r.name),...Gs(s)])))}for(const[t,s]of r.propertyAliases){const n=Us(s.section,s);e.render.push(Sr.types.expressionStatement(Sr.types.callExpression(n.identifier,[yn,yt(Sr.types.identifier(r.name),t,r.nullable),...Gs(n)])))}}for(const t of e.values){const r=t.signal;!r.referencedBindings||Array.isArray(r.referencedBindings)||!r.referencedBindings.upstreamAlias||r.referencedBindings.property||r.effect.length||r.render.length||r.values.length?e.render.push(Sr.types.expressionStatement(Sr.types.callExpression(t.signal.identifier,[yn,t.value,...Gs(t.signal)]))):e.render.push(Sr.types.expressionStatement(t.value))}if(be(e.intersection,(t=>{e.render.push(Sr.types.expressionStatement(Sr.types.callExpression(t.identifier,[yn])))})),a&&r.sources){let t,s;r.sources&&(be(r.closureSections,(n=>{gr(n,r)?(t||(t=[],s=J(e.identifier.name+"_closure"),e.render.push(Sr.types.expressionStatement(Sr.types.callExpression(s,[yn])))),t.push(Us(n,r).identifier)):e.render.push(Sr.types.expressionStatement(Sr.types.callExpression(Us(n,r).identifier,[yn])))})),s&&(e.prependStatements||=[]).push(Sr.types.variableDeclaration("const",[Sr.types.variableDeclarator(s,ht("dynamicClosure",...t))])))}if(e.effect.length){const t=Sr.types.identifier(`${e.identifier.name}_effect`);e.render.push(Sr.types.expressionStatement(Sr.types.callExpression(t,[yn])))}if(n&&e.renderReferencedBindings&&e.render.unshift(Sr.types.variableDeclaration("const",[Sr.types.variableDeclarator(wn(t,e.renderReferencedBindings),yn)])),1===e.render.length){const t=e.render[0];if("ExpressionStatement"===t.type){const{expression:e}=t;if("CallExpression"===e.type){const t=e.arguments;if(s.length>=t.length){let r=t.length;for(;r--;){const e=s[r],n=t[r];if("Identifier"!==n.type||e.name!==n.name)break}if(-1===r)return e.callee}}}}return Sr.types.arrowFunctionExpression(s,Sr.types.blockStatement(e.render))}var Ws=new WeakSet,qs=[];function Gs(e){return e.extraArgs?(Ws.has(e)||(Ws.add(e),V(e,"extraArgs",cn)),e.extraArgs):qs}function Hs(e,t){if(Array.isArray(e))return void e.forEach((e=>Hs(e,t)));const r=Us(t.section,e);r.intersection=me(r.intersection,t)}function Js(e){for(let t=e.length;t--;){const r=e[t];if(r)if(Sr.types.isArrowFunctionExpression(r)&&Sr.types.isBlockStatement(r.body)){const s=r.body.body;0===s.length?e[t]=Sr.types.numericLiteral(0):1===s.length&&Sr.types.isExpressionStatement(s[0])&&(r.body=ks(s[0].expression))}else(Sr.types.isNullLiteral(r)||Sr.types.isUnaryExpression(r)&&"void"===r.operator)&&(e[t]=Sr.types.numericLiteral(0));else e[t]=Sr.types.numericLiteral(0)}for(let t=e.length-1;Sr.types.isNumericLiteral(e[t])&&0===e[t].value;)e.length=t--;return e}function Zs(e,t,r,s,n){const o=Us(t,r),a=o[e]??=[],i="effect"===e?Ks:Xs;if(Array.isArray(s)?a.push(...s):a.push(s),!1!==n)if(n)for(const e of n)i(o,e);else i(o,r)}function Ks(e,t){e.effectReferencedBindings=Yn.union(e.effectReferencedBindings,t)}function Xs(e,t){e.renderReferencedBindings=Yn.union(e.renderReferencedBindings,t)}function Ys(e,t,r,s){const n=Us(e,t);Xs(n,t),n.values.push({signal:r,value:s})}function Qs(e,t,r){const{markoOpts:s,opts:{filename:n}}=(0,kr.getFile)();let o="";if(t)if("string"==typeof t)o+=`_${t}`;else if(Array.isArray(t))for(const e of t)o+=`_${e.name}`;else o+=`_${t.name}`;return(0,kr.getTemplateId)(s,n,`${e.id}${o}${r?"/"+r:""}`)}var en=new WeakMap;function tn(e,t){const{markoOpts:r,opts:{filename:s}}=(0,kr.getFile)();let n=en.get(e);n||en.set(e,n=new Set);const o=(0,kr.getTemplateId)(r,s,`${e.id}/${t}`);let a=0,i=o;for(;n.has(i);)i=o+"_"+ ++a;return n.add(i),i}function rn(e){const t=new Set;!function(e){be(e.hoisted,(t=>{for(const r of t.hoists.values()){const s=[0===t.type?Sr.types.stringLiteral(oe().Getter+oo(t)):no(t)];let n=e;for(;n&&n!==r.section;){const e=n.parent;e&&s.push(po(n)),n=e}const o=Ds(r);(0,kr.getProgram)().node.body.push(Sr.types.variableDeclaration("const",[Sr.types.variableDeclarator(o,r.downstreamExpressions.size?ht("register",Sr.types.stringLiteral(Qs(r.section,r,"hoist")),ht("hoist",...s)):ht("hoist",...s))])),r.downstreamExpressions.size&&Ys(r.section,void 0,_s(r),Sr.types.callExpression(o,[yn]))}}))}(e);for(const t of Es(e).values())r(t);function r(s){if(t.has(s))return;t.add(s);for(const e of s.values)r(e.signal),V(e,"value",cn);let n;if(be(s.intersection,r),V(s,"render",cn),s.effect.length){V(s,"effect",ln);const t=Sr.types.identifier(`${s.identifier.name}_effect`),r=s.effectReferencedBindings,o=W(s.effect,bn);n=Sr.types.variableDeclarator(t,ht("effect",Sr.types.stringLiteral(Qs(e,s.referencedBindings)),Sr.types.arrowFunctionExpression(r?o?[yn,wn(e,r)]:[wn(e,r)]:o?[yn]:[],Ss(s.effect))))}let o=s.build();if(s.referencedBindings&&!Array.isArray(s.referencedBindings)&&s.referencedBindings.upstreamAlias&&!s.referencedBindings.property&&Sr.types.isFunction(o)&&Sr.types.isBlockStatement(o.body)&&!o.body.body.length)return;Sr.types.isCallExpression(o)&&Js(o.arguments),s.register&&(o=ht("registerBoundSignal",Sr.types.stringLiteral(Qs(e,s.referencedBindings,"var")),o));const a=Sr.types.variableDeclarator(s.identifier,o);let i=e.parent||s.referencedBindings||!Sr.types.isFunctionExpression(o)&&!Sr.types.isArrowFunctionExpression(o)?Sr.types.variableDeclaration("const",[a]):Sr.types.functionDeclaration(s.identifier,o.params,Sr.types.isExpression(o.body)?Sr.types.blockStatement([Sr.types.expressionStatement(o.body)]):o.body);s.export&&(i=Sr.types.exportNamedDeclaration(i));const c=s.prependStatements||[];n&&c.push(Sr.types.variableDeclaration("const",[n])),c.push(i),(0,kr.getProgram)().node.body.push(...c)}}function sn(e){const t=Rr(e);return"FunctionDeclaration"===t.type?[t,Sr.types.returnStatement(t.id)]:[Sr.types.returnStatement(t)]}function nn(e,t){Zs("effect",e,t,void 0,!1)}function on(e){const t=or(e);if(!t)return;const r=e.node.body,s=Array.from(Es(t).values()),n=ir(t);be(t.referencedClosures,(e=>{if(e.sources&&gr(t,e)){const r=Us(e.section,e);let s=Ns.get(r);s||(Ns.set(r,s=J(r.identifier.name+"_closures")),Fs(e.section).push(Sr.types.variableDeclaration("const",[Sr.types.variableDeclarator(s,Sr.types.newExpression(Sr.types.identifier("Set"),[]))])),Is(e.section,e,s,oe().ClosureScopes)),Is(t,e,Sr.types.numericLiteral(function(e,t){let r=0;return he(e.closureSections,(s=>s===t||(gr(s,e)&&r++,!1))),r}(e,t)),oe().ClosureSignalIndex),$s(t,(e=>ht("writeSubscribe",s,e)))}}));const o=new Set;be(t.hoisted,(e=>{for(const r of e.hoists.values()){r.downstreamExpressions.size&&Fs(r.section).push(Sr.types.variableDeclaration("const",[Sr.types.variableDeclarator(Sr.types.identifier(r.name),ht("hoist",ir(r.section),Sr.types.stringLiteral(Qs(r.section,r,"hoist"))))]));let e=t;for(;e&&e!==r.section;){const t=e.parent;if(!e.sectionAccessor&&!o.has(e)){const r=J(`${e.name}_subscribers`);o.add(e),Fs(t).push(Sr.types.variableDeclaration("const",[Sr.types.variableDeclarator(r,Sr.types.newExpression(Sr.types.identifier("Set"),[]))])),$s(e,(e=>ht("writeSubscribe",r,e))),Ls(t,lo(e),r)}e=t}}e.hoists.size&&0!==e.type&&Is(t,e,ws(e))}));for(let e=s.length;e--;)if(s[e].effect.length){const o=s[e].referencedBindings;r.push(Sr.types.expressionStatement(ht("writeEffect",n,Sr.types.stringLiteral(Qs(t,o)))))}const a=js(t),i=[],c=!!Ps.has(t)||t.serializeReason;if(be(t.bindings,(e=>{if(0===e.type)return;const r=Dt(t,e);if(!r)return;const s=oo(e);a.delete(s),i.push(mt(s,c&&(c===r||!0!==c&&!0!==r&&0===Kn(c,r))?ws(e):_r(r,ws(e))))})),t.parent){const e=ae().Owner,r=Rt(t,e);if(r){const s=ht("ensureScopeWithId",ir(t.parent));a.delete(e),i.push(mt(e,c&&(c===r||!0!==c&&!0!==r&&0===Kn(c,r))?s:_r(r,s)))}}for(const[e,{expression:t,reason:r}]of a)i.push(mt(e,_r(r,t)));const l=Os(t);if(c){for(const e of i)"Identifier"===e.key.type&&"Identifier"===e.value.type&&e.key.name===e.value.name&&(e.shorthand=!0);const s=[n,Sr.types.objectExpression(i)];if(!ne()){let r;be(t.bindings,(e=>{if(0===e.type)return;if(!Dt(t,e))return;const{root:s,access:n}=ao(e),o=s.loc&&Sr.types.stringLiteral(`${s.loc.start.line}:${s.loc.start.column+1}`);(r||=[]).push(mt(oo(e),s!==e?Sr.types.arrayExpression(o?[Sr.types.stringLiteral(s.name+n),o]:[Sr.types.stringLiteral(s.name+n)]):o||Sr.types.numericLiteral(0)))})),s.push(Sr.types.stringLiteral(e.hub.file.opts.filenameRelative),t.loc&&null!=t.loc.start.line?Sr.types.stringLiteral(`${t.loc.start.line}:${t.loc.start.column+1}`):Sr.types.numericLiteral(0)),r&&s.push(Sr.types.objectExpression(r))}let o=l?l(ht("writeScope",...s)):ht("writeScope",...s);!0===c||c.state||(o=Sr.types.logicalExpression("&&",Ur(c,!1),o)),r.push(Sr.types.expressionStatement(o))}!t.isBranch&&(t.hasAbortSignal||t.referencedClosures||he(t.bindings,(e=>1===e.type)))&&r.push(Sr.types.expressionStatement(ht("resumeClosestBranch",n)));const p=Fs(t);(r.length||p.length)&&r.unshift(Sr.types.variableDeclaration("const",[Sr.types.variableDeclarator(n,ht("nextScopeId"))]),...p);const u=bs(t);void 0!==u&&r.push(Sr.types.returnStatement(u))}function an(e){return Es(e).get(void 0)?.identifier}function cn(e){return un(e)||pn(e)||fn(e)}function ln(e){return un(e)||pn(e)}function pn(e){switch(e.type){case"Identifier":case"MemberExpression":return uo(e)}}function un(e){switch(e.type){case"UpdateExpression":{const{extra:t}=e.argument;if(wo(t)){const{buildAssignment:r}=Us(t.assignment.section,t.assignment);if(r){const s=r(t.section,Sr.types.binaryExpression("++"===e.operator?"+":"-",e.argument,Sr.types.numericLiteral(1)));return e.prefix?s:Sr.types.sequenceExpression([s,e.argument])}}break}case"AssignmentExpression":switch(e.left.type){case"Identifier":{const{extra:t}=e.left;if(wo(t)){const{buildAssignment:r}=Us(t.assignment.section,t.assignment);if(r)return r(t.section,"="===e.operator?e.right:Sr.types.binaryExpression(e.operator.slice(0,-1),e.left,e.right))}break}case"ArrayPattern":case"ObjectPattern":{let t,r;if(N(e.left,(e=>{const{extra:s}=e;if(wo(s)){const n=Us(s.assignment.section,s.assignment);n?.buildAssignment&&(e.name=H(e.name),(t||=[]).push(Sr.types.identifier(e.name)),(r||=[]).push(n.buildAssignment(s.section,Sr.types.identifier(e.name))))}})),t&&r){const s=H("result");return Sr.types.callExpression(Sr.types.arrowFunctionExpression([Sr.types.identifier(s),...t],Sr.types.sequenceExpression([Sr.types.assignmentExpression("=",e.left,Sr.types.identifier(s)),...r,Sr.types.identifier(s)])),[e.right])}break}}}}var dn=new WeakMap;function fn(e){switch(e.type){case"ClassMethod":{const t=mn(e);return t&&Sr.types.classProperty(e.key,t)}case"ClassPrivateMethod":{const t=mn(e);return t&&Sr.types.classPrivateProperty(e.key,t)}case"ObjectMethod":{const t=mn(e);return t&&Sr.types.objectProperty(e.key,t)}case"ArrowFunctionExpression":case"FunctionExpression":return mn(e);case"FunctionDeclaration":{const t=mn(e);if(t)return Sr.types.variableDeclaration("const",[Sr.types.variableDeclarator(e.id,t)]);break}}}function mn(e){const{extra:t}=e;if(Ao(t)){const r=t.name,s=t.referencesScope,n=t.referencedBindingsInFunction;let o=dn.get((0,kr.getProgram)().node);return o||dn.set((0,kr.getProgram)().node,o=[]),o.push({id:r,node:e,registerId:t.registerId,section:t.section,referencesScope:s,referencedBindings:n}),s||n?Sr.types.callExpression(Sr.types.identifier(r),[yn]):Sr.types.identifier(r)}}var yn,gn={translate:{exit(e){ns(e);const t=or(e),{walks:r,writes:s,setup:n}=ms(t),o=e.node.extra.domExports,a=vr.types.identifier(o.template),i=vr.types.identifier(o.walks),c=vr.types.identifier(o.setup),l=e.node.params[0].extra?.binding,p=l&&Ce(l)?_s(l):void 0,u=function(e){const{filename:t}=e.opts,r=e.markoOpts.fileSystem,s=function(e){const t=e.lastIndexOf(wr.default.sep)+1,r=e.indexOf(".",t);if(-1===r)return e.slice(t);const s=e.lastIndexOf("."),n=r-1;if("]"===e[n]){const o=e.lastIndexOf("[",n);if(o>t)return e.slice(t,o)+e.slice(r,s)}return e.slice(t,s)}(t),n=new RegExp(`^(${o=s,o.replace(Ar,"\\$&")}\\.${"index"===s?"|":""})style\\.\\w+$`);var o;for(const e of r.readdirSync(wr.default.dirname(t)).sort())if(n.test(e))return`./${e}`}(e.hub.file);u&&(0,xr.importDefault)(e.hub.file,u),function(e){const{sections:t}=(0,At.getProgram)().node.extra;for(let r=t.length;r--;)e(t[r])}((r=>{if(r!==t){const t=r.params&&_s(r.params),{walks:o,writes:a,setup:i}=ms(r),c=vr.types.identifier(r.name),l=r.referencedClosures?Array.isArray(r.referencedClosures)?vr.types.arrowFunctionExpression([yn],Ss((n=e=>{const t=Us(r,e);return vr.types.expressionStatement(vr.types.callExpression(gr(r,e)?t.identifier:vr.types.memberExpression(t.identifier,vr.types.identifier(ae().Owner)),[yn]))},(s=r.referencedClosures)?Array.isArray(s)?s.map(n):[n(s)]:[]))):Us(r,r.referencedClosures).identifier:void 0,p=cr(r)?ht("createRenderer",...Js([a,o,i,t?.identifier,l])):ht(mr(r)?"registerContent":"createContent",vr.types.stringLiteral(Qs(r,"renderer")),...Js([a,o,i,t?.identifier,l,r.hoisted||r.isHoistThrough?po(r):void 0]));rn(r),e.node.body.push(vr.types.variableDeclaration("const",[vr.types.variableDeclarator(c,p)]))}var s,n})),rn(t),function(){const e=dn.get((0,kr.getProgram)().node),t=[];if(e){for(const r of e){let e;const s=r.referencedBindings?r.referencesScope?[yn,Sr.types.assignmentPattern(wn(r.section,r.referencedBindings),yn)]:[wn(r.section,r.referencedBindings)]:r.referencesScope?[yn]:void 0;e=s?Sr.types.functionDeclaration(Sr.types.identifier(r.id),s,Sr.types.blockStatement(sn(r.node))):"FunctionDeclaration"===r.node.type&&r.node.id?.name===r.id?r.node:Sr.types.functionDeclaration(Sr.types.identifier(r.id),r.node.params,"BlockStatement"===r.node.body.type?r.node.body:Sr.types.blockStatement([Sr.types.returnStatement(r.node.body)]),r.node.generator,r.node.async),t.push(e)}for(const r of e)t.push(Sr.types.expressionStatement(ht("register",Sr.types.stringLiteral(r.registerId),Sr.types.identifier(r.id))));(0,kr.getProgram)().node.body.push(...t)}}(),n||e.node.body.unshift(vr.types.exportNamedDeclaration(vr.types.variableDeclaration("const",[vr.types.variableDeclarator(c,vr.types.arrowFunctionExpression([],vr.types.blockStatement([])))]))),e.node.body.unshift(vr.types.exportNamedDeclaration(vr.types.variableDeclaration("const",[vr.types.variableDeclarator(a,s||vr.types.stringLiteral(""))])),vr.types.exportNamedDeclaration(vr.types.variableDeclaration("const",[vr.types.variableDeclarator(i,r||vr.types.stringLiteral(""))]))),e.node.body.push(vr.types.exportDefaultDeclaration(ht("createTemplate",vr.types.stringLiteral(e.hub.file.metadata.marko.id),a,i,c,p?.identifier)))}}};function bn(e){return e===yn}var hn={migrate:{enter(e){e.node.params=[Ee.types.identifier("input")]},exit(e){e.scope.crawl()}},analyze:{enter(e){sr(e),Ln(e,2);const t=e.node.extra??={},r=e.node.params[0].extra?.binding;r&&(r.nullable=!1),t.domExports={template:H("template"),walks:H("walks"),setup:H("setup"),input:void 0};for(const r of e.get("body"))if(Re(r,"return")){const{value:e}=Oe(r.node);e&&(t.returnValueExpr=e.extra??={});break}},exit(e){!function(){const e=Mn(),t=Qn(),r=eo(),s=Rn();if(s.size)for(const[e,r]of s){const s=e.extra;let n=t.get(s),{isEffect:o}=s;for(const e of r){const r=e?.extra;if(xo(r)){o||=r.isEffect;const e=t.get(r);e&&(n=ye(n,e),t.delete(r))}}t.set(s,n),s.isEffect=o}const n=new Map;for(const[e,r]of t)xo(e)&&(e.referencedBindings=mo(e,r,n),be(e.referencedBindings,(t=>{t.downstreamExpressions.add(e)})));for(const[e,t]of r)e.referencedBindingsInFunction=mo(e,t,n),be(e.referencedBindingsInFunction,(e=>It(e.section,e)));for(const t of e)0===t.type||t.upstreamAlias||fo(e,t);for(const t of e){const{name:e,section:r}=t;0!==t.type&&(Hn(t),t.hoists.size&&It(t.section,t),be(t.assignmentSections,(e=>Mt(e,r,ae().Owner))),he(r.bindings,(({name:e})=>e===t.name))&&(t.name=H(e))),r.bindings=Yn.add(r.bindings,t);for(const{referencedBindings:e,isEffect:r,section:s}of t.downstreamExpressions){if(s!==t.section){const e=ro(t);e.closureSections=rr.add(e.closureSections,s),s.referencedClosures=Yn.add(s.referencedClosures,t),Ct(s,e.section,!!r||e.sources,ae().Owner)}r&&be(e,(e=>It(e.section,e)))}}let o;ur((e=>{e.isHoistThrough&&jt(e),be(e.referencedHoists,(t=>{Mt(e,t.section,ae().Owner)})),e.parent&&e.isBranch&&e.sectionAccessor&&e.upstreamExpression&&(function(e,t,r){if(t)if(r)!function(e,t,r){const s=e.serializeReasons.get(t);if(!0!==s)if(!0===r)Pt(e,t);else{const n=qt(r);n&&Jt(e,t,Gt(s,n))}}(e,zt(e,r),t);else{const r=e.serializeReason;if(!0!==r)if(!0===t)jt(e);else{const s=qt(t);s&&Ht(e,Gt(r,s))}}}(e,!(!e.isHoistThrough&&!e.hoisted)||function(e){if(e.isBranch)return ge(e.referencedClosures,(t=>yr(e,t)))}(e),Tn),function(e,t,r){if(t)if(r)Bt(e,zt(e,r),t);else if(!0!==e.serializeReason)if(!0===t)jt(e);else{const r=St.get(e);St.set(e,r?ye(r,t):t)}}(e,e.upstreamExpression,Tn),Ot(e.parent,e.sectionAccessor.binding,e.upstreamExpression))})),ur(_t),ur((e=>{const t=n.get(e);if(t)for(const r of t){const t=r.length;for(let s=0;s<t-1;s++)for(let n=s+1;n<t;n++){const t=r[s],o=r[n];Lt(e,t)||go(t,o)||(br(e,t.section)||Ct(e,t.section,Gt(t.sources,o.sources),ae().Owner),Nt(t.section,t,o.sources)),Lt(e,o)||go(o,t)||(br(e,o.section)||Ct(e,o.section,Gt(t.sources,o.sources),ae().Owner),Nt(o.section,o,t.sources))}}be(e.referencedClosures,(t=>{if(!Lt(t.section,t)){const r=t.section;let s,n=e;for(;n!==r;){const e=!n.upstreamExpression||Vt(n.upstreamExpression);if(!0===e){s=!0;break}s=Gt(s,e),n=n.parent}Nt(t.section,t,s)}t.sources&&$t(t.section,Dt(t.section,t)),t.sources&&gr(e,t)&&(Nt(t.section,t,t.sources,oe().ClosureScopes),Nt(e,t,t.sources,oe().ClosureSignalIndex))}))})),ur((e=>{!function(e){let t=e.serializeReason;if(!0!==t){for(const[,r]of e.serializeReasons){if(!0===r){t=!0;break}t=Gt(t,r)}t&&Ht(e,t)}}(e),e.serializeReason&&!0!==e.serializeReason&&e.serializeReason.input&&(o=o?Ae(zn,o,e.serializeReason.input):[e.serializeReason.input]);for(const[,t]of e.serializeReasons)!0!==t&&t.input&&(o=o?Ae(zn,o,t.input):[t.input])}));const a=(0,j.getProgram)().node.extra;if(a.returnValueExpr){const e=Vt(a.returnValueExpr);e&&(a.returnSerializeReason=!!e.state||e.input)}a.inputSerializeReasons=o,ur((e=>{let t=0;const r=n.get(e)||[],{id:s,bindings:o}=e,a=({section:e})=>e.id===s;let i,c=0;for(be(ge(o,a),((s,n)=>{for(s.id=(c=n)+t;t<r.length&&(i=r[t]).filter(a).at(-1)===s;)Vn.set(i,{id:n+ ++t,scopeOffset:_n(i,e)})}));t<r.length;)i=r[t],Vn.set(i,{id:c+ ++t,scopeOffset:_n(i,e)})})),s.clear(),t.clear(),r.clear()}();const t=e.node.extra,r=e.node.params[0].extra?.binding;r&&Ce(r)&&(t.domExports.input=xn(r,e))}},translate:{enter(e){if(yn=re()?J("scope"):null,re()&&J("clean"),"hydrate"===se().output){const t=e.hub.file,r=new Set([(0,Te.resolveRelativePath)(t,t.opts.filename)]);return Le.visit(t,t,(function e(s){if(!r.has(s)){r.add(s);const n=(0,Te.loadFileForImport)(t,s);n&&Le.visit(n,t,(r=>e(function(e,t,r){return t===e?(0,Te.resolveRelativePath)(t,r):(0,Te.resolveRelativePath)(e,"."===r[0]?Me.default.join(t.opts.filename,"..",r):r)}(t,n,r))))}})),e.node.body=Le.build(t),void e.skip()}},exit(e){if(te()?Vr.translate.exit(e):gn.translate.exit(e),e.node.extra?.needsCompat){const t=xt(),r=[void 0];for(const s of e.node.body)"ImportDeclaration"===s.type&&s.source.value===t?r[0]=s:r.push(s);r[0]??=Ee.types.importDeclaration([],Ee.types.stringLiteral(t)),e.node.body=r}}}};function vn(e,t){const r=we(zn,e,t);if(-1===r)throw new Error("Unable to resolve serialize reason against input");return r}function xn(e,t){const r={id:e.export??=H(e.name),binding:e,props:void 0};if(!e.aliases.size&&!e.downstreamExpressions.size){r.props={};for(const[s,n]of e.propertyAliases)r.props[s]=xn(n,t)}return r}function wn(e,t){const r=e.depth,s=ke.types.objectPattern([]);let n;return be(t,(t=>{const o=t.name;if(!dt(o))return;const a=oo(t),i=a===o;let c=s;if(t.section!==e){n||(n=[s]);const e=r-t.section.depth;let o=n.length,a=n[o-1];for(;o<=e;o++){const e=ke.types.objectPattern([]);a.properties.push(ke.types.objectProperty(ke.types.identifier(ae().Owner),e)),n.push(e),a=e}c=n[e]}c.properties.push(ke.types.objectProperty(ft(a),ke.types.identifier(o),!1,i))})),s}function An(e,t){let r=yn??ke.types.identifier("undefined");const s=e.depth-t.depth;for(let e=0;e<s;e++)r=ke.types.memberExpression(r,ke.types.identifier(ae().Owner));if(s<0)throw new Error("Unable to find scope for reference.");return r}function Sn(e,t){const r=ft(oo(t));return ke.types.memberExpression(An(e,t.section),r,"Identifier"!==r.type)}function kn(e,t){return e.start=t.start,e.loc=t.loc,e.end=t.end,e}var En=Symbol("hoist is invoked"),Tn=Symbol("branch serialize reason"),[Mn]=Kt((()=>new Set)),[Cn,jn]=Kt((()=>0));function In(e,t,r,s,n,o=null,a=!1){const i=Cn(),c={id:i,name:e,type:t,loc:o,section:r,property:n,declared:a,closureSections:void 0,assignmentSections:void 0,excludeProperties:void 0,sources:void 0,aliases:new Set,hoists:new Map,propertyAliases:new Map,upstreamAlias:s,downstreamExpressions:new Set,scopeOffset:void 0,export:void 0,nullable:!0};if(n){a&&(s.nullable=!1);const e=s.propertyAliases.get(n);e?(c.property=void 0,c.upstreamAlias=e,e.aliases.add(c)):s.propertyAliases.set(n,c)}else s&&s.aliases.add(c);return jn(i+1),Mn().add(c),c}function Pn(e,t,r){const s=e.node.var;if(s){const n=ro(r);return n?(Nn(s,n.type,e.scope,n.section,n,void 0),n):(Nn(s,t,e.scope,nr(e),void 0,void 0),s.extra?.binding)}}function Ln(e,t,r){const s=e.node.params;if(e.node.body.length&&s.length){const n=ro(r);let o;n?(o=n.section,t=n.type):o=nr(e);const a=n||((e.node.extra??={}).binding=In(H("params"),t,o,void 0,void 0));o.params=a;for(let r=0;r<s.length;r++)Nn(s[r],t,e.scope,o,a,r+"");return a}}function On(e,t){const r=t.section,s=nr(e),n=function(e,t){let r=e;for(t.depth<e.depth&&(r=t,t=e);r;){if(t===r||!t.parent)return r;(t=t.parent).depth<r.depth&&(r=r.parent)}throw new Error("No common section")}(s,r),o=e.node.extra??={};let a=t.hoists.get(n);if(!a){t.hoists.set(n,a=In(H("hoisted_"+e.node.name),5,n,void 0,void 0,t.loc,!0)),r.hoisted=Yn.add(r.hoisted,t);let s=r.parent;for(;s&&s!==n;)s.isHoistThrough=!0,s=s.parent}de(e)?(o.read=bo(a,void 0),o.section=s,o[En]=!0):Fn(e,a),s.referencedHoists=Yn.add(s.referencedHoists,a)}function Bn(e,t){const r=nr(e);$n(e),N(e.node,(e=>{if(e.name===t.name){const s=e.extra??={};t.assignmentSections=rr.add(t.assignmentSections,r),s.assignment=t,s.section=r}}))}function $n(e){const t=le(e);t&&((t.node.extra??={}).referencesScope=!0)}function Nn(e,t,r,s,n,o){switch(e.type){case"Identifier":!function(e,t){const{referencePaths:r,constantViolations:s}=e;for(const e of r){const r=nr(e);br(t.section,r)?Fn(e,t):On(e,t)}for(const e of s)if(e.isUpdateExpression())Bn(e.get("argument"),t);else if(e.isAssignmentExpression()&&(Bn(e.get("left"),t),"="!==e.node.operator)){const r=e.get("left");r.isIdentifier()&&Fn(r,t)}}(r.getBinding(e.name),(e.extra??={}).binding=In(e.name,t,s,n,o,e.loc,!0));break;case"ObjectPattern":{const a=(o?n.propertyAliases.get(o):n)||((e.extra??={}).binding=In(H(o||"pattern"),t,s,n,o,e.loc));for(const n of e.properties)if("RestElement"===n.type)Nn(n.argument,t,r,s,a,o);else{let e;if("Identifier"===n.key.type)e=n.key.name;else{if("StringLiteral"!==n.key.type)throw new Error("computed keys not supported in object pattern");e=n.key.value}Nn(n.value,t,r,s,a,e)}break}case"ArrayPattern":{const a=(o?n.propertyAliases.get(o):n)||((e.extra??={}).binding=In(H(o||"pattern"),t,s,n,o,e.loc));let i=-1;for(const n of e.elements)i++,n&&("RestElement"===n.type?Nn(n.argument,t,r,s,a,o):Nn(n,t,r,s,a,`${i}`));break}case"AssignmentPattern":Nn(e.left,t,r,s,n,o)}}function Fn(e,t){let r=e,s=t,n=t.name;for(;;){const{parent:e}=r;if(!C.types.isMemberExpression(e))break;const t=ho(e);if(void 0===t)break;if(s.propertyAliases.has(t))r=r.parentPath,s=s.propertyAliases.get(t),n=s.name;else{if(de(r.parentPath)&&!vo(t))break;r=r.parentPath,s=In(n+=`_${t.replace(/[^a-zA-Z0-9_$]/g,"_")}`,s.type,s.section,s,t)}}const o=le(r),a=ce(o||r),{section:i}=function(e,t,r){const s=e.node.extra??={},n=Qn();return s.section=nr(e),n.set(s,me(n.get(s),{binding:t,node:r})),s}(a,s,r.node);if(o){const e=eo(),t=o.node.extra??={};t.section=i,e.set(t,me(e.get(t),{binding:s,node:r.node}))}}var[Rn]=Kt((()=>new Map));function Dn(e,t,r){const s=t.extra??={};return s.section=e,Rn().set(t,r),s}function zn(e,t){return e===t?0:e?t?Array.isArray(e)?Array.isArray(t)?Un(e,t):-1:Array.isArray(t)?1:Yn.compare(e,t):1:t?-1:0}function Un(e,t){const r=e.length,s=r-t.length;if(0!==s)return s;for(let s=0;s<r;s++){const r=Yn.compare(e[s],t[s]);if(0!==r)return r}return 0}function _n(e,t){let r;for(const s of e)if(s.section===t&&s.sources){const e=e=>{e.scopeOffset&&(!r||r.id<e.scopeOffset.id)&&(r=e.scopeOffset)};be(s.sources.state,e),be(s.sources.input,e)}return r}var Vn=new WeakMap;function Wn(e,t){Gn.set(e,t||!1)}var qn=new WeakSet,Gn=new WeakMap;function Hn(e){if(!qn.has(e)){switch(qn.add(e),e.type){case 1:return void(e.sources=Zn(e,void 0));case 2:return void(e.sources=Zn(void 0,e))}if(e.upstreamAlias){let t,r=e;for(;t=r.upstreamAlias;)r=t;qn.has(r)||(qn.add(r),Jn(r)),e.sources=r.sources}else Jn(e)}}function Jn(e){const t=Gn.get(e);if(Gn.delete(e),void 0===t||!0===t)e.sources=Zn(e,void 0);else if(t){const r=new Set;be(t,(t=>{xo(t)&&be(t.referencedBindings,(t=>{r.has(t)||(r.add(t),Hn(t),e.sources=Xn(e.sources,t.sources))}))}))}}function Zn(e,t){if(!e&&!t)throw new Error("Cannot create a serialize reason that does not reference state or input.");return{state:e,input:t}}function Kn(e,t){let r=0;if(e.input){if(!t.input)return 1;if(r=zn(e.input,t.input))return r}else if(t.input)return-1;if(e.state){if(!t.state)return 1;if(r=zn(e.state,t.state))return r}else if(t.state)return-1;return 0}function Xn(e,t){return e?t?e.state===t.state&&e.input===t.input?e:Zn(Yn.union(e.state,t.state),Yn.union(e.input,t.input)):e:t}var Yn=new fe((function(e,t){return e===t?0:(e.section.id-t.section.id||e.type!==t.type&&(0===e.type||0===t.type))&&e.type-t.type||e.id-t.id})),[Qn]=Kt((()=>new Map)),[eo]=Kt((()=>new Map));function to(e){if(Array.isArray(e))for(const t of e)(t.extra??={}).pruned=!0;else(e.extra??={}).pruned=!0}function ro(e){return e&&(e.property?e:e.upstreamAlias||e)}function so(e,t=[]){if(e.arguments)for(const r of e.arguments)t.push(r);for(const r of e.attributes)t.push(r.value);for(const r of e.body.attributeTags?e.body.body:e.attributeTags)switch(r.type){case"MarkoTag":so(r,t);break;case"MarkoScriptlet":for(const e of r.body)t.push(e)}return t}function no(e,t){const r=ro(e);return ne()?C.types.numericLiteral(r.id):C.types.stringLiteral(r.name+(t||0===r.type?`/${r.id}`:""))}function oo(e,t){const r=ro(e);return ne()?r.id+"":r.name+(t||0===r.type?`/${r.id}`:"")}function ao(e){let t=e,r="";for(;!t.loc&&!t.declared&&t.upstreamAlias;)void 0!==t.property&&(r=B(t.property)+r),t=t.upstreamAlias;return{root:t,access:r}}function io(e){const{root:t,access:r}=ao(e);return t.name+r}function co(e){let t=e,r="";for(;t.upstreamAlias!==t.section.params;)void 0!==t.property&&(r=B(t.property)+r),t=t.upstreamAlias;return t.name+r}function lo(e){return e.sectionAccessor?e.sectionAccessor.prefix+oo(e.sectionAccessor.binding):oe().ClosureScopes+e.id}function po(e){const t=lo(e);return t?"number"==typeof t?C.types.numericLiteral(t):C.types.stringLiteral(t):void 0}function uo(e){const{extra:t}=e;if(!t)return;let r,{binding:s,read:n}=t;if(n&&(void 0===n.props?(s=n.binding,n=void 0):s=void 0),s)"Identifier"===e.type?5===s.type?r=e.extra?.[En]?C.types.callExpression(Ds(s),[An(e.extra.section,s.section)]):C.types.identifier(oo(s)):s.name!==e.name&&(e.name=s.name):r=C.types.identifier(s.name);else if(n&&(r=yt(C.types.identifier(n.binding.name),Array.isArray(n.props)?n.props[0]:n.props),Array.isArray(n.props)))for(let e=1;e<n.props.length;e++)r=yt(r,n.props[e]);return r&&kn(r,e)}function fo(e,t){let r=!t.downstreamExpressions.size;t.hoists.size&&(r=!1);for(const s of t.aliases)fo(e,s)?t.aliases.delete(s):r=!1;for(const[s,n]of t.propertyAliases)fo(e,n)?t.propertyAliases.delete(s):r=!1;return r&&e.delete(t),r}function mo(e,t,r){let s;if(Array.isArray(t))for(const e of t){let{binding:r}=e;if(e.node){const s=(e.node.extra??={}).read??=yo(t,r,void 0);({binding:r}=(e.node.extra??={}).read=s)}s=Yn.add(s,r)}else t&&(t.node&&((t.node.extra??={}).read=bo(t.binding,void 0)),s=t.binding);if(Array.isArray(s)){const t=r.get(e.section)||[],n=xe(Un,t,s);n?s=n:r.set(e.section,Ae(Un,t,s))}return s}function yo(e,t,r){const{upstreamAlias:s}=t;if(s&&Array.isArray(e)){const o=(n=t).property??n.upstreamAlias?.property,a=void 0===o?r:me(r,o);for(const{binding:r}of e)if(r!==t){let t=s;for(;t;){if(r===t)return yo(e,t,a);t=t.upstreamAlias}}}var n;return bo(t,r)}function go(e,t){return!t.sources||!!e.sources&&Yn.isSuperset(e.sources.state,t.sources.state)&&Yn.isSuperset(e.sources.input,t.sources.input)}function bo(e,t){return{binding:e,props:t}}function ho(e){switch(e.property.type){case"StringLiteral":return e.property.value;case"NumericLiteral":return""+e.property.value;case"Identifier":if(e.computed)return;return e.property.name}}function vo(e){return/^on[-A-Z][a-zA-Z0-9_$]|[a-zA-Z_$][a-zA-Z0-9_$]*Change$/.test(e)}function xo(e){return!(!e||e.pruned||!e.section)}function wo(e){return xo(e)&&void 0!==e.assignment}function Ao(e){return xo(e)&&void 0!==e.registerId}var So=Symbol("await tag dom binding"),ko={analyze(e){(0,A.assertNoVar)(e),(0,A.assertNoArgs)(e),g(e),(0,A.assertNoAttributeTags)(e);const{node:t}=e,r=e.get("body"),s=nr(e),[n]=t.attributes;if((e.node.extra??={})[So]=In("#text",0,s),!n)throw e.get("name").buildCodeFrameError("The `await` tag requires a value.");if(t.attributes.length>1||!w.types.isMarkoAttribute(n)||"value"!==n.name)throw e.get("name").buildCodeFrameError("The `await` tag only supports the `value` attribute.");if(!t.body.body.length)throw e.get("name").buildCodeFrameError("The `await` tag requires body content.");if(t.body.params.length&&(t.body.params.length>1||w.types.isSpreadElement(t.body.params[0])))throw e.get("name").buildCodeFrameError("The `await` tag only supports a single parameter.");const o=sr(r),a=T(n.value);nr(e);const i=Ln(r,3);i&&Wn(i,a),o.upstreamExpression=n.value.extra},translate:Or({html:{enter(e){const t=or(e.get("body"));t?(lr(t,!0),ds(e)):e.remove()},exit(e){const{node:t}=e,[r]=t.attributes,s=t.extra[So],n=e.get("body"),o=ar(e),a=or(n);fs(e),on(n),e.replaceWith(w.types.expressionStatement(ht("fork",ir(o),no(s),r.value,w.types.arrowFunctionExpression(t.body.params,Ss(t.body.body)),Ur(a&&Rt(a),!0))))[0].skip()}},dom:{enter(e){const t=or(e.get("body"));t?(lr(t,!0),ns(e,37),ss(e)):e.remove()},exit(e){const{node:t}=e,r=t.extra[So],s=ar(e),n=or(e.get("body")),o=Us(s,r,"await");o.build=()=>ht("awaitTag",no(r),w.types.identifier(n.name)),Ys(s,n.upstreamExpression?.referencedBindings,o,e.node.attributes[0].value),e.remove()}}}),attributes:{},autocomplete:[{description:"Use to consume asynchronous an data.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#await"}],types:f.name+"/tag-types/await.d.marko"},Eo=r("../../browser-shims/compiler/index.js"),To=r("../../browser-shims/compiler/babel-utils.js"),Mo={parse(e){const{node:t,hub:{file:r}}=e,s=t.rawValue,n=s.replace(/^client\s*/,"").trim(),o=t.name.start+(s.length-n.length);let a=(0,To.parseStatements)(r,n,o,o+n.length);1===a.length&&Eo.types.isBlockStatement(a[0])&&(a=a[0].body),e.replaceWith(Eo.types.markoScriptlet(a,!0,"client"))},parseOptions:{statement:!0,rawOpenTag:!0},autocomplete:[{displayText:"client <statement>",description:"A JavaScript statement which is only evaluated once your template is loaded on the client.",descriptionMoreURL:"https://markojs.com/docs/syntax/#client-javascript"}]},Co=r("../../browser-shims/compiler/index.js"),jo=r("../../browser-shims/compiler/babel-utils.js"),Io=r("../../browser-shims/compiler/index.js");function Po(e,t,r="const"){const{node:{var:s}}=e;s&&e.insertBefore(Io.types.variableDeclaration(r,[Io.types.variableDeclarator(s,t)]))}var Lo={analyze(e){(0,jo.assertNoArgs)(e),(0,jo.assertNoParams)(e),b(e);const{node:t}=e,[r]=t.attributes;if(!t.var)throw e.get("name").buildCodeFrameError("The `const` tag requires a tag variable.");if(!r)throw e.get("name").buildCodeFrameError("The `const` tag requires a value.");if(t.attributes.length>1||!Co.types.isMarkoAttribute(r)||!r.default&&"value"!==r.name)throw e.get("name").buildCodeFrameError("The `const` tag only supports the `value` attribute.");const s=T(r.value),n=Co.types.isIdentifier(r.value)?e.scope.getBinding(r.value.name)?.identifier.extra?.binding:void 0;n&&(s.pruned=!0);const o=Pn(e,4,n);o&&(s.nullable||(o.nullable=!1),Wn(o,s))},translate:{exit(e){const{node:t}=e,[r]=t.attributes,{value:s}=r;if(re()){const r=ar(e),n=t.var.extra?.binding;if(n&&!n.upstreamAlias){const e=_s(n);Ys(r,s.extra?.referencedBindings,e,s)}}else Po(e,s);e.remove()}},parseOptions:{openTagOnly:!0},attributes:{},autocomplete:[{description:"Use to create an constant binding.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#const"}],types:f.name+"/tag-types/const.d.marko"},Oo=r("../../browser-shims/compiler/index.js"),Bo=r("../../browser-shims/compiler/babel-utils.js"),$o={analyze(e){const[t]=e.node.attributes;if((0,Bo.assertNoVar)(e),(0,Bo.assertNoArgs)(e),(0,Bo.assertNoParams)(e),b(e),e.node.attributes.length>1||1===e.node.attributes.length&&(!Oo.types.isMarkoAttribute(t)||!t.default&&"value"!==t.name))throw e.get("name").buildCodeFrameError("The `debug` tag only supports the `value` attribute.")},translate:{exit(e){const t=ar(e),[r]=e.node.attributes,s=r?.value.extra?.referencedBindings,n=kn(Oo.types.debuggerStatement(),e.node);te()?e.insertBefore(n):Zs("render",t,s,n),e.remove()}},parseOptions:{openTagOnly:!0},attributes:{},autocomplete:[{description:"Debug on value change.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#debug"}],types:f.name+"/tag-types/debug.d.marko"},No=(r("../../browser-shims/compiler/index.js"),r("../../browser-shims/compiler/babel-utils.js")),Fo=r("../../browser-shims/compiler/index.js"),Ro=r("../../browser-shims/compiler/babel-utils.js"),Do=new WeakMap;function zo(e){let t=Do.get(e);return t||(t=H(e.name),Do.set(e,t)),Fo.types.identifier(t)}function Uo(e){if(e.node.extra?.attributeTags)return e.node.extra.attributeTags;const t=e.node.body.attributeTags?e.get("body").get("body"):e.get("attributeTags");if(!t.length)return;const r=(e.node.extra??={}).attributeTags={},s={},n=new Map;for(const e of t)if(e.isMarkoTag())if((0,Ro.isAttributeTag)(e)){const t=$e(e);r[t]||=_o(t,[t]),(s[t]||=[]).push(e),Uo(e)}else{const t=(0,Ro.isLoopTag)(e);let o;for(const a of Vo(e,s)){const s=r[a];if(s)if(o){if(o!==s.group)for(const e of s.group)r[e].group=o,o.push(e)}else o=s.group;let i=r[a];i||(i=r[a]=_o(a,[]),o=i.group,o.push(a)),i.dynamic=!0,t&&(i.repeated=!0),n.set(e,a)}}for(const[e,t]of n)(e.node.extra??={}).attributeTagGroup=r[t].group;for(const e in s){const t=r[e];if(!t.repeated){const r=s[e];r.length>1&&(t.repeated=!t.dynamic||Wo(r))}}return r}function _o(e,t){return{name:e.slice(1),dynamic:!1,repeated:!1,group:t}}function Vo(e,t,r=new Set){const s=e.node.body.attributeTags?e.get("body").get("body"):e.get("attributeTags");for(const e of s)if(e.isMarkoTag())if((0,Ro.isAttributeTag)(e)){const s=$e(e);r.add(s),(t[s]||=[]).push(e),Uo(e)}else Vo(e,t,r);return r}function Wo(e){let t;const r=new Set;for(const s of e){const e=Mr(s);if(r.has(e)||!De(e))return!0;const n=qo(e);if(n&&n!==(t||=n))return!0;r.add(e)}return!1}function qo(e){if("if"===$e(e))return e;let t=e.getPrevSibling();for(;t.node;){if(t.isMarkoTag()&&"if"===$e(t))return t;t=t.getPrevSibling()}}var Go=r("../../browser-shims/compiler/index.js"),Ho=r("../../browser-shims/compiler/babel-utils.js"),Jo=r("../../browser-shims/compiler/index.js"),Zo=r("../../browser-shims/compiler/babel-utils.js"),Ko=(r("../../browser-shims/compiler/index.js"),r("../../browser-shims/compiler/babel-utils.js")),Xo=r("../../browser-shims/compiler/index.js"),Yo=r("../../browser-shims/compiler/babel-utils.js"),Qo=Symbol("native tag binding"),ea=Symbol("skip native tag mark"),ta=Symbol("node getter id"),ra=new WeakMap,sa={transform:{enter(e){if("textarea"===$e(e)&&e.node.body.body.length){const t=[];for(const r of e.node.body.body){if(!("MarkoText"===r.type||"MarkoPlaceholder"===r.type&&r.escape))throw e.hub.file.hub.buildError(r,"Unexpected content in textarea, only text and placeholders are supported.",SyntaxError);t.push(r.value)}e.node.attributes.push(Xo.types.markoAttribute("value",Jr(t)||la())),e.node.body.body=[]}}},analyze:{enter(e){(0,Yo.assertNoArgs)(e),(0,Yo.assertNoParams)(e),(0,Yo.assertNoAttributeTags)(e);const{node:t}=e;if(t.var&&!Xo.types.isIdentifier(t.var))throw e.get("var").buildCodeFrameError("Tag variables on native elements cannot be destructured.");const r=$e(e),s={},{attributes:n}=e.node;let o,a,i,c=!1,l=!1;for(let e=n.length;e--;){const t=n[e],u=t.value.extra??={};if(Xo.types.isMarkoAttribute(t)){if(s[t.name]){to(t.value);continue}s[t.name]=t,qe(t.name)||(p=t.name,/^(?:value|checked(?:Value)?|open)Change/.test(p))?(u.isEffect=!0,l=!0):T(t.value).confident||(c=!0)}else Xo.types.isMarkoSpreadAttribute(t)&&(u.isEffect=!0,l=!0,c=!0);a?a.push(t.value):Xo.types.isMarkoSpreadAttribute(t)?(a=[t.value],o=na(r,s)):i=me(i,u)}var p;if(function(e,t){const r=[t.open||t.openChange,t.checked||t.checkedChange,t.checkedValue||t.checkedValueChange,t.valueChange].filter(Boolean);if(r.length>1)throw e.get("name").buildCodeFrameError(`The attributes ${r.map((e=>`"${e.name}"`)).join(", ")} are mutually exclusive.`)}(e,s),t.var||l||c){const n=t.extra??={},c=nr(e),p=n[Qo]=In("#"+("StringLiteral"===t.name.type?t.name.value:Xo.types.toIdentifier(e.get("name"))),0,c);if((0,Yo.getProgram)().node.extra.isInteractive||=l,a){if(o&&!o.attrs.every(Boolean)){for(const e of o.attrs)e&&a.push(e.value);o=void 0}Dn(c,e.node,a)}else o=na(r,s);if(o&&Dn(c,o.attrs.find(Boolean).value,o.attrs.map((e=>e?.value))),(l||a)&&It(c,p),t.var){It(c,p);for(const r of e.scope.getBinding(t.var.name).referencePaths){const e=nr(r);$n(r),br(c,e)?(Mt(e,c,ae().Owner),n[ta]||de(r)||(n[ta]=tn(c,p.name))):On(r,p)}}Ot(c,p,me(i,n))}}},translate:Or({html:{enter(e){const t=$e(e),r=e.node.extra,s=r[Qo],n=(0,Yo.getTagDef)(e),o=ps(e),a=ar(e);if(r.tagNameNullable&&ds(e),e.node.var){const t=r[ta];Po(e,ht("nodeRef",t&&ir(a),t&&Xo.types.stringLiteral(t)))}const i=s&&no(s);o`<${e.node.name}`;const c=oa(t,e.node),{staticAttrs:l,staticControllable:p,skipExpression:u}=c;let d,{spreadExpression:f}=c;if(p){const{helper:e,attrs:r}=p;if("select"!==t&&"textarea"!==t){const t=r.map((e=>e?.value));o`${ht(e,ir(a),i,...t)}`}nn(a,void 0)}if("select"===t){if(p)ra.set(e.node,{value:p.attrs[0]?.value||la(),valueChange:p.attrs[1]?.value||la()});else if(f){const t=J("select_input");e.insertBefore(Xo.types.variableDeclaration("const",[Xo.types.variableDeclarator(t,f)])),ra.set(e.node,{value:Xo.types.memberExpression(t,Xo.types.identifier("value")),valueChange:Xo.types.memberExpression(t,Xo.types.identifier("valueChange"))}),f=t}}else if("textarea"===t){let t,r;if(p)t=p.attrs[0]?.value,r=p.attrs[1]?.value;else if(f){const s=J("textarea_input");e.insertBefore(Xo.types.variableDeclaration("const",[Xo.types.variableDeclarator(s,f)])),t=Xo.types.memberExpression(s,Xo.types.identifier("value")),r=Xo.types.memberExpression(s,Xo.types.identifier("valueChange")),f=s}(t||r)&&(d=ht("controllable_textarea_value",ir(ar(e)),no(s),t,r))}for(const e of l){const{name:r,value:s}=e,{confident:n,computed:i}=s.extra||{},c=s.extra?.referencedBindings;if("option"!==t||"value"!==r)switch(r){case"class":case"style":{const e=`${r}Attr`;n?o`${vt()[e](i)}`:o`${ht(e,s)}`;break}default:n?o`${vt().attr(r,i)}`:qe(r)?nn(a,c):o`${ht("attr",Xo.types.stringLiteral(r),s)}`}else o`${ht("optionValueAttr",s)}`}if(f&&(nn(a,r.referencedBindings),u?o`${ht("partialAttrs",f,u,i,ir(a),e.node.name)}`:o`${ht("attrs",f,i,ir(a),e.node.name)}`),n&&n.parseOptions?.openTagOnly)switch(n.htmlType){case"svg":case"math":o`/>`;break;default:o`>`}else o`>`;r.tagNameNullable&&e.insertBefore(Xo.types.ifStatement(e.node.name,us(e)))[0].skip(),d&&o`${d}`},exit(e){const t=e.node.extra,r=t[Qo],s=(0,Yo.getTagDef)(e)?.parseOptions?.openTagOnly,n=ra.get(e.node),o=$e(e),a=ar(e);t.tagNameNullable&&fs(e),n?(t[ea]||ps(e)`</${e.node.name}>`,fs(e),e.insertBefore(Xo.types.expressionStatement(ht("controllable_select_value",ir(ar(e)),no(r),n.value,n.valueChange,Xo.types.arrowFunctionExpression([],Xo.types.blockStatement(e.node.body.body)))))):e.insertBefore(e.node.body.body).forEach((e=>e.skip()));const i=!t[ea]&&r&&Dt(a,r);t[ea]||s||n||ps(e,!i&&("html"===o||"body"===o))`</${e.node.name}>`,t.tagNameNullable&&e.insertBefore(Xo.types.ifStatement(e.node.name,us(e)))[0].skip(),i&&ys(e,r,i),e.remove()}},dom:{enter(e){const t=$e(e),r=e.node.extra,s=r[Qo],n=(0,Yo.getTagDef)(e),o=ps(e),a=ar(e);if(e.node.var){const t=e.node.var.name,n=e.scope.getBinding(t),o=r[ta];let i;o&&(i=J(`get_${t}`),(0,Yo.getProgram)().node.body.push(Xo.types.variableDeclaration("const",[Xo.types.variableDeclarator(i,ht("nodeRef",Xo.types.stringLiteral(o),Xo.types.stringLiteral(oe().Getter+no(s).value)))])));for(const t of n.referencePaths){const r=ar(t);br(a,r)&&(de(t)?t.parentPath.replaceWith(Xo.types.expressionStatement(Sn(r,s))):i?t.replaceWith(Xo.types.callExpression(i,[An(r,ar(e))])):t.replaceWith(Xo.types.expressionStatement(Xo.types.memberExpression(An(a,r),Xo.types.stringLiteral(oe().Getter+no(s).value),!0))))}}const i=s&&no(s);i&&ns(e,32),o`<${e.node.name}`;const c=oa(t,e.node),{staticAttrs:l,staticControllable:p,skipExpression:u}=c,{spreadExpression:d}=c;if(p){const{helper:e,attrs:t}=p,r=t.find(Boolean),s=r.value.extra?.referencedBindings,n=t.map((e=>e?.value));Zs("render",a,s,Xo.types.expressionStatement(ht(e,yn,i,...n))),Zs("effect",a,void 0,Xo.types.expressionStatement(ht(`${e}_effect`,yn,i)))}for(const e of l){const{name:t,value:r}=e,{confident:s,computed:n}=r.extra||{},c=r.extra?.referencedBindings;switch(t){case"class":case"style":{const e=`${t}Attr`;if(s)o`${vt()[e](n)}`;else{const s=Xo.types.memberExpression(yn,i,!0),n={staticItems:void 0,dynamicItems:void 0,dynamicValues:void 0};let l;if(aa(r,n),n.dynamicItems)l=Xo.types.expressionStatement(ht(e,s,r));else if(n.staticItems&&o`${vt()[e](n.staticItems)}`,n.dynamicValues){const e=Object.keys(n.dynamicValues);if(1===e.length){const[r]=e,o=n.dynamicValues[r];l=Xo.types.expressionStatement(ht(`${t}Item`,s,Xo.types.stringLiteral(r),o))}else{const r=[];for(const t of e){const e=n.dynamicValues[t];r.push(Xo.types.objectProperty(ft(t),e))}l=Xo.types.expressionStatement(ht(`${t}Items`,s,Xo.types.objectExpression(r)))}}l&&Zs("render",a,c,l)}break}default:s?o`${vt().attr(t,n)}`:qe(t)?Zs("effect",a,c,Xo.types.expressionStatement(ht("on",Xo.types.memberExpression(yn,i,!0),Xo.types.stringLiteral(Ge(t)),r))):Zs("render",a,c,Xo.types.expressionStatement(ht("attr",Xo.types.memberExpression(yn,i,!0),Xo.types.stringLiteral(t),r)))}}if(d&&(Zs("render",a,r.referencedBindings,u?Xo.types.expressionStatement(ht("partialAttrs",yn,i,d,u)):Xo.types.expressionStatement(ht("attrs",yn,i,d))),Zs("effect",a,r.referencedBindings,Xo.types.expressionStatement(ht("attrsEvents",yn,i)),!1)),n&&n.parseOptions?.openTagOnly)switch(n.htmlType){case"svg":case"math":o`/>`;break;default:o`>`}else o`>`;ts(e)},exit(e){const t=(0,Yo.getTagDef)(e)?.parseOptions?.openTagOnly;e.insertBefore(e.node.body.body).forEach((e=>e.skip())),t||ps(e)`</${e.node.name}>`,rs(e),e.remove()}}})};function na(e,t){switch(e){case"input":if(t.checked||t.checkedChange)return{special:!1,helper:"controllable_input_checked",attrs:[t.checked,t.checkedChange]};if(t.checkedValue||t.checkedValueChange)return{special:!0,helper:"controllable_input_checkedValue",attrs:[t.checkedValue,t.checkedValueChange,t.value]};if(t.value||t.valueChange)return{special:!1,helper:"controllable_input_value",attrs:[t.value,t.valueChange]};break;case"select":if(t.value||t.valueChange)return{special:!0,helper:"controllable_select_value",attrs:[t.value,t.valueChange]};break;case"textarea":if(t.value||t.valueChange)return{special:!0,helper:"controllable_textarea_value",attrs:[t.value,t.valueChange]};break;case"details":case"dialog":if(t.open||t.openChange)return{special:!1,helper:"controllable_detailsOrDialog_open",attrs:[t.open,t.openChange]}}}function oa(e,t){const r={},{attributes:s}=t,n=new Set;let o,a,i,c,l;for(let t=s.length;t--;){const o=s[t],{value:a}=o;if(Xo.types.isMarkoSpreadAttribute(o)){if(!i&&(i=[],l=na(e,r),l&&!l.attrs.every(Boolean))){for(const e of l.attrs)e&&(i.push(mt(e.name,e.value)),n.delete(e));l=void 0}i.push(Xo.types.spreadElement(a))}else r[o.name]||(r[o.name]=o,i?i.push(mt(o.name,o.value)):n.add(o))}if(i||(l=na(e,r),!1!==l?.special||l.attrs[1]||(l=void 0)),l)for(const e of l.attrs)e&&n.delete(e);const p=[...n].reverse();if(i){if(i.reverse(),l)for(const e of l.attrs)e&&(c||=[]).push(mt(e.name,Xo.types.numericLiteral(1)));for(const{name:e}of p)(c||=[]).push(mt(e,Xo.types.numericLiteral(1)));c&&(a=Xo.types.objectExpression(c)),o=Aa(i)}return{staticAttrs:p,staticControllable:l,spreadExpression:o,skipExpression:a}}function aa(e,t){switch(e.type){case"ObjectExpression":ca(e,t);break;case"ArrayExpression":ia(e,t);break;default:(t.dynamicItems||=[]).push(e)}}function ia(e,t){for(const r of e.elements)if(r)switch(r.type){case"ArrayExpression":ia(r,t);break;case"ObjectExpression":ca(r,t);break;case"SpreadElement":"ArrayExpression"===r.argument.type?ia(r.argument,t):(t.dynamicItems||=[]).push(r);break;default:{const e=T(r);e.confident?(t.staticItems||=[]).push(e.computed):(t.dynamicItems||=[]).push(r);break}}}function ca(e,t){let r,s;for(const n of e.properties){if("ObjectProperty"!==n.type||n.computed){(s||=[]).push(n);continue}let e;if("Identifier"===n.key.type)e=n.key.name;else{const t=T(n.key);if(!t.confident){(s||=[]).push(n);continue}e=t.computed+""}const o=n.value,a=T(o);a.confident?(r||={})[e]=a.computed:(t.dynamicValues||={})[e]=o}r&&(t.staticItems||=[]).push(r),s&&(t.dynamicItems||=[]).push(Xo.types.objectExpression(s))}function la(){return Xo.types.unaryExpression("void",Xo.types.numericLiteral(0))}var pa=Symbol("only child in parent"),ua=Symbol("potential only child node ref");function da(e,t=1){const r=e.node.extra;if(void 0!==r[pa])return r[pa];const s=Mr(e);return r[pa]=!(!s||!(0,Ko.getTagDef)(s)?.html||"StringLiteral"!==s.node.name.type||e.parent.body.length!==t)&&s.node.name.value}function fa(e,t,r=1){if(da(e,r)){const r=Mr(e).node,s=r.name?.value;return(r.extra??={})[Qo]??=In("#"+s,0,t)}return(e.node.extra??={})[ua]??=In("#text",0,t)}var ma={analyze(e){const t=e.node.body.attributeTags;let r;switch((0,Zo.assertNoVar)(e),(0,Zo.assertNoArgs)(e),g(e),ya(e.node)){case"of":r=["of"];break;case"in":r=["in"];break;case"to":r=["to","from","step"];break;default:throw e.buildCodeFrameError("Invalid `for` tag, missing an `of=`, `in=`, `to=` attribute.")}if(t||r.push("by"),(0,Zo.assertAllowedAttributes)(e,r),t)return;const s=e.get("body"),n=sr(s);if(!n)return void to(so(e.node));const o=nr(e),a=fa(e,o),i=Ln(s,3),c=Dn(o,e.node,so(e.node));i&&Wn(i,c),n.sectionAccessor={binding:a,prefix:oe().LoopScopeMap},n.upstreamExpression=c,n.isBranch=!0},translate:Or({html:{enter(e){if(e.node.body.attributeTags)return;const t=or(e.get("body"));t?(lr(t,!0),da(e)||(ns(e,37),ss(e)),ds(e)):e.remove()},exit(e){if(e.node.body.attributeTags)return;const t=e.get("body"),r=ar(e),s=or(t),{node:n}=e,o=da(e),a=fa(e,r),i=Oe(n),c=ya(n),l=n.body.params,p=[],u=n.body.body,d=null===s.content||s.content.singleChild&&4!==s.content.startType,f=Rt(s,Tn),m=Dt(r,a);fs(e),on(t);const y=ba(c,i),g=f?function(e){switch(e){case"of":return"resumeForOf";case"in":return"resumeForIn";case"to":return"resumeForTo"}}(c):ga(c);if(y.push(Jo.types.arrowFunctionExpression(l,Jo.types.blockStatement(u))),f){const t=o&&m,s=Ur(m,!(t||d));y.push(i.by||Jo.types.numericLiteral(0),ir(r),no(a),Ur(f,!s),s),t&&(Mr(e).node.extra[ea]=!0,y.push(Jo.types.stringLiteral(`</${o}>`))),d&&(t||y.push(Jo.types.numericLiteral(0)),y.push(Jo.types.numericLiteral(1)))}p.push(Jo.types.expressionStatement(ht(g,...y)));for(const t of e.replaceWithMultiple(p))t.skip()}},dom:{enter(e){if(e.node.body.attributeTags)return;const t=or(e.get("body"));t?(lr(t,!0),da(e)||(ns(e,37),ss(e))):e.remove()},exit(e){if(e.node.body.attributeTags)return;const t=e.get("body"),r=ar(e),s=or(t),{node:n}=e,o=n.extra,{referencedBindings:a}=o,i=fa(e,r);Cs(e,((e,t)=>ht("loopClosure",no(e),no(i),t)));const c=ya(n),l=Us(r,i,"for");l.build=()=>ht(function(e){switch(e){case"of":return"loopOf";case"in":return"loopIn";case"to":return"loopTo"}}(c),no(i),Jo.types.identifier(s.name));const p=Oe(n),u=ba(c,p);p.by&&u.push(p.by),Ys(r,a,l,Jo.types.arrayExpression(u)),e.remove()}}}),parseOptions:{controlFlow:!0},attributes:{of:{type:"expression",autocomplete:[{description:"Iterates over a list of items."}]},in:{type:"expression",autocomplete:[{description:"Iterates over the keys and values of an object."}]},to:{type:"number",autocomplete:[{description:"Iterates up to the provided number (inclusive)"}]},from:{type:"number",autocomplete:[{description:"Iterates starting from the provided number (inclusive)"}]},step:{type:"number",autocomplete:[{description:"The amount to increment during each interation (with from/to)"}]}},autocomplete:[{snippet:"for|${1:value, index}| of=${3:array}",description:"Use to iterate over lists, object properties, or between ranges.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#iterating-over-a-list"},{snippet:"for|${1:name, value}| in=${3:object}",descriptionMoreURL:"https://markojs.com/docs/core-tags/#iterating-over-an-objects-properties"},{snippet:"for|${1:index}| to=${2:number}",descriptionMoreURL:"https://markojs.com/docs/core-tags/#iterating-between-a-range-of-numbers"}]};function ya(e){for(const t of e.attributes)if("MarkoAttribute"===t.type)switch(t.name){case"of":case"in":case"to":return t.name}}function ga(e){switch(e){case"of":return"forOf";case"in":return"forIn";case"to":return"forTo"}}function ba(e,t){switch(e){case"in":return[t.in];case"of":return[t.of];case"to":return[t.to,t.from||Jo.types.numericLiteral(0),t.step||Jo.types.numericLiteral(1)]}}var ha=new WeakSet;function va(e,t,r=[],s="content"){const n=new Set,o=[],a=e.node.extra?.attributeTags;if(a){for(const e in a){const s=a[e];ka(t,s.name)&&(n.add(s.name),s.dynamic&&(r.push(Go.types.variableDeclaration("let",[Go.types.variableDeclarator(zo(s))])),o.push(mt(s.name,zo(s)))))}const i=e.node.body.attributeTags?e.get("body").get("body"):e.get("attributeTags");for(let e=0;e<i.length;e++){const n=i[e];if(n.isMarkoTag())if((0,Ho.isAttributeTag)(n)){const c=a[$e(n)];if(c.dynamic)e=wa(i,e,a,r,t,s);else{const e=va(n,t?.[c.name]?.props,r,s);if(c.repeated){const t=Ea(c.name,o);t?t.value=ht("attrTags",t.value,Aa(e.properties)):o.push(mt(c.name,ht("attrTag",Aa(e.properties))))}else o.push(mt(c.name,ht("attrTag",Aa(e.properties))))}}else e=wa(i,e,a,r,t,s)}}if(!n.has(s)&&ka(t,s)){n.add(s);const t=function(e){const t=e.node.extra?.section;if(t){if(te()){const r=mr(t);return ht(r?"registerContent":"createContent",Go.types.stringLiteral(Qs(t,"renderer")),Go.types.arrowFunctionExpression(e.node.params,Go.types.blockStatement(e.node.body)),r?ir(ar(function(e){let t=e;for(;(0,Ho.isAttributeTag)(t)||(0,Ho.isTransparentTag)(t);)t=Mr(t);return t}(e.parentPath))):void 0)}return Go.types.callExpression(Go.types.identifier(t.name),[yn])}}(e.get("body"));if(t){const e=Go.types.objectProperty(Go.types.identifier(s),t);ha.add(e),o.push(e)}}const{attributes:i}=e.node;for(let e=i.length;e--;){const r=i[e],{value:s}=r;Go.types.isMarkoSpreadAttribute(r)?o.push(Go.types.spreadElement(s)):!n.has(r.name)&&ka(t,r.name)&&(n.add(r.name),o.push(mt(r.name,s)))}return o.reverse(),{properties:o,statements:r}}function xa(e){for(const t of e)if(ha.has(t))return t}function wa(e,t,r,s,n,o="content"){const a=e[t];if(a.isMarkoTag())if((0,Ho.isAttributeTag)(a)){const e=r[$e(a)];if(ka(n,e.name)&&e.dynamic){const t=va(a,n?.[e.name]?.props,s,o);e.repeated?s.push(Go.types.expressionStatement(Go.types.assignmentExpression("=",zo(e),ht("attrTags",zo(e),Aa(t.properties))))):s.push(Go.types.expressionStatement(Go.types.assignmentExpression("=",zo(e),ht("attrTag",Aa(t.properties)))))}}else switch($e(a)){case"if":return function(e,t,r,s,n,o){const a=e[t],i=[];let c=Go.types.ifStatement(Ta(a),Go.types.blockStatement(i));s.push(c),Sa(a,r,i,n,o);let l=t+1;for(;l<e.length;){const t=e[l];if(t.isMarkoTag())switch($e(t)){case"else-if":case"else":{const e=Ta(t),s=[];if(Sa(t,r,s,n,o),e){c.alternate=c=Go.types.ifStatement(e,Go.types.blockStatement(s)),l++;continue}c.alternate=Go.types.blockStatement(s);break}}break}return l-1}(e,t,r,s,n,o);case"for":return function(e,t,r,s,n,o){const a=e[t],i=[];return Sa(a,r,i,n,o),s.push(function(e,t,r,s){return Jo.types.expressionStatement(ht(ga(e),...ba(e,t),Jo.types.arrowFunctionExpression(r,Jo.types.blockStatement(s))))}(ya(a.node),Oe(a.node),a.node.body.params,i)),t}(e,t,r,s,n,o)}return t}function Aa(e){return 1===e.length&&Go.types.isSpreadElement(e[0])?e[0].argument:Go.types.objectExpression(e)}function Sa(e,t,r,s,n){const o=e.node.body.attributeTags?e.get("body").get("body"):e.get("attributeTags");for(let e=0;e<o.length;e++)e=wa(o,e,t,r,s,n)}function ka(e,t){return!e||!!e[t]}function Ea(e,t){for(const r of t)if("ObjectProperty"===r.type)switch(r.key.type){case"StringLiteral":if(r.key.value===e)return r;break;case"Identifier":if(r.key.name===e)return r}return!1}function Ta({node:{attributes:e}}){return 1===e.length?e[0].value:void 0}var Ma={analyze(e){if((0,No.assertNoArgs)(e),!e.node.var)throw e.get("name").buildCodeFrameError("The `define` tag requires a tag variable.");const t=e.get("body"),r=sr(t),s=Pn(e,4);r&&s&&(r.downstreamBinding=s.propertyAliases.get("content")||s),Ln(t,3),Uo(e);const n=Dn(nr(e),e.node,so(e.node));s&&Wn(s,n)},translate:{enter(e){te()&&ds(e)},exit(e){const{node:t}=e,r=va(e);if(te())fs(e),on(e.get("body")),e.insertBefore(r.statements),Po(e,Aa(r.properties));else{const s=ar(e),n=t.extra?.referencedBindings,o=_s(e.get("var").node.extra.binding);r.statements.length&&Zs("render",s,n,r.statements),Ys(s,n,o,Aa(r.properties))}e.remove()}},attributes:{},autocomplete:[{description:"Use to create a constant object binding that can be rendered.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#define"}],types:f.name+"/tag-types/define.d.marko"},Ca=r("../../browser-shims/compiler/index.js"),ja=r("../../browser-shims/compiler/babel-utils.js"),Ia={migrate:[e=>{(0,ja.assertNoArgs)(e),(0,ja.assertNoParams)(e),b(e),(0,ja.assertNoAttributeTags)(e),g(e),(0,ja.assertAllowedAttributes)(e,["value"]),(0,ja.diagnosticDeprecate)(e,{label:"The 'effect' tag has been replaced by the 'script' tag.",fix(){const{node:t}=e;e.replaceWith(Ca.types.markoTag(kn(Ca.types.stringLiteral("script"),t.name),t.attributes,t.body,t.arguments,t.var,t.attributeTags))}})}],attributes:{},types:f.name+"/tag-types/effect.d.marko"},Pa=r("../../browser-shims/compiler/babel-utils.js"),La={parse(e){const{node:t}=e;e.replaceWith((0,Pa.parseStatements)(e.hub.file,t.rawValue,t.start,t.end)[0])},parseOptions:{statement:!0,rawOpenTag:!0},autocomplete:[{displayText:"export <value>"}]},Oa=r("../../browser-shims/compiler/index.js"),Ba=r("../../browser-shims/compiler/babel-utils.js"),$a=Symbol("comment tag binding"),Na=Symbol("node getter id"),Fa={analyze(e){(0,Ba.assertNoArgs)(e),(0,Ba.assertNoParams)(e),(0,Ba.assertNoAttributes)(e);const t=e.node.var;let r=!1,s=!1;if(t){if(!Oa.types.isIdentifier(t))throw e.get("var").buildCodeFrameError("The `html-comment` tag variable cannot be destructured.");r=!0;for(const r of e.scope.getBinding(t.name).referencePaths)if(!de(r)){s=!0;break}}const n=[];for(const t of e.get("body").get("body"))if(t.isMarkoPlaceholder())n.push(t.node.value),r=!0;else if(!t.isMarkoText())throw t.buildCodeFrameError("Invalid child. Only text is allowed inside an html comment.");if(r){const r=nr(e),o=Dn(r,e.node,n),a=o[$a]=In("#comment",0,r);s&&(o[Na]=tn(r,"comment")),t?It(r,a):Ot(r,a,o)}e.skip()},translate:{enter(e){const t=e.node.extra,r=t[$a];if(e.node.var){const s=t[Na];if(te())Po(e,ht("nodeRef",s&&ir(ar(e)),s&&Oa.types.stringLiteral(s)));else{const t=e.node.var.name,n=e.scope.getBinding(t).referencePaths;let o;s&&(o=J(`get_${t}`),(0,Ba.getProgram)().node.body.push(Oa.types.variableDeclaration("const",[Oa.types.variableDeclarator(o,ht("nodeRef",Oa.types.stringLiteral(s),no(r)))])));for(const t of n){const s=ar(t);de(t)?t.parentPath.replaceWith(Oa.types.expressionStatement(Sn(s,r))):o&&t.replaceWith(Oa.types.callExpression(o,[An(s,ar(e))]))}}}r&&ns(e,32),ts(e),ps(e)`<!--`},exit(e){const t=ar(e),r=e.node.extra,s=r[$a],n=ps(e);if(te())for(const t of e.node.body.body)Oa.types.isMarkoText(t)?n`${t.value}`:Oa.types.isMarkoPlaceholder(t)&&n`${ht("escapeXML",t.value)}`;else{const t=[],o=[];let a="";for(const r of e.node.body.body)Oa.types.isMarkoText(r)?a+=r.value:Oa.types.isMarkoPlaceholder(r)&&(t.push(Oa.types.templateElement({raw:a})),o.push(r.value),a="");0===o.length?n`${a}`:(t.push(Oa.types.templateElement({raw:a})),Zs("render",ar(e),r.referencedBindings,Oa.types.expressionStatement(ht("data",Oa.types.memberExpression(yn,no(s),!0),Oa.types.templateLiteral(t,o)))))}rs(e),n`-->`,s&&ys(e,s,Dt(t,s)),e.remove()}},parseOptions:{text:!0},attributes:{},autocomplete:[{description:"Use to create an html comment that is not stripped from the output.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#html-comment"}]},Ra=r("../../browser-shims/compiler/index.js"),Da=r("../../browser-shims/compiler/babel-utils.js"),za=Symbol("script tag node binding"),Ua=Symbol("node getter id"),_a={analyze(e){(0,Da.assertNoArgs)(e),(0,Da.assertNoParams)(e);const{node:t}=e;if(t.var&&!Ra.types.isIdentifier(t.var))throw e.get("var").buildCodeFrameError("Tag variables on native elements cannot be destructured.");const r={},{attributes:s}=e.node;let n,o,a=!1,i=!1;for(let e=s.length;e--;){const t=s[e],c=t.value.extra??={};if(Ra.types.isMarkoAttribute(t)){if(r[t.name]){to(t.value);continue}r[t.name]=t,qe(t.name)?(c.isEffect=!0,a=!0):T(t.value).confident||(i=!0)}else Ra.types.isMarkoSpreadAttribute(t)&&(c.isEffect=!0,a=!0,i=!0);n?n.push(t.value):Ra.types.isMarkoSpreadAttribute(t)?n=[t.value]:o=me(o,c)}const c=[];let l=!1;for(const t of e.node.body.body)if(Ra.types.isMarkoPlaceholder(t))c.push(t.value),l=!0;else if(!Ra.types.isMarkoText(t))throw e.hub.buildError(t,"Invalid child. Only text is allowed inside an html-script.");if(t.var||a||i||l){const r=t.extra??={},s=nr(e),i=r[za]=In("#script",0,s);if((0,Da.getProgram)().node.extra.isInteractive||=a,n&&Dn(s,e.node,n),c.length>1&&Dn(s,c[0],c.slice(1)),(a||n)&&It(s,i),t.var){It(s,i);for(const n of e.scope.getBinding(t.var.name).referencePaths){const e=nr(n);$n(n),br(s,e)?(Mt(e,s,ae().Owner),r[Ua]||de(n)||(r[Ua]=tn(s,"#script"))):On(n,i)}}Ot(s,i,me(o,r))}},translate:{enter(e){const t=e.node.extra,r=t[za],s=te(),n=ps(e),o=ar(e);if(e.node.var){const n=t[Ua];if(s)Po(e,ht("nodeRef",n&&ir(o),n&&Ra.types.stringLiteral(n)));else{const t=e.node.var.name,s=e.scope.getBinding(t).referencePaths;let o;n&&(o=J(`get_${t}`),(0,Da.getProgram)().node.body.push(Ra.types.variableDeclaration("const",[Ra.types.variableDeclarator(o,ht("nodeRef",Ra.types.stringLiteral(n),no(r)))])));for(const t of s){const s=ar(t);de(t)?t.parentPath.replaceWith(Ra.types.expressionStatement(Sn(s,r))):o&&t.replaceWith(Ra.types.callExpression(o,[An(s,ar(e))]))}}}const a=r&&no(r);a&&ns(e,32),n`<script`;const i=function(e){const t={},{attributes:r}=e,s=new Set;let n,o,a,i;for(let e=r.length;e--;){const n=r[e],{value:o}=n;Ra.types.isMarkoSpreadAttribute(n)?(a||(a=[]),a.push(Ra.types.spreadElement(o))):t[n.name]||(t[n.name]=n,a?a.push(mt(n.name,n.value)):s.add(n))}const c=[...s].reverse();if(a){a.reverse();for(const{name:e}of c)(i||=[]).push(mt(e,Ra.types.numericLiteral(1)));i&&(o=Ra.types.objectExpression(i)),n=Aa(a)}return{staticAttrs:c,spreadExpression:n,skipExpression:o}}(e.node),{staticAttrs:c,skipExpression:l,spreadExpression:p}=i;for(const e of c){const{name:t,value:r}=e,{confident:i,computed:c}=r.extra||{},l=r.extra?.referencedBindings;switch(t){case"class":case"style":{const e=`${t}Attr`;i?n`${vt()[e](c)}`:s?n`${ht(e,r)}`:Zs("render",o,l,Ra.types.expressionStatement(ht(e,Ra.types.memberExpression(yn,a,!0),r)));break}default:i?n`${vt().attr(t,c)}`:s?qe(t)?nn(o,l):n`${ht("attr",Ra.types.stringLiteral(t),r)}`:qe(t)?Zs("effect",o,l,Ra.types.expressionStatement(ht("on",Ra.types.memberExpression(yn,a,!0),Ra.types.stringLiteral(Ge(t)),r))):Zs("render",o,l,Ra.types.expressionStatement(ht("attr",Ra.types.memberExpression(yn,a,!0),Ra.types.stringLiteral(t),r)))}}p&&(s?(nn(o,t.referencedBindings),l?n`${ht("partialAttrs",p,l,a,ir(o),Ra.types.stringLiteral("script"))}`:n`${ht("attrs",p,a,ir(o),Ra.types.stringLiteral("script"))}`):(Zs("render",o,t.referencedBindings,l?Ra.types.expressionStatement(ht("partialAttrs",yn,a,p,l)):Ra.types.expressionStatement(ht("attrs",yn,a,p))),Zs("effect",o,t.referencedBindings,Ra.types.expressionStatement(ht("attrsEvents",yn,a)),!1))),n`>`,ts(e)},exit(e){const t=ar(e),r=e.node.extra[za],s=ps(e);if(te())for(const t of e.node.body.body)Ra.types.isMarkoText(t)?s`${t.value}`:Ra.types.isMarkoPlaceholder(t)&&s`${ht("escapeScript",t.value)}`;else{const t=[],n=[];let o,a="";for(const r of e.node.body.body)Ra.types.isMarkoText(r)?a+=r.value:Ra.types.isMarkoPlaceholder(r)&&(o||=r,t.push(Ra.types.templateElement({raw:a})),n.push(r.value),a="");o?(t.push(Ra.types.templateElement({raw:a})),Zs("render",ar(e),o.value.extra?.referencedBindings,Ra.types.expressionStatement(ht("textContent",Ra.types.memberExpression(yn,no(r),!0),Ra.types.templateLiteral(t,n))))):s`${a}`}s`</script>`,r&&ys(e,r,Dt(t,r)),rs(e),e.remove()}},"@async":"#html-async","@crossorigin":"#html-crossorigin","@defer":"#html-defer","@integrity":"#html-integrity","@nomodule":"#html-nomodule","@nonce":"#html-nonce","@referrerpolicy":"#html-referrerpolicy","@src":"#html-src","@type":"#html-type","attribute-groups":["html-attributes"],parseOptions:{text:!0,preserveWhitespace:!0}},Va=r("../../browser-shims/compiler/index.js"),Wa=r("../../browser-shims/compiler/babel-utils.js"),qa=Symbol("style tag node binding"),Ga=Symbol("node getter id"),Ha={analyze(e){(0,Wa.assertNoArgs)(e),(0,Wa.assertNoParams)(e);const{node:t}=e;if(t.var&&!Va.types.isIdentifier(t.var))throw e.get("var").buildCodeFrameError("Tag variables on native elements cannot be destructured.");const r={},{attributes:s}=e.node;let n,o,a=!1,i=!1;for(let e=s.length;e--;){const t=s[e],c=t.value.extra??={};if(Va.types.isMarkoAttribute(t)){if(r[t.name]){to(t.value);continue}r[t.name]=t,qe(t.name)?(c.isEffect=!0,a=!0):T(t.value).confident||(i=!0)}else Va.types.isMarkoSpreadAttribute(t)&&(c.isEffect=!0,a=!0,i=!0);n?n.push(t.value):Va.types.isMarkoSpreadAttribute(t)?n=[t.value]:o=me(o,c)}const c=[];let l=!1;for(const t of e.node.body.body)if(Va.types.isMarkoPlaceholder(t))c.push(t.value),l=!0;else if(!Va.types.isMarkoText(t))throw e.hub.buildError(t,"Invalid child. Only text is allowed inside an html-style.");if(t.var||a||i||l){const r=t.extra??={},s=nr(e),i=r[qa]=In("#style",0,s);if((0,Wa.getProgram)().node.extra.isInteractive||=a,n&&Dn(s,e.node,n),c.length>1&&Dn(s,c[0],c.slice(1)),(a||n)&&It(s,i),t.var){It(s,i);for(const n of e.scope.getBinding(t.var.name).referencePaths){const e=nr(n);$n(n),br(s,e)?(Mt(e,s,ae().Owner),r[Ga]||de(n)||(r[Ga]=tn(s,"#style"))):On(n,i)}}Ot(s,i,me(o,r))}},translate:{enter(e){const t=e.node.extra,r=t[qa],s=te(),n=ps(e),o=ar(e);if(e.node.var){const n=t[Ga];if(s)Po(e,ht("nodeRef",n&&ir(o),n&&Va.types.stringLiteral(n)));else{const t=e.node.var.name,s=e.scope.getBinding(t).referencePaths;let o;n&&(o=J(`get_${t}`),(0,Wa.getProgram)().node.body.push(Va.types.variableDeclaration("const",[Va.types.variableDeclarator(o,ht("nodeRef",Va.types.stringLiteral(n),no(r)))])));for(const t of s){const s=ar(t);de(t)?t.parentPath.replaceWith(Va.types.expressionStatement(Sn(s,r))):o&&t.replaceWith(Va.types.callExpression(o,[An(s,ar(e))]))}}}const a=r&&no(r);a&&ns(e,32),n`<style`;const i=function(e){const t={},{attributes:r}=e,s=new Set;let n,o,a,i;for(let e=r.length;e--;){const n=r[e],{value:o}=n;Va.types.isMarkoSpreadAttribute(n)?(a||(a=[]),a.push(Va.types.spreadElement(o))):t[n.name]||(t[n.name]=n,a?a.push(mt(n.name,n.value)):s.add(n))}const c=[...s].reverse();if(a){a.reverse();for(const{name:e}of c)(i||=[]).push(mt(e,Va.types.numericLiteral(1)));i&&(o=Va.types.objectExpression(i)),n=Aa(a)}return{staticAttrs:c,spreadExpression:n,skipExpression:o}}(e.node),{staticAttrs:c,skipExpression:l,spreadExpression:p}=i;for(const e of c){const{name:t,value:r}=e,{confident:i,computed:c}=r.extra||{},l=r.extra?.referencedBindings;switch(t){case"class":case"style":{const e=`${t}Attr`;i?n`${vt()[e](c)}`:s?n`${ht(e,r)}`:Zs("render",o,l,Va.types.expressionStatement(ht(e,Va.types.memberExpression(yn,a,!0),r)));break}default:i?n`${vt().attr(t,c)}`:s?qe(t)?nn(o,l):n`${ht("attr",Va.types.stringLiteral(t),r)}`:qe(t)?Zs("effect",o,l,Va.types.expressionStatement(ht("on",Va.types.memberExpression(yn,a,!0),Va.types.stringLiteral(Ge(t)),r))):Zs("render",o,l,Va.types.expressionStatement(ht("attr",Va.types.memberExpression(yn,a,!0),Va.types.stringLiteral(t),r)))}}p&&(s?(nn(o,t.referencedBindings),l?n`${ht("partialAttrs",p,l,a,ir(o),Va.types.stringLiteral("style"))}`:n`${ht("attrs",p,a,ir(o),Va.types.stringLiteral("style"))}`):(Zs("render",o,t.referencedBindings,l?Va.types.expressionStatement(ht("partialAttrs",yn,a,p,l)):Va.types.expressionStatement(ht("attrs",yn,a,p))),Zs("effect",o,t.referencedBindings,Va.types.expressionStatement(ht("attrsEvents",yn,a)),!1))),n`>`,ts(e)},exit(e){const t=ar(e),r=e.node.extra[qa],s=ps(e);if(te())for(const t of e.node.body.body)Va.types.isMarkoText(t)?s`${t.value}`:Va.types.isMarkoPlaceholder(t)&&s`${ht("escapeStyle",t.value)}`;else{const t=[],n=[];let o,a="";for(const r of e.node.body.body)Va.types.isMarkoText(r)?a+=r.value:Va.types.isMarkoPlaceholder(r)&&(o||=r,t.push(Va.types.templateElement({raw:a})),n.push(r.value),a="");o?(t.push(Va.types.templateElement({raw:a})),Zs("render",ar(e),o.value.extra?.referencedBindings,Va.types.expressionStatement(ht("textContent",Va.types.memberExpression(yn,no(r),!0),Va.types.templateLiteral(t,n))))):s`${a}`}s`</style>`,r&&ys(e,r,Dt(t,r)),rs(e),e.remove()}},"@disabled":"#html-disabled","@media":"#html-media","@nonce":"#html-nonce","@type":"#html-type","attribute-groups":["html-attributes"],parseOptions:{text:!0,preserveWhitespace:!0}},Ja=r("../../browser-shims/compiler/index.js"),Za=r("../../browser-shims/compiler/babel-utils.js"),Ka={analyze(e){(0,Za.assertNoArgs)(e),(0,Za.assertNoParams)(e),(0,Za.assertNoAttributes)(e),b(e),(0,Za.assertNoAttributeTags)(e);const{node:t}=e;if(!t.var)throw e.get("name").buildCodeFrameError("The `id` tag requires a tag variable.");if(!Ja.types.isIdentifier(t.var))throw e.get("var").buildCodeFrameError("The `id` tag cannot be destructured");const r=Pn(e,4);r&&Wn(r,!1)},translate:{exit(e){const{node:t}=e,r=te()?ht("nextTagId"):ht("nextTagId",yn);if(te())e.replaceWith(Ja.types.variableDeclaration("const",[Ja.types.variableDeclarator(t.var,r)]));else{const s=_s(t.var.extra.binding);Ys(ar(e),void 0,s,r),e.remove()}}},parseOptions:{openTagOnly:!0},attributes:{},autocomplete:[{displayText:"id/<name>",description:"Use to create a unique identifier.",snippet:"id/${1:name}",descriptionMoreURL:"https://markojs.com/docs/core-tags/#id"}],types:f.name+"/tag-types/id.d.marko"},Xa=r("../../browser-shims/compiler/index.js"),Ya=r("../../browser-shims/compiler/babel-utils.js"),Qa=r("../../browser-shims/compiler/index.js"),ei=new WeakMap,ti={analyze(e){if(function(e){switch((0,Ya.assertNoVar)(e),(0,Ya.assertNoArgs)(e),(0,Ya.assertNoParams)(e),function(e){if(!e.node.body.body.length&&!e.node.attributeTags.length)throw e.get("name").buildCodeFrameError(`The \`${$e(e)}\` tag requires body content.`)}(e),g(e),$e(e)){case"if":oi(e);break;case"else-if":oi(e),ni(e);break;case"else":!function(e){const{node:t}=e,[r]=t.attributes;if(t.attributes.length>1||r&&"if"!==r.name){const r=t.attributes[1].loc?.start,s=t.attributes[t.attributes.length-1].loc?.end,n=`The \`${$e(e)}\` tag only supports an \`if=\` attribute.`;throw null==r||null==s?e.get("name").buildCodeFrameError(n):e.hub.buildError({loc:{start:r,end:s}},n,Error)}}(e),ni(e)}}(e),!e.node.body.attributeTags&&ii(e)){const t=ai(e),[r]=t[0],s=nr(r),n=r.node.extra??={},o=[],a={binding:fa(r,s,t.length),prefix:oe().ConditionalScope};let i=!0;for(const[e,r]of t)r&&(i&&=null===r.content||r.content?.singleChild&&4!==r.content.startType,r.isBranch=!0,r.upstreamExpression=n,r.sectionAccessor=a),e.node.attributes.length&&o.push(e.node.attributes[0].value);Dn(s,r.node,o),n.singleNodeOptimization=i}},translate:Or({html:{enter(e){if(e.node.body.attributeTags)return;const t=or(e.get("body"));ci(e)&&!da(e)&&(ns(e,37),ss(e)),ds(e),t&&lr(t,!0)},exit(e){if(e.node.body.attributeTags)return;const t=e.get("body");if(or(t)&&(fs(e),on(t)),ii(e)){const t=ai(e),[s]=t[0],n=ar(s),o=s.node.extra.singleNodeOptimization,a=fa(s,n),i=da(s),c=Dt(n,a),l=e.getNextSibling();let p,u;for(let e=t.length;e--;){const[s,n]=t[e],o=s.node.body.body;if(n){const t=Rt(n,Tn);t&&(!0!==p&&(p=!(!0!==t&&!t.state)||(p?Ae(Kn,p,t):[t])),o.push(Xa.types.returnStatement(Xa.types.numericLiteral(e))))}const[a]=s.node.attributes,i=(r=o,Array.isArray(r)?1===r.length?r[0]:Qa.types.blockStatement(r):r);u=a?Xa.types.ifStatement(a.value,i,u):i,s.remove()}if(p){const e=i&&c;e&&(Mr(s).node.extra[ea]=!0);const t=Ur(c,!(e||o)),r=Xa.types.arrowFunctionExpression([],Xa.types.blockStatement([u]));u=Xa.types.expressionStatement(ht("resumeConditional",r,ir(n),no(a),function(e,t){if(!e||!0===e)return Ur(e,t);if(1===e.length)return Ur(e[0],t);let r;for(const s of e){if(s.state)return t?void 0:Dr($r.types.numericLiteral(1),`state: ${ve(s.state,", ",io)}`);const e=Ur(s,!1);r=r?$r.types.logicalExpression("||",r,e):e}return r}(p,!t),t,e?Xa.types.stringLiteral(`</${i}>`):o?Xa.types.numericLiteral(0):void 0,o?Xa.types.numericLiteral(1):void 0))}l.insertBefore(u)}var r}},dom:{enter(e){if(e.node.body.attributeTags)return;const t=or(e.get("body"));t&&lr(t,!0),ci(e)&&!da(e)&&(ns(e,37),ss(e))},exit(e){if(!e.node.body.attributeTags&&ii(e)){const t=ai(e),[r]=t[0],s=ar(r),n=t[0][0].node.extra,o=fa(r,s),a=[];let i=Xa.types.numericLiteral(t.length);for(let e=t.length;e--;){const[r,s]=t[e],[n]=r.node.attributes,c=Xa.types.numericLiteral(s?e:-1);s&&(a.push(Xa.types.identifier(s.name)),Cs(r,((t,r)=>ht("conditionalClosure",no(t),no(o),Xa.types.numericLiteral(e),r)))),r.remove(),i=n?Xa.types.conditionalExpression(n.value,c,i):c}const c=Us(s,o,"if");c.build=()=>ht("conditional",no(o),...a.reverse()),Ys(s,n.referencedBindings,c,i)}}}}),parseOptions:{controlFlow:!0},autocomplete:[{snippet:"if=${1:condition}",description:"Use to display content only if the condition is met.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#if-else-if-else"}]},ri={...ti,autocomplete:[{snippet:"else-if=${1:condition}",description:"Use after an <if> or <else-if> tag to display content if those conditions do not match and this one does.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#if-else-if-else"}]},si={...ti,autocomplete:[{description:"Use after an <if> or <else-if> tag to display content if those conditions do not match.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#if-else-if-else"}]};function ni(e){let t=e.getPrevSibling();for(;t.node&&t.isMarkoComment();)t=t.getPrevSibling();if(!De(t)||"else"!==$e(t)&&!t.node.attributes.length)throw e.buildCodeFrameError(`The \`<${$e(e)}>\` must have a preceding \`<if=cond>\`, \`<else-if=cond>\`, or \`<else if=cond>\`.`)}function oi(e){const{node:t}=e,[r]=t.attributes;if(!Xa.types.isMarkoAttribute(r)||!r.default)throw e.get("name").buildCodeFrameError(`The \`${$e(e)}\` tag requires a value.`);if(t.attributes.length>1){const r=t.attributes[1].loc?.start,s=t.attributes[t.attributes.length-1].loc?.end,n=`The \`${$e(e)}\` tag only supports the \`value\` attribute.`;throw null==r||null==s?e.get("name").buildCodeFrameError(n):e.hub.buildError({loc:{start:r,end:s}},n,Error)}}function ai(e){let t=ei.get(e);if(!t){let r=e;t=[];do{for(ei.set(r,t),t.push([r,sr(r.get("body"))]);(r=r.getNextSibling()).isMarkoComment(););}while(Re(r,"else")||Re(r,"else-if"))}return t}function ii(e){const t=ai(e);return t[t.length-1][0]===e}function ci(e){return Re(e,"if")}var li=r("../../browser-shims/compiler/babel-utils.js"),pi={parse(e){const{node:t}=e;e.replaceWith((0,li.parseStatements)(e.hub.file,t.rawValue,t.start,t.end)[0])},parseOptions:{statement:!0,rawOpenTag:!0},autocomplete:[{displayText:'import <scope> from "<path>"',description:"Use to import external modules, follows the same syntax as JavaScript imports.",snippet:'import ${2} from "${1:path}"',descriptionMoreURL:"https://markojs.com/docs/syntax/#importing-external-files"}]},ui=r("../../browser-shims/compiler/index.js"),di=r("../../browser-shims/compiler/babel-utils.js"),fi={analyze(e){const{node:t}=e,r=t.var;let s,n;for(const r of t.attributes)if(ui.types.isMarkoAttribute(r))if("value"===r.name)s=r;else{if("valueChange"!==r.name){const t=r.loc?.start,s=r.loc?.end,n="The `let` tag only supports the `value` attribute and its change handler.";throw null==t||null==s?e.get("name").buildCodeFrameError(n):e.hub.buildError({loc:{start:t,end:s}},n,Error)}n=r}if((0,di.assertNoArgs)(e),(0,di.assertNoParams)(e),b(e),g(e),!r)throw e.get("name").buildCodeFrameError("The `let` tag requires a tag variable.");if(!ui.types.isIdentifier(r))throw e.get("var").buildCodeFrameError("The `let` tag variable cannot be destructured.");if(n&&(0,di.computeNode)(n.value))throw e.get("attributes").find((e=>e.node===n)).get("value").buildCodeFrameError("The `let` tag `valueChange` attribute must be a function.");const o=nr(e),a=Pn(e,1);Wn(a,Dn(o,e.node,[s?.value,n?.value])),n&&It(o,a,oe().TagVariableChange)},translate:{exit(e){const{node:t}=e,r=t.var,s=t.attributes.find((e=>ui.types.isMarkoAttribute(e)&&(e.default||"value"===e.name)))??ui.types.markoAttribute("value",ui.types.identifier("undefined")),n=t.attributes.find((e=>ui.types.isMarkoAttribute(e)&&"valueChange"===e.name)),o=ar(e),a=r.extra.binding;if(re()){const t=_s(a,"state");Ys(o,e.node.extra.referencedBindings,t,s.value),n&&(t.extraArgs=[n.value]),t.buildAssignment=(e,r)=>{const s=An(e,t.section);return ui.types.callExpression(t.identifier,[s,r])}}else Po(e,s.value,"let"),n&&Is(o,a,n.value,oe().TagVariableChange);e.remove()}},parseOptions:{openTagOnly:!0},attributes:{},autocomplete:[{description:"Use to create a mutable binding.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#let"}],types:f.name+"/tag-types/let.d.marko"},mi=r("../../browser-shims/compiler/index.js"),yi=r("../../browser-shims/compiler/babel-utils.js"),gi=Symbol("lifecycle attrs reference"),bi={analyze(e){(0,yi.assertNoArgs)(e),(0,yi.assertNoVar)(e),(0,yi.assertNoParams)(e),b(e);const{node:t}=e,r=nr(e);if(Dn(r,e.node,so(e.node))[gi]=In(H("lifecycle"),4,r),0===t.attributes.length)throw e.get("name").buildCodeFrameError("The `lifecycle` tag requires at least one attribute.");for(const r of t.attributes){if(mi.types.isMarkoSpreadAttribute(r))throw e.get("name").buildCodeFrameError("The `lifecycle` tag does not support `...spread` attributes.");(r.value.extra??={}).isEffect=!0}((0,yi.getProgram)().node.extra??={}).isInteractive=!0},translate:{exit(e){const{node:t}=e,r=ar(e),s=t.extra,{referencedBindings:n}=s,o=s[gi];if(re()){const t=va(e);t.statements.push(mi.types.expressionStatement(ht("lifecycle",yn,no(o),Aa(t.properties)))),Zs("effect",r,n,t.statements)}else nn(r,n);e.remove()}},parseOptions:{openTagOnly:!0},attributes:{},autocomplete:[{description:"Use to create a side effects.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#effect"}],types:f.name+"/tag-types/lifecycle.d.marko"},hi=r("../../browser-shims/compiler/index.js"),vi=r("../../browser-shims/compiler/babel-utils.js"),xi={analyze(e){const[t]=e.node.attributes;if((0,vi.assertNoArgs)(e),(0,vi.assertNoVar)(e),(0,vi.assertNoParams)(e),b(e),!t)throw e.get("name").buildCodeFrameError("The `log` tag requires a value.");if(e.node.attributes.length>1||!hi.types.isMarkoAttribute(t)||!t.default&&"value"!==t.name)throw e.get("name").buildCodeFrameError("The `log` tag only supports the `value` attribute.")},translate:{exit(e){const t=ar(e),[r]=e.node.attributes,{value:s}=r,n=s.extra?.referencedBindings,o=hi.types.expressionStatement(hi.types.callExpression(hi.types.memberExpression(hi.types.identifier("console"),hi.types.identifier("log")),[s]));te()?e.insertBefore(o):Zs("render",t,n,o),e.remove()}},parseOptions:{openTagOnly:!0},attributes:{},autocomplete:[{description:"Use to log a value to the console.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#log"}],types:f.name+"/tag-types/log.d.marko"},wi=r("../../browser-shims/compiler/index.js"),Ai=r("../../browser-shims/compiler/babel-utils.js"),Si=" For a native html `script` tag use the `html-script` core tag instead.",ki={parse(e){const{node:t}=e,{body:r}=t.body;if(r.length){let s="";for(const t of r){if("MarkoText"!==t.type)throw e.hub.file.hub.buildError(t,"Unexpected content in `script` tag. Only javascript and typescript is supported."+Si,SyntaxError);s+=t.value}const n=r[0]?.start,o=r[r.length-1]?.end,a=(0,Ai.parseStatements)(e.hub.file,s,n,o),i=wi.types.arrowFunctionExpression([],wi.types.blockStatement(a),W(a,Ei));t.attributes.push(wi.types.markoAttribute("value",i)),t.body.body=[]}},analyze(e){const{node:t}=e;if((0,Ai.assertNoArgs)(e),(0,Ai.assertNoParams)(e),b(e),(0,Ai.assertNoAttributeTags)(e),t.var)throw e.hub.buildError(t.var,"The `script` tag does not support a tag variable reference."+Si);let r=!1;for(const s of t.attributes){if("MarkoAttribute"!==s.type||"value"!==s.name)throw e.hub.buildError(s,"The `script` tag does not support html attributes."+Si);if(r)throw e.hub.buildError(s,"Invalid duplicate value attribute.");r=!0,(s.value.extra??={}).isEffect=!0,((0,Ai.getProgram)().node.extra??={}).isInteractive=!0}r||to(so(t))},translate:{exit(e){const{node:t}=e,[r]=t.attributes;if(!r)return void e.remove();const s=ar(e),{value:n}=r,o=n.extra?.referencedBindings;if(re()){const{value:e}=r,t=wi.types.isFunctionExpression(e)||wi.types.isArrowFunctionExpression(e);let n=null;if(t&&!e.async&&!e.generator)if(wi.types.isBlockStatement(e.body)){let t=!1;for(const r of e.body.body)if(wi.types.isDeclaration(r)){t=!0;break}n=t?e.body:e.body.body}else n=wi.types.expressionStatement(e.body);Zs("effect",s,o,n||wi.types.expressionStatement(wi.types.callExpression(e,t?[]:[yn])))}else nn(s,o);e.remove()}},html:!1,parseOptions:{text:!0,preserveWhitespace:!0},attributes:{},autocomplete:[{description:"Use to create a side effects.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#script"}],types:f.name+"/tag-types/script.d.marko"};function Ei(e){switch(e.type){case"ForOfStatement":return e.await;case"FunctionDeclaration":case"FunctionExpression":case"ArrowFunctionExpression":case"ClassMethod":case"ObjectMethod":case"ClassPrivateMethod":return _;case"AwaitExpression":return!0;default:return!1}}var Ti=r("../../browser-shims/compiler/index.js"),Mi=r("../../browser-shims/compiler/babel-utils.js"),Ci={parse(e){const{node:t,hub:{file:r}}=e,s=t.rawValue,n=s.replace(/^server\s*/,"").trim(),o=t.name.start+(s.length-n.length);let a=(0,Mi.parseStatements)(r,n,o,o+n.length);1===a.length&&Ti.types.isBlockStatement(a[0])&&(a=a[0].body),e.replaceWith(Ti.types.markoScriptlet(a,!0,"server"))},parseOptions:{statement:!0,rawOpenTag:!0},autocomplete:[{displayText:"server <statement>",description:"A JavaScript statement which is only evaluated once your template is loaded on the server.",descriptionMoreURL:"https://markojs.com/docs/syntax/#server-javascript"}]},ji=r("../../browser-shims/compiler/index.js"),Ii=r("../../browser-shims/compiler/babel-utils.js"),Pi={parse(e){const{node:t,hub:{file:r}}=e,s=t.rawValue,n=s.replace(/^static\s*/,"").trim(),o=t.name.start+(s.length-n.length);let a=(0,Ii.parseStatements)(r,n,o,o+n.length);1===a.length&&ji.types.isBlockStatement(a[0])&&(a=a[0].body),e.replaceWith(ji.types.markoScriptlet(a,!0))},parseOptions:{statement:!0,rawOpenTag:!0},autocomplete:[{displayText:"static <statement>",description:"A JavaScript statement which is only evaluated once your template is loaded.",descriptionMoreURL:"https://markojs.com/docs/syntax/#static-javascript"}]},Li=r("../../browser-shims/compiler/index.js"),Oi=r("../../browser-shims/compiler/babel-utils.js"),Bi=u(r("../../node_modules/magic-string/dist/magic-string.cjs.js")),$i=u(r("../../node_modules/path-browserify/index.js")),Ni=/^style((?:\.[a-zA-Z0-9$_-]+)+)?/,Fi=" For a native html `style` tag use the `html-style` core tag instead.",Ri={analyze(e){(0,Oi.assertNoArgs)(e),(0,Oi.assertNoParams)(e),(0,Oi.assertNoAttributeTags)(e);const{node:t}=e,r=Ni.exec(t.rawValue||"")?.[1]?.slice(1);for(const s of t.attributes)if(null!=s.start||"MarkoAttribute"!==s.type||"class"!==s.name||"StringLiteral"!==s.value.type||s.value.value!==r)throw e.hub.buildError(s.value,"The `style` does not support html attributes."+Fi);for(const r of t.body.body)if("MarkoText"!==r.type)throw e.hub.buildError(r,"The `style` tag currently only supports static content."+Fi);if(t.body.body.length>1)throw e.hub.buildError(t.name,"The `style` tag currently only supports static content."+Fi)},translate(e){const{node:t,hub:{file:r}}=e,{filename:s,sourceMaps:n}=r.opts;let o=Ni.exec(t.rawValue||"")?.[1]||".css";t.var&&!/\.module\./.test(o)&&(o=".module"+o);const a=t.body.body[0],{resolveVirtualDependency:i}=se(),c=(0,Oi.getStart)(r,a),l=(0,Oi.getEnd)(r,a);let p,u=a.value;if(i&&n&&null!==c&&null!==l){const e=new Bi.default(r.code,{filename:s});e.remove(0,c),e.remove(l,r.code.length),p=e.generateMap({source:s,includeContent:!0}),"inline"!==n&&"both"!==n||(u+=`\n/*# sourceMappingURL=${p.toUrl()}*/`,"inline"===n&&(p=void 0))}const d=i?.(s,{virtualPath:`./${$i.default.basename(s)+o}`,code:u,map:p});d&&(t.var?Li.types.isIdentifier(t.var)?(0,Oi.getProgram)().node.body.push(Li.types.importDeclaration([Li.types.importDefaultSpecifier(t.var)],Li.types.stringLiteral(d))):(0,Oi.getProgram)().node.body.push(Li.types.variableDeclaration("const",[Li.types.variableDeclarator(t.var,(0,Oi.importDefault)(r,d,"style"))])):(0,Oi.getProgram)().node.body.push(Li.types.importDeclaration([],Li.types.stringLiteral(d)))),e.remove()},parseOptions:{html:!1,text:!0,rawOpenTag:!0,preserveWhitespace:!0},attributes:{}},Di=r("../../browser-shims/compiler/index.js"),zi=r("../../browser-shims/compiler/babel-utils.js"),Ui=Symbol("try tag dom binding"),_i={analyze(e){(0,zi.assertNoVar)(e),(0,zi.assertNoArgs)(e),(0,zi.assertNoParams)(e),(0,zi.assertNoAttributes)(e),g(e),Uo(e);const t=nr(e);if(Dn(t,e.node,so(e.node))[Ui]=In("#text",0,t),!e.node.body.body.length)throw e.get("name").buildCodeFrameError("The `try` tag requires body content.");sr(e.get("body"))},translate:Or({html:{enter(e){if(!or(e.get("body")))return void e.remove();const t=or(e.get("body"));lr(t,!0),ds(e)},exit(e){const{node:t}=e,r=ar(e),s=t.extra,n=e.get("body"),o=va(e),a=s[Ui],i=xa(o.properties);i&&o.properties.splice(o.properties.indexOf(i),1),fs(e),on(n),e.insertBefore(o.statements),e.replaceWith(Di.types.expressionStatement(ht("tryContent",ir(r),no(a),i?.value,Aa(o.properties))))[0].skip()}},dom:{enter(e){const t=or(e.get("body"));lr(t,!0),ns(e,37),ss(e)},exit(e){const{node:t}=e,r=t.extra,s=r[Ui],n=r.referencedBindings,o=va(e),a=xa(o.properties);a&&o.properties.splice(o.properties.indexOf(a),1);const i=ar(e),c=or(e.get("body")),l=Us(i,s,"try");l.build=()=>ht("createTry",no(s),Di.types.identifier(c.name)),o.statements.length&&Zs("render",i,n,o.statements),(0,zi.getProgram)().node.body.push(Di.types.expressionStatement(ht("enableCatch"))),Ys(i,n,l,Aa(o.properties)),e.remove()}}}),attributes:{},autocomplete:[{description:"Used to capture errors and display placeholders for nested content.",descriptionMoreURL:"https://markojs.com/docs/core-tags/#try"}],types:f.name+"/tag-types/try.d.marko"},Vi={taglibId:f.taglibId,"<attrs>":x,"<await>":ko,"<client>":Mo,"<const>":Lo,"<debug>":$o,"<define>":Ma,"<effect>":Ia,"<else-if>":ri,"<else>":si,"<export>":La,"<for>":ma,"<html-comment>":Fa,"<html-script>":_a,"<html-style>":Ha,"<id>":Ka,"<if>":ti,"<import>":pi,"<let>":fi,"<lifecycle>":bi,"<log>":xi,"<return>":vs,"<script>":ki,"<server>":Ci,"<static>":Pi,"<style>":Ri,"<try>":_i},Wi={translate:{enter(e){throw e.buildCodeFrameError("CDATA sections are not supported in Marko.")}}},qi={translate:{exit(e){e.remove()}}},Gi={translate:{enter(e){throw e.buildCodeFrameError("XML declarations sections are not supported in Marko.")}}},Hi={translate:{exit(e){te()&&ps(e)`<!${e.node.value}>`,e.remove()}}},Ji=r("../../browser-shims/compiler/index.js"),Zi=r("../../browser-shims/compiler/babel-utils.js"),Ki={analyze(e){if(e!==le(e))return;const t=ie(e);if(t&&(t.isMarkoPlaceholder()||t.isMarkoScriptlet()&&"server"===t.node.target))return;if(Xi(t)&&((0,Zi.isNativeTag)(t.parentPath)&&/^on[A-Z-]/.test(t.node.name)||Re(t.parentPath,"script")||Re(t.parentPath,"lifecycle")||Re(t.parentPath,"for")))return;const{node:r}=e,s=ar(e),n=r.extra??={},{markoOpts:o,opts:{filename:a}}=(0,Zi.getFile)(),i=n.name=H(e.node.id?.name||(Xi(t)?t.node.default?Ji.types.toIdentifier(t.parentPath.has("var")?t.parentPath.get("var"):t.parentPath.get("name")):t.node.name:Ji.types.isVariableDeclarator(e.parent)&&Ji.types.isIdentifier(e.parent.id)?e.parent.id.name:Ji.types.isObjectMethod(r)&&Ji.types.isIdentifier(r.key)?r.key.name:"anonymous"));n.section=s,n.registerId=(0,Zi.getTemplateId)(o,a,`${s.id}/${i.slice(1)}`)}};function Xi(e){return!!e&&e.isMarkoAttribute()}var Yi=r("../../browser-shims/compiler/babel-utils.js"),Qi={analyze(e){const{node:t}=e,{source:r}=t,{value:s}=r,n=(0,Yi.resolveTagImport)(e,s);if(n){t.extra??={},t.extra.tagImport=n;const r=e.hub.file.metadata.marko.tags;r.includes(n)||r.push(n)}},translate:{exit(e){const{node:t}=e,{extra:r}=t,s=r?.tagImport;s&&(t.source.value=s)}}},ec=r("../../browser-shims/compiler/index.js");function tc(e){const t=e.parentPath.isMarkoTagBody()&&e.parentPath.parentPath;if(t&&Fe(t))switch(t.node.name.value){case"html-comment":case"html-script":case"html-style":return!0}return!1}r("../../browser-shims/compiler/index.js");var rc=Symbol("placeholder node binding"),sc=Symbol("placeholder has sibling text"),nc={analyze(e){if(tc(e))return;const{node:t}=e,r=T(t.value),{confident:s,computed:n}=r;if(!s||!t.escape&&!oc(n)){const s=nr(e),n=(t.extra??={})[rc]=In("#text",0,s);!function(e){const t=e.node.extra;let r=e.getPrevSibling();for(;r.node;){const e=fr(r,"endType");if(null!==e){if(4===e||1===e||2===e)return t[sc]=1;break}r=r.getPrevSibling()}if(!r.node&&ec.types.isProgram(e.parentPath))return t[sc]=1;let s=e.getNextSibling();for(;s.node;){const e=fr(s,"startType");if(null!==e){if(4===e||1===e||2===e)return t[sc]=2;break}s=s.getNextSibling()}if(!s.node&&ec.types.isProgram(e.parentPath))return t[sc]=2;t[sc]=0}(e),Ot(s,n,r)}},translate:{exit(e){if(tc(e))return;const{node:t}=e,{value:r}=t,s=T(r),{confident:n,computed:o}=s;if(n&&oc(o))return void e.remove();const a=te(),i=ps(e),c=t.extra||{},l=c[rc],p=a||n&&t.escape,u=p?t.escape?"escapeXML":"toString":t.escape?"data":"html",d=ar(e),f=l&&Dt(d,l),m=c[sc];n&&p?i`${vt()[u](o)}`:(1===m?(a&&f&&(!0===f||f.state?i`<!>`:i`${ht("commentSeparator",Ur(f,!0))}`),ns(e,37)):2===m?ns(e,37):(a||i` `,ns(e,32)),a?(i`${ht(u,r)}`,l&&ys(e,l,f)):Zs("render",ar(e),s.referencedBindings,ec.types.expressionStatement("data"===u?ht("data",ec.types.memberExpression(yn,no(l),!0),r):ht("html",yn,r,no(l))))),ss(e),e.remove()}}};function oc(e){return null==e||!1===e}var ac=r("../../browser-shims/compiler/index.js"),ic=new WeakMap,cc={migrate(e){const{name:t}=e.node;if(!e.scope.hasBinding(t)&&"out"===t){if(!ac.types.isMemberExpression(e.parent)||!ac.types.isIdentifier(e.parent.property)||"global"!==e.parent.property.name)throw e.buildCodeFrameError("Only `out.global` is supported for compatibility.");e.parentPath.replaceWith(ac.types.identifier("$global"))}},analyze(e){const{name:t}=e.node;e.scope.hasBinding(t)||("$global"===t?$n(e):"$signal"===t&&(nr(e).hasAbortSignal=!0,$n(e)))},translate(e){const{name:t}=e.node;if(!e.scope.hasBinding(t))switch(t){case"$global":te()?e.replaceWith(ac.types.callExpression(bt("$global"),[])):e.replaceWith(ac.types.memberExpression(yn,ac.types.identifier("$global")));break;case"$signal":if(te())e.replaceWith(ac.types.callExpression(ac.types.arrowFunctionExpression([],ac.types.blockStatement([ac.types.throwStatement(ac.types.newExpression(ac.types.identifier("Error"),[ac.types.stringLiteral("Cannot use $signal in a server render.")]))])),[]));else{const t=ar(e),r=ce(e);let s,n=ic.get(t);n?s=n.get(r):(n=new Map,ic.set(t,n)),s||(s=n.size,n.set(r,s),Zs("render",t,r.node.extra?.referencedBindings,ac.types.expressionStatement(ac.types.callExpression(bt("resetAbortSignal"),[yn,ac.types.numericLiteral(s)])),!1)),e.replaceWith(ac.types.callExpression(bt("getAbortSignal"),[yn,ac.types.numericLiteral(s)]))}}}},lc={analyze(e){if(!e.node.static)throw e.buildCodeFrameError("Scriptlets are not supported when using the tags api.");Dn(nr(e),e.node,e.node.body)},translate:{exit(e){const{node:t}=e,r=te();t.target&&t.target!==(r?"server":"client")?e.remove():r||(V(t,"body",fn),e.replaceWithMultiple(t.body))}}},pc=r("../../browser-shims/compiler/index.js"),uc=r("../../browser-shims/compiler/babel-utils.js"),dc=(r("../../browser-shims/compiler/index.js"),r("../../browser-shims/compiler/babel-utils.js")),fc={analyze:{enter(e){(0,dc.assertNoVar)(e),(0,dc.assertNoArgs)(e);const t=e.get("body");if(sr(t),Ln(t,3),!(0,dc.findParentTag)(e))throw e.get("name").buildCodeFrameError("@tags must be nested within another tag.")}},translate:{enter(e){te()&&ds(e)},exit(e){te()&&(fs(e),on(e.get("body")))}}},mc=r("../../browser-shims/compiler/index.js"),yc=r("../../browser-shims/compiler/babel-utils.js"),gc=u(r("../../node_modules/path-browserify/index.js")),bc=Symbol("custom tag child scope"),hc=Symbol("custom tag scope offset"),vc=Symbol("custom tag child serialize reasons"),xc={analyze:{enter(e){if((0,yc.assertAttributesOrSingleArg)(e),Uo(e),!(0,yc.getTagTemplate)(e)){const t=$e(e);if(t&&e.scope.hasBinding(t))throw e.get("name").buildCodeFrameError(`Local variables must be in a dynamic tag unless they are PascalCase. Use \`<\${${t}}/>\` or rename to \`${t.charAt(0).toUpperCase()+t.slice(1)}\`.`);throw e.get("name").buildCodeFrameError("Unable to find entry point for custom tag.")}const t=nr(e),r=e.get("body"),s=e.node.extra??={},n=s[bc]=In("#childScope",0,t),o=new Set([s]);sr(r),Ln(r,3);const a=(0,yc.loadFileForTag)(e);if(!a)throw e.get("name").buildCodeFrameError("Unable to resolve file for tag.");const i=Pn(e,4);if(i&&(i.scopeOffset=s[hc]=In("#scopeOffset",0,t)),a.opts.filename===e.hub.file.opts.filename){if(Dn(t,e.node,so(e.node)),i){const e=(0,yc.getProgram)().node.extra.returnValueExpr;Wn(i,e),Ot(t,n,e)}}else{const r=a.ast.program,c=r.extra,l=r.params[0].extra?.binding,p={};if(Ac(s,t,e,c?.domExports.input,o,p),i){const e=Ec(c.returnSerializeReason,l,p);Wn(i,e),Ot(t,n,e)}if(c.inputSerializeReasons){const e=s[vc]=[];for(const r of c.inputSerializeReasons){const s=Symbol();e.push(s),Ot(t,n,Ec(r,l,p),s)}}(0,yc.getProgram)().node.extra.hasInteractiveChild=c?.isInteractive||c?.hasInteractiveChild||!1}Ot(t,n,function(e){let t,r;for(const s of e)r?r.push(s):t?r=[t,s]:t=s;return r||t}(o))}},translate:{enter(e){ns(e),te()&&ds(e)},exit(e){te()?function(e){const t=e.get("body"),{node:r}=e,s=r.extra;let n;if(fs(e),on(t),mc.types.isStringLiteral(r.name)){const t=wc(e);n=Tc(e.hub.file,t)?mc.types.identifier(zr()):(0,yc.importDefault)(e.hub.file,t,$e(e))}else n=r.name;const o=r.var,a=ar(e),i=(0,yc.loadFileForTag)(e).ast.program.extra,c=i.domExports?.input,{properties:l,statements:p}=c?va(e,c.props):{properties:[],statements:[]},u=s[bc],d=Dt(a,u),f=s[vc];let m;if(f)if(1===f.length){const e=Dt(a,u,f[0]);m=e?1==e||e.state?mc.types.numericLiteral(1):Ur(e,!0):void 0}else{const e=[];let t=!1,r=!1;for(let s=0;s<f.length;s++){const n=Dt(a,u,f[s]);if(n){t||=!0!==n&&!n.state;const r=i.inputSerializeReasons[s];e.push(mc.types.objectProperty(Dr(mc.types.numericLiteral(s),ve(r,", ",co)),!0===n||n.state?mc.types.numericLiteral(1):Ur(n,!1)))}else r=!0}e.length&&(m=t||r?mc.types.objectExpression(e):mc.types.numericLiteral(1))}if(d){const t=J(u?.name);e.insertBefore(mc.types.variableDeclaration("const",[mc.types.variableDeclarator(t,ht("peekNextScopeId"))])),Is(a,u,ht("writeExistingScope",t)),o&&p.push(mc.types.expressionStatement(ht("setTagVar",ir(a),no(e.node.extra[hc]),t,mc.types.stringLiteral(Qs(a,r.var.extra?.binding,"var")))))}if(r.extra.tagNameNullable){const t=xa(l);let r;if(t){const s=t.value;t.value=r=J("content");const[n]=e.insertBefore(mc.types.variableDeclaration("const",[mc.types.variableDeclarator(r,s)]));n.skip()}let s=Cc(n,Aa(l),m);o&&(Po(e,mc.types.unaryExpression("void",mc.types.numericLiteral(0)),"let"),s=mc.types.assignmentExpression("=",o,s)),p.push(mc.types.ifStatement(n,mc.types.expressionStatement(s),r&&Mc(r)))}else o?Po(e,Cc(n,Aa(l),m)):p.push(Mc(n,Aa(l),m));for(const t of e.replaceWithMultiple(p))t.skip()}(e):function(e){const t=ar(e),{node:r}=e,s=r.extra[bc],n=ps(e),{file:o}=e.hub,a=mc.types.isIdentifier(r.name)?r.name.name:mc.types.isStringLiteral(r.name)?r.name.value:"tag",i=wc(e),c=(0,yc.loadFileForTag)(e),l=c.ast.program.extra.domExports,p=kc(o,i,l.setup,a),u=l.input;if(r.var){const e=_s(r.var.extra.binding);e.register=!0,e.buildAssignment=(e,t)=>mc.types.callExpression(bt("tagVarSignalChange"),[Sn(e,s),t]),Zs("render",t,void 0,mc.types.expressionStatement(ht("setTagVar",yn,no(s),e.identifier)))}Zs("render",t,void 0,mc.types.expressionStatement(mc.types.callExpression(p,[Sn(t,s)]))),u&&Sc(e,u,`${$e(e)||"tag"}_input`,{circular:c.opts.filename===o.opts.filename,tagSection:t,relativePath:i,childScopeBinding:s,attrTagCallsByTag:void 0}),n`${(0,yc.importNamed)(o,i,l.template,`${a}_template`)}`,function(e,t){const r=Xr(ar(e));Yr(ar(e)).push(`${es[e.node.var?48:47]}`,t.name,es[38]),Zr(r,String.fromCharCode(e.node.var?48:47)),r.push(t,String.fromCharCode(38))}(e,(0,yc.importNamed)(o,i,l.walks,`${a}_walks`)),e.remove()}(e)}}};function wc(e){const{node:t,hub:{file:r}}=e;let s;if(mc.types.isStringLiteral(t.name)){const t=(0,yc.getTagTemplate)(e);s=t&&(0,yc.resolveRelativePath)(r,t)}else t.extra?.tagNameImported&&(s=t.extra.tagNameImported);if(!s){const t=$e(e);if(t&&e.scope.hasBinding(t))throw e.get("name").buildCodeFrameError(`Local variables must be in a dynamic tag unless they are PascalCase. Use \`<\${${t}}/>\` or rename to \`${t.charAt(0).toUpperCase()+t.slice(1)}\`.`);throw e.get("name").buildCodeFrameError("Unable to find entry point for custom tag.")}return s}function Ac(e,t,r,s,n,o){if(!s)return void to(so(r.node));if(!s.props||r.node.arguments?.length)return void(o.value=Dn(t,r.node,so(r.node)));const a=o.known={},i=Uo(r),c=new Set;if(i){const o=new Map,l=(e,t)=>{const r=so(t.node),s=o.get(e);s?s.referenceNodes=s.referenceNodes.concat(r):o.set(e,{firstTag:t,referenceNodes:r})};for(const e in i)c.add(i[e].name);const p=r.node.body.attributeTags?r.get("body").get("body"):r.get("attributeTags");for(const r of p)if(r.isMarkoTag())if((0,yc.isAttributeTag)(r)){const o=i[$e(r)],c=s.props[o.name];c?c.props&&!o.dynamic?Ac(e,t,r,c,n,a[o.name]={}):l(o.group,r):to(so(r.node))}else{const e=r.node.extra.attributeTagGroup;let t=!1;for(const r of e)if(s.props[i[r].name]){t=!0;break}t?l(e,r):to(so(r.node))}for(const[e,{firstTag:{node:r},referenceNodes:s}]of o){const o=Dn(t,r,s),c={value:o};n.add(o);for(const t of e)a[i[t].name]=c}}if(!c.has("content")){const e=or(r.get("body"));e&&(c.add("content"),a.content={value:void 0},e.downstreamBinding=(s.props.content||s.props).binding)}const{attributes:l}=r.node;let p;for(let e=l.length;e--;){const t=l[e];if(mc.types.isMarkoAttribute(t)){if(c.has(t.name)||!s.props[t.name]){to(t.value);continue}c.add(t.name)}if(p)p.push(t.value);else if(mc.types.isMarkoSpreadAttribute(t))p=[t.value];else{const e=t.value.extra??={};a[t.name]={value:e},n.add(e)}}p&&(o.value=Dn(t,r.node,p))}function Sc(e,t,r,s){if(e.node.arguments?.length){const[n]=e.node.arguments,o=kc(e.hub.file,s.relativePath,t.id,r);return void Zs("render",s.tagSection,e.node.extra?.referencedBindings,mc.types.expressionStatement(mc.types.callExpression(o,[Sn(s.tagSection,s.childScopeBinding),mc.types.isSpreadElement(n)?mc.types.memberExpression(n.argument,mc.types.numericLiteral(0),!0):n])))}if(!t.props||s.circular){const n=e.node.extra?.referencedBindings,o=kc(e.hub.file,s.relativePath,t.id,r),a=va(e);a.statements.length&&Zs("render",s.tagSection,n,a.statements);let i=Aa(a.properties);if((0,yc.isAttributeTag)(e)){const t=$e(e),r=e.parentPath,n=Uo(r)?.[t]?.repeated;if(n){let e=(s.attrTagCallsByTag||=new Map).get(r);e||s.attrTagCallsByTag.set(r,e=new Map);const n=e.get(t);if(n)return void(n.expression=ht("attrTags",n.expression,i));e.set(t,i=mc.types.parenthesizedExpression(ht("attrTag",i)))}else i=ht("attrTag",i)}return void Zs("render",s.tagSection,n,mc.types.expressionStatement(mc.types.callExpression(o,[Sn(s.tagSection,s.childScopeBinding),i])))}const n=new Set,o=Uo(e);if(o){const a=e.get("attributeTags"),i=new Map,c=(e,r)=>{const s=a[r];let n=i.get(e)?.statements;return n||(n=[],i.set(e,{referencedBindings:s.node.extra?.referencedBindings,statements:n})),wa(a,r,o,n,t.props)};for(const e in o)n.add(o[e].name);for(let e=0;e<a.length;e++){const n=a[e];if(n.isMarkoTag())if((0,yc.isAttributeTag)(n)){const a=o[$e(n)],i=t.props[a.name];i&&(a.dynamic?e=c(a.group,e):Sc(n,i,`${r}_${a.name}`,s))}else n.node.extra?.attributeTagGroup&&(e=c(n.node.extra.attributeTagGroup,e))}for(const[n,{referencedBindings:a,statements:c}]of i){const i=[];for(const l of n){const n=o[l],p=t.props[n.name];if(!p)continue;const u=kc(e.hub.file,s.relativePath,p.id,`${r}_${n.name}`);i.push(mc.types.variableDeclarator(zo(n))),Zs("render",s.tagSection,a,[mc.types.variableDeclaration("let",i),...c]),Zs("render",s.tagSection,a,mc.types.expressionStatement(mc.types.callExpression(u,[Sn(s.tagSection,s.childScopeBinding),zo(n)])))}}}const a=e.node.body.extra?.section;if(a&&!n.has("content")&&(n.add("content"),t.props.content)){const n=(0,yc.importNamed)(e.hub.file,s.relativePath,t.props.content.id,`${r}_content`);Zs("render",s.tagSection,void 0,mc.types.expressionStatement(mc.types.callExpression(n,[Sn(s.tagSection,s.childScopeBinding),mc.types.callExpression(mc.types.identifier(a.name),[yn])])))}const{attributes:i}=e.node,c=[];let l;for(let e=i.length;e--;){const r=i[e];if(mc.types.isMarkoAttribute(r)){if(!t.props[r.name]||n.has(r.name))continue;if(n.add(r.name),l){l.push(mt(r.name,r.value));continue}c.push(r)}else l?l.push(mc.types.spreadElement(r.value)):l=[mc.types.spreadElement(r.value)]}for(const n of c.reverse()){const o=t.props[n.name],a=kc(e.hub.file,s.relativePath,o.id,`${r}_${n.name}`);Zs("render",s.tagSection,n.value.extra?.referencedBindings,mc.types.expressionStatement(mc.types.callExpression(a,[Sn(s.tagSection,s.childScopeBinding),n.value])))}const p=new Set(Object.keys(t.props));for(const e of n)p.delete(e);if(p.size){const n=e.node.extra?.referencedBindings;let o=jc;if(l){const e=J(`${r}_spread`);l.reverse(),o=t=>yt(e,t),Zs("render",s.tagSection,n,[mc.types.variableDeclaration("const",[mc.types.variableDeclarator(e,Aa(l))])])}for(const a of p){const i=t.props[a],c=kc(e.hub.file,s.relativePath,i.id,`${r}_${a}`);Zs("render",s.tagSection,n,mc.types.expressionStatement(mc.types.callExpression(c,[Sn(s.tagSection,s.childScopeBinding),o(a)])))}}}function kc(e,t,r,s){return Tc(e,t)?mc.types.identifier(r):(0,yc.importNamed)(e,t,r,s)}function Ec(e,t,r){if(e)return!0===e||function(e,t){if(e){if(Array.isArray(e)){const r=e.length;let s,n=0;for(;n<r;){let o=t(e[n++]);if(o){for(s=o;n<r;)if(o=t(e[n++]),o){for(s=[s,o];n<r;)o=t(e[n++]),o&&s.push(o);return s}return s}}return s}return t(e)}}(e,(e=>function(e,t,r){if(r){let s=r;if(e!==t){const r=[t.property];let n=t;for(;e!==(n=n.upstreamAlias);)r.push(n.property);for(let e=r.length;e--;){const t=s.known?.[r[e]];if(!t)break;s=t}}return s.value}}(t,e,r)))}function Tc(e,t){const{filename:r}=e.opts;return t===r||"."===t[0]&&gc.default.resolve(r,"..",t)===r}function Mc(e,...t){return mc.types.expressionStatement(Cc(e,...t))}function Cc(e,...t){return mc.types.callExpression(e,t.filter(Boolean))}function jc(){return mc.types.unaryExpression("void",mc.types.numericLiteral(0))}var Ic=r("../../browser-shims/compiler/index.js"),Pc=r("../../browser-shims/compiler/babel-utils.js"),Lc=Symbol("dynamic tag dom binding"),Oc=Symbol("custom tag scope offset"),Bc={analyze:{enter(e){(0,Pc.assertAttributesOrArgs)(e),Uo(e);const t=nr(e),r=Dn(t,e.node,[e.node.name,...so(e.node)]),s=e.get("body"),n="class"===r.featureType,o=!!e.node.var,a=r[Lc]=In("#text",0,t);o&&(Pn(e,4),e.node.var.extra.binding.scopeOffset=r[Oc]=In("#scopeOffset",0,t)),sr(s),Ln(s,3),Ot(t,a,n||o||r)}},translate:{enter(e){ns(e,e.node.var?49:37),ss(e),te()&&ds(e)},exit(e){const{node:t}=e,r=t.extra,s=r[Lc],n=ar(e),o="class"===r.featureType;let a=t.name;Ic.types.isStringLiteral(a)&&(a=(0,Pc.importDefault)(e.hub.file,wc(e),a.value)),o&&(te()?(0,Pc.getProgram)().node.body.push(Ic.types.markoScriptlet([Ic.types.expressionStatement(Ic.types.callExpression((0,Pc.importNamed)(e.hub.file,xt(),"s"),[Ic.types.identifier(a.name),Ic.types.stringLiteral((0,Pc.loadFileForTag)(e).metadata.marko.id)]))],!0)):(0,Pc.getProgram)().node.body.push(Ic.types.expressionStatement(ht("register",Ic.types.stringLiteral((0,Pc.loadFileForTag)(e).metadata.marko.id),Ic.types.identifier(a.name)))));const{properties:i,statements:c}=va(e,void 0,void 0,o?"renderBody":"content"),l=[];let p=!1;if(t.arguments)p=!0,l.push(...t.arguments),i.length&&l.push(Aa(i));else{const e=xa(i);e?(i.splice(i.indexOf(e),1),l.push(Aa(i),e.value)):l.push(Aa(i))}if(te()){fs(e),on(e.get("body"));const r=Ur(Dt(n,s),!0),o=p?ht("dynamicTag",ir(n),no(s),a,Ic.types.arrayExpression(l),Ic.types.numericLiteral(0),Ic.types.numericLiteral(1),r):ht("dynamicTag",ir(n),no(s),a,l[0],l[1]||(r?Ic.types.numericLiteral(0):void 0),r?Ic.types.numericLiteral(0):void 0,r);if(t.var){const r=J(e.get("name").toString()+"_scope");c.push(Ic.types.variableDeclaration("const",[Ic.types.variableDeclarator(r,ht("peekNextScopeId"))])),c.push(Ic.types.variableDeclaration("const",[Ic.types.variableDeclarator(t.var,o)]),Ic.types.expressionStatement(ht("setTagVar",ir(n),no(e.node.extra[Oc]),r,Ic.types.stringLiteral(Qs(n,t.var.extra?.binding,"var")))))}else c.push(Ic.types.expressionStatement(o));for(const t of e.replaceWithMultiple(c))t.skip()}else{const t=ar(e),n=or(e.get("body")),o=Us(t,s,"dynamicTag");let i;if(e.node.var&&(i=_s(e.node.var.extra.binding),i.register=!0,i.buildAssignment=(e,t)=>Ic.types.callExpression(bt("tagVarSignalChange"),[Ic.types.memberExpression(An(i.section,e),Ic.types.stringLiteral(oe().ConditionalScope+oo(s)),!0),t])),o.build=()=>ht("dynamicTag",no(s),n&&Ic.types.identifier(n.name),i?Ic.types.arrowFunctionExpression([],i.identifier):void 0,p&&Ic.types.numericLiteral(1)),l.length){const e=p?Ic.types.arrayExpression(l):l[0];Ic.types.isObjectExpression(e)&&!e.properties.length||(o.extraArgs=[Ic.types.arrowFunctionExpression([],c.length?Ic.types.blockStatement(c.concat(Ic.types.returnStatement(e))):e)])}Ys(t,r.referencedBindings,o,a),e.remove()}}}},$c=/^[A-Z][a-zA-Z0-9_$]*$/,Nc=new WeakMap,Fc={transform:{enter(e){const{node:t}=e,{name:r,attributes:s}=e.node;let n=!1;if(pc.types.isStringLiteral(r)){const s=r.value;e.scope.getBinding(s)&&$c.test(s)&&(t.name=kn(pc.types.identifier(s),r),n=!0)}for(let t=0;t<s.length;t++){const r=s[t];pc.types.isMarkoAttribute(r)&&r.bound&&(r.bound=!1,s.splice(++t,0,Rc(e,r)),n=!0)}n&&e.scope.crawl()}},analyze:{enter(e){const t=(0,uc.getTagDef)(e),r=tr(e),s=t?.analyzer?.hook;if(s)jr(s,e);else if(0!==r)switch(r){case 1:xc.analyze.enter(e);break;case 3:fc.analyze.enter(e);break;case 2:Bc.analyze.enter(e)}else sa.analyze.enter(e)},exit(e){const t=(0,uc.getTagDef)(e)?.analyzer?.hook;t&&Ir(t,e)}},translate:{enter(e){const t=(0,uc.getTagDef)(e),r=e.node.extra;if(t?.translator)return t.translator.path&&e.hub.file.metadata.marko.watchFiles.push(t.translator.path),void jr(t.translator.hook,e);for(const t of e.get("attributes"))if(t.isMarkoAttribute()){if(t.node.arguments)throw t.buildCodeFrameError(`Unsupported arguments on the \`${t.node.name}\` attribute.`);if(t.node.modifier){if(!(0,uc.isNativeTag)(t.parentPath))throw t.buildCodeFrameError(`Unsupported modifier \`${t.node.modifier}\`.`);t.node.name+=`:${t.node.modifier}`}}if(r.tagNameDynamic&&r.tagNameNullable&&!e.get("name").isIdentifier()&&te()){const t=J("tagName"),[r]=e.insertBefore(pc.types.variableDeclaration("const",[pc.types.variableDeclarator(t,e.node.name)]));r.skip(),e.set("name",t)}switch(r.tagNameType){case 0:sa.translate.enter(e);break;case 1:xc.translate.enter(e);break;case 2:Bc.translate.enter(e);break;case 3:fc.translate.enter(e)}},exit(e){const t=(0,uc.getTagDef)(e)?.translator;if(t)Ir(t.hook,e);else switch(e.node.extra.tagNameType){case 0:sa.translate.exit(e);break;case 1:xc.translate.exit(e);break;case 2:Bc.translate.exit(e);break;case 3:fc.translate.exit(e)}}}};function Rc(e,t){const r=t.name+"Change";if(pc.types.isIdentifier(t.value)){const s=e.scope.getBinding(t.value.name);if(!s)return pc.types.markoAttribute(r,Dc(t.value));const n=Nc.get(s.identifier);if(!n){const e=pc.types.markoAttribute(r,Dc(t.value));return Nc.set(s.identifier,e),e}if("Identifier"===n.type)return pc.types.markoAttribute(r,kn(pc.types.identifier(n.name),t.value));const o=pe(s.path)?s.path:ie(s.path);if(!o?.isMarkoTag()&&!o?.isMarkoTagBody())throw e.hub.buildError(t.value,"Unable to bind to value.");const a=H(r),i=pc.types.markoTag(pc.types.stringLiteral("const"),[pc.types.markoAttribute("value",n.value,null,null,!0)],pc.types.markoTagBody([]),null,pc.types.identifier(a));return Nc.set(s.identifier,n.value=pc.types.identifier(a)),o.isMarkoTag()?o.insertAfter(i):o.unshiftContainer("body",i),pc.types.markoAttribute(r,kn(pc.types.identifier(a),t.value))}if(pc.types.isMemberExpression(t.value)){const e=t.value.property;if(!pc.types.isPrivateName(t.value.property))return pc.types.markoAttribute(r,pc.types.memberExpression(pc.types.cloneNode(t.value.object),"Identifier"===e.type?kn(pc.types.identifier(e.name+"Change"),e):pc.types.binaryExpression("+",pc.types.cloneNode(e),pc.types.stringLiteral("Change")),"Identifier"!==e.type))}throw e.hub.buildError(t.value,"Attributes may only be bound to identifiers or member expressions")}function Dc(e){const t="_new_"+e.name;return pc.types.arrowFunctionExpression([kn(pc.types.identifier(t),e)],pc.types.blockStatement([pc.types.expressionStatement(pc.types.assignmentExpression("=",kn(pc.types.identifier(e.name),e),kn(pc.types.identifier(t),e)))]))}r("../../browser-shims/compiler/index.js");var zc=function(e){const t={migrate:{},transform:{},analyze:{},translate:{}};for(const r in e){const s=r,n=e[s];n.migrate&&(t.migrate[s]=n.migrate),n.transform&&(t.transform[s]=n.transform),n.analyze&&(t.analyze[s]=n.analyze),n.translate&&(t.translate[s]=n.translate)}return t}({Program:hn,Function:Ki,ReferencedIdentifier:cc,ImportDeclaration:Qi,MarkoDocumentType:Hi,MarkoDeclaration:Gi,MarkoCDATA:Wi,MarkoText:{translate:{exit(e){tc(e)||(ps(e)`${e.node.value}`,ss(e),e.remove())}}},MarkoTag:Fc,MarkoPlaceholder:nc,MarkoScriptlet:lc,MarkoComment:qi}),Uc=["tags"],_c="tags",{transform:Vc,analyze:Wc,translate:qc}=zc,Gc=[["../../node_modules/@marko/runtime-tags/dist/translator",{...Vi,migrate:zc.migrate}]];function Hc(e,t){return[`${f.name}${t?"":"/debug"}/${"html"===e?"html":"dom"}`]}},"../../node_modules/@marko/runtime-tags/package.json":e=>{e.exports=JSON.parse('{"name":"@marko/runtime-tags","version":"6.0.15","description":"Optimized runtime for Marko templates.","keywords":["api","marko","runtime","tags"],"homepage":"https://github.com/marko-js/marko","bugs":"https://github.com/marko-js/marko/issues","repository":{"type":"git","url":"git+https://github.com/marko-js/marko.git","directory":"packages/runtime-tags"},"license":"MIT","exports":{".":{"types":"./index.d.ts"},"./package.json":"./package.json","./translator":"./dist/translator/index.js","./tag-types/*":"./tag-types/*","./debug/*":{"types":"./dist/*.d.ts","import":"./dist/debug/*.mjs","default":"./dist/debug/*.js"},"./*":{"types":"./dist/*.d.ts","import":"./dist/*.mjs","default":"./dist/*.js"}},"types":"index.d.ts","files":["dist","tag-types","index.d.ts","tags-html.d.ts","!**/meta.*.json","!**/__tests__","!**/*.tsbuildinfo"],"scripts":{"build":"node -r ~ts ./scripts/bundle.ts"},"dependencies":{"@marko/compiler":"^5.39.19","csstype":"^3.1.3","magic-string":"^0.30.17"},"engines":{"node":"18 || 20 || >=22"},"exports:override":{".":{"types":"./index.d.ts"},"./translator":"./src/translator/index.ts","./tag-types/*":"./tag-types/*","./debug/*":"./src/*.ts","./*":"./src/*.ts"}}')}}]);
//# sourceMappingURL=420.5350c725.js.map