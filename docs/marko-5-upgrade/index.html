<!doctype html><html lang=en><head><meta charset=UTF-8><title>Upgrading to Marko 5 | Marko</title><link rel=icon type=image/png sizes=32x32 href=/assets/64c1e059.png><meta name=viewport content="width=device-width, initial-scale=1"><meta name=Description content="Marko is a friendly (and fast!) UI library that makes building web apps fun."><script src="/assets/666.f1112586.js" async></script><script src="/assets/323.2631a76c.js" async></script><script src="/assets/987.6e97928f.js" async></script><link rel="stylesheet" href="/assets/b9cec1ec.css"></head><body class=docs><!--M#s0-1-0-8--><header data-marko-key="@header s0-1-0-8" class=site-header><div class=content><a href=/ ><img src=/assets/91bc26e5.svg alt="Marko Home" class=site-logo></a><div class=stuff><nav class=site-menu><a href=/docs/getting-started/ >Docs</a><a href=/try-online>Try Online</a><a href=https://github.com/marko-js/marko>GitHub</a><!--M^s0-1-0-8-8 s0-1-0-8 8--><form data-marko='{"onclick":"focus s0-1-0-8-8 false","onsubmit":"search s0-1-0-8-8 false"}' class="site-search search"><img src=/assets/e213de74.png alt><input data-marko='{"onblur":"shrink s0-1-0-8-8 false","onfocus":"grow s0-1-0-8-8 false"}' data-marko-key="@input s0-1-0-8-8" type=search placeholder="search the docs..."></form><!--M/--></nav><button data-marko='{"onclick":"toggleMenu s0-1-0-8 false"}' class=menu>&#9776;</button></div></div></header><!--M/--><!--M#s0-1-0-9--><div data-marko-key="@sidebar s0-1-0-9" class=doc-sidebar><button data-marko='{"onclick":"hide s0-1-0-9 false"}' class=close>&#10005;</button><h1>Marko <!--M^s0-1-0-9-9 s0-1-0-9 9--><select data-marko='{"onchange":"switchVersion s0-1-0-9-9 false"}'><option value=current selected>5.18.2</option><option value=http://marko-v4.github.io/docs/ >4.x</option><option value=http://v3.markojs.com/docs/ >3.x</option><option value=http://marko-v2.github.io/docs/ >2.x</option></select><!--M/--></h1><!--M^s0-1-0-9-10 s0-1-0-9 10--><form data-marko='{"onclick":"focus s0-1-0-9-10 false","onsubmit":"search s0-1-0-9-10 false"}' class="site-search search"><img src=/assets/e213de74.png alt><input data-marko='{"onblur":"shrink s0-1-0-9-10 false","onfocus":"grow s0-1-0-9-10 false"}' data-marko-key="@input s0-1-0-9-10" type=search placeholder="search the docs..."></form><!--M/--><ul class=toc-level0><li class=section><a href=/docs/guides-overview/ >GUIDES</a></li><li><a href=/docs/installing/ >Installing</a></li><li><a href=/docs/getting-started/ >Getting started</a></li><li><a href=/docs/conditionals-and-lists/ >Conditionals and lists</a></li><li><a href=/docs/custom-tags/ >Custom tags</a></li><li><a href=/docs/state/ >State</a></li><li><a href=/docs/styles/ >Styles</a></li><li><a href=/docs/events/ >Events</a></li><li><a href=/docs/body-content/ >Body content</a></li><li><a class=selected href=/docs/marko-5-upgrade/ >Marko 5 upgrade</a><ul class="toc toc-level1"><li><a href="#step-0-ensure-youre-in-a-working-state">Step 0 - Ensure you&#39;re in a working state</a></li><li><a href="#step-1-upgrade-to-latest-4x">Step 1 - Upgrade to latest 4.x</a></li><li><a href="#step-2-deal-with-deprecations">Step 2 - Deal with deprecations</a></li><li><a href="#step-3-upgrade-dependencies">Step 3 - Upgrade dependencies</a></li><li><a href="#step-4-upgrade-marko">Step 4 - Upgrade marko</a></li></ul></li><li><a href=/docs/troubleshooting-streaming/ >Troubleshooting Streaming</a></li></ul><ul class=toc-level0><li class=section><a href=/docs/tutorials-overview/ >TUTORIALS</a></li><li><a href=/docs/color-picker/ >Color Picker</a></li></ul><ul class=toc-level0><li class=section><a href=/docs/reference-overview/ >REFERENCE</a></li><li><a href=/docs/rendering/ >Rendering</a></li><li><a href=/docs/syntax/ >Syntax</a></li><li><a href=/docs/core-tags/ >Core tags</a></li><li><a href=/docs/class-components/ >Class components</a></li><li><a href=/docs/marko-json/ >marko.json</a></li><li><a href=/docs/compiler/ >Compiler</a></li></ul><ul class=toc-level0><li class=section><a href=/docs/bundler-integrations-overview/ >BUNDLER INTEGRATIONS</a></li><li><a href=/docs/vite/ >Vite</a></li><li><a href=/docs/webpack/ >Webpack</a></li><li><a href=/docs/rollup/ >Rollup</a></li><li><a href=/docs/lasso/ >Lasso</a></li></ul><ul class=toc-level0><li class=section><a href=/docs/server-integrations-overview/ >SERVER INTEGRATIONS</a></li><li><a href=/docs/cloudflare-workers/ >Cloudflare Workers</a></li><li><a href=/docs/express/ >Express</a></li><li><a href=/docs/fastify/ >Fastify</a></li><li><a href=/docs/koa/ >Koa</a></li><li><a href=/docs/http/ >HTTP</a></li></ul><ul class=toc-level0><li class=section><a href=/docs/tooling-overview/ >TOOLING</a></li><li><a href=/docs/editor-plugins/ >Editor plugins</a></li></ul><ul class=toc-level0><li class=section><a href=/docs/articles-overview/ >ARTICLES</a></li><li><a href=/docs/marko-vs-react/ >Marko vs React</a></li><li><a href=/docs/why-is-marko-fast/ >Why is Marko Fast</a></li><li><a href=/docs/10-awesome-marko-features/ >10 Awesome Marko Features</a></li></ul></div><!--M/--><main class=content><div class=doc-layout><div class=doc-container><div class=doc-content><h1 id=upgrading-to-marko-5><a name=upgrading-to-marko-5 class=anchor href=#upgrading-to-marko-5><span class=header-link></span></a>Upgrading to Marko 5</h1><p>The following guide will help you get through the upgrade process quickly and smoothly. This guide covers upgrading from Marko 4. If you are upgrading to Marko 5 from a previous version follow those docs first. After any given step you should have a working application.</p><p>This means you should complete a step and get it merged back into master fairly quickly. You shouldn&#39;t need to have a <code>marko-5-upgrade</code> branch for your project that lives in limbo for a couple of weeks falling behind the other changes that are being merged into master.</p><p>If you do decide to pause and later jump in where you left off, be sure to repeat Step 0 first ðŸ˜‰.</p><h2 id=step-0-ensure-youre-in-a-working-state><a name=step-0-ensure-youre-in-a-working-state class=anchor href=#step-0-ensure-youre-in-a-working-state><span class=header-link></span></a>Step 0 - Ensure you&#39;re in a working state</h2><p>Run your application and tests to ensure your project is in a working state. There&#39;s little worse than finding an issue after you&#39;ve started the upgrade process only to figure out the issue existed beforehand.</p><h2 id=step-1-upgrade-to-latest-4x><a name=step-1-upgrade-to-latest-4x class=anchor href=#step-1-upgrade-to-latest-4x><span class=header-link></span></a>Step 1 - Upgrade to latest 4.x</h2><p>Before we start, you&#39;ll want to make sure that you are already on the latest <code>4.x</code> release of <code>marko</code>.</p><script>if(localStorage.getItem('markojs-website:syntax') === 'concise'){document.body.classList.add('concise')}</script><pre class=highlighted style=color:#D0D0E0;background-color:#202034>npm install marko@^4
</pre><p>or</p><pre class=highlighted style=color:#D0D0E0;background-color:#202034>yarn upgrade marko@^4
</pre><blockquote class=null><p>Note: Do NOT run <code>npm install marko</code> (without the <code>@^4</code>). This will put you on Marko 5 and we&#39;re not quite there yet.</p></blockquote><h2 id=step-2-deal-with-deprecations><a name=step-2-deal-with-deprecations class=anchor href=#step-2-deal-with-deprecations><span class=header-link></span></a>Step 2 - Deal with deprecations</h2><p>Run your application and tests and ensure that there are no deprecation warnings logged to the console. If there are, you should follow the instructions in the deprecation messages to avoid the deprecated pattern and migrate to the recommended pattern.</p><p>Additionally, any deprecation warnings that start with <code>MIGRATION</code> are automatically migratable by <a href=https://github.com/marko-js/cli/blob/master/packages/migrate/README.md><code>marko migrate</code></a>. Most migrations are 100% safe and will run automatically. However, there are a few migrations which are considered unsafe: they may only get you 90% of the way there. These migrations will prompt and ask if you want to run the migration. It is highly recommended to run these only on a single component at a time and then finish the migration manually using the guide below so that your app is always in a working state.</p><h2 id=step-3-upgrade-dependencies><a name=step-3-upgrade-dependencies class=anchor href=#step-3-upgrade-dependencies><span class=header-link></span></a>Step 3 - Upgrade dependencies</h2><p>Before upgrading to Marko 5, it is recommended to make sure that your Marko-related dependencies are up-to-date. Many packages have versions that support both Marko 4 and Marko 5. If one of your dependencies doesn&#39;t have a version that supports both, you&#39;ll need to wait to upgrade it until you&#39;re upgrading Marko.</p><p>After upgrading, run your application and tests to ensure that everything is still working as intended. If there are any issues, please refer to the changelogs of the modules you just upgraded to see if you need to make any changes within your app to accommodate the new versions.</p><h2 id=step-4-upgrade-marko><a name=step-4-upgrade-marko class=anchor href=#step-4-upgrade-marko><span class=header-link></span></a>Step 4 - Upgrade marko</h2><p>Phew! With all the prep out of the way we&#39;re finally ready to upgrade <code>marko</code>!</p><pre class=highlighted style=color:#D0D0E0;background-color:#202034>npm install marko@^5
</pre><p>or</p><pre class=highlighted style=color:#D0D0E0;background-color:#202034>yarn upgrade marko@^5
</pre><blockquote class=null><p><strong>Note</strong>: Marko 5 has changed to using ES Modules. This means if you are using CJS modules to <code>require</code> a Marko template you will need to use the default property exported.</p><pre class=highlighted style=color:#D0D0E0;background-color:#202034><span style=color:#66D9EF>const</span> <span style=color:#FFFFFF>template</span> <span style=color:#FFFFFF>=</span> <span style=color:#66D9EF>require</span>(<span style=color:#FFF066>"./template.marko"</span>);

<span style=color:#8F8F9E>// Should become</span>
<span style=color:#66D9EF>const</span> <span style=color:#FFFFFF>template</span> <span style=color:#FFFFFF>=</span> <span style=color:#66D9EF>require</span>(<span style=color:#FFF066>"./template.marko"</span>).<span style=color:#FFFFFF>default</span>;

<span style=color:#8F8F9E>// If you are already using es modules things remain the same</span>
<span style=color:#FF4185>import</span> <span style=color:#FFFFFF>template</span> <span style=color:#FF4185>from</span> <span style=color:#FFF066>"./template.marko"</span>;
</pre></blockquote><a href=https://github.com/marko-js/marko/blob/master/packages/marko/docs/marko-5-upgrade.md class=edit-on-github>EDIT <img src=/assets/62fa77f5.svg></a><h2 id=contributors><a name=contributors class=anchor href=#contributors><span class=header-link></span></a> Contributors</h2><p>Helpful? You can thank these awesome people! You can also <a href=https://github.com/marko-js/marko/blob/master/packages/marko/docs/marko-5-upgrade.md>edit this doc</a> if you see any issues or want to improve it.</p><div class=contributors><a href=https://github.com/ryansolid class=contributor><img src=https://avatars.githubusercontent.com/u/2768267?v=4 class=photo><span class=name>ryansolid</span></a><a href=https://github.com/marko-js/marko/blob/master/packages/marko/docs/marko-5-upgrade.md class="contributor you"><div class=photo><span class=icon>+</span></div><span class=name>You?</span></a></div><footer class="site-footer doc-footer"><a href=https://openjsf.org/  class=openjsf><img src=/assets/f9c991e7.png alt> <span><span class=bold>OpenJS</span>&nbsp;<span class=light>Foundation</span></span></a><div class=separator></div><a href=https://github.com/marko-js/marko/blob/master/LICENSE class=osi><img src=/assets/4dab80b0.png alt> MIT&nbsp;License</a><div class=separator></div><a href=https://github.com/eBay class=ebay><img src=/assets/657b26bd.svg alt=eBay> open&nbsp;source</a></footer></div></div></div></main><script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-66854919-1', 'markojs.com');
    ga('send', 'pageview');
  </script><a href=https://discord.gg/marko target=_blank class=discord-button><img src=/assets/8d84725b.svg alt="Chat in Marko's Discord Server"></a><script>$MC=(window.$MC||[]).concat({"l":1,"w":[["s0-1-0-8",0,{}],["s0-1-0-8-8",1,{"class":"search"}],["s0-1-0-9",2,{"currentDoc":"marko-5-upgrade","toc":"<ul class=\"toc toc-level1\"><li><a href=\"#step-0-ensure-youre-in-a-working-state\">Step 0 - Ensure you&#39;re in a working state\u003C/a>\u003C/li><li><a href=\"#step-1-upgrade-to-latest-4x\">Step 1 - Upgrade to latest 4.x\u003C/a>\u003C/li><li><a href=\"#step-2-deal-with-deprecations\">Step 2 - Deal with deprecations\u003C/a>\u003C/li><li><a href=\"#step-3-upgrade-dependencies\">Step 3 - Upgrade dependencies\u003C/a>\u003C/li><li><a href=\"#step-4-upgrade-marko\">Step 4 - Upgrade marko\u003C/a>\u003C/li>\u003C/ul>"}],["s0-1-0-9-9",3,{}],["s0-1-0-9-10",1,{"class":"search"}]],"t":["OIKmBXjW","HkYzEWAp","mFesaajv","07hv1F0+"]})</script></body></html>