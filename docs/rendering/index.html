<!doctype html><html lang=en><head><meta charset=UTF-8><title>Marko</title><link rel=icon type=image/png sizes=32x32 href=/assets/64c1e059.png><meta name=viewport content="width=device-width, initial-scale=1"><meta name=Description content="Marko is a friendly (and fast!) UI library that makes building web apps fun."><script>
        var scalingBodyFont = false;

        function scaleBodyFont() {
            var height = Math.max(window.outerHeight, window.screen.height);
            document.documentElement.style.fontSize = Math.pow(Math.min(window.innerWidth, height), 0.25)*19+'%';
            scalingBodyFont = false;
        }

        window.addEventListener('resize', function() {
            requestAnimationFrame(scaleBodyFont);
        });

        scaleBodyFont();
    </script><script src="/assets/211.6b63e88c.js" async></script><script src="/assets/616.a8b84c3a.js" async></script><link rel="stylesheet" href="/assets/4cd0f078.css"></head><body class=docs><!--M#s0-0-0-9--><header data-marko-key="@header s0-0-0-9" class=site-header><div class=content><a href=/ ><img src=/assets/2a0575bc.png class=site-logo></a><div class=stuff><nav class=site-menu><a href=/docs/getting-started/ >docs</a><a href=/try-online>try online</a><a href=https://github.com/marko-js/marko>github</a><!--M^s0-0-0-9-8 s0-0-0-9 8--><form data-marko='{"onclick":"focus s0-0-0-9-8 false","onsubmit":"search s0-0-0-9-8 false"}' class="site-search search"><img src=/assets/e213de74.png><input data-marko='{"onblur":"shrink s0-0-0-9-8 false","onfocus":"grow s0-0-0-9-8 false"}' data-marko-key="@input s0-0-0-9-8" type=search placeholder="search the docs..."></form><!--M/--></nav><button data-marko='{"onclick":"toggleMenu s0-0-0-9 false"}' class=menu>&#9776;</button></div></div></header><!--M/--><!--M#s0-0-0-10--><div data-marko-key="@sidebar s0-0-0-10" class=doc-sidebar><button data-marko='{"onclick":"hide s0-0-0-10 false"}' class=close>&#10005;</button><h1>Marko <!--M^s0-0-0-10-9 s0-0-0-10 9--><select data-marko='{"onchange":"switchVersion s0-0-0-10-9 false"}'><option value=current selected>5.1.15</option><option value=http://marko-v4.github.io/docs/ >4.x</option><option value=http://v3.markojs.com/docs/ >3.x</option><option value=http://marko-v2.github.io/docs/ >2.x</option></select><!--M/--></h1><!--M^s0-0-0-10-10 s0-0-0-10 10--><form data-marko='{"onclick":"focus s0-0-0-10-10 false","onsubmit":"search s0-0-0-10-10 false"}' class="site-search search"><img src=/assets/e213de74.png><input data-marko='{"onblur":"shrink s0-0-0-10-10 false","onfocus":"grow s0-0-0-10-10 false"}' data-marko-key="@input s0-0-0-10-10" type=search placeholder="search the docs..."></form><!--M/--><ul class=toc-level0><li class=section><a href=/docs/guides-overview/ >GUIDES</a></li><li><a href=/docs/installing/ >Installing</a></li><li><a href=/docs/getting-started/ >Getting started</a></li><li><a href=/docs/conditionals-and-lists/ >Conditionals and lists</a></li><li><a href=/docs/custom-tags/ >Custom tags</a></li><li><a href=/docs/state/ >State</a></li><li><a href=/docs/styles/ >Styles</a></li><li><a href=/docs/events/ >Events</a></li><li><a href=/docs/body-content/ >Body content</a></li><li><a href=/docs/marko-5-upgrade/ >Marko 5 upgrade</a></li></ul><ul class=toc-level0><li class=section><a href=/docs/tutorials-overview/ >TUTORIALS</a></li><li><a href=/docs/color-picker/ >Color Picker</a></li></ul><ul class=toc-level0><li class=section><a href=/docs/reference-overview/ >REFERENCE</a></li><li><a class=selected href=/docs/rendering/ >Rendering</a><ul class="toc toc-level1"><li><a href="#rendering-methods">Rendering methods</a><ul class="toc toc-level2"><li><a href="#rendersyncinput">renderSync()</a></li><li><a href="#renderinput">render()</a></li><li><a href="#renderinput-callback">render()</a></li><li><a href="#renderinput-stream">render()</a></li><li><a href="#renderinput-out">render()</a></li><li><a href="#rendertostringinput">renderToString()</a></li><li><a href="#rendertostringinput-callback">renderToString()</a></li><li><a href="#streaminput">stream()</a></li></ul></li><li><a href="#renderresult">RenderResult</a><ul class="toc toc-level2"><li><a href="#getcomponent">getComponent()</a></li><li><a href="#getcomponentsselector">getComponents()</a></li><li><a href="#afterinsertdoc">afterInsert()</a></li><li><a href="#getnodedoc">getNode()</a></li><li><a href="#getoutput">getOutput()</a></li><li><a href="#appendtotargetel">appendTo()</a></li><li><a href="#insertaftertargetel">insertAfter()</a></li><li><a href="#insertbeforetargetel">insertBefore()</a></li><li><a href="#prependtotargetel">prependTo()</a></li><li><a href="#replacetargetel">replace()</a></li><li><a href="#replacechildrenoftargetel">replaceChildrenOf()</a></li></ul></li><li><a href="#global-data">Global data</a></li></ul></li><li><a href=/docs/syntax/ >Syntax</a></li><li><a href=/docs/core-tags/ >Core tags</a></li><li><a href=/docs/class-components/ >Class components</a></li><li><a href=/docs/marko-json/ >marko.json</a></li><li><a href=/docs/compiler/ >Compiler</a></li></ul><ul class=toc-level0><li class=section><a href=/docs/bundler-integrations-overview/ >BUNDLER INTEGRATIONS</a></li><li><a href=/docs/webpack/ >Webpack</a></li><li><a href=/docs/rollup/ >Rollup</a></li><li><a href=/docs/lasso/ >Lasso</a></li></ul><ul class=toc-level0><li class=section><a href=/docs/server-integrations-overview/ >SERVER INTEGRATIONS</a></li><li><a href=/docs/express/ >Express</a></li><li><a href=/docs/koa/ >Koa</a></li><li><a href=/docs/http/ >HTTP</a></li><li><a href=/docs/fastify/ >Fastify</a></li></ul><ul class=toc-level0><li class=section><a href=/docs/tooling-overview/ >TOOLING</a></li><li><a href=/docs/editor-plugins/ >Editor plugins</a></li></ul><ul class=toc-level0><li class=section><a href=/docs/articles-overview/ >ARTICLES</a></li><li><a href=/docs/marko-vs-react/ >Marko vs React</a></li><li><a href=/docs/why-is-marko-fast/ >Why is Marko Fast</a></li><li><a href=/docs/10-awesome-marko-features/ >10 Awesome Marko Features</a></li></ul></div><!--M/--><div class=content><div class=doc-layout><div class=doc-container><div class=doc-content><h1 id=rendering><a name=rendering class=anchor href=#rendering><span class=header-link></span></a>Rendering</h1><p>To render a Marko view, you need to <code>require</code> it.</p><div class=code-block-filename>example.js</div><script>if(localStorage.getItem('markojs-website:syntax') === 'concise'){document.body.classList.add('concise')}</script><pre class=highlighted style=color:#E0E0E0;background-color:#282C34><span style=color:#66D9EF;font-style:italic>var</span> fancyButton <span style=color:#FFFFFF>=</span> <span style=color:#66D9EF>require</span>(<span style=color:#E6DB74>"./components/fancy-button"</span>);
</pre><blockquote class=note><p><strong>Note:</strong> If you are targeting node.js, you will need to enable the <a href=/docs/installing/#require-marko-views>require extension</a> in order to require <code>.marko</code> files or you will need to precompile all of your templates using <a href=https://github.com/marko-js/cli>Marko CLI</a>. If you are targeting the browser, you will need to use a bundler like <a href=/docs/lasso/ ><code>lasso</code></a>, <a href=/docs/webpack/ ><code>webpack</code></a> or <a href=/docs/rollup/ ><code>rollup</code></a>.</p></blockquote><p>Once you have a view, you can pass input data and render it:</p><div class=code-block-filename>example.js</div><pre class=highlighted style=color:#E0E0E0;background-color:#282C34><span style=color:#66D9EF;font-style:italic>var</span> button <span style=color:#FFFFFF>=</span> <span style=color:#66D9EF>require</span>(<span style=color:#E6DB74>"./components/fancy-button"</span>);
<span style=color:#66D9EF;font-style:italic>var</span> html <span style=color:#FFFFFF>=</span> button.<span style=color:#A6E22E>renderToString</span>({ label: <span style=color:#E6DB74>"Click me!"</span> });

console.<span style=color:#A6E22E>log</span>(html);
</pre><p>The input data becomes available as <code>input</code> within a view, so if <code>fancy-button.marko</code> looked like this:</p><div class=code-block-filename>./components/fancy-button.marko</div><!--M#s0-0-0-12-4-25--><!--M^s0-0-0-12-4-25-0 s0-0-0-12-4-25 0--><div class=marko-code-block><button data-marko='{"onclick":"changeSyntax s0-0-0-12-4-25-0 false"}' title="Switch Syntax" class=switch-syntax>â‡„</button><div class="code html"><pre class=highlighted style=color:#E0E0E0;background-color:#282C34>&lt;<span style=color:#F92672>button</span>><span style=color:#66D9EF>${</span>input.label<span style=color:#66D9EF>}</span>&lt;/<span style=color:#F92672>button</span>>
</pre></div><div class="code concise"><pre class=highlighted style=color:#E0E0E0;background-color:#282C34><span style=color:#F92672>button</span> <span style=color:#F92672>--</span> <span style=color:#A6E22E>$</span><span style=color:#F8F8F0;background-color:#F92672>{input.label}</span>
</pre></div></div><!--M/--><!--M/--><p>The output HTML would be:</p><pre class=highlighted style=color:#E0E0E0;background-color:#282C34>&lt;<span style=color:#F92672>button</span>>Click me!&lt;/<span style=color:#F92672>button</span>>
</pre><h2 id=rendering-methods><a name=rendering-methods class=anchor href=#rendering-methods><span class=header-link></span></a>Rendering methods</h2><p>We used the <code>renderToString</code> method above to render the view, but there are a number of different method signatures that can be used to render.</p><p>Many of these methods return a <a href=#renderresult><code>RenderResult</code></a> which is an object with helper methods for working with the rendered output.</p><h3 id=rendersyncinput><a name=rendersyncinput class=anchor href=#rendersyncinput><span class=header-link></span></a><code>renderSync(input)</code></h3><table class=markdown-table><thead><tr><th>params</th><th>type</th><th>description</th></tr></thead><tbody><tr><td><code>input</code></td><td><code>Object</code></td><td>the input data used to render the view</td></tr><tr><td>return value</td><td><a href=#renderresult><code>RenderResult</code></a></td><td>The result of the render</td></tr></tbody></table><p>Using <code>renderSync</code> forces the render to complete synchronously. If a tag attempts to run asynchronously, an error will be thrown.</p><pre class=highlighted style=color:#E0E0E0;background-color:#282C34><span style=color:#66D9EF;font-style:italic>var</span> view <span style=color:#FFFFFF>=</span> <span style=color:#66D9EF>require</span>(<span style=color:#E6DB74>"./view"</span>); <span style=color:#75715E>// Import `./view.marko`</span>
<span style=color:#66D9EF;font-style:italic>var</span> result <span style=color:#FFFFFF>=</span> view.<span style=color:#A6E22E>renderSync</span>({});

result.<span style=color:#A6E22E>appendTo</span>(document.body);
</pre><h3 id=renderinput><a name=renderinput class=anchor href=#renderinput><span class=header-link></span></a><code>render(input)</code></h3><table class=markdown-table><thead><tr><th>params</th><th>type</th><th>description</th></tr></thead><tbody><tr><td><code>input</code></td><td><code>Object</code></td><td>the input data used to render the view</td></tr><tr><td>return value</td><td><code>AsyncStream</code>/<code>AsyncVDOMBuilder</code></td><td>the async <code>out</code> render target</td></tr></tbody></table><p>The <code>render</code> method returns an async <code>out</code> which is used to generate HTML on the server or a virtual DOM in the browser. In either case, the async <code>out</code> has a <code>then</code> method that follows the Promises/A+ spec, so it can be used as if it were a Promise. This promise resolves to a <a href=#renderresult><code>RenderResult</code></a>.</p><pre class=highlighted style=color:#E0E0E0;background-color:#282C34><span style=color:#66D9EF;font-style:italic>var</span> view <span style=color:#FFFFFF>=</span> <span style=color:#66D9EF>require</span>(<span style=color:#E6DB74>"./view"</span>); <span style=color:#75715E>// Import `./view.marko`</span>
<span style=color:#66D9EF;font-style:italic>var</span> resultPromise <span style=color:#FFFFFF>=</span> view.<span style=color:#A6E22E>render</span>({});

resultPromise.<span style=color:#A6E22E>then</span>(<span style=color:#FD971F;font-style:italic>result</span> <span style=color:#66D9EF;font-style:italic>=></span> {
  result.<span style=color:#A6E22E>appendTo</span>(document.body);
});
</pre><h3 id=renderinput-callback><a name=renderinput-callback class=anchor href=#renderinput-callback><span class=header-link></span></a><code>render(input, callback)</code></h3><table class=markdown-table><thead><tr><th>params</th><th>type</th><th>description</th></tr></thead><tbody><tr><td><code>input</code></td><td><code>Object</code></td><td>the input data used to render the view</td></tr><tr><td><code>callback</code></td><td><code>Function</code></td><td>a function to call when the render is complete</td></tr><tr><td>callback value</td><td><a href=#renderresult><code>RenderResult</code></a></td><td>The result of the render</td></tr><tr><td>return value</td><td><code>AsyncStream</code>/<code>AsyncVDOMBuilder</code></td><td>the async <code>out</code> render target</td></tr></tbody></table><pre class=highlighted style=color:#E0E0E0;background-color:#282C34><span style=color:#66D9EF;font-style:italic>var</span> view <span style=color:#FFFFFF>=</span> <span style=color:#66D9EF>require</span>(<span style=color:#E6DB74>"./view"</span>); <span style=color:#75715E>// Import `./view.marko`</span>

view.<span style=color:#A6E22E>render</span>({}, (<span style=color:#FD971F;font-style:italic>err</span>, <span style=color:#FD971F;font-style:italic>result</span>) <span style=color:#66D9EF;font-style:italic>=></span> {
  result.<span style=color:#A6E22E>appendTo</span>(document.body);
});
</pre><h3 id=renderinput-stream><a name=renderinput-stream class=anchor href=#renderinput-stream><span class=header-link></span></a><code>render(input, stream)</code></h3><table class=markdown-table><thead><tr><th>params</th><th>type</th><th>description</th></tr></thead><tbody><tr><td><code>input</code></td><td><code>Object</code></td><td>the input data used to render the view</td></tr><tr><td><code>stream</code></td><td><code>WritableStream</code></td><td>a writeable stream</td></tr><tr><td>return value</td><td><code>AsyncStream</code>/<code>AsyncVDOMBuilder</code></td><td>the async <code>out</code> render target</td></tr></tbody></table><p>The HTML output is written to the passed <code>stream</code>.</p><pre class=highlighted style=color:#E0E0E0;background-color:#282C34><span style=color:#66D9EF;font-style:italic>var</span> http <span style=color:#FFFFFF>=</span> <span style=color:#66D9EF>require</span>(<span style=color:#E6DB74>"http"</span>);
<span style=color:#66D9EF;font-style:italic>var</span> view <span style=color:#FFFFFF>=</span> <span style=color:#66D9EF>require</span>(<span style=color:#E6DB74>"./view"</span>); <span style=color:#75715E>// Import `./view.marko`</span>

http.<span style=color:#A6E22E>createServer</span>((<span style=color:#FD971F;font-style:italic>req</span>, <span style=color:#FD971F;font-style:italic>res</span>) <span style=color:#66D9EF;font-style:italic>=></span> {
  res.<span style=color:#A6E22E>setHeader</span>(<span style=color:#E6DB74>"content-type"</span>, <span style=color:#E6DB74>"text/html"</span>);
  view.<span style=color:#A6E22E>render</span>({}, res);
});
</pre><h3 id=renderinput-out><a name=renderinput-out class=anchor href=#renderinput-out><span class=header-link></span></a><code>render(input, out)</code></h3><table class=markdown-table><thead><tr><th>params</th><th>type</th><th>description</th></tr></thead><tbody><tr><td><code>input</code></td><td><code>Object</code></td><td>the input data used to render the view</td></tr><tr><td><code>out</code></td><td><code>AsyncStream</code>/<code>AsyncVDOMBuilder</code></td><td>The async <code>out</code> to render to</td></tr><tr><td>return value</td><td><code>AsyncStream</code>/<code>AsyncVDOMBuilder</code></td><td>The <code>out</code> that was passed</td></tr></tbody></table><p>The <code>render</code> method also allows passing an existing async <code>out</code>. If you do this, <code>render</code> will not automatically end the async <code>out</code> (this allows rendering a view in the middle of another view). If the async <code>out</code> won&#39;t be ended by other means, you are responsible for ending it.</p><pre class=highlighted style=color:#E0E0E0;background-color:#282C34><span style=color:#66D9EF;font-style:italic>var</span> view <span style=color:#FFFFFF>=</span> <span style=color:#66D9EF>require</span>(<span style=color:#E6DB74>"./view"</span>); <span style=color:#75715E>// Import `./view.marko`</span>
<span style=color:#66D9EF;font-style:italic>var</span> out <span style=color:#FFFFFF>=</span> view.<span style=color:#A6E22E>createOut</span>();

view.<span style=color:#A6E22E>render</span>({}, out);

out.<span style=color:#A6E22E>on</span>(<span style=color:#E6DB74>"finish"</span>, () <span style=color:#66D9EF;font-style:italic>=></span> {
  console.<span style=color:#A6E22E>log</span>(out.<span style=color:#A6E22E>getOutput</span>());
});

out.<span style=color:#A6E22E>end</span>();
</pre><h3 id=rendertostringinput><a name=rendertostringinput class=anchor href=#rendertostringinput><span class=header-link></span></a><code>renderToString(input)</code></h3><table class=markdown-table><thead><tr><th>params</th><th>type</th><th>description</th></tr></thead><tbody><tr><td><code>input</code></td><td><code>Object</code></td><td>the input data used to render the view</td></tr><tr><td>return value</td><td><code>String</code></td><td>The HTML string produced by the render</td></tr></tbody></table><p>Returns an HTML string and forces the render to complete synchronously. If a tag attempts to run asynchronously, an error will be thrown.</p><pre class=highlighted style=color:#E0E0E0;background-color:#282C34><span style=color:#66D9EF;font-style:italic>var</span> view <span style=color:#FFFFFF>=</span> <span style=color:#66D9EF>require</span>(<span style=color:#E6DB74>"./view"</span>); <span style=color:#75715E>// Import `./view.marko`</span>
<span style=color:#66D9EF;font-style:italic>var</span> html <span style=color:#FFFFFF>=</span> view.<span style=color:#A6E22E>renderToString</span>({});

document.body.innerHTML <span style=color:#FFFFFF>=</span> html;
</pre><h3 id=rendertostringinput-callback><a name=rendertostringinput-callback class=anchor href=#rendertostringinput-callback><span class=header-link></span></a><code>renderToString(input, callback)</code></h3><table class=markdown-table><thead><tr><th>params</th><th>type</th><th>description</th></tr></thead><tbody><tr><td><code>input</code></td><td><code>Object</code></td><td>the input data used to render the view</td></tr><tr><td>callback value</td><td><code>String</code></td><td>The HTML string produced by the render</td></tr><tr><td>return value</td><td><code>undefined</code></td><td>N/A</td></tr></tbody></table><p>An HTML string is passed to the callback.</p><pre class=highlighted style=color:#E0E0E0;background-color:#282C34><span style=color:#66D9EF;font-style:italic>var</span> view <span style=color:#FFFFFF>=</span> <span style=color:#66D9EF>require</span>(<span style=color:#E6DB74>"./view"</span>); <span style=color:#75715E>// Import `./view.marko`</span>

view.<span style=color:#A6E22E>renderToString</span>({}, (<span style=color:#FD971F;font-style:italic>err</span>, <span style=color:#FD971F;font-style:italic>html</span>) <span style=color:#66D9EF;font-style:italic>=></span> {
  document.body.innerHTML <span style=color:#FFFFFF>=</span> html;
});
</pre><h3 id=streaminput><a name=streaminput class=anchor href=#streaminput><span class=header-link></span></a><code>stream(input)</code></h3><p>The <code>stream</code> method returns a node.js style stream of the output HTML. This method is available on the server, but is not available by default in the browser. If you need to use streams in the browser, you may <code>require(&#39;marko/stream&#39;)</code> as part of your client-side bundle.</p><pre class=highlighted style=color:#E0E0E0;background-color:#282C34><span style=color:#66D9EF;font-style:italic>var</span> fs <span style=color:#FFFFFF>=</span> <span style=color:#66D9EF>require</span>(<span style=color:#E6DB74>"fs"</span>);
<span style=color:#66D9EF;font-style:italic>var</span> view <span style=color:#FFFFFF>=</span> <span style=color:#66D9EF>require</span>(<span style=color:#E6DB74>"./view"</span>); <span style=color:#75715E>// Import `./view.marko`</span>
<span style=color:#66D9EF;font-style:italic>var</span> writeStream <span style=color:#FFFFFF>=</span> fs.<span style=color:#A6E22E>createWriteStream</span>(<span style=color:#E6DB74>"output.html"</span>);

view.<span style=color:#A6E22E>stream</span>({}).<span style=color:#A6E22E>pipe</span>(writeStream);
</pre><h2 id=renderresult><a name=renderresult class=anchor href=#renderresult><span class=header-link></span></a>RenderResult</h2><h3 id=getcomponent><a name=getcomponent class=anchor href=#getcomponent><span class=header-link></span></a><code>getComponent()</code></h3><h3 id=getcomponentsselector><a name=getcomponentsselector class=anchor href=#getcomponentsselector><span class=header-link></span></a><code>getComponents(selector)</code></h3><h3 id=afterinsertdoc><a name=afterinsertdoc class=anchor href=#afterinsertdoc><span class=header-link></span></a><code>afterInsert(doc)</code></h3><h3 id=getnodedoc><a name=getnodedoc class=anchor href=#getnodedoc><span class=header-link></span></a><code>getNode(doc)</code></h3><h3 id=getoutput><a name=getoutput class=anchor href=#getoutput><span class=header-link></span></a><code>getOutput()</code></h3><h3 id=appendtotargetel><a name=appendtotargetel class=anchor href=#appendtotargetel><span class=header-link></span></a><code>appendTo(targetEl)</code></h3><h3 id=insertaftertargetel><a name=insertaftertargetel class=anchor href=#insertaftertargetel><span class=header-link></span></a><code>insertAfter(targetEl)</code></h3><h3 id=insertbeforetargetel><a name=insertbeforetargetel class=anchor href=#insertbeforetargetel><span class=header-link></span></a><code>insertBefore(targetEl)</code></h3><h3 id=prependtotargetel><a name=prependtotargetel class=anchor href=#prependtotargetel><span class=header-link></span></a><code>prependTo(targetEl)</code></h3><h3 id=replacetargetel><a name=replacetargetel class=anchor href=#replacetargetel><span class=header-link></span></a><code>replace(targetEl)</code></h3><h3 id=replacechildrenoftargetel><a name=replacechildrenoftargetel class=anchor href=#replacechildrenoftargetel><span class=header-link></span></a><code>replaceChildrenOf(targetEl)</code></h3><h2 id=global-data><a name=global-data class=anchor href=#global-data><span class=header-link></span></a>Global data</h2><p>If you need to make data available globally to all views that are rendered as the result of a call to one of the above render methods, you can pass the data as a <code>&#36;global</code> property on the input data object. This object will be removed from <code>input</code> and merged into the <code>out.global</code> property.</p><pre class=highlighted style=color:#E0E0E0;background-color:#282C34>view.<span style=color:#A6E22E>render</span>({
  $global: {
    flags: [<span style=color:#E6DB74>"mobile"</span>]
  }
});
</pre><p>To prevent sensitive data to be accidentally shipped to the browser, by default <strong>none of the keys</strong> in <code>out.global</code> is going to be sent to the browser. If you want the data to be serialized and ship to the frontend you need to specify it in <code>serializedGlobals</code> inside the <code>&#36;global</code> object and they persist across re-renderings. The values need to be serializable.</p><pre class=highlighted style=color:#E0E0E0;background-color:#282C34>app.<span style=color:#A6E22E>get</span>(<span style=color:#E6DB74>"/"</span>, (<span style=color:#FD971F;font-style:italic>req</span>, <span style=color:#FD971F;font-style:italic>res</span>) <span style=color:#66D9EF;font-style:italic>=></span> {
  <span style=color:#66D9EF;font-style:italic>const</span> ua <span style=color:#FFFFFF>=</span> req.<span style=color:#A6E22E>get</span>(<span style=color:#E6DB74>"User-Agent"</span>);
  <span style=color:#66D9EF;font-style:italic>const</span> isIos <span style=color:#FFFFFF>=</span> <span style=color:#F92672>!!</span>ua.<span style=color:#A6E22E>match</span>(<span style=color:#E6DB74>/iPad</span><span style=color:#F92672>|</span><span style=color:#E6DB74>iPhone/</span>);
  <span style=color:#66D9EF;font-style:italic>const</span> isAndroid <span style=color:#FFFFFF>=</span> <span style=color:#F92672>!!</span>ua.<span style=color:#A6E22E>match</span>(<span style=color:#E6DB74>/Android/</span>);

  <span style=color:#66D9EF>require</span>(<span style=color:#E6DB74>"./index.marko"</span>).<span style=color:#A6E22E>render</span>(
    {
      $global: {
        isIos, <span style=color:#75715E>// isPad is serialized and available on the server and the browser in out.global.isPad</span>
        isAndroid, <span style=color:#75715E>// isAndroid is serialized and available on the server and the browser in out.global.isAndroid</span>
        req, <span style=color:#75715E>// req is going to be available only server side and will not be serialized because in not present in serializedGlobals below</span>

        serializedGlobals: {
          isIos: <span style=color:#AE81FF>true</span>, <span style=color:#75715E>// Tell marko to serialize isIos above</span>
          isAndroid: <span style=color:#AE81FF>true</span> <span style=color:#75715E>// Tell marko to serialize isAndroid above</span>
        }
      }
    },
    res
  );
});
</pre><p>Use <code>&#36;global</code> with judgement. It is global and visible in any component.</p><p>Check <a href=https://github.com/marko-js/marko/pull/672>this PR</a> for more details.</p><a href=https://github.com/marko-js/marko/blob/master/packages/marko/docs/rendering.md class=edit-on-github>EDIT <img src=/assets/a828017a.svg></a><script src="/assets/211.6b63e88c.js" async></script><script src="/assets/598.78c2c04c.js" async></script><link rel="stylesheet" href="/assets/c1911498.css"><h2 id=contributors><a name=contributors class=anchor href=#contributors><span class=header-link></span></a> Contributors</h2><p>Helpful? You can thank these awesome people! You can also <a href=https://github.com/marko-js/marko/blob/master/packages/marko/docs/rendering.md>edit this doc</a> if you see any issues or want to improve it.</p><div class=contributors><a href=https://github.com/DylanPiercey class=contributor><img src=https://avatars.githubusercontent.com/u/4985201?v=4 class=photo><span class=name>DylanPiercey</span></a><a href=https://github.com/mlrawlings class=contributor><img src=https://avatars.githubusercontent.com/u/1958812?v=4 class=photo><span class=name>mlrawlings</span></a><a href=https://github.com/marko-js/marko/blob/master/packages/marko/docs/rendering.md class="contributor you"><div class=photo><span class=icon>+</span></div><span class=name>You?</span></a></div><footer class="site-footer doc-footer"><a href=https://openjsf.org/  class=openjsf><img src=/assets/f9c991e7.png> <span><span class=bold>OpenJS</span>&nbsp;<span class=light>Foundation</span></span></a><div class=separator></div><a href=https://github.com/marko-js/marko/blob/master/LICENSE class=osi><img src=/assets/4dab80b0.png> MIT&nbsp;License</a><div class=separator></div><a href=https://github.com/eBay class=ebay><img src=/assets/0b079e0f.svg> open&nbsp;source</a></footer></div></div></div></div><script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-66854919-1', 'markojs.com');
    ga('send', 'pageview');
  </script><a href=https://discord.gg/marko target=_blank class=discord-button><img src=/assets/3b47f103.svg alt="Chat in Marko's Discord Server"></a><script>$MC=(window.$MC||[]).concat({"o":{"l":1,"w":[["s0-0-0-9",0,{}],["s0-0-0-9-8",1,{"class":"search"}],["s0-0-0-10",2,{"currentDoc":"rendering","toc":"<ul class=\"toc toc-level1\"><li><a href=\"#rendering-methods\">Rendering methods\u003C/a><ul class=\"toc toc-level2\"><li><a href=\"#rendersyncinput\">renderSync()\u003C/a>\u003C/li><li><a href=\"#renderinput\">render()\u003C/a>\u003C/li><li><a href=\"#renderinput-callback\">render()\u003C/a>\u003C/li><li><a href=\"#renderinput-stream\">render()\u003C/a>\u003C/li><li><a href=\"#renderinput-out\">render()\u003C/a>\u003C/li><li><a href=\"#rendertostringinput\">renderToString()\u003C/a>\u003C/li><li><a href=\"#rendertostringinput-callback\">renderToString()\u003C/a>\u003C/li><li><a href=\"#streaminput\">stream()\u003C/a>\u003C/li>\u003C/ul>\u003C/li><li><a href=\"#renderresult\">RenderResult\u003C/a><ul class=\"toc toc-level2\"><li><a href=\"#getcomponent\">getComponent()\u003C/a>\u003C/li><li><a href=\"#getcomponentsselector\">getComponents()\u003C/a>\u003C/li><li><a href=\"#afterinsertdoc\">afterInsert()\u003C/a>\u003C/li><li><a href=\"#getnodedoc\">getNode()\u003C/a>\u003C/li><li><a href=\"#getoutput\">getOutput()\u003C/a>\u003C/li><li><a href=\"#appendtotargetel\">appendTo()\u003C/a>\u003C/li><li><a href=\"#insertaftertargetel\">insertAfter()\u003C/a>\u003C/li><li><a href=\"#insertbeforetargetel\">insertBefore()\u003C/a>\u003C/li><li><a href=\"#prependtotargetel\">prependTo()\u003C/a>\u003C/li><li><a href=\"#replacetargetel\">replace()\u003C/a>\u003C/li><li><a href=\"#replacechildrenoftargetel\">replaceChildrenOf()\u003C/a>\u003C/li>\u003C/ul>\u003C/li><li><a href=\"#global-data\">Global data\u003C/a>\u003C/li>\u003C/ul>"}],["s0-0-0-10-9",3,{}],["s0-0-0-10-10",1,{"class":"search"}],["s0-0-0-12-4-25",4,{"html":"<pre class=highlighted style=color:#E0E0E0;background-color:#282C34>&lt;<span style=color:#F92672>button\u003C/span>><span style=color:#66D9EF>${\u003C/span>input.label<span style=color:#66D9EF>}\u003C/span>&lt;/<span style=color:#F92672>button\u003C/span>>\n\u003C/pre>","concise":"<pre class=highlighted style=color:#E0E0E0;background-color:#282C34><span style=color:#F92672>button\u003C/span> <span style=color:#F92672>--\u003C/span> <span style=color:#A6E22E>$\u003C/span><span style=color:#F8F8F0;background-color:#F92672>{input.label}\u003C/span>\n\u003C/pre>"}],["s0-0-0-12-4-25-0",4,null]],"t":["OIKmBXjW","HkYzEWAp","mFesaajv","07hv1F0+","UUumdCIE"]},"$$":[{"l":["w",6,2],"r":["w",5,2]}]})</script></body></html>