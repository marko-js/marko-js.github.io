<script src="/assets/598.6b6c14f3.js" async></script><link rel="stylesheet" href="/assets/ff15f5e4.css"><!doctype html><html lang=en><head><meta charset=UTF-8><title>Why is Marko Fast? | Marko</title><link rel=icon type=image/png sizes=32x32 href=/assets/64c1e059.png><meta name=viewport content="width=device-width, initial-scale=1"><meta name=Description content="Marko is a friendly (and fast!) UI library that makes building web apps fun."><script src="/assets/666.68969188.js" async></script><script src="/assets/323.2631a76c.js" async></script><script src="/assets/987.6e97928f.js" async></script><link rel="stylesheet" href="/assets/b9cec1ec.css"></head><body class=docs><!--M#s0-1-0-8--><header data-marko-key="@header s0-1-0-8" class=site-header><div class=content><a href=/ ><img src=/assets/91bc26e5.svg alt="Marko Home" class=site-logo></a><div class=stuff><nav class=site-menu><a href=/docs/getting-started/ >Docs</a><a href=/try-online>Try Online</a><a href=https://github.com/marko-js/marko>GitHub</a><!--M^s0-1-0-8-8 s0-1-0-8 8--><form data-marko='{"onclick":"focus s0-1-0-8-8 false","onsubmit":"search s0-1-0-8-8 false"}' class="site-search search"><img src=/assets/e213de74.png alt><input data-marko='{"onblur":"shrink s0-1-0-8-8 false","onfocus":"grow s0-1-0-8-8 false"}' data-marko-key="@input s0-1-0-8-8" type=search placeholder="search the docs..."></form><!--M/--></nav><button data-marko='{"onclick":"toggleMenu s0-1-0-8 false"}' class=menu>&#9776;</button></div></div></header><!--M/--><!--M#s0-1-0-9--><div data-marko-key="@sidebar s0-1-0-9" class=doc-sidebar><button data-marko='{"onclick":"hide s0-1-0-9 false"}' class=close>&#10005;</button><h1>Marko <!--M^s0-1-0-9-9 s0-1-0-9 9--><select data-marko='{"onchange":"switchVersion s0-1-0-9-9 false"}'><option value=current selected>5.18.2</option><option value=http://marko-v4.github.io/docs/ >4.x</option><option value=http://v3.markojs.com/docs/ >3.x</option><option value=http://marko-v2.github.io/docs/ >2.x</option></select><!--M/--></h1><!--M^s0-1-0-9-10 s0-1-0-9 10--><form data-marko='{"onclick":"focus s0-1-0-9-10 false","onsubmit":"search s0-1-0-9-10 false"}' class="site-search search"><img src=/assets/e213de74.png alt><input data-marko='{"onblur":"shrink s0-1-0-9-10 false","onfocus":"grow s0-1-0-9-10 false"}' data-marko-key="@input s0-1-0-9-10" type=search placeholder="search the docs..."></form><!--M/--><ul class=toc-level0><li class=section><a href=/docs/guides-overview/ >GUIDES</a></li><li><a href=/docs/installing/ >Installing</a></li><li><a href=/docs/getting-started/ >Getting started</a></li><li><a href=/docs/conditionals-and-lists/ >Conditionals and lists</a></li><li><a href=/docs/custom-tags/ >Custom tags</a></li><li><a href=/docs/state/ >State</a></li><li><a href=/docs/styles/ >Styles</a></li><li><a href=/docs/events/ >Events</a></li><li><a href=/docs/body-content/ >Body content</a></li><li><a href=/docs/marko-5-upgrade/ >Marko 5 upgrade</a></li><li><a href=/docs/troubleshooting-streaming/ >Troubleshooting Streaming</a></li></ul><ul class=toc-level0><li class=section><a href=/docs/tutorials-overview/ >TUTORIALS</a></li><li><a href=/docs/color-picker/ >Color Picker</a></li></ul><ul class=toc-level0><li class=section><a href=/docs/reference-overview/ >REFERENCE</a></li><li><a href=/docs/rendering/ >Rendering</a></li><li><a href=/docs/syntax/ >Syntax</a></li><li><a href=/docs/core-tags/ >Core tags</a></li><li><a href=/docs/class-components/ >Class components</a></li><li><a href=/docs/marko-json/ >marko.json</a></li><li><a href=/docs/compiler/ >Compiler</a></li></ul><ul class=toc-level0><li class=section><a href=/docs/bundler-integrations-overview/ >BUNDLER INTEGRATIONS</a></li><li><a href=/docs/vite/ >Vite</a></li><li><a href=/docs/webpack/ >Webpack</a></li><li><a href=/docs/rollup/ >Rollup</a></li><li><a href=/docs/lasso/ >Lasso</a></li></ul><ul class=toc-level0><li class=section><a href=/docs/server-integrations-overview/ >SERVER INTEGRATIONS</a></li><li><a href=/docs/cloudflare-workers/ >Cloudflare Workers</a></li><li><a href=/docs/express/ >Express</a></li><li><a href=/docs/fastify/ >Fastify</a></li><li><a href=/docs/koa/ >Koa</a></li><li><a href=/docs/http/ >HTTP</a></li></ul><ul class=toc-level0><li class=section><a href=/docs/tooling-overview/ >TOOLING</a></li><li><a href=/docs/editor-plugins/ >Editor plugins</a></li></ul><ul class=toc-level0><li class=section><a href=/docs/articles-overview/ >ARTICLES</a></li><li><a href=/docs/marko-vs-react/ >Marko vs React</a></li><li><a class=selected href=/docs/why-is-marko-fast/ >Why is Marko Fast</a><ul class="toc toc-level1"><li><ul class="toc toc-level2"><li><a href="#multiple-compilation-outputs">Multiple Compilation Outputs</a><ul class="toc toc-level3"><li><a href="#compiled-for-the-server">Compiled for the server</a></li><li><a href="#compiled-for-the-browser">Compiled for the browser</a></li></ul></li><li><a href="#modular-runtime">Modular Runtime</a></li><li><a href="#high-performance-server-side-rendering">High performance server-side rendering</a></li><li><a href="#compile-time-optimization-of-static-sub-trees">Compile-time optimization of static sub-trees</a></li><li><a href="#compile-time-optimization-of-static-attributes">Compile-time optimization of static attributes</a></li><li><a href="#smart-compiler">Smart compiler</a></li><li><a href="#event-delegation">Event delegation</a></li></ul></li></ul></li><li><a href=/docs/10-awesome-marko-features/ >10 Awesome Marko Features</a></li></ul></div><!--M/--><main class=content><div class=doc-layout><div class=doc-container><div class=doc-content><h1 id=why-is-marko-fast><a name=why-is-marko-fast class=anchor href=#why-is-marko-fast><span class=header-link></span></a>Why is Marko Fast?</h1><a href=https://medium.com/@psteeleidem/why-is-marko-fast-a20796cb8ae3><img src=https://user-images.githubusercontent.com/1958812/28104838-d0182f48-6691-11e7-808d-d1ae2d0fed6d.png alt="Marko logo" width=100%></a><br><blockquote class=null><p>This article was published in May 2017. You can find the original <a href=https://medium.com/@psteeleidem/why-is-marko-fast-a20796cb8ae3>&quot;Why is Marko Fast?&quot; article here</a>!</p></blockquote><p>At eBay we are using <a href=/ >Marko</a> to render over a billion requests every day and this has required us to finely tune Marko, our open source UI library. We have heavily optimized Marko for fast rendering, <a href=http://www.ebaytechblog.com/2014/12/08/async-fragments-rediscovering-progressive-html-rendering-with-marko/ >advanced performance techniques</a> and to achieve a minimal page weight (~10kb gzipped). Performance is only one concern because we have also had to scale Marko to support development across hundreds of teams in a way that allows developers to efficiently create maintainable and robust web apps.</p><p>We have created <a href=https://github.com/marko-js/isomorphic-ui-benchmarks>our own benchmarks</a> and we have <a href=https://github.com/raxjs/server-side-rendering-comparison/pull/11>added Marko to other benchmarks</a>, but benchmarks cannot always be trusted. While we make every effort to be fair with our benchmarks, what matters most is performance in real world applications as opposed to focusing on micro benchmarks. This is one reason that the V8 team has switched to <a href=https://v8project.blogspot.com/2016/12/how-v8-measures-real-world-performance.html>a new methodology to measure and understand real-world JavaScript performance</a>.</p><p>Similarly, we’ve taken a look at how our developers are <em>actually</em> writing their Marko components and have found patterns that could be further optimized. Instead of focusing on benchmarks in this article, I want to focus on the details of optimizations that we have applied to Marko.</p><h3 id=multiple-compilation-outputs><a name=multiple-compilation-outputs class=anchor href=#multiple-compilation-outputs><span class=header-link></span></a>Multiple Compilation Outputs</h3><p>Marko is an isomorphic UI library that runs on both the server and in the browser. As <a href=https://medium.com/@mlrawlings>Michael Rawlings</a> mentioned in “<a href=https://hackernoon.com/server-side-rendering-shootout-with-marko-preact-rax-react-and-vue-25e1ae17800f>Server-side Rendering Shootout</a>”, when rendering on the server, Marko renders directly to a string representation of the document (HTML) that can be sent as the HTTP response.</p><p>When rendering in the browser, an HTML string would have to be parsed in order to update the DOM. For this reason, Marko compiles a view to a program that renders directly to a virtual document (VDOM) tree that can be used to efficiently update the real DOM when targeting the browser.</p><p>Given the following template:</p><script>if(localStorage.getItem('markojs-website:syntax') === 'concise'){document.body.classList.add('concise')}</script><!--M#s0-1-0-11-4-27-1--><div class=marko-code-block><button data-marko='{"onclick":"changeSyntax s0-1-0-11-4-27-1 false"}' title="Switch Syntax" class=switch-syntax>⇄</button><div class="code html"><pre class=highlighted style=color:#D0D0E0;background-color:#202034>&lt;<span style=color:#FF4185>div</span>>Hello <span style=color:#66D9EF>${</span><span style=color:#FFFFFF>input</span>.<span style=color:#FFFFFF>name</span><span style=color:#66D9EF>}</span>!&lt;/<span style=color:#FF4185>div</span>>
</pre></div><div class="code concise"><pre class=highlighted style=color:#D0D0E0;background-color:#202034><span style=color:#FF4185>div</span> -- Hello <span style=color:#66D9EF>${</span><span style=color:#FFFFFF>input</span>.<span style=color:#FFFFFF>name</span><span style=color:#66D9EF>}</span>!
</pre></div></div><!--M/--><h4 id=compiled-for-the-server><a name=compiled-for-the-server class=anchor href=#compiled-for-the-server><span class=header-link></span></a>Compiled for the server</h4><p>The compiled output is optimized for streaming HTML output on the server:</p><pre class=highlighted style=color:#D0D0E0;background-color:#202034><span style=color:#66D9EF>var</span> <span style=color:#FFFFFF>marko_template</span> <span style=color:#FFFFFF>=</span> <span style=color:#66D9EF>require</span>(<span style=color:#FFF066>"marko/html"</span>).<span style=color:#A6E22E>t</span>(<span style=color:#FFFFFF>__filename</span>),
  <span style=color:#FFFFFF>marko_helpers</span> <span style=color:#FFFFFF>=</span> <span style=color:#66D9EF>require</span>(<span style=color:#FFF066>"marko/runtime/html/helpers"</span>),
  <span style=color:#FFFFFF>marko_escapeXml</span> <span style=color:#FFFFFF>=</span> <span style=color:#FFFFFF>marko_helpers</span>.<span style=color:#FFFFFF>x</span>;

<span style=color:#66D9EF>function</span> <span style=color:#A6E22E>render</span>(<span style=color:#FFAC4D>input</span>, <span style=color:#FFAC4D>out</span>) {
  <span style=color:#FFFFFF>out</span>.<span style=color:#A6E22E>w</span>(<span style=color:#FFF066>"&lt;div>Hello "</span> <span style=color:#FF4185>+</span> <span style=color:#A6E22E>marko_escapeXml</span>(<span style=color:#FFFFFF>input</span>.<span style=color:#FFFFFF>name</span>) <span style=color:#FF4185>+</span> <span style=color:#FFF066>"!&lt;/div>"</span>);
}
</pre><h4 id=compiled-for-the-browser><a name=compiled-for-the-browser class=anchor href=#compiled-for-the-browser><span class=header-link></span></a>Compiled for the browser</h4><pre class=highlighted style=color:#D0D0E0;background-color:#202034><span style=color:#66D9EF>var</span> <span style=color:#FFFFFF>marko_template</span> <span style=color:#FFFFFF>=</span> <span style=color:#66D9EF>require</span>(<span style=color:#FFF066>"marko/vdom"</span>).<span style=color:#A6E22E>t</span>(<span style=color:#FFFFFF>__filename</span>);

<span style=color:#66D9EF>function</span> <span style=color:#A6E22E>render</span>(<span style=color:#FFAC4D>input</span>, <span style=color:#FFAC4D>out</span>) {
  <span style=color:#FFFFFF>out</span>
    .<span style=color:#A6E22E>e</span>(<span style=color:#FFF066>"DIV"</span>, <span style=color:#AE81FF>null</span>, <span style=color:#AE81FF>3</span>)
    .<span style=color:#A6E22E>t</span>(<span style=color:#FFF066>"Hello "</span>)
    .<span style=color:#A6E22E>t</span>(<span style=color:#FFFFFF>input</span>.<span style=color:#FFFFFF>name</span>)
    .<span style=color:#A6E22E>t</span>(<span style=color:#FFF066>"!"</span>);
}
</pre><p>The compiled output is optimized for virtual DOM rendering in the browser:</p><h3 id=modular-runtime><a name=modular-runtime class=anchor href=#modular-runtime><span class=header-link></span></a>Modular Runtime</h3><p>The Marko runtime is not distributed as a single JavaScript file. Instead, the Marko compiler generates a JavaScript module that will only import the parts of the runtime that are actually needed. This allows us to add new features to Marko without bloating existing applications. For example, given the following template:</p><!--M#s0-1-0-11-4-40-1--><div class=marko-code-block><button data-marko='{"onclick":"changeSyntax s0-1-0-11-4-40-1 false"}' title="Switch Syntax" class=switch-syntax>⇄</button><div class="code html"><pre class=highlighted style=color:#D0D0E0;background-color:#202034><span style=color:#FF4185>$</span> <span style=color:#66D9EF>var</span> <span style=color:#FFFFFF>color</span> <span style=color:#FFFFFF>=</span> <span style=color:#FFF066>'red'</span>;
&lt;<span style=color:#FF4185>div</span> <span style=color:#A6E22E>style</span><span style=color:#FFFFFF>=</span>{backgroundColor: <span style=color:#FFFFFF>color</span>}>&lt;/<span style=color:#FF4185>div</span>>
</pre></div><div class="code concise"><pre class=highlighted style=color:#D0D0E0;background-color:#202034><span style=color:#FF4185>$</span> <span style=color:#66D9EF>var</span> <span style=color:#FFFFFF>color</span> <span style=color:#FFFFFF>=</span> <span style=color:#FFF066>"red"</span>;
<span style=color:#FF4185>div</span> <span style=color:#A6E22E>style</span><span style=color:#FFFFFF>=</span>{ backgroundColor: <span style=color:#FFFFFF>color</span> }
</pre></div></div><!--M/--><p>In the above example, extra runtime code is needed to render the <code>style</code> attribute based on the JavaScript object that is provided. The compiled code that imports the <code>styleAttr</code> helper is shown below:</p><pre class=highlighted style=color:#D0D0E0;background-color:#202034><span style=color:#66D9EF>var</span> <span style=color:#FFFFFF>marko_styleAttr</span> <span style=color:#FFFFFF>=</span> <span style=color:#66D9EF>require</span>(<span style=color:#FFF066>"marko/runtime/vdom/helper-styleAttr"</span>);

<span style=color:#66D9EF>function</span> <span style=color:#A6E22E>render</span>(<span style=color:#FFAC4D>input</span>, <span style=color:#FFAC4D>out</span>) {
  <span style=color:#66D9EF>var</span> <span style=color:#FFFFFF>color</span> <span style=color:#FFFFFF>=</span> <span style=color:#FFF066>"red"</span>;
  <span style=color:#FFFFFF>out</span>.<span style=color:#A6E22E>e</span>(
    <span style=color:#FFF066>"DIV"</span>,
    {
      style: <span style=color:#A6E22E>marko_styleAttr</span>({
        backgroundColor: <span style=color:#FFFFFF>color</span>
      })
    },
    <span style=color:#AE81FF>0</span>,
    <span style=color:#AE81FF>4</span>
  );
}
</pre><h3 id=high-performance-server-side-rendering><a name=high-performance-server-side-rendering class=anchor href=#high-performance-server-side-rendering><span class=header-link></span></a>High performance server-side rendering</h3><p>Compared to solutions based on JSX that exclusively do virtual DOM rendering, Marko has a huge advantage for server-side rendering. When rendering to a virtual DOM tree on the server it’s a two-step process to render HTML:</p><ul><li>First pass to produce an entire virtual DOM tree in memory</li><li>Second pass to serialize the virtual DOM tree to an HTML string that can then be sent over the wire (this requires traversing the entire tree structure)</li></ul><p>In contrast, Marko renders directly to an HTML stream in a single pass. There is no intermediate tree data structure.</p><h3 id=compile-time-optimization-of-static-sub-trees><a name=compile-time-optimization-of-static-sub-trees class=anchor href=#compile-time-optimization-of-static-sub-trees><span class=header-link></span></a>Compile-time optimization of static sub-trees</h3><p>Given the following template:</p><!--M#s0-1-0-11-4-56-1--><div class=marko-code-block><button data-marko='{"onclick":"changeSyntax s0-1-0-11-4-56-1 false"}' title="Switch Syntax" class=switch-syntax>⇄</button><div class="code html"><pre class=highlighted style=color:#D0D0E0;background-color:#202034>&lt;<span style=color:#FF4185>div</span>>This is a &lt;<span style=color:#FF4185>strong</span>>static&lt;/<span style=color:#FF4185>strong</span>> node&lt;/<span style=color:#FF4185>div</span>>
</pre></div><div class="code concise"><pre class=highlighted style=color:#D0D0E0;background-color:#202034><span style=color:#FF4185>div</span>
  -- This is a
  <span style=color:#FF4185>strong</span> -- static
  --  node
</pre></div></div><!--M/--><p>Marko will recognize that the template fragment produces the same output every time and it will thus create the virtual DOM node once as shown in the following compiled output:</p><pre class=highlighted style=color:#D0D0E0;background-color:#202034><span style=color:#66D9EF>var</span> <span style=color:#FFFFFF>marko_node0</span> <span style=color:#FFFFFF>=</span> <span style=color:#A6E22E>marko_createElement</span>(<span style=color:#FFF066>"DIV"</span>, <span style=color:#AE81FF>null</span>, <span style=color:#AE81FF>3</span>, <span style=color:#FF4185>...</span>)
  .<span style=color:#A6E22E>t</span>(<span style=color:#FFF066>"This is a "</span>)
  .<span style=color:#A6E22E>e</span>(<span style=color:#FFF066>"STRONG"</span>, <span style=color:#AE81FF>null</span>, <span style=color:#AE81FF>1</span>)
    .<span style=color:#A6E22E>t</span>(<span style=color:#FFF066>"static"</span>)
  .<span style=color:#A6E22E>t</span>(<span style=color:#FFF066>" node"</span>);

<span style=color:#66D9EF>function</span> <span style=color:#A6E22E>render</span>(<span style=color:#FFAC4D>input</span>, <span style=color:#FFAC4D>out</span>) {
  <span style=color:#FFFFFF>out</span>.<span style=color:#A6E22E>n</span>(<span style=color:#FFFFFF>marko_node0</span>);
}
</pre><p>Rendering a static sub-tree has virtually zero cost. In addition, Marko will skip diffing/patching static sub-trees.</p><p>Similarly, on the server, Marko will merge static parts of the template into a single string:</p><pre class=highlighted style=color:#D0D0E0;background-color:#202034><span style=color:#66D9EF>function</span> <span style=color:#A6E22E>render</span>(<span style=color:#FFAC4D>input</span>, <span style=color:#FFAC4D>out</span>) {
  <span style=color:#FFFFFF>out</span>.<span style=color:#A6E22E>w</span>(<span style=color:#FFF066>"&lt;div>This is a &lt;strong>static&lt;/strong> node&lt;/div>"</span>);
}
</pre><h3 id=compile-time-optimization-of-static-attributes><a name=compile-time-optimization-of-static-attributes class=anchor href=#compile-time-optimization-of-static-attributes><span class=header-link></span></a>Compile-time optimization of static attributes</h3><p>Marko will also optimize static attributes on dynamic elements.</p><p>Given the following template:</p><!--M#s0-1-0-11-4-65-1--><div class=marko-code-block><button data-marko='{"onclick":"changeSyntax s0-1-0-11-4-65-1 false"}' title="Switch Syntax" class=switch-syntax>⇄</button><div class="code html"><pre class=highlighted style=color:#D0D0E0;background-color:#202034>&lt;<span style=color:#FF4185>div</span><span style=color:#A6E22E>.hello</span>>Hello <span style=color:#66D9EF>${</span><span style=color:#FFFFFF>input</span>.<span style=color:#FFFFFF>name</span><span style=color:#66D9EF>}</span>!&lt;/<span style=color:#FF4185>div</span>>
</pre></div><div class="code concise"><pre class=highlighted style=color:#D0D0E0;background-color:#202034><span style=color:#FF4185>div</span><span style=color:#A6E22E>.hello</span> -- Hello <span style=color:#66D9EF>${</span><span style=color:#FFFFFF>input</span>.<span style=color:#FFFFFF>name</span><span style=color:#66D9EF>}</span>!
</pre></div></div><!--M/--><p>Marko will produce the following compiled output:</p><pre class=highlighted style=color:#D0D0E0;background-color:#202034><span style=color:#66D9EF>var</span> <span style=color:#FFFFFF>marko_attrs0</span> <span style=color:#FFFFFF>=</span> {
  class: <span style=color:#FFF066>"hello"</span>
};

<span style=color:#66D9EF>function</span> <span style=color:#A6E22E>render</span>(<span style=color:#FFAC4D>input</span>, <span style=color:#FFAC4D>out</span>) {
  <span style=color:#FFFFFF>out</span>
    .<span style=color:#A6E22E>e</span>(<span style=color:#FFF066>"DIV"</span>, <span style=color:#FFFFFF>marko_attrs0</span>, <span style=color:#AE81FF>3</span>)
    .<span style=color:#A6E22E>t</span>(<span style=color:#FFF066>"Hello "</span>)
    .<span style=color:#A6E22E>t</span>(<span style=color:#FFFFFF>input</span>.<span style=color:#FFFFFF>name</span>)
    .<span style=color:#A6E22E>t</span>(<span style=color:#FFF066>"!"</span>);
}
</pre><p>Notice that the attributes object is only created once and it is used for every render. In addition, no diffing/patching will happen for static attributes.</p><h3 id=smart-compiler><a name=smart-compiler class=anchor href=#smart-compiler><span class=header-link></span></a>Smart compiler</h3><p>With Marko we favor doing as much at compile-time as possible. This has made our compiler more complex, but it gives us significant gains at runtime. We have ~90% code coverage and over 2,000 tests to ensure that the compiler is working correctly. In addition, in many cases the Marko compiler provides hints to the runtime for a given template so that the runtime can optimize for specific patterns. For example, Marko recognizes if an HTML element only has <code>class</code>/<code>id</code>/<code>style</code> defined and the runtime optimizes for these virtual DOM nodes when doing diffing/patching (the Marko compiler generates code that flags simple virtual DOM nodes for targeted diffing/patching logic).</p><h3 id=event-delegation><a name=event-delegation class=anchor href=#event-delegation><span class=header-link></span></a>Event delegation</h3><p>If you are building a UI component you will likely need to write code to handle various DOM events (<code>click</code>, <code>submit</code>, etc.). It is common for developers to write code that adds DOM event listeners using <code>dom.addEventListener(...)</code> or using a library such as jQuery. You can still do that when building UI components using Marko, but there is overhead in attaching listeners when lots of components are being initialized. Instead, Marko recommends using declarative event binding as shown below:</p><!--M#s0-1-0-11-4-82-1--><div class=marko-code-block><button data-marko='{"onclick":"changeSyntax s0-1-0-11-4-82-1 false"}' title="Switch Syntax" class=switch-syntax>⇄</button><div class="code html"><pre class=highlighted style=color:#D0D0E0;background-color:#202034>&lt;<span style=color:#FF4185>button</span> <span style=color:#A6E22E>type</span><span style=color:#FFFFFF>=</span><span style=color:#FFF066>"button"</span> <span style=color:#66D9EF>on-click</span>(<span style=color:#FFF066>"handleClick"</span>)>
  Click Me
&lt;/<span style=color:#FF4185>button</span>>
</pre></div><div class="code concise"><pre class=highlighted style=color:#D0D0E0;background-color:#202034><span style=color:#FF4185>button</span> <span style=color:#A6E22E>type</span><span style=color:#FFFFFF>=</span><span style=color:#FFF066>"button"</span> <span style=color:#66D9EF>on-click</span>(<span style=color:#FFF066>"handleClick"</span>) -- Click Me
</pre></div></div><!--M/--><p>When using declarative event binding, no DOM event listeners are actually attached for events that bubble. Instead, Marko attaches a single listener on the root DOM element of the page for each DOM event that bubbles (done at startup). When Marko receives an event at the root it handles delegating the event to the appropriate components that are interested in that event. This is done by looking at the <code>event.target</code> property to see where the event originated and then walking up the tree to find components that need to be notified. As a result, there is slightly more work that is done when a DOM event is captured at the root, but this approach uses much less memory and reduces the amount of work that is done during initialization. The extra overhead of delegating events to components will not be noticeable so it is a very beneficial optimization.</p><p><em>Cover image credit: <a href=https://thenounproject.com/search/?q=superhero&amp;i=690775>Superhero by Gan Khoon Lay from the Noun Project</a></em></p><a href=https://github.com/marko-js/marko/blob/master/packages/marko/docs/why-is-marko-fast.md class=edit-on-github>EDIT <img src=/assets/62fa77f5.svg></a><h2 id=contributors><a name=contributors class=anchor href=#contributors><span class=header-link></span></a> Contributors</h2><p>Helpful? You can thank these awesome people! You can also <a href=https://github.com/marko-js/marko/blob/master/packages/marko/docs/why-is-marko-fast.md>edit this doc</a> if you see any issues or want to improve it.</p><div class=contributors><a href=https://github.com/DylanPiercey class=contributor><img src=https://avatars.githubusercontent.com/u/4985201?v=4 class=photo><span class=name>DylanPiercey</span></a><a href=https://github.com/mlrawlings class=contributor><img src=https://avatars.githubusercontent.com/u/1958812?v=4 class=photo><span class=name>mlrawlings</span></a><a href=https://github.com/ryansolid class=contributor><img src=https://avatars.githubusercontent.com/u/2768267?v=4 class=photo><span class=name>ryansolid</span></a><a href=https://github.com/marko-js/marko/blob/master/packages/marko/docs/why-is-marko-fast.md class="contributor you"><div class=photo><span class=icon>+</span></div><span class=name>You?</span></a></div><footer class="site-footer doc-footer"><a href=https://openjsf.org/  class=openjsf><img src=/assets/f9c991e7.png alt> <span><span class=bold>OpenJS</span>&nbsp;<span class=light>Foundation</span></span></a><div class=separator></div><a href=https://github.com/marko-js/marko/blob/master/LICENSE class=osi><img src=/assets/4dab80b0.png alt> MIT&nbsp;License</a><div class=separator></div><a href=https://github.com/eBay class=ebay><img src=/assets/657b26bd.svg alt=eBay> open&nbsp;source</a></footer></div></div></div></main><script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-66854919-1', 'markojs.com');
    ga('send', 'pageview');
  </script><a href=https://discord.gg/marko target=_blank class=discord-button><img src=/assets/8d84725b.svg alt="Chat in Marko's Discord Server"></a><script>$MC=(window.$MC||[]).concat({"l":1,"w":[["s0-1-0-8",0,{}],["s0-1-0-8-8",1,{"class":"search"}],["s0-1-0-9",2,{"currentDoc":"why-is-marko-fast","toc":"<ul class=\"toc toc-level1\"><li><ul class=\"toc toc-level2\"><li><a href=\"#multiple-compilation-outputs\">Multiple Compilation Outputs\u003C/a><ul class=\"toc toc-level3\"><li><a href=\"#compiled-for-the-server\">Compiled for the server\u003C/a>\u003C/li><li><a href=\"#compiled-for-the-browser\">Compiled for the browser\u003C/a>\u003C/li>\u003C/ul>\u003C/li><li><a href=\"#modular-runtime\">Modular Runtime\u003C/a>\u003C/li><li><a href=\"#high-performance-server-side-rendering\">High performance server-side rendering\u003C/a>\u003C/li><li><a href=\"#compile-time-optimization-of-static-sub-trees\">Compile-time optimization of static sub-trees\u003C/a>\u003C/li><li><a href=\"#compile-time-optimization-of-static-attributes\">Compile-time optimization of static attributes\u003C/a>\u003C/li><li><a href=\"#smart-compiler\">Smart compiler\u003C/a>\u003C/li><li><a href=\"#event-delegation\">Event delegation\u003C/a>\u003C/li>\u003C/ul>\u003C/li>\u003C/ul>"}],["s0-1-0-9-9",3,{}],["s0-1-0-9-10",1,{"class":"search"}],["s0-1-0-11-4-27-1",4,{"html":"<pre class=highlighted style=color:#D0D0E0;background-color:#202034>&lt;<span style=color:#FF4185>div\u003C/span>>Hello <span style=color:#66D9EF>${\u003C/span><span style=color:#FFFFFF>input\u003C/span>.<span style=color:#FFFFFF>name\u003C/span><span style=color:#66D9EF>}\u003C/span>!&lt;/<span style=color:#FF4185>div\u003C/span>>\n\u003C/pre>","concise":"<pre class=highlighted style=color:#D0D0E0;background-color:#202034><span style=color:#FF4185>div\u003C/span> -- Hello <span style=color:#66D9EF>${\u003C/span><span style=color:#FFFFFF>input\u003C/span>.<span style=color:#FFFFFF>name\u003C/span><span style=color:#66D9EF>}\u003C/span>!\n\u003C/pre>"}],["s0-1-0-11-4-40-1",4,{"html":"<pre class=highlighted style=color:#D0D0E0;background-color:#202034><span style=color:#FF4185>$\u003C/span> <span style=color:#66D9EF>var\u003C/span> <span style=color:#FFFFFF>color\u003C/span> <span style=color:#FFFFFF>=\u003C/span> <span style=color:#FFF066>'red'\u003C/span>;\n&lt;<span style=color:#FF4185>div\u003C/span> <span style=color:#A6E22E>style\u003C/span><span style=color:#FFFFFF>=\u003C/span>{backgroundColor: <span style=color:#FFFFFF>color\u003C/span>}>&lt;/<span style=color:#FF4185>div\u003C/span>>\n\u003C/pre>","concise":"<pre class=highlighted style=color:#D0D0E0;background-color:#202034><span style=color:#FF4185>$\u003C/span> <span style=color:#66D9EF>var\u003C/span> <span style=color:#FFFFFF>color\u003C/span> <span style=color:#FFFFFF>=\u003C/span> <span style=color:#FFF066>\"red\"\u003C/span>;\n<span style=color:#FF4185>div\u003C/span> <span style=color:#A6E22E>style\u003C/span><span style=color:#FFFFFF>=\u003C/span>{ backgroundColor: <span style=color:#FFFFFF>color\u003C/span> }\n\u003C/pre>"}],["s0-1-0-11-4-56-1",4,{"html":"<pre class=highlighted style=color:#D0D0E0;background-color:#202034>&lt;<span style=color:#FF4185>div\u003C/span>>This is a &lt;<span style=color:#FF4185>strong\u003C/span>>static&lt;/<span style=color:#FF4185>strong\u003C/span>> node&lt;/<span style=color:#FF4185>div\u003C/span>>\n\u003C/pre>","concise":"<pre class=highlighted style=color:#D0D0E0;background-color:#202034><span style=color:#FF4185>div\u003C/span>\n  -- This is a\n  <span style=color:#FF4185>strong\u003C/span> -- static\n  --  node\n\u003C/pre>"}],["s0-1-0-11-4-65-1",4,{"html":"<pre class=highlighted style=color:#D0D0E0;background-color:#202034>&lt;<span style=color:#FF4185>div\u003C/span><span style=color:#A6E22E>.hello\u003C/span>>Hello <span style=color:#66D9EF>${\u003C/span><span style=color:#FFFFFF>input\u003C/span>.<span style=color:#FFFFFF>name\u003C/span><span style=color:#66D9EF>}\u003C/span>!&lt;/<span style=color:#FF4185>div\u003C/span>>\n\u003C/pre>","concise":"<pre class=highlighted style=color:#D0D0E0;background-color:#202034><span style=color:#FF4185>div\u003C/span><span style=color:#A6E22E>.hello\u003C/span> -- Hello <span style=color:#66D9EF>${\u003C/span><span style=color:#FFFFFF>input\u003C/span>.<span style=color:#FFFFFF>name\u003C/span><span style=color:#66D9EF>}\u003C/span>!\n\u003C/pre>"}],["s0-1-0-11-4-82-1",4,{"html":"<pre class=highlighted style=color:#D0D0E0;background-color:#202034>&lt;<span style=color:#FF4185>button\u003C/span> <span style=color:#A6E22E>type\u003C/span><span style=color:#FFFFFF>=\u003C/span><span style=color:#FFF066>\"button\"\u003C/span> <span style=color:#66D9EF>on-click\u003C/span>(<span style=color:#FFF066>\"handleClick\"\u003C/span>)>\n  Click Me\n&lt;/<span style=color:#FF4185>button\u003C/span>>\n\u003C/pre>","concise":"<pre class=highlighted style=color:#D0D0E0;background-color:#202034><span style=color:#FF4185>button\u003C/span> <span style=color:#A6E22E>type\u003C/span><span style=color:#FFFFFF>=\u003C/span><span style=color:#FFF066>\"button\"\u003C/span> <span style=color:#66D9EF>on-click\u003C/span>(<span style=color:#FFF066>\"handleClick\"\u003C/span>) -- Click Me\n\u003C/pre>"}]],"t":["OIKmBXjW","HkYzEWAp","mFesaajv","07hv1F0+","UUumdCIE"]})</script></body></html>