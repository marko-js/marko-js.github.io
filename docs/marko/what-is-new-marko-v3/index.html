<!doctype html><html lang="en"><head><meta http-equiv="Content-Type" content="text/html" charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>What's New in Marko v3 | Marko</title><link rel="alternate" type="application/rss+xml" title="RSS" href="/rss.xml"><meta name="description"><link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/manifest.json"><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width"><link rel="stylesheet" href="/static/docs-page-3578ebd6.css">
<link rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css"></head><body><header id="header" data-widget="/markojs.com$1.0.0/src/components/app-header/index"><div class="container"><div id="logo"><a href="/"><img src="/images/logo-header.png" alt="Marko"></a></div><nav role="navigation" id="nav" class="mobile-hidden"><ul class="main-navigation"><li><a href="/docs/" class="active">Docs</a></li><li><a href="/community/">Community</a></li><li><a href="/blog/">Blog</a></li><li><a href="/github/">Github</a></li><li class="nav-search"><i class="fa fa-search" data-w-onclick="handleToggleSearchClick|header"></i><form action="https://google.com/search" method="get" class="search-form"><input type="hidden" name="as_sitesearch" value="markojs.com"><input type="text" name="q" results="0" placeholder class="search-input"></form></li></ul></nav><div style="clear: both"></div></div></header><div class="container"><aside class="docs-nav"><section><h1>Marko</h1><ul><li><a href="/docs/">Overview</a></li><li><a href="/docs/marko/get-started/">Get Started</a></li><li><a href="/docs/marko/javascript-api/">JavaScript API</a></li><li><a href="/docs/marko/language-guide/">Language Guide</a></li><li><a href="/docs/marko/custom-taglibs/">Custom Taglibs</a></li><li><a href="/docs/marko/compiler/">Compiler</a></li><li><a href="/docs/marko/faq/">FAQ</a></li><li><a href="/docs/marko/additional-resources/">Additional Resources</a></li></ul><div class="footer"><a class="try-online" href="/try-online/" target="_blank">Try Online! <img src="/static/new-window-81a33b35.svg" width="16" height="16"></a></div></section><section><h1>Marko Widgets</h1><ul><li><a href="/docs/marko-widgets/">Overview</a></li><li><a href="/docs/marko-widgets/get-started/">Get Started</a></li><li><a href="/docs/marko-widgets/component-lifecycle/">Component Lifecycle</a></li><li><a href="/docs/marko-widgets/javascript-api/">JavaScript API</a></li><li><a href="/docs/marko-widgets/faq/">FAQ</a></li><li><a href="/docs/marko-widgets/additional-resources/">Additional Resources</a></li></ul><div class="footer"><a class="try-online" href="/marko-widgets/try-online/" target="_blank">Try Online! <img src="/static/new-window-81a33b35.svg" width="16" height="16"></a></div></section></aside><main><h1 class="page-title">What's New in Marko v3<span class="subtitle">&nbsp;// Marko</span><a href="https://github.com/marko-js/marko/blob/master/docs/what-is-new-marko-v3.md" class="improve-link">Improve this page</a></h1><p>We’ve made some exciting improvements to Marko as part of the Marko v3 release. Most notably:</p>
<ul>
<li>Improved syntax<ul>
<li>Now supports <em>both</em> a familiar HTML syntax and a <a href="#concise-syntax">concise, indentation-based syntax</a></li>
<li><a href="#attr-javascript-expressions"><em>All</em> attribute values are now parsed as JavaScript expressions</a></li>
<li>New parser: <a href="https://github.com/philidem/htmljs-parser">htmljs-parser</a> (thanks <a href="https://github.com/philidem">@philidem</a>!)</li>
</ul>
</li>
<li><a href="#improved-directives">Improved directives</a></li>
<li><a href="#compiler-api">New and improved compiler API</a></li>
</ul>
<p>We worked hard to make Marko v3, arguably, the best templating engine ever. This release includes over <a href="https://github.com/marko-js/marko/compare/v2.8.4...v3.0.0-alpha.1">250 commits to Marko</a> and <a href="https://github.com/philidem/htmljs-parser/commits/master">almost 100 commits to the parser</a>. Marko is heavily tested with over 600 individual tests for Marko and its new parser. Thank you to all of the contributors who have provided code and feedback along the way (see <a href="https://github.com/marko-js/marko/issues/90">#90</a>, <a href="https://github.com/marko-js/marko/issues/211">#211</a>, especially <a href="https://github.com/adammcarth">@adammcarth</a>, <a href="https://github.com/BryceEWatson">@BryceEWatson</a>, <a href="https://github.com/crsandeep">@crsandeep</a>, <a href="https://github.com/DanCech">@DanCech</a>, <a href="https://github.com/danrichman">@danrichman</a>, <a href="https://github.com/kristianmandrup">@kristianmandrup</a>, <a href="https://github.com/onemrkarthik">@onemrkarthik</a>, <a href="https://github.com/philidem">@philidem</a>, <a href="https://github.com/pswar">@pswar</a>, <a href="https://github.com/scttdavs">@scttdavs</a>, <a href="https://github.com/SunnyGurnani">@SunnyGurnani</a>, <a href="https://github.com/tindli">@tindli</a>, <a href="https://github.com/vedam">@vedam</a> and <a href="https://github.com/yomed">@yomed</a>)!</p>
<p>In order to make these improvements it was necessary to introduce some breaking changes. However, a migration tool is available to automatically convert Marko v2 templates to the new syntax. Please see: <a href="https://github.com/marko-js/marko-migrate">github.com/marko-js/marko-migrate</a></p>
<p>It&#39;s also worth mentioning that the new concise syntax was heavily inspired by <a href="http://jade-lang.com/">Jade/Pug</a>. However, we reduced the number of grammar rules with Marko to make the concise syntax easier to grasp and closer to HTML.</p>
<p>While Marko is focused on being the best-in-class templating engine, <a href="/docs/marko-widgets/">Marko Widgets</a> aims to be ​one of​ the simplest and fastest libraries for building UI components. Marko renders the HTML for UI components, while Marko Widgets adds client-side behavior. Marko Widgets offers advanced features like DOM-diffing, batched updates, stateful widgets, declarative event binding and efficient event delegation.</p>
<p>Please try it out and provide feedback:</p>
<pre class="editor editor-colors"><div class="line"><span class="text plain null-grammar"><span>npm&nbsp;install&nbsp;marko@3&nbsp;--save</span></span></div></pre><p>If you are using Marko Widgets you will need to also install the latest version of Marko Widgets:</p>
<pre class="editor editor-colors"><div class="line"><span class="text plain null-grammar"><span>npm&nbsp;install&nbsp;marko-widgets@6&nbsp;--save</span></span></div></pre><p>Also, the <a href="https://github.com/lasso-js/lasso">Lasso.js</a> taglib has been updated to be compatible with Marko v3 so you will need to upgrade Lasso.js if you are using that tool:</p>
<pre class="editor editor-colors"><div class="line"><span class="text plain null-grammar"><span>npm&nbsp;install&nbsp;lasso@2&nbsp;--save</span></span></div></pre><p>Please join the <a href="https://gitter.im/marko-js/marko">Marko community on Gitter</a> and feel free to ask any question or provide feedback.</p>
<p>Cheers!</p>
<h2 id="new-features"><a name="new-features" class="anchor" href="#new-features"><span class="header-link"></span></a>New features</h2><p><a name="attr-javascript-expressions"></a></p>
<h3 id="javascript-expressions-as-attribute-values"><a name="javascript-expressions-as-attribute-values" class="anchor" href="#javascript-expressions-as-attribute-values"><span class="header-link"></span></a>JavaScript expressions as attribute values</h3><p>Marko v3 uses a new parser that allows for a much more powerful syntax. With Marko v3, an attribute value is <em>always</em> parsed as a JavaScript expression:</p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>div</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>class</span></span><span class="punctuation separator key-value html"><span>=</span></span><span>data.myClassName</span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>input</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>type</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>checkbox</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>checked</span></span><span class="punctuation separator key-value html"><span>=</span></span><span>data.isChecked</span><span>/&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>my-component</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>string</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Hello</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>/&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>my-component</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>number</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="constant numeric js"><span>1</span></span><span>/&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>my-component</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>template-string</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Hello&nbsp;</span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span>name</span><span class="keyword operator js"><span>}</span></span></span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>/&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>my-component</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>boolean</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="constant language boolean true js"><span>true</span></span><span>/&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>my-component</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>array</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="meta brace square js"><span>[</span></span><span class="constant numeric js"><span>1</span></span><span>,&nbsp;</span><span class="constant numeric js"><span>2</span></span><span>,&nbsp;</span><span class="constant numeric js"><span>3</span></span><span class="meta brace square js"><span>]</span></span><span>/&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>my-component</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>object</span></span><span class="punctuation separator key-value html"><span>=</span></span><span>{hello:&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>world</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>}</span><span>/&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>my-component</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>variable</span></span><span class="punctuation separator key-value html"><span>=</span></span><span>name</span><span>/&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>my-component</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>function-call</span></span><span class="punctuation separator key-value html"><span>=</span></span><span>data.foo</span><span class="meta brace round js"><span>(</span><span>)</span></span><span>/&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>my-component</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>complex-expression</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="constant numeric js"><span>1</span></span><span class="keyword operator js"><span>+</span></span><span class="constant numeric js"><span>2</span></span><span>/&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>my-component</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>super-complex-expression</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="meta brace round js"><span>(</span></span><span>data.foo</span><span class="meta brace round js"><span>(</span><span>)</span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span><span>&nbsp;data.bar</span><span class="meta brace round js"><span>(</span></span><span class="meta brace square js"><span>[</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>a</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>b</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>c</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta brace square js"><span>]</span></span><span class="meta brace round js"><span>)</span><span>)</span></span><span>/&gt;</span></span></div></pre><p>Previously, attribute values were parsed as strings (by default), but a tag definition file (AKA, a schema file) could be used to associate type information with an attribute value to change how the value is interpreted. By replacing the strict HTML parser with a much more flexible <a href="https://github.com/philidem/htmljs-parser">htmljs-parser</a>, it now obvious how an attribute value would be interpreted.</p>
<h3 id="attribute-arguments"><a name="attribute-arguments" class="anchor" href="#attribute-arguments"><span class="header-link"></span></a>Attribute arguments</h3><p>Marko v3 allows tags and attributes to have an <em>argument</em> as shown below:</p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>my-custom-tag</span></span><span class="meta brace round js"><span>(</span></span><span>some&nbsp;argument</span><span class="meta brace round js"><span>)</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>div</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>my-custom-attr</span></span><span class="meta brace round js"><span>(</span></span><span>some&nbsp;argument</span><span class="meta brace round js"><span>)</span></span><span>&gt;</span></span></div></pre><p>Arguments are used to improve the syntax for directives such as looping and conditionals.</p>
<h3 id="improved-editor-and-ide-support"><a name="improved-editor-and-ide-support" class="anchor" href="#improved-editor-and-ide-support"><span class="header-link"></span></a>Improved Editor and IDE Support</h3><ul>
<li>Atom: <a href="https://atom.io/packages/language-marko">language-marko</a></li>
<li>Sublime Text: <a href="https://github.com/merwan7/sublime-marko">marko-sublime</a></li>
<li>WebStorm: <a href="https://github.com/marko-js/marko-tmbundle">marko.tmbundle</a> (See: <a href="https://www.jetbrains.com/phpstorm/help/importing-textmate-bundles.html">Importing TextMate Bundles</a>) (New!)</li>
<li>TextMate: <a href="https://github.com/marko-js/marko-tmbundle">marko.tmbundle</a></li>
<li>CodeMirror/Brackets (New!)</li>
</ul>
<p><a name="concise-syntax"></a></p>
<h3 id="concise-indentation-based-syntax"><a name="concise-indentation-based-syntax" class="anchor" href="#concise-indentation-based-syntax"><span class="header-link"></span></a>Concise indentation-based syntax</h3><p>Marko v3 supports both a familiar HTML syntax and a concise, indentation-based syntax. Both syntaxes are equally supported and both syntaxes can even be mixed in the same Marko template.</p>
<p>The code snippets below show how each syntax variant compares.</p>
<h4 id="html-syntax"><a name="html-syntax" class="anchor" href="#html-syntax"><span class="header-link"></span></a>HTML syntax</h4><pre class="editor editor-colors"><div class="line"><span class="text marko"><span class="meta tag sgml html"><span class="punctuation definition tag html"><span>&lt;!</span></span><span class="meta tag sgml doctype html"><span>DOCTYPE</span><span>&nbsp;html</span></span><span class="punctuation definition tag html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>html</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>lang</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>en</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="entity name tag"><span>head</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="entity name tag"><span>title</span></span><span>&gt;</span><span>Marko&nbsp;Templating&nbsp;Engine</span><span>&lt;/</span><span class="entity name tag"><span>title</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;/</span><span class="entity name tag"><span>head</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="entity name tag"><span>body</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span class="comment block html"><span class="punctuation definition comment html"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--</span></span><span>&nbsp;Welcome&nbsp;to&nbsp;Marko!&nbsp;</span><span class="punctuation definition comment html"><span>--&gt;</span></span></span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="entity name tag"><span>h1</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hello&nbsp;</span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span>data.name</span><span class="keyword operator js"><span>}</span></span></span><span>!</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;/</span><span class="entity name tag"><span>h1</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="entity name tag"><span>ul</span></span><span>&nbsp;</span><span class="support function marko-attribute"><span>if</span></span><span class="meta brace round js"><span>(</span></span><span>notEmpty</span><span class="meta brace round js"><span>(</span></span><span>data.colors</span><span class="meta brace round js"><span>)</span><span>)</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="entity name tag"><span>li</span></span><span>&nbsp;</span><span class="support function marko-attribute"><span>for</span></span><span class="meta brace round js"><span>(</span></span><span>color&nbsp;</span><span class="keyword operator js"><span>in</span></span><span>&nbsp;data.colors</span><span class="meta brace round js"><span>)</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span>color</span><span class="keyword operator js"><span>}</span></span></span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;/</span><span class="entity name tag"><span>li</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;/</span><span class="entity name tag"><span>ul</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="entity name tag"><span>div</span></span><span>&nbsp;</span><span class="support function marko-attribute"><span>else</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;No&nbsp;colors!</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;/</span><span class="entity name tag"><span>div</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;/</span><span class="entity name tag"><span>body</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="entity name tag"><span>html</span></span><span>&gt;</span></span></div></pre><h4 id="concise-syntax"><a name="concise-syntax" class="anchor" href="#concise-syntax"><span class="header-link"></span></a>Concise syntax</h4><p>The following concise template is equivalent to the previous HTML template:</p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span class="meta tag sgml html"><span class="punctuation definition tag html"><span>&lt;!</span></span><span class="meta tag sgml doctype html"><span>DOCTYPE</span><span>&nbsp;html</span></span><span class="punctuation definition tag html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text marko"><span class="entity name tag"><span>html</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>lang</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>en</span><span class="punctuation definition string end js"><span>&quot;</span></span></span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name tag"><span>head</span></span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name tag"><span>title</span></span><span>&nbsp;</span><span class="punctuation separator"><span>-</span></span><span>&nbsp;Marko&nbsp;Templating&nbsp;Engine</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name tag"><span>body</span></span></span></div><div class="line"><span class="text marko"><span class="comment line double-slash marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</span><span>&nbsp;Welcome&nbsp;to&nbsp;Marko!</span></span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name tag"><span>h1</span></span><span>&nbsp;</span><span class="punctuation separator"><span>-</span></span><span>&nbsp;Hello&nbsp;</span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span>data.name</span><span class="keyword operator js"><span>}</span></span></span><span>!</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name tag"><span>ul</span></span><span>&nbsp;</span><span class="support function marko-attribute"><span>if</span></span><span class="meta brace round js"><span>(</span></span><span>notEmpty</span><span class="meta brace round js"><span>(</span></span><span>data.colors</span><span class="meta brace round js"><span>)</span><span>)</span></span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name tag"><span>li</span></span><span>&nbsp;</span><span class="support function marko-attribute"><span>for</span></span><span class="meta brace round js"><span>(</span></span><span>color&nbsp;</span><span class="keyword operator js"><span>in</span></span><span>&nbsp;data.colors</span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span>color</span><span class="keyword operator js"><span>}</span></span></span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name tag"><span>div</span></span><span>&nbsp;</span><span class="support function marko-attribute"><span>else</span></span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation separator"><span>-</span></span><span>&nbsp;No&nbsp;colors!</span></span></div></pre><p>There is one &quot;gotcha&quot; that you need to be aware of. The Marko parser starts out in the concise mode. Therefore, given the following template:</p>
<pre class="editor editor-colors"><div class="line"><span class="text plain null-grammar"><span>Hello&nbsp;World</span></span></div><div class="line"><span class="text plain null-grammar"><span>Welcome&nbsp;to&nbsp;Marko</span></span></div></pre><p>The output would be the following:</p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>Hello</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>World</span></span><span>&gt;</span><span>&lt;/</span><span class="entity name tag"><span>Hello</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>Welcome</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>to</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>Marko</span></span><span>&gt;</span><span>&lt;/</span><span class="entity name tag"><span>Welcome</span></span><span>&gt;</span></span></div></pre><p>To parse correctly, you would need to prefix each HTML line with a hyphen:</p>
<pre class="editor editor-colors"><div class="line"><span class="text plain null-grammar"><span>-&nbsp;Hello&nbsp;World</span></span></div><div class="line"><span class="text plain null-grammar"><span>-&nbsp;Welcome&nbsp;to&nbsp;Marko</span></span></div></pre><p>Alternatively, a multi-line, delimited HTML block can be used:</p>
<pre class="editor editor-colors"><div class="line"><span class="text plain null-grammar"><span>---</span></span></div><div class="line"><span class="text plain null-grammar"><span>Hello&nbsp;World</span></span></div><div class="line"><span class="text plain null-grammar"><span>Welcome&nbsp;to&nbsp;Marko</span></span></div><div class="line"><span class="text plain null-grammar"><span>---</span></span></div></pre><h4 id="mixed-syntax"><a name="mixed-syntax" class="anchor" href="#mixed-syntax"><span class="header-link"></span></a>Mixed syntax</h4><p>You can even mix and match the concise syntax with the HTML syntax within the same document.
The following template is equivalent to the previous templates:</p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span class="meta tag sgml html"><span class="punctuation definition tag html"><span>&lt;!</span></span><span class="meta tag sgml doctype html"><span>DOCTYPE</span><span>&nbsp;html</span></span><span class="punctuation definition tag html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text marko"><span class="entity name tag"><span>html</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>lang</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>en</span><span class="punctuation definition string end js"><span>&quot;</span></span></span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name tag"><span>head</span></span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="entity name tag"><span>title</span></span><span>&gt;</span><span>Marko&nbsp;Templating&nbsp;Engine</span><span>&lt;/</span><span class="entity name tag"><span>title</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name tag"><span>body</span></span></span></div><div class="line"><span class="text marko"><span class="comment line double-slash marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//</span><span>&nbsp;Welcome&nbsp;to&nbsp;Marko!</span></span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="entity name tag"><span>h1</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hello&nbsp;</span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span>data.name</span><span class="keyword operator js"><span>}</span></span></span><span>!</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;/</span><span class="entity name tag"><span>h1</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name tag"><span>ul</span></span><span>&nbsp;</span><span class="support function marko-attribute"><span>if</span></span><span class="meta brace round js"><span>(</span></span><span>notEmpty</span><span class="meta brace round js"><span>(</span></span><span>data.colors</span><span class="meta brace round js"><span>)</span><span>)</span></span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name tag"><span>li</span></span><span>&nbsp;</span><span class="support function marko-attribute"><span>for</span></span><span class="meta brace round js"><span>(</span></span><span>color&nbsp;</span><span class="keyword operator js"><span>in</span></span><span>&nbsp;data.colors</span><span class="meta brace round js"><span>)</span></span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span>color</span><span class="keyword operator js"><span>}</span></span></span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name tag"><span>div</span></span><span>&nbsp;</span><span class="support function marko-attribute"><span>else</span></span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation separator"><span>-</span></span><span>&nbsp;No&nbsp;colors!</span></span></div></pre><p><a name="improved-directives"></a></p>
<h3 id="improved-syntax-for-directives"><a name="improved-syntax-for-directives" class="anchor" href="#improved-syntax-for-directives"><span class="header-link"></span></a>Improved syntax for directives</h3><h4 id="macros"><a name="macros" class="anchor" href="#macros"><span class="header-link"></span></a>Macros</h4><p><strong><em>Old syntax:</em></strong></p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>def</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>function</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>greeting(name,&nbsp;count)</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;Hello&nbsp;</span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span>name</span><span class="keyword operator js"><span>}</span></span></span><span>!&nbsp;You&nbsp;have&nbsp;</span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span>count</span><span class="keyword operator js"><span>}</span></span></span><span>&nbsp;new&nbsp;messages.</span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="entity name tag"><span>def</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>invoke</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>function</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>greeting</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>name</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>John</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>count</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span class="constant numeric js"><span>10</span></span><span class="keyword operator js"><span>}</span></span></span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>/&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>invoke</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>function</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>greeting(&#39;Frank&#39;,&nbsp;20)</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>/&gt;</span></span></div></pre><p><strong><em>New syntax:</em></strong></p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>macro</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>greeting</span></span><span class="meta brace round js"><span>(</span></span><span>name,&nbsp;count</span><span class="meta brace round js"><span>)</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;Hello&nbsp;</span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span>name</span><span class="keyword operator js"><span>}</span></span></span><span>!&nbsp;You&nbsp;have&nbsp;</span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span>count</span><span class="keyword operator js"><span>}</span></span></span><span>&nbsp;new&nbsp;messages.</span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="support function marko-tag"><span>macro</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>greeting</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>name</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Frank</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>count</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="constant numeric js"><span>30</span></span><span>/&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>greeting</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>Frank</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="constant numeric js"><span>30</span></span><span class="meta brace round js"><span>)</span></span><span>/&gt;</span></span></div></pre><p>Macros that allow nested body content are now more cleanly supported using the <code>&lt;macro-body&gt;</code> tag:</p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>macro</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>section-heading</span></span><span class="meta brace round js"><span>(</span></span><span>className</span><span class="meta brace round js"><span>)</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;</span><span>&lt;</span><span class="entity name tag"><span>h1</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>class</span></span><span class="punctuation separator key-value html"><span>=</span></span><span>className</span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="support function marko-tag"><span>macro-body</span></span><span>/&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;</span><span>&lt;/</span><span class="entity name tag"><span>h1</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="support function marko-tag"><span>macro</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>section-heading</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>className</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>foo</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;Hello&nbsp;World!</span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="support function marko-tag"><span>section-heading</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;</span></span></div><div class="line"><span class="text marko"><span class="comment block html"><span class="punctuation definition comment html"><span>&lt;!--</span></span><span>&nbsp;Output:&nbsp;</span><span class="punctuation definition comment html"><span>--&gt;</span></span></span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>h1</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>class</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>foo</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&gt;</span><span>Hello&nbsp;World!</span><span>&lt;/</span><span class="entity name tag"><span>h1</span></span><span>&gt;</span></span></div></pre><p><a href="https://github.com/marko-js/marko/issues/170">Issue #170 - Marko v3: macros</a></p>
<h4 id="includes"><a name="includes" class="anchor" href="#includes"><span class="header-link"></span></a>Includes</h4><p><strong><em>Old syntax:</em></strong></p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>include</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>template</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>./include-target.marko</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>name</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Frank</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>count</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span class="constant numeric js"><span>20</span></span><span class="keyword operator js"><span>}</span></span></span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>/&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>include</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>template</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>./include-target.marko</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>template-data</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>{name:&nbsp;&#39;Frank&#39;,&nbsp;count:&nbsp;20}</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>/&gt;</span></span></div></pre><p><strong><em>New syntax:</em></strong></p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>include</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>./include-target.marko</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>name</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>Frank</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>count</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="constant numeric js"><span>20</span></span><span>/&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>include</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>./include-target.marko</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>,&nbsp;{name:&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>Frank</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>,&nbsp;count:&nbsp;</span><span class="constant numeric js"><span>20</span></span><span>}</span><span class="meta brace round js"><span>)</span></span><span>/&gt;</span></span></div></pre><p>Includes also support body content:</p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>include</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>./include-nested-content.marko</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>name</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Frank</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>count</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="constant numeric js"><span>20</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;Have&nbsp;a</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="entity name tag"><span>b</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wonderful</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;/</span><span class="entity name tag"><span>b</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;day!</span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="support function marko-tag"><span>include</span></span><span>&gt;</span></span></div></pre><p>When body content is provided, a special <code>data.renderBody = function(out) { ... }</code> function will be added to the template data for the target template.</p>
<p>Dynamic templates are also supported:</p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag script"><span>script</span></span><span>&nbsp;</span><span class="support function marko-attribute"><span>marko-init</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span class="storage type var js"><span>var</span></span><span>&nbsp;templateA&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="support function js"><span>require</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>./include-a.marko</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="text marko"><span class="storage type var js"><span>var</span></span><span>&nbsp;templateB&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="support function js"><span>require</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>./include-b.marko</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="entity name tag script"><span>script</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>include</span></span><span class="meta brace round js"><span>(</span></span><span>foo&nbsp;?&nbsp;templateA&nbsp;:&nbsp;templateB</span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>name</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>Frank</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>count</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="constant numeric js"><span>20</span></span><span>/&gt;</span></span></div></pre><p><a href="https://github.com/marko-js/marko/issues/178">Issue #178 - Marko v3: include tag</a></p>
<h4 id="conditionals"><a name="conditionals" class="anchor" href="#conditionals"><span class="header-link"></span></a>Conditionals</h4><p><strong><em>Old syntax:</em></strong></p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span class="comment block html"><span class="punctuation definition comment html"><span>&lt;!--</span></span><span>&nbsp;Applied&nbsp;as&nbsp;tags:&nbsp;</span><span class="punctuation definition comment html"><span>--&gt;</span></span></span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>if</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>test</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>a&nbsp;&gt;&nbsp;b</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&gt;</span><span>...</span><span>&lt;/</span><span class="support function marko-tag"><span>if</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>else-if</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>test</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>b&nbsp;&lt;&nbsp;a</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&gt;</span><span>...</span><span>&lt;/</span><span class="support function marko-tag"><span>else-if</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>else</span></span><span>&gt;</span><span>...</span><span>&lt;/</span><span class="support function marko-tag"><span>else</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;</span></span></div><div class="line"><span class="text marko"><span class="comment block html"><span class="punctuation definition comment html"><span>&lt;!--</span></span><span>&nbsp;Applied&nbsp;as&nbsp;attributes:&nbsp;</span><span class="punctuation definition comment html"><span>--&gt;</span></span></span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>div</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>if</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>a&nbsp;&gt;&nbsp;b</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&gt;</span><span>...</span><span>&lt;/</span><span class="entity name tag"><span>div</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>div</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>else-if</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>b&nbsp;&lt;&nbsp;a</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&gt;</span><span>...</span><span>&lt;/</span><span class="entity name tag"><span>div</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>div</span></span><span>&nbsp;</span><span class="support function marko-attribute"><span>else</span></span><span>&gt;</span><span>...</span><span>&lt;/</span><span class="entity name tag"><span>div</span></span><span>&gt;</span></span></div></pre><p><strong><em>New syntax:</em></strong></p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span class="comment block html"><span class="punctuation definition comment html"><span>&lt;!--</span></span><span>&nbsp;Applied&nbsp;as&nbsp;tags:&nbsp;</span><span class="punctuation definition comment html"><span>--&gt;</span></span></span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>if</span></span><span class="meta brace round js"><span>(</span></span><span>a&nbsp;</span><span class="keyword operator js"><span>&gt;</span></span><span>&nbsp;b</span><span class="meta brace round js"><span>)</span></span><span>&gt;</span><span>...</span><span>&lt;/</span><span class="support function marko-tag"><span>if</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>else-if</span></span><span class="meta brace round js"><span>(</span></span><span>b&nbsp;</span><span class="keyword operator js"><span>&lt;</span></span><span>&nbsp;a</span><span class="meta brace round js"><span>)</span></span><span>&gt;</span><span>...</span><span>&lt;/</span><span class="support function marko-tag"><span>else-if</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>else</span></span><span>&gt;</span><span>...</span><span>&lt;/</span><span class="support function marko-tag"><span>else</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;</span></span></div><div class="line"><span class="text marko"><span class="comment block html"><span class="punctuation definition comment html"><span>&lt;!--</span></span><span>&nbsp;Applied&nbsp;as&nbsp;attributes:&nbsp;</span><span class="punctuation definition comment html"><span>--&gt;</span></span></span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>div</span></span><span>&nbsp;</span><span class="support function marko-attribute"><span>if</span></span><span class="meta brace round js"><span>(</span></span><span>a&nbsp;</span><span class="keyword operator js"><span>&gt;</span></span><span>&nbsp;b</span><span class="meta brace round js"><span>)</span></span><span>&gt;</span><span>...</span><span>&lt;/</span><span class="entity name tag"><span>div</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>div</span></span><span>&nbsp;</span><span class="support function marko-attribute"><span>else-if</span></span><span class="meta brace round js"><span>(</span></span><span>b&nbsp;</span><span class="keyword operator js"><span>&lt;</span></span><span>&nbsp;a</span><span class="meta brace round js"><span>)</span></span><span>&gt;</span><span>...</span><span>&lt;/</span><span class="entity name tag"><span>div</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>div</span></span><span>&nbsp;</span><span class="support function marko-attribute"><span>else</span></span><span>&gt;</span><span>...</span><span>&lt;/</span><span class="entity name tag"><span>div</span></span><span>&gt;</span></span></div></pre><h4 id="foritem-in-items"><a name="foritem-in-items" class="anchor" href="#foritem-in-items"><span class="header-link"></span></a>for(item in items)</h4><p><strong><em>Old syntax:</em></strong></p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span class="comment block html"><span class="punctuation definition comment html"><span>&lt;!--</span></span><span>&nbsp;Applied&nbsp;as&nbsp;a&nbsp;tag:&nbsp;</span><span class="punctuation definition comment html"><span>--&gt;</span></span></span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>ul</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="support function marko-tag"><span>for</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>test</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>color&nbsp;in&nbsp;colors</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="entity name tag"><span>li</span></span><span>&gt;</span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span>color</span><span class="keyword operator js"><span>}</span></span></span><span>&lt;/</span><span class="entity name tag"><span>li</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;/</span><span class="support function marko-tag"><span>for</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="entity name tag"><span>ul</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;</span></span></div><div class="line"><span class="text marko"><span class="comment block html"><span class="punctuation definition comment html"><span>&lt;!--</span></span><span>&nbsp;Applied&nbsp;as&nbsp;an&nbsp;attribute:&nbsp;</span><span class="punctuation definition comment html"><span>--&gt;</span></span></span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>ul</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="entity name tag"><span>li</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>for</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>color&nbsp;in&nbsp;colors</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span>color</span><span class="keyword operator js"><span>}</span></span></span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;/</span><span class="entity name tag"><span>li</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="entity name tag"><span>ul</span></span><span>&gt;</span></span></div></pre><p><strong><em>New syntax:</em></strong></p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span class="comment block html"><span class="punctuation definition comment html"><span>&lt;!--</span></span><span>&nbsp;Applied&nbsp;as&nbsp;a&nbsp;tag:&nbsp;</span><span class="punctuation definition comment html"><span>--&gt;</span></span></span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>ul</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="support function marko-tag"><span>for</span></span><span class="meta brace round js"><span>(</span></span><span>color&nbsp;</span><span class="keyword operator js"><span>in</span></span><span>&nbsp;colors</span><span class="meta brace round js"><span>)</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="entity name tag"><span>li</span></span><span>&gt;</span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span>color</span><span class="keyword operator js"><span>}</span></span></span><span>&lt;/</span><span class="entity name tag"><span>li</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;/</span><span class="support function marko-tag"><span>for</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="entity name tag"><span>ul</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;</span></span></div><div class="line"><span class="text marko"><span class="comment block html"><span class="punctuation definition comment html"><span>&lt;!--</span></span><span>&nbsp;Applied&nbsp;as&nbsp;an&nbsp;attribute:&nbsp;</span><span class="punctuation definition comment html"><span>--&gt;</span></span></span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>ul</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="entity name tag"><span>li</span></span><span>&nbsp;</span><span class="support function marko-attribute"><span>for</span></span><span class="meta brace round js"><span>(</span></span><span>color&nbsp;</span><span class="keyword operator js"><span>in</span></span><span>&nbsp;colors</span><span class="meta brace round js"><span>)</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span>color</span><span class="keyword operator js"><span>}</span></span></span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;/</span><span class="entity name tag"><span>li</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="entity name tag"><span>ul</span></span><span>&gt;</span></span></div></pre><p>Additional options are now passed in after a <code>|</code> symbol as shown below:</p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>for</span></span><span class="meta brace round js"><span>(</span></span><span>color&nbsp;</span><span class="keyword operator js"><span>in</span></span><span>&nbsp;</span><span class="meta brace square js"><span>[</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>red</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>green</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>blue</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta brace square js"><span>]</span></span><span>&nbsp;|&nbsp;separator</span><span class="keyword operator js"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>,&nbsp;</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta brace round js"><span>)</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span>color</span><span class="keyword operator js"><span>}</span></span></span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="support function marko-tag"><span>for</span></span><span>&gt;</span></span></div></pre><p>Output:</p>
<pre class="editor editor-colors"><div class="line"><span class="text html basic"><span>red,&nbsp;green,&nbsp;blue</span></span></div></pre><ul>
<li><a href="https://github.com/marko-js/marko/issues/189">Issue #189 - Marko v3: Improve syntax of the &quot;for&quot; directive by keeping everything in parens</a></li>
<li><a href="https://github.com/marko-js/marko/issues/193">Issue #193 - Marko v3: Custom iterators</a></li>
</ul>
<h5 id="iterator-function-as-target"><a name="iterator-function-as-target" class="anchor" href="#iterator-function-as-target"><span class="header-link"></span></a>Iterator function as target</h5><p>Marko v3 now allows the target to be an iterator function:</p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag script"><span>script</span></span><span>&nbsp;</span><span class="support function marko-attribute"><span>marko-init</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>myColorsIterator</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>callback</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>callback</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>red</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>callback</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>green</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>callback</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>blue</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="text marko"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="entity name tag script"><span>script</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>ul</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="support function marko-tag"><span>for</span></span><span class="meta brace round js"><span>(</span></span><span>color&nbsp;</span><span class="keyword operator js"><span>in</span></span><span>&nbsp;myColorsIterator</span><span class="meta brace round js"><span>)</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="entity name tag"><span>li</span></span><span>&gt;</span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span>color</span><span class="keyword operator js"><span>}</span></span></span><span>&lt;/</span><span class="entity name tag"><span>li</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;/</span><span class="support function marko-tag"><span>for</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="entity name tag"><span>ul</span></span><span>&gt;</span></span></div></pre><p>Output:</p>
<pre class="editor editor-colors"><div class="line"><span class="text html basic"><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag block any html"><span>ul</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>li</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span><span>red</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>li</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>li</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span><span>green</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>li</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>li</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span><span>blue</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>li</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag block any html"><span>ul</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div></pre><p><a href="https://github.com/marko-js/marko/issues/194">Issue #193 - Marko v3: Allow for target to be an iterator function</a></p>
<h4 id="for<code>&ltinit&gt<code>-<code>&lttest&gt<code>-<code>&ltupdate&gt<code>"><a name="for<code>&ltinit&gt<code>-<code>&lttest&gt<code>-<code>&ltupdate&gt<code>" class="anchor" href="#for<code>&ltinit&gt<code>-<code>&lttest&gt<code>-<code>&ltupdate&gt<code>"><span class="header-link"></span></a>for(<code>&lt;init&gt;</code>; <code>&lt;test&gt;</code>; <code>&lt;update&gt;</code>)</h4><p>Marko v3 now supports native for-loops as shown below:</p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>for</span></span><span class="meta brace round js"><span>(</span></span><span>var&nbsp;i</span><span class="keyword operator js"><span>=</span></span><span class="constant numeric js"><span>1</span></span><span>;&nbsp;i</span><span class="keyword operator js"><span>&lt;=</span></span><span class="constant numeric js"><span>3</span></span><span>;&nbsp;i</span><span class="keyword operator js"><span>++</span></span><span class="meta brace round js"><span>)</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span>i</span><span class="keyword operator js"><span>}</span></span></span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="support function marko-tag"><span>for</span></span><span>&gt;</span></span></div></pre><p>Output:</p>
<pre class="editor editor-colors"><div class="line"><span class="text html basic"><span>123</span></span></div></pre><p><a href="https://github.com/marko-js/marko/issues/191">Issue #191 - Marko v3: Allow native JavaScript for loops</a></p>
<h4 id="forkey-value-in-object"><a name="forkey-value-in-object" class="anchor" href="#forkey-value-in-object"><span class="header-link"></span></a>for(key, value in object)</h4><p><strong><em>Old syntax:</em></strong></p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>for</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>each</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>(name,value)&nbsp;in&nbsp;{&#39;foo&#39;:&nbsp;&#39;low&#39;,&nbsp;&#39;bar&#39;:&nbsp;&#39;high&#39;}</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span>name</span><span class="keyword operator js"><span>}</span></span></span><span>:&nbsp;</span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span>value</span><span class="keyword operator js"><span>}</span></span></span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="support function marko-tag"><span>for</span></span><span>&gt;</span></span></div></pre><p><strong><em>New syntax:</em></strong></p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>for</span></span><span class="meta brace round js"><span>(</span></span><span>name,value&nbsp;</span><span class="keyword operator js"><span>in</span></span><span>&nbsp;{</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>foo</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>:&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>low</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>bar</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>:&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>high</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>}</span><span class="meta brace round js"><span>)</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span>name</span><span class="keyword operator js"><span>}</span></span></span><span>:&nbsp;</span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span>value</span><span class="keyword operator js"><span>}</span></span></span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="support function marko-tag"><span>for</span></span><span>&gt;</span></span></div></pre><p><a href="https://github.com/marko-js/marko/issues/175">Issue #175 - Marko v3: Looping over object properties</a></p>
<h4 id="for<code>&ltrange&gt<code>"><a name="for<code>&ltrange&gt<code>" class="anchor" href="#for<code>&ltrange&gt<code>"><span class="header-link"></span></a>for(<code>&lt;range&gt;</code>)</h4><p><strong><em>Old syntax:</em></strong></p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>for</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>each</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>i&nbsp;from&nbsp;0&nbsp;to&nbsp;9</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span>i</span><span class="keyword operator js"><span>}</span></span></span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="support function marko-tag"><span>for</span></span><span>&gt;</span></span></div></pre><p><strong><em>New syntax:</em></strong></p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>for</span></span><span class="meta brace round js"><span>(</span></span><span>i&nbsp;from&nbsp;</span><span class="constant numeric js"><span>0</span></span><span>&nbsp;to&nbsp;</span><span class="constant numeric js"><span>9</span></span><span class="meta brace round js"><span>)</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span>i</span><span class="keyword operator js"><span>}</span></span></span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="support function marko-tag"><span>for</span></span><span>&gt;</span></span></div></pre><h4 id="while<code>&lttest&gt<code>"><a name="while<code>&lttest&gt<code>" class="anchor" href="#while<code>&lttest&gt<code>"><span class="header-link"></span></a>while(<code>&lt;test&gt;</code>)</h4><p>Marko v3 now supports native while loops:</p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span class="comment block html"><span class="punctuation definition comment html"><span>&lt;!--</span></span><span>&nbsp;Applied&nbsp;as&nbsp;a&nbsp;tag:&nbsp;</span><span class="punctuation definition comment html"><span>--&gt;</span></span></span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>var</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>n</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="constant numeric js"><span>0</span></span><span>/&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>ul</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="entity name tag"><span>while</span></span><span class="meta brace round js"><span>(</span></span><span>n&nbsp;</span><span class="keyword operator js"><span>&lt;</span></span><span>&nbsp;</span><span class="constant numeric js"><span>4</span></span><span class="meta brace round js"><span>)</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="entity name tag"><span>li</span></span><span>&gt;</span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span>n</span><span class="keyword operator js"><span>++</span><span>}</span></span></span><span>&lt;/</span><span class="entity name tag"><span>li</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;/</span><span class="entity name tag"><span>while</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="entity name tag"><span>ul</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;</span></span></div><div class="line"><span class="text marko"><span class="comment block html"><span class="punctuation definition comment html"><span>&lt;!--</span></span><span>&nbsp;Applied&nbsp;as&nbsp;an&nbsp;attribute:&nbsp;</span><span class="punctuation definition comment html"><span>--&gt;</span></span></span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>var</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>n</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="constant numeric js"><span>0</span></span><span>/&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>ul</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="entity name tag"><span>li</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>while</span></span><span class="meta brace round js"><span>(</span></span><span>n&nbsp;</span><span class="keyword operator js"><span>&lt;</span></span><span>&nbsp;</span><span class="constant numeric js"><span>4</span></span><span class="meta brace round js"><span>)</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span>n</span><span class="keyword operator js"><span>++</span><span>}</span></span></span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;/</span><span class="entity name tag"><span>li</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="entity name tag"><span>ul</span></span><span>&gt;</span></span></div></pre><p><a href="https://github.com/marko-js/marko/issues/228">Issue #228 - Marko v3: while loop support</a></p>
<h4 id="imports"><a name="imports" class="anchor" href="#imports"><span class="header-link"></span></a>Imports</h4><p><strong><em>Old syntax:</em></strong></p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>require</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>module</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>change-case</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>var</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>changeCase</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>/&gt;</span></span></div></pre><p><strong><em>New syntax:</em></strong></p>
<p>Marko v3 now supports adding JavaScript initialization code at the top of the compiled template. This code will only load the first time the compiled template is loaded and it can be used to import other JavaScript modules and introduce new static variables.</p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag script"><span>script</span></span><span>&nbsp;</span><span class="support function marko-attribute"><span>marko-init</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span class="storage type var js"><span>var</span></span><span>&nbsp;reverse&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="support function js"><span>require</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>./helpers</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>reverse</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="text marko"><span class="storage type var js"><span>var</span></span><span>&nbsp;changeCase&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="support function js"><span>require</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>change-case</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="entity name tag script"><span>script</span></span><span>&gt;</span></span></div></pre><p><a href="https://github.com/marko-js/marko/issues/214">Issue #214 - Marko v3: <code>&lt;script marko-init&gt;</code></a></p>
<h4 id="variables"><a name="variables" class="anchor" href="#variables"><span class="header-link"></span></a>Variables</h4><p><strong><em>Old syntax:</em></strong></p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>var</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>name</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>foo</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>value</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>&#39;bar&#39;</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;</span><span>/&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>var</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>name</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>count</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>value</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>0</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;</span><span>/&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>assign</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>var</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>count</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>value</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>count+1</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;</span><span>/&gt;</span></span></div></pre><p><strong><em>New syntax:</em></strong></p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>var</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>foo</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>bar</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>count</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="constant numeric js"><span>0</span></span><span>/&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>assign</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>count</span></span><span class="punctuation separator key-value html"><span>=</span></span><span>count</span><span class="keyword operator js"><span>+</span></span><span class="constant numeric js"><span>1</span></span><span>/&gt;</span></span></div></pre><p>Scoped variables are also supported:</p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>var</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>name</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Frank</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;Hello&nbsp;</span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span>name</span><span class="keyword operator js"><span>}</span></span></span><span>!</span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="support function marko-tag"><span>var</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span class="comment block html"><span class="punctuation definition comment html"><span>&lt;!--</span></span><span>&nbsp;The&nbsp;&quot;name&quot;&nbsp;variable&nbsp;will&nbsp;be&nbsp;`undefined`&nbsp;here&nbsp;</span><span class="punctuation definition comment html"><span>--&gt;</span></span></span></span></div></pre><p>Thank you, <a href="https://github.com/BryceEWatson">@BryceEWatson</a>, for working on this feature!</p>
<p><a href="https://github.com/marko-js/marko/issues/169">Issue #169 - Marko v3: var tag</a>
<a href="https://github.com/marko-js/marko/issues/171">Issue #171 - Marko v3: assign tag</a></p>
<h4 id="scriptlets"><a name="scriptlets" class="anchor" href="#scriptlets"><span class="header-link"></span></a>Scriptlets</h4><p>Marko v3 has adopted the more universal <code>&lt;% ... %&gt;</code> syntax for scriptlets. Scriptlets are there if you need to inject arbitrary JavaScript code into the compiled template.</p>
<p><strong><em>Old syntax:</em></strong></p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>{%&nbsp;if&nbsp;(true)&nbsp;{&nbsp;%}</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name tag"><span>HELLO</span></span></span></div><div class="line"><span class="text marko"><span>{%&nbsp;}&nbsp;%}</span></span></div><div class="line"><span class="text marko"><span>{%&nbsp;if&nbsp;(false)&nbsp;{&nbsp;%}</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name tag"><span>WORLD</span></span></span></div><div class="line"><span class="text marko"><span>{%&nbsp;}&nbsp;%}</span></span></div></pre><p><strong><em>New syntax:</em></strong></p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span class="keyword operator scriptlet marko"><span>&lt;%</span></span><span>&nbsp;</span><span class="entity name type object console js"><span>console</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="support function console js"><span>log</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>Hello&nbsp;World</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span><span>&nbsp;</span><span class="keyword operator scriptlet marko"><span>%&gt;</span></span></span></div><div class="line"><span class="text marko"><span>&nbsp;</span></span></div><div class="line"><span class="text marko"><span class="keyword operator scriptlet marko"><span>&lt;%</span></span><span>&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="constant language boolean true js"><span>true</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;</span><span class="keyword operator js"><span>%</span></span><span class="keyword operator comparison js"><span>&gt;</span></span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="constant other js"><span>HELLO</span></span></span></div><div class="line"><span class="text marko"><span class="keyword operator comparison js"><span>&lt;</span></span><span class="keyword operator js"><span>%</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword operator scriptlet marko"><span>%&gt;</span></span></span></div><div class="line"><span class="text marko"><span class="keyword operator scriptlet marko"><span>&lt;%</span></span><span>&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="constant language boolean false js"><span>false</span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span><span>&nbsp;</span><span class="keyword operator js"><span>%</span></span><span class="keyword operator comparison js"><span>&gt;</span></span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="constant other js"><span>WORLD</span></span></span></div><div class="line"><span class="text marko"><span class="keyword operator comparison js"><span>&lt;</span></span><span class="keyword operator js"><span>%</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword operator scriptlet marko"><span>%&gt;</span></span></span></div></pre><p><a href="https://github.com/marko-js/marko/issues/181">Issue #181 - Marko v3: Scriptlets</a></p>
<h4 id="layout-taglib"><a name="layout-taglib" class="anchor" href="#layout-taglib"><span class="header-link"></span></a>Layout taglib</h4><p><strong><em>Old syntax:</em></strong></p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>layout-use</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>template</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>./layout-default.marko</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>show-header</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>$false</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="support function marko-tag"><span>layout-put</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>into</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>body</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&gt;</span><span>BODY&nbsp;CONTENT</span><span>&lt;/</span><span class="support function marko-tag"><span>layout-put</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="support function marko-tag"><span>layout-put</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>into</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>footer</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&gt;</span><span>FOOTER&nbsp;CONTENT</span><span>&lt;/</span><span class="support function marko-tag"><span>layout-put</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="support function marko-tag"><span>layout-use</span></span><span>&gt;</span></span></div></pre><p><strong><em>New syntax:</em></strong></p>
<p>The <code>&lt;layout-use&gt;</code> tag now expects a template argument:</p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>layout-use</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>./layout-default.marko</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>show-header</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="constant language boolean false js"><span>false</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="support function marko-tag"><span>layout-put</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>into</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>body</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&gt;</span><span>BODY&nbsp;CONTENT</span><span>&lt;/</span><span class="support function marko-tag"><span>layout-put</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="support function marko-tag"><span>layout-put</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>into</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>footer</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&gt;</span><span>FOOTER&nbsp;CONTENT</span><span>&lt;/</span><span class="support function marko-tag"><span>layout-put</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="support function marko-tag"><span>layout-use</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;</span></span></div><div class="line"><span class="text marko"><span class="comment block html"><span class="punctuation definition comment html"><span>&lt;!--</span></span><span>&nbsp;The&nbsp;layout&nbsp;template&nbsp;can&nbsp;also&nbsp;be&nbsp;dynamic&nbsp;and&nbsp;you&nbsp;can&nbsp;also&nbsp;pass&nbsp;a&nbsp;data&nbsp;object:&nbsp;</span><span class="punctuation definition comment html"><span>--&gt;</span></span></span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>layout-use</span></span><span class="meta brace round js"><span>(</span></span><span>data.layoutDynamic,&nbsp;{showHeader:&nbsp;</span><span class="constant language boolean false js"><span>false</span></span><span>}</span><span class="meta brace round js"><span>)</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;...</span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="support function marko-tag"><span>layout-use</span></span><span>&gt;</span></span></div></pre><p><a href="https://github.com/marko-js/marko/issues/209">Issue #209 - Marko v3: Re-introduce support for the layout taglib</a></p>
<h4 id="invoke-tag"><a name="invoke-tag" class="anchor" href="#invoke-tag"><span class="header-link"></span></a>Invoke tag</h4><p><strong><em>Old syntax:</em></strong></p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>invoke</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>function</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>test(&#39;World&#39;)</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>/&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>invoke</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>function</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>console.log(&#39;Hello&nbsp;World&#39;)</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>/&gt;</span></span></div></pre><p><strong><em>New syntax:</em></strong></p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>invoke</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>test</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>World</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span>/&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>invoke</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>console.log</span></span><span class="meta brace round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>Hello&nbsp;World</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta brace round js"><span>)</span></span><span>/&gt;</span></span></div></pre><p><a href="https://github.com/marko-js/marko/issues/179">Issue #179 - Marko v3: invoke tag</a></p>
<h3 id="empty-closing-tag"><a name="empty-closing-tag" class="anchor" href="#empty-closing-tag"><span class="header-link"></span></a>Empty closing tag</h3><p>The tag name in the closing tag is now optional:</p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>my-custom-tag</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;Hello&nbsp;world!</span></span></div><div class="line"><span class="text marko"><span>&lt;/&gt;</span></span></div></pre><p><a href="https://github.com/philidem/htmljs-parser/issues/30"><code>htmljs-parser</code> - Issue #30 - Allow an empty closing tag </a></p>
<h3 id="shorthand-id-and-class-names"><a name="shorthand-id-and-class-names" class="anchor" href="#shorthand-id-and-class-names"><span class="header-link"></span></a>Shorthand ID and class names</h3><p>Assigning IDs and class names is very common so Marko v3 introduces a shorthand syntax that matches the CSS selector syntax as shown below:</p>
<ul>
<li><code>#foo</code> ➔ <code>&lt;div id=&quot;foo&quot;&gt;</code></li>
<li><code>#foo.bar</code> ➔ <code>&lt;div id=&quot;foo&quot; class=&quot;bar&quot;&gt;</code></li>
<li><code>.bar</code> ➔ <code>&lt;div class=&quot;bar&quot;&gt;</code></li>
</ul>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span class="support function marko-tag"><span>#section</span></span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name tag"><span>ul.colors</span></span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name tag"><span>li.color</span></span><span>&nbsp;</span><span class="punctuation separator"><span>-</span></span><span>&nbsp;red</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name tag"><span>li.color</span></span><span>&nbsp;</span><span class="punctuation separator"><span>-</span></span><span>&nbsp;green</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name tag"><span>li.color</span></span><span>&nbsp;</span><span class="punctuation separator"><span>-</span></span><span>&nbsp;blue</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name tag"><span>button#submitButton.enabled</span></span><span>&nbsp;</span><span class="punctuation separator"><span>-</span></span><span>&nbsp;Submit&nbsp;Form</span></span></div></pre><p>Output:</p>
<pre class="editor editor-colors"><div class="line"><span class="text html basic"><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag block any html"><span>div</span></span><span>&nbsp;</span><span class="meta attribute-with-value id html"><span class="entity other attribute-name id html"><span>id</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span class="meta toc-list id html"><span>section</span></span><span class="punctuation definition string end html"><span>&quot;</span></span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag block any html"><span>ul</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>class</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>colors</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>li</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>class</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>color</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span><span>red</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>li</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>li</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>class</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>color</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span><span>green</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>li</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>li</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>class</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>color</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span><span>blue</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>li</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag block any html"><span>ul</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>button</span></span><span>&nbsp;</span><span class="meta attribute-with-value id html"><span class="entity other attribute-name id html"><span>id</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span class="meta toc-list id html"><span>submitButton</span></span><span class="punctuation definition string end html"><span>&quot;</span></span></span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>class</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>enabled</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Submit&nbsp;Form</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>button</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag block any html"><span>div</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div></pre><p>The shorthand syntax also works with the more verbose HTML syntax:</p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>#section</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="support function marko-tag"><span>ul.colors</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="support function marko-tag"><span>li.color</span></span><span>&gt;</span><span>red</span><span>&lt;/</span><span class="support function marko-tag"><span>li</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="support function marko-tag"><span>li.color</span></span><span>&gt;</span><span>green</span><span>&lt;/</span><span class="support function marko-tag"><span>li</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="support function marko-tag"><span>li.color</span></span><span>&gt;</span><span>blue</span><span>&lt;/</span><span class="support function marko-tag"><span>li</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;/</span><span class="support function marko-tag"><span>ul.colors</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="support function marko-tag"><span>button#submitButton.enabled</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Submit&nbsp;Form</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;/</span><span class="support function marko-tag"><span>button</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;/&gt;</span></span></div></pre><p><a href="https://github.com/marko-js/marko/issues/220">Issue #220 - Marko v3: Support expansion of CSS selector shorthand for tag names</a>
<a href="https://github.com/philidem/htmljs-parser/issues/24">htmljs-parser - Issue #24 - Expand CSS selector shorthand</a></p>
<h3 id="miscellaneous-improvements"><a name="miscellaneous-improvements" class="anchor" href="#miscellaneous-improvements"><span class="header-link"></span></a>Miscellaneous improvements</h3><h4 id="validating-parser"><a name="validating-parser" class="anchor" href="#validating-parser"><span class="header-link"></span></a>Validating parser</h4><p>The new parser used by Marko v3 will no longer allow mismatched opening and closing tags. Instead of letting problems in the original template pass through, the new parser will report the problem as errors. For example, with the following template:</p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>div</span></span><span>&gt;</span><span>Hello&nbsp;World</span><span class="keyword operator js"><span>&lt;</span></span><span>/foo</span><span>&gt;</span></span></div></pre><p>You will get a friendly error message:</p>
<pre class="editor editor-colors"><div class="line"><span class="text plain null-grammar"><span>The&nbsp;closing&nbsp;&quot;foo&quot;&nbsp;tag&nbsp;does&nbsp;not&nbsp;match&nbsp;the&nbsp;corresponding&nbsp;opening&nbsp;&quot;div&quot;&nbsp;tag</span></span></div></pre><h4 id="all-javascript-expressions-are-validated-at-compile-time"><a name="all-javascript-expressions-are-validated-at-compile-time" class="anchor" href="#all-javascript-expressions-are-validated-at-compile-time"><span class="header-link"></span></a>All JavaScript expressions are validated at compile time</h4><p>Previously, Marko v2 would not throw an error at compile time if a JavaScript expression was invalid. Now, with Marko v3, all JavaScript expressions are parsed and validated at compile time using <a href="http://esprima.org/">esprima</a>. These extra compile-time checks make development a lot easier and it prevents errors from showing up at runtime.</p>
<h4 id="style-attribute"><a name="style-attribute" class="anchor" href="#style-attribute"><span class="header-link"></span></a>Style attribute</h4><p>The value of the style attribute can now resolve to an object expression (in addition to a string value) as shown below:</p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>div</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>style</span></span><span class="punctuation separator key-value html"><span>=</span></span><span>{color:&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>red</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>font-weight</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>:&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>bold</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>}</span><span>&gt;</span></span></div></pre><p>Output:</p>
<pre class="editor editor-colors"><div class="line"><span class="text html basic"><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag block any html"><span>div</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>style</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>color:red;font-weight:bold</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div></pre><p><a href="https://github.com/marko-js/marko/issues/229">Issue #229 - Marko v3: Special case style attribute to allow object expression</a></p>
<h4 id="class-attribute"><a name="class-attribute" class="anchor" href="#class-attribute"><span class="header-link"></span></a>Class attribute</h4><p>The value of the class attribute can now be an object expression or an array expression as shown below:</p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span class="comment block html"><span class="punctuation definition comment html"><span>&lt;!--</span></span><span>&nbsp;array:&nbsp;</span><span class="punctuation definition comment html"><span>--&gt;</span></span></span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>div</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>class</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="meta brace square js"><span>[</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>a</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="constant language null js"><span>null</span></span><span>,&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>c</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta brace square js"><span>]</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;</span></span></div><div class="line"><span class="text marko"><span class="comment block html"><span class="punctuation definition comment html"><span>&lt;!--</span></span><span>&nbsp;object:&nbsp;</span><span class="punctuation definition comment html"><span>--&gt;</span></span></span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>div</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>class</span></span><span class="punctuation separator key-value html"><span>=</span></span><span>{a:</span><span>&nbsp;</span><span class="entity other attribute-name html"><span>true</span></span><span>,</span><span>&nbsp;</span><span class="entity other attribute-name html"><span>b:</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>false</span></span><span>,</span><span>&nbsp;</span><span class="entity other attribute-name html"><span>c:</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>true</span></span><span>}</span><span>&gt;</span></span></div></pre><p>In both cases, the output will be the same:</p>
<pre class="editor editor-colors"><div class="line"><span class="text html basic"><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag block any html"><span>div</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>class</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>a&nbsp;c</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div></pre><p><a href="https://github.com/marko-js/marko/issues/230">Issue #230 - Marko v3: Special case class attribute to allow object or array expression</a></p>
<h4 id="dynamic-attributes"><a name="dynamic-attributes" class="anchor" href="#dynamic-attributes"><span class="header-link"></span></a>Dynamic attributes</h4><p><strong><em>Old syntax:</em></strong></p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>div</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>attrs</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>myAttrs</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>/&gt;</span></span></div></pre><p><strong><em>New syntax:</em></strong></p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>var</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>myAttrs</span></span><span class="punctuation separator key-value html"><span>=</span></span><span>{</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>class</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>:&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>foo</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>,&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>style</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>:&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>background-color:&nbsp;red</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>}</span><span>/&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>div</span></span><span>&nbsp;</span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span>myAttrs</span><span class="keyword operator js"><span>}</span></span></span><span>/&gt;</span></span></div></pre><p>Output:</p>
<pre class="editor editor-colors"><div class="line"><span class="text html basic"><span class="meta tag any html"><span class="punctuation definition tag html"><span>&lt;</span></span><span class="entity name tag html"><span>div</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>class</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>foo</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>style</span></span><span>=</span><span class="string quoted double html"><span class="punctuation definition string begin html"><span>&quot;</span></span><span>background-color:&nbsp;red</span><span class="punctuation definition string end html"><span>&quot;</span></span></span><span class="punctuation definition tag html"><span>&gt;</span><span class="meta scope between-tag-pair html"><span>&lt;</span></span><span>/</span></span><span class="entity name tag html"><span>div</span></span><span class="punctuation definition tag html"><span>&gt;</span></span></span></span></div></pre><p><a href="https://github.com/marko-js/marko/issues/198">Issue #198 - Marko v3: Replace <code>&lt;div attrs(myAttrs)&gt;</code> with <code>&lt;div ${myAttrs}&gt;</code></a></p>
<h4 id="dynamic-tag-names"><a name="dynamic-tag-names" class="anchor" href="#dynamic-tag-names"><span class="header-link"></span></a>Dynamic tag names</h4><p>Dynamic tag names are now supported by putting a placeholder in the tag name:</p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span>foo&nbsp;?&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>div</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>&nbsp;:&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>span</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="keyword operator js"><span>}</span></span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="entity name tag"><span>Hello</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>World</span></span><span class="keyword operator js"><span>!</span></span></span></div><div class="line"><span class="text marko"><span>&lt;/&gt;</span></span></div></pre><p>Output:</p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span class="comment block html"><span class="punctuation definition comment html"><span>&lt;!--</span></span><span>&nbsp;If&nbsp;foo&nbsp;is&nbsp;true:&nbsp;</span><span class="punctuation definition comment html"><span>--&gt;</span></span></span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>div</span></span><span>&gt;</span><span>Hello&nbsp;World!</span><span>&lt;/</span><span class="entity name tag"><span>div</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;</span></span></div><div class="line"><span class="text marko"><span class="comment block html"><span class="punctuation definition comment html"><span>&lt;!--</span></span><span>&nbsp;If&nbsp;foo&nbsp;is&nbsp;false:&nbsp;</span><span class="punctuation definition comment html"><span>--&gt;</span></span></span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>span</span></span><span>&gt;</span><span>Hello&nbsp;World!</span><span>&lt;/</span><span class="entity name tag"><span>span</span></span><span>&gt;</span></span></div></pre><p><a href="https://github.com/marko-js/marko/issues/226">Issue #226 - Marko v3: Allow placeholders in tag name</a></p>
<h4 id="input-data-for-custom-tags"><a name="input-data-for-custom-tags" class="anchor" href="#input-data-for-custom-tags"><span class="header-link"></span></a>Input data for custom tags:</h4><pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>greeting</span></span><span class="meta brace round js"><span>(</span></span><span>{name:&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>Frank</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>}</span><span class="meta brace round js"><span>)</span></span><span>/&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;</span></span></div><div class="line"><span class="text marko"><span class="comment block html"><span class="punctuation definition comment html"><span>&lt;!--</span></span><span>&nbsp;Equivalent&nbsp;to:&nbsp;</span><span class="punctuation definition comment html"><span>--&gt;</span></span></span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>greeting</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>name</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>Frank</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>&nbsp;</span><span>/&gt;</span></span></div></pre><p><a href="https://github.com/marko-js/marko/issues/173">Issue #173 - Marko v3: Input data object for custom tags</a></p>
<h4 id="tag-body-content-parsing"><a name="tag-body-content-parsing" class="anchor" href="#tag-body-content-parsing"><span class="header-link"></span></a>Tag body content parsing</h4><p>The <code>marko-body</code> attribute can be used to control how body content is parsed. The following values are supported:</p>
<ul>
<li><code>&quot;html&quot;</code> - Body content will be parsed HTML (the default)</li>
<li><code>&quot;static-text&quot;</code> - Body content will be parsed as static text (HTML tags will be ignored). Placeholders will be ignored.</li>
<li><code>&quot;parsed-text&quot;</code> - Body content will be parsed as text (HTML tags will be ignored). Placeholders will <em>not</em> be ignored.</li>
</ul>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>div</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>marko-body</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>static-text</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;is&nbsp;just&nbsp;one</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="entity name tag"><span>span</span></span><span>&nbsp;</span><span class="support function marko-attribute"><span>if</span></span><span class="meta brace round js"><span>(</span></span><span>foo</span><span class="meta brace round js"><span>)</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hello&nbsp;</span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span>THIS&nbsp;IS&nbsp;NOT&nbsp;VALID</span><span class="keyword operator js"><span>}</span></span></span><span>!</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;/</span><span class="entity name tag"><span>span</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;big&nbsp;text&nbsp;block</span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="entity name tag"><span>div</span></span><span>&gt;</span></span></div></pre><p><em>Output:</em></p>
<pre class="editor editor-colors"><div class="line"><span class="text html basic"><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag block any html"><span>div</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;is&nbsp;just&nbsp;one</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;</span></span><span class="entity name tag inline any html"><span>span</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>if</span></span><span>(</span><span class="entity other attribute-name html"><span>foo</span></span><span>)</span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hello&nbsp;${THIS&nbsp;IS&nbsp;NOT&nbsp;VALID}!</span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta tag inline any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag inline any html"><span>span</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div><div class="line"><span class="text html basic"><span>&nbsp;&nbsp;&nbsp;&nbsp;big&nbsp;text&nbsp;block</span></span></div><div class="line"><span class="text html basic"><span class="meta tag block any html"><span class="punctuation definition tag begin html"><span>&lt;/</span></span><span class="entity name tag block any html"><span>div</span></span><span class="punctuation definition tag end html"><span>&gt;</span></span></span></span></div></pre><h4 id="preserve-whitespace"><a name="preserve-whitespace" class="anchor" href="#preserve-whitespace"><span class="header-link"></span></a>Preserve whitespace</h4><p><strong><em>Old syntax:</em></strong></p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>div</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>c-space</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>preserve</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;All&nbsp;of&nbsp;this</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;whitespace&nbsp;&nbsp;&nbsp;will</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;be&nbsp;preserved.</span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="entity name tag"><span>div</span></span><span>&gt;</span></span></div></pre><p><strong><em>New syntax:</em></strong></p>
<p>Whitespace can be preserved using the <code>marko-preserve-whitespace</code> attribute:</p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>div</span></span><span>&nbsp;</span><span class="support function marko-attribute"><span>marko-preserve-whitespace</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;All&nbsp;of&nbsp;this</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;whitespace&nbsp;&nbsp;&nbsp;will</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;be&nbsp;preserved.</span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="entity name tag"><span>div</span></span><span>&gt;</span></span></div></pre><h4 id="compiler-options"><a name="compiler-options" class="anchor" href="#compiler-options"><span class="header-link"></span></a>Compiler options</h4><p>The <code>&lt;marko-compiler-options&gt;</code> tag can be used to enable whitespace preservation and/or HTML comments preservation for the entire template.</p>
<p><strong><em>Old syntax:</em></strong></p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>compiler-options</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>whitespace</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>preserve</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;</span><span>/&gt;</span></span></div></pre><p><strong><em>New syntax:</em></strong></p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>marko-compiler-options</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>preserve-whitespace</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>preserve-comments</span></span><span>&nbsp;</span><span>/&gt;</span></span></div></pre><p><a href="https://github.com/marko-js/marko/issues/205">Issue #205 - Marko v3: Provide full control over whitespace</a>
<a href="https://github.com/marko-js/marko/issues/206">Issue #206 - Marko v3: HTML comments should be handled correctly</a></p>
<h4 id="open-tag-only"><a name="open-tag-only" class="anchor" href="#open-tag-only"><span class="header-link"></span></a>Open tag only</h4><p>Marko v3 allows tags to be declared as &quot;open tag only&quot;. If a custom tag is declared as being &quot;open tag only&quot; then the parser will report an error if an ending tag is found or if the tag has nested body content.</p>
<p>Tag definition:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>&lt;my-custom-tag&gt;</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>open-tag-only</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="constant language boolean true js"><span>true</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword operator spread js"><span>...</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div></pre><p>Usage:</p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span class="comment block html"><span class="punctuation definition comment html"><span>&lt;!--</span></span><span>&nbsp;Allowed:&nbsp;</span><span class="punctuation definition comment html"><span>--&gt;</span></span></span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>my-custom-tag</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>my-custom-tag</span></span><span>/&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;</span></span></div><div class="line"><span class="text marko"><span class="comment block html"><span class="punctuation definition comment html"><span>&lt;!--</span></span><span>&nbsp;Not&nbsp;allowed:&nbsp;</span><span class="punctuation definition comment html"><span>--&gt;</span></span></span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>my-custom-tag</span></span><span>&gt;</span><span>Foo</span><span>&lt;/</span><span class="support function marko-tag"><span>my-custom-tag</span></span><span>&gt;</span></span></div></pre><p><a href="https://github.com/marko-js/marko/issues/222">Issue #222 - Marko v3: Allow open only tags to be defined in tag definition</a></p>
<h4 id="improved-readability-of-compiled-code"><a name="improved-readability-of-compiled-code" class="anchor" href="#improved-readability-of-compiled-code"><span class="header-link"></span></a>Improved readability of compiled code</h4><p>A lot of attention was put on producing very clean output JavaScript code. If you ever find that you need to debug through the code of a compiled template you will find that the code is very well formatted and readable.</p>
<p>For example, given the following input template:</p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>my-custom-tag</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>name</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>World</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>/&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>ul</span></span><span>&nbsp;</span><span class="support function marko-attribute"><span>if</span></span><span class="meta brace round js"><span>(</span></span><span>notEmpty</span><span class="meta brace round js"><span>(</span></span><span>data.colors</span><span class="meta brace round js"><span>)</span><span>)</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="entity name tag"><span>li</span></span><span>&nbsp;</span><span class="support function marko-attribute"><span>for</span></span><span class="meta brace round js"><span>(</span></span><span>color&nbsp;</span><span class="keyword operator js"><span>in</span></span><span>&nbsp;data.colors</span><span class="meta brace round js"><span>)</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span>color</span><span class="keyword operator js"><span>}</span></span></span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;/</span><span class="entity name tag"><span>li</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="entity name tag"><span>ul</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>div</span></span><span>&nbsp;</span><span class="support function marko-attribute"><span>else</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;No&nbsp;colors!</span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="entity name tag"><span>div</span></span><span>&gt;</span></span></div></pre><p>The compiled output will be similar to the following:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>create</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>__helpers</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="storage type var js"><span>var</span></span><span>&nbsp;str&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>__helpers</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>s</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;empty&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>__helpers</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>e</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;notEmpty&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>__helpers</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>ne</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;escapeXml&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>__helpers</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="support constant js"><span>x</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;__loadTag&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>__helpers</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>t</span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;my_custom_tag&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>__loadTag</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta function-call js"><span class="support function js"><span>require</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>./components/my-custom-tag/renderer</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="meta delimiter object comma js"><span>,</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;forEach&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="variable other object js"><span>__helpers</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>f</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="keyword control js"><span>return</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span>&nbsp;</span><span class="entity name function js"><span>render</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>data</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="variable parameter function js"><span>out</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>my_custom_tag</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="meta brace curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>World</span><span class="punctuation definition string end js"><span>&quot;</span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;out</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="keyword control js"><span>if</span></span><span>&nbsp;</span><span class="meta brace round js"><span>(</span></span><span class="meta function-call js"><span class="entity name function js"><span>notEmpty</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>data</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>colors</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="meta brace round js"><span>)</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>out</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>w</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>&lt;ul&gt;</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>forEach</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="variable other object js"><span>data</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>colors</span></span><span class="meta delimiter object comma js"><span>,</span></span><span>&nbsp;</span><span class="meta function js"><span class="storage type function js"><span>function</span></span><span class="meta parameters js"><span class="punctuation definition parameters begin bracket round js"><span>(</span></span><span class="variable parameter function js"><span>color</span></span><span class="punctuation definition parameters end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="punctuation definition function body begin bracket curly js"><span>{</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>out</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>w</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>&lt;li&gt;</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="meta arguments js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta function-call js"><span class="entity name function js"><span>escapeXml</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>color</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span>&nbsp;</span><span class="keyword operator js"><span>+</span></span></span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="meta arguments js"><span class="meta method-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>&lt;/li&gt;</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></span></span></div><div class="line"><span class="source js"><span class="meta function-call js"><span class="meta arguments js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>out</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>w</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>&lt;/ul&gt;</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span><span>&nbsp;</span><span class="keyword control js"><span>else</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="variable other object js"><span>out</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>w</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>&lt;div&gt;No&nbsp;colors!&lt;/div&gt;</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="meta brace curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;</span><span class="punctuation definition function body end bracket curly js"><span>}</span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span class="punctuation definition function body end bracket curly js"><span>}</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="meta brace round js"><span>(</span></span><span class="support variable js"><span>module</span></span><span class="meta delimiter property period js"><span>.</span></span><span class="variable other property js"><span>exports</span></span><span>&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="support function js"><span>require</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>marko</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>c</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="support variable js"><span>__filename</span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="meta brace round js"><span>)</span></span><span class="meta method-call js"><span class="meta delimiter method period js"><span>.</span></span><span class="entity name function js"><span>c</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span>create</span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div></pre><h4 id="improved-performance"><a name="improved-performance" class="anchor" href="#improved-performance"><span class="header-link"></span></a>Improved performance</h4><p>The Marko runtime has been slightly tweaked to improve performance and it is now faster and smaller! You can find the updated benchmarks here: <a href="https://github.com/marko-js/templating-benchmarks">https://github.com/marko-js/templating-benchmarks</a></p>
<p>Here&#39;s a partial snippet of the results that shows how Marko stacks up to the competition:</p>
<table class="markdown-table"><thead><tr>
<th>Template Engine</th>
<th>Results</th>
</tr>
</thead><tbody><tr>
<td><strong>marko</strong></td>
<td><strong>187,729 op/s (fastest)</strong></td>
</tr>
<tr>
<td>dot</td>
<td>183,161 op/s (2.43% slower)</td>
</tr>
<tr>
<td>handlebars</td>
<td>104,634 op/s (44.26% slower)</td>
</tr>
<tr>
<td>dust</td>
<td>83,773 op/s (55.38% slower)</td>
</tr>
<tr>
<td>swig</td>
<td>54,866 op/s (70.77% slower)</td>
</tr>
<tr>
<td>jade</td>
<td>32,929 op/s (82.46% slower)</td>
</tr>
<tr>
<td>nunjucks</td>
<td>32,306 op/s (82.79% slower)</td>
</tr>
<tr>
<td>react</td>
<td>3,651 op/s (98.06% slower)</td>
</tr>
</tbody></table><h2 id="removed-features"><a name="removed-features" class="anchor" href="#removed-features"><span class="header-link"></span></a>Removed features</h2><h3 id="removed-$<variable-name>"><a name="removed-$<variable-name>" class="anchor" href="#removed-$<variable-name>"><span class="header-link"></span></a>Removed: $<variable-name></h3><p>Use <code>${&lt;variable-name&gt;}</code> instead. We found that allowing <code>$</code> without the curly braces was problematic when parsing inline script that used the <code>$</code> variable from libraries like jQuery.</p>
<h3 id="removed-$!<variable-name>"><a name="removed-$!<variable-name>" class="anchor" href="#removed-$!<variable-name>"><span class="header-link"></span></a>Removed: $!<variable-name></h3><p>Use <code>$!{&lt;variable-name&gt;}</code> instead.</p>
<h3 id="removed-&quotsimple-conditional&quot-syntax"><a name="removed-&quotsimple-conditional&quot-syntax" class="anchor" href="#removed-&quotsimple-conditional&quot-syntax"><span class="header-link"></span></a>Removed: &quot;simple conditional&quot; syntax</h3><p>Marko v3 <em>removes</em> support for the following &quot;simple conditional&quot; syntax:</p>
<p><strong><em>Old syntax:</em></strong></p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>div</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>class</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>{?data.isActive;&nbsp;active;&nbsp;inactive}</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&gt;</span></span></div></pre><p><strong><em>New syntax:</em></strong></p>
<p>In Marko v3, JavaScript is favored over a new syntax so, instead, use a JavaScript conditional expression:</p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>div</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>class</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="meta brace round js"><span>(</span></span><span>data.isActive&nbsp;?&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>active</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>&nbsp;:&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>inactive</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta brace round js"><span>)</span></span><span>&gt;</span></span></div></pre><p>Alternatively, when only a value is needed when <code>true</code>:</p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>div</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>class</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="meta brace round js"><span>(</span></span><span>data.isActive&nbsp;</span><span class="keyword operator js"><span>&amp;</span><span>&amp;</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>active</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="meta brace round js"><span>)</span></span><span>&gt;</span></span></div></pre><h3 id="removed-nested-attributes"><a name="removed-nested-attributes" class="anchor" href="#removed-nested-attributes"><span class="header-link"></span></a>Removed: nested attributes</h3><p>Nested attributes are no longer supported (likely never used):</p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>test-popover</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="entity name tag"><span>attr</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>name</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>title</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&gt;</span><span>Popover&nbsp;Title</span><span>&lt;/</span><span class="entity name tag"><span>attr</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="entity name tag"><span>attr</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>name</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>content</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&gt;</span><span>Popover&nbsp;Content</span><span>&lt;/</span><span class="entity name tag"><span>attr</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;Link&nbsp;Text</span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="support function marko-tag"><span>test-popover</span></span><span>&gt;</span></span></div></pre><h3 id="removed-<code>&ltrequire&gt<code>-tag"><a name="removed-<code>&ltrequire&gt<code>-tag" class="anchor" href="#removed-<code>&ltrequire&gt<code>-tag"><span class="header-link"></span></a>Removed: <code>&lt;require&gt;</code> tag</h3><p>Use <code>&lt;script marko-init&gt;</code> instead.</p>
<p><strong><em>Old syntax:</em></strong></p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>require</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>module</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>./my-include-target.marko</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>var</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>myIncludeTarget</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&nbsp;</span><span>/&gt;</span></span></div></pre><p><strong><em>New syntax:</em></strong></p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag script"><span>script</span></span><span>&nbsp;</span><span class="support function marko-attribute"><span>marko-init</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span class="storage type var js"><span>var</span></span><span>&nbsp;myIncludeTarget&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="support function js"><span>require</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>./my-include-target.marko</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="entity name tag script"><span>script</span></span><span>&gt;</span></span></div></pre><h3 id="removed-<code>c-data<code><code>c-input<code>-attribute"><a name="removed-<code>c-data<code><code>c-input<code>-attribute" class="anchor" href="#removed-<code>c-data<code><code>c-input<code>-attribute"><span class="header-link"></span></a>Removed: <code>c-data</code>/<code>c-input</code> attribute</h3><p>Custom tag data should be passed using an argument:</p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>my-custom-tag</span></span><span class="meta brace round js"><span>(</span></span><span>{name:&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>Frank</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span>}</span><span class="meta brace round js"><span>)</span></span><span>/&gt;</span></span></div></pre><h3 id="removed-<code>c-space<code><code>c-whitespace<code>-attribute"><a name="removed-<code>c-space<code><code>c-whitespace<code>-attribute" class="anchor" href="#removed-<code>c-space<code><code>c-whitespace<code>-attribute"><span class="header-link"></span></a>Removed: <code>c-space</code>/<code>c-whitespace</code> attribute</h3><p>Use <code>marko-preserve-whitespace</code> attribute instead:</p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>div</span></span><span>&nbsp;</span><span class="support function marko-attribute"><span>marko-preserve-whitespace</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;whitespace</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;will&nbsp;be&nbsp;preserved.</span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="entity name tag"><span>div</span></span><span>&gt;</span></span></div></pre><h3 id="removed-<code>c-escape-xml<code>-attribute"><a name="removed-<code>c-escape-xml<code>-attribute" class="anchor" href="#removed-<code>c-escape-xml<code>-attribute"><span class="header-link"></span></a>Removed: <code>c-escape-xml</code> attribute</h3><p>No longer applicable.</p>
<h3 id="removed-<code>c-parse-body-text<code>-attribute"><a name="removed-<code>c-parse-body-text<code>-attribute" class="anchor" href="#removed-<code>c-parse-body-text<code>-attribute"><span class="header-link"></span></a>Removed: <code>c-parse-body-text</code> attribute</h3><p>Use the <code>marko-body=&quot;&lt;body-type&gt;&quot;</code> attribute instead.</p>
<h3 id="removed-<code>attrs<code>-attribute"><a name="removed-<code>attrs<code>-attribute" class="anchor" href="#removed-<code>attrs<code>-attribute"><span class="header-link"></span></a>Removed: <code>attrs</code> attribute</h3><p>Use placeholder within open tag instead:</p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>div</span></span><span>&nbsp;</span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span>myAttrs</span><span class="keyword operator js"><span>}</span></span></span><span>&gt;</span></span></div></pre><h3 id="removed-<code>with<code>-tag-and-attribute"><a name="removed-<code>with<code>-tag-and-attribute" class="anchor" href="#removed-<code>with<code>-tag-and-attribute"><span class="header-link"></span></a>Removed: <code>with</code> tag and attribute</h3><p>Instead, use <code>&lt;var&gt;</code> tag with nested content to create scoped variables.</p>
<h3 id="removed-javascript-operator-aliases"><a name="removed-javascript-operator-aliases" class="anchor" href="#removed-javascript-operator-aliases"><span class="header-link"></span></a>Removed: JavaScript operator aliases</h3><p>The following JavaScript operator aliases are no longer supported:</p>
<table class="markdown-table"><thead><tr>
<th>JavaScript Operator</th>
<th>Marko Equivalent</th>
</tr>
</thead><tbody><tr>
<td><code>&amp;&amp;</code></td>
<td><code>and</code></td>
</tr>
<tr>
<td><code>&#124;&#124;</code></td>
<td><code>or</code></td>
</tr>
<tr>
<td><code>===</code></td>
<td><code>eq</code></td>
</tr>
<tr>
<td><code>!==</code></td>
<td><code>ne</code></td>
</tr>
<tr>
<td><code>&lt;</code></td>
<td><code>lt</code></td>
</tr>
<tr>
<td><code>&gt;</code></td>
<td><code>gt</code></td>
</tr>
<tr>
<td><code>&lt;=</code></td>
<td><code>le</code></td>
</tr>
<tr>
<td><code>&gt;=</code></td>
<td><code>ge</code></td>
</tr>
</tbody></table><p>Instead, you must use valid JavaScript operators. For example:</p>
<p><strong><em>Old syntax:</em></strong></p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>div</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>if</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>searchResults.length&nbsp;gt&nbsp;100</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;Show&nbsp;More</span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="entity name tag"><span>div</span></span><span>&gt;</span></span></div></pre><p><strong><em>New syntax:</em></strong></p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>div</span></span><span>&nbsp;</span><span class="support function marko-attribute"><span>if</span></span><span class="meta brace round js"><span>(</span></span><span>searchResults.length&nbsp;</span><span class="keyword operator js"><span>&gt;</span></span><span>&nbsp;</span><span class="constant numeric js"><span>100</span></span><span class="meta brace round js"><span>)</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;Show&nbsp;More</span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="entity name tag"><span>div</span></span><span>&gt;</span></span></div></pre><h3 id="a-dynamic-include-target-must-resolve-to-a-loaded-template-not-a-string-path"><a name="a-dynamic-include-target-must-resolve-to-a-loaded-template-not-a-string-path" class="anchor" href="#a-dynamic-include-target-must-resolve-to-a-loaded-template-not-a-string-path"><span class="header-link"></span></a>A dynamic include target must resolve to a loaded template (not a string path)</h3><p>If using dynamic templates, the expression must resolve to a fully loaded template instance (not a string path). In Marko v2, the following was allowed:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type var js"><span>var</span></span><span>&nbsp;templateData&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;includeTarget</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;</span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>./include.marko</span><span class="punctuation definition string end js"><span>&#39;</span></span></span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div></pre><pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>include</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>template</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span class="meta section marko-placeholder"><span class="keyword operator js"><span>${</span></span><span>data.includeTarget</span><span class="keyword operator js"><span>}</span></span></span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>/&gt;</span></span></div></pre><p>This is no longer allowed in Marko v3 and, instead, you must do the following:</p>
<pre class="editor editor-colors"><div class="line"><span class="source js"><span class="storage type var js"><span>var</span></span><span>&nbsp;includeTemplate&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta function-call js"><span class="support function js"><span>require</span></span><span class="meta arguments js"><span class="punctuation definition arguments begin bracket round js"><span>(</span></span><span class="string quoted single js"><span class="punctuation definition string begin js"><span>&#39;</span></span><span>./include.marko</span><span class="punctuation definition string end js"><span>&#39;</span></span></span><span class="punctuation definition arguments end bracket round js"><span>)</span></span></span></span><span class="punctuation terminator statement js"><span>;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="comment line double-slash js"><span class="punctuation definition comment js"><span>//</span></span><span>&nbsp;...</span><span>&nbsp;</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;</span></span></div><div class="line"><span class="source js"><span class="storage type var js"><span>var</span></span><span>&nbsp;templateData&nbsp;</span><span class="keyword operator assignment js"><span>=</span></span><span>&nbsp;</span><span class="meta brace curly js"><span>{</span></span></span></div><div class="line"><span class="source js"><span>&nbsp;&nbsp;&nbsp;&nbsp;includeTarget</span><span class="keyword operator js"><span>:</span></span><span>&nbsp;includeTemplate</span></span></div><div class="line"><span class="source js"><span class="meta brace curly js"><span>}</span></span></span></div></pre><pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>include</span></span><span class="meta brace round js"><span>(</span></span><span>data.includeTarget}</span><span class="meta brace round js"><span>)</span></span><span>/&gt;</span></span></div></pre><h2 id="other-notable-changes"><a name="other-notable-changes" class="anchor" href="#other-notable-changes"><span class="header-link"></span></a>Other notable changes</h2><h3 id="marko-taglibjson-→-markojson"><a name="marko-taglibjson-→-markojson" class="anchor" href="#marko-taglibjson-→-markojson"><span class="header-link"></span></a>marko-taglib.json → marko.json</h3><p>Taglib definition files must now be named <code>marko.json</code> (not <code>marko-taglib.json</code>).</p>
<p>In addition, the rules for resolving <code>marko.json</code> files have changed (see: <a href="https://github.com/marko-js/marko/issues/224">Marko v3: Improve taglib discovery #224</a>)</p>
<p><a href="https://github.com/marko-js/marko/issues/216">Issue #216 - Marko v3: Transition from marko-taglib.json to marko.json</a></p>
<h3 id="nested-tags-separator-changed"><a name="nested-tags-separator-changed" class="anchor" href="#nested-tags-separator-changed"><span class="header-link"></span></a>Nested tags separator changed</h3><p>The symbol for separating nested tags has changed from <code>.</code> (period) to <code>:</code> (colon). This was done to avoid conflicts with the new shorthand class syntax (e.g. <code>&lt;div.foo&gt;</code>).</p>
<p><strong><em>Old syntax:</em></strong></p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>tabs</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="support function marko-tag"><span>tabs.tab</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>title</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Tab&nbsp;1</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Content&nbsp;for&nbsp;tab&nbsp;1</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;/</span><span class="support function marko-tag"><span>tabs.tab</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="support function marko-tag"><span>tabs.tab</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>title</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Tab&nbsp;2</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Content&nbsp;for&nbsp;tab&nbsp;2</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;/</span><span class="support function marko-tag"><span>tabs.tab</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="entity name tag"><span>tabs</span></span><span>&gt;</span></span></div></pre><p><strong><em>New syntax:</em></strong></p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="entity name tag"><span>tabs</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="support function marko-tag"><span>tabs:tab</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>title</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Tab&nbsp;1</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Content&nbsp;for&nbsp;tab&nbsp;1</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;/</span><span class="support function marko-tag"><span>tabs:tab</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;</span><span class="support function marko-tag"><span>tabs:tab</span></span><span>&nbsp;</span><span class="entity other attribute-name html"><span>title</span></span><span class="punctuation separator key-value html"><span>=</span></span><span class="string quoted double js"><span class="punctuation definition string begin js"><span>&quot;</span></span><span>Tab&nbsp;2</span><span class="punctuation definition string end js"><span>&quot;</span></span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Content&nbsp;for&nbsp;tab&nbsp;2</span></span></div><div class="line"><span class="text marko"><span>&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&lt;/</span><span class="support function marko-tag"><span>tabs:tab</span></span><span>&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;/</span><span class="entity name tag"><span>tabs</span></span><span>&gt;</span></span></div></pre><p><a href="https://github.com/marko-js/marko/issues/219">Issue #219 - Marko v3: Use &quot;:&quot; instead of &quot;.&quot; for nested tags</a></p>
<h3 id="nodejs-v4-is-now-required-for-compiling"><a name="nodejs-v4-is-now-required-for-compiling" class="anchor" href="#nodejs-v4-is-now-required-for-compiling"><span class="header-link"></span></a>Node.js v4+ is now required for compiling</h3><p>Unlike Marko v2, Marko v3 requires Node.js v4+ to compile Marko templates. The new Marko compiler was written using ECMAScript 2015 (ES6) features that are only found in Node.js v4+. The Marko runtime, however, still works in all JavaScript runtimes.</p>
<h3 id="case-sensitive-html-parser"><a name="case-sensitive-html-parser" class="anchor" href="#case-sensitive-html-parser"><span class="header-link"></span></a>Case-sensitive HTML parser</h3><p>The Marko parser and compiler are now case sensitive. The following tags are not equal with Marko v3:</p>
<pre class="editor editor-colors"><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>my-custom-tag</span></span><span>/&gt;</span></span></div><div class="line"><span class="text marko"><span>&lt;</span><span class="support function marko-tag"><span>My-CUSTOM-Tag</span></span><span>/&gt;</span></span></div></pre><p><a href="https://github.com/marko-js/marko/issues/215">Issue #215 - Marko v3: Marko should be case sensitive with tag names and attributes</a></p>
<p><a name="compiler-api"></a></p>
<h3 id="new-compiler-api"><a name="new-compiler-api" class="anchor" href="#new-compiler-api"><span class="header-link"></span></a>New compiler API</h3><p>The Marko compiler went through a major refactor with Marko v3 as a result of introducing a new parser that recognizes types at compile time. The new compile-time API is much simpler and more powerful. For more information on the Marko compiler and extending Marko at compile-time, please check out:</p>
<ul>
<li><a href="https://github.com/marko-js/marko/blob/master/docs/compiler-advanced.md">Compiler Advanced</a></li>
<li><a href="https://github.com/marko-js/marko/blob/master/docs/compiler-api.md">The Compiler API</a> (work-in-progress)</li>
<li><a href="https://github.com/marko-js/marko/blob/master/docs/compile-time-tags.md">Compile-time Tags</a></li>
</ul>
<h2 id="next-steps"><a name="next-steps" class="anchor" href="#next-steps"><span class="header-link"></span></a>Next steps</h2><p>If you have ideas on how to improve Marko please let us know. We welcome new contributors so if you would like to help out please join us in the <a href="gitter.im/marko-js/marko">Gitter chat room for Marko</a>, <a href="https://github.com/marko-js/marko">file an issue on Github</a> or send us a pull request.</p>
</main></div><footer id="footer"><section id="footer-message" class="container">© 2016 eBay, Inc</section></footer><script src="/static/docs-page-c99ec2a4.js"></script>
<script src="/static/marko-widgets-06612b41.js"></script>
<script src="/static/marko-02845571.js"></script>
<script>$_mod.ready();</script><noscript id="markoWidgets" data-ids="header"></noscript><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-66854919-1', 'markojs.com');
ga('send', 'pageview');
</script><script>((window.gitter = {}).chat = {}).options = {
  room: 'marko-js/marko'
};
</script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script></body></html>