<!doctype html> <html lang="en"><head><meta http-equiv="Content-Type" content="text/html" charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Get Started | Marko</title><link rel="alternate" type="application/rss+xml" title="RSS" href="/rss.xml"><meta name="description"><link rel="apple-touch-icon" sizes="57x57" href="/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="manifest" href="/manifest.json"><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width"><link rel="stylesheet" type="text/css" href="/static/docs-page-c76dd320.css">
<link rel="stylesheet" type="text/css" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css"></head><body><header id="header" data-widget="/src/components/app-header"><div class="container"><div id="logo"><a href="/"><img src="/images/logo-header.png" alt="Marko"></a></div><nav role="navigation" id="nav" class="mobile-hidden"><ul class="main-navigation"><li><a href="/docs/" class="active">Docs</a></li><li><a href="/community/">Community</a></li><li><a href="/blog/">Blog</a></li><li><a href="/github/">Github</a></li><li class="nav-search"><i class="fa fa-search" data-w-onclick="handleToggleSearchClick|header"></i><form action="https://google.com/search" method="get" class="search-form"><input type="hidden" name="q" value="site:markojs.com"><input type="text" name="q" results="0" placeholder class="search-input"></form></li></ul></nav><div style="clear: both"></div></div></header><div class="container"><aside class="docs-nav"><section><h1>Marko</h1><ul><li><a href="/docs/">Overview</a></li><li><a href="/docs/marko/get-started/" class="active">Get Started</a></li><li><a href="/docs/marko/javascript-api/">JavaScript API</a></li><li><a href="/docs/marko/language-guide/">Language Guide</a></li><li><a href="/docs/marko/custom-taglibs/">Custom Taglibs</a></li><li><a href="/docs/marko/compiler/">Compiler</a></li><li><a href="/docs/marko/faq/">FAQ</a></li><li><a href="/docs/marko/additional-resources/">Additional Resources</a></li></ul><div class="footer"><a class="try-online" href="http://markojs.com/try-online/" target="_blank">Try Online! <img width="16" height="16" src="/static/new-window-81a33b35.svg"></a></div></section><section><h1>Marko Widgets</h1><ul><li><a href="/docs/marko-widgets/">Overview</a></li><li><a href="/docs/marko-widgets/get-started/">Get Started</a></li><li><a href="/docs/marko-widgets/component-lifecycle/">Component Lifecycle</a></li><li><a href="/docs/marko-widgets/javascript-api/">JavaScript API</a></li><li><a href="/docs/marko-widgets/faq/">FAQ</a></li><li><a href="/docs/marko-widgets/additional-resources/">Additional Resources</a></li></ul><div class="footer"><a class="try-online" href="http://markojs.com/marko-widgets/try-online/" target="_blank">Try Online! <img width="16" height="16" src="/static/new-window-81a33b35.svg"></a></div></section></aside><main><h1 class="page-title">Get Started <span class="subtitle">// Marko</span></h1><p class="toc"><strong>Table of Contents</strong><ul class="toc-level0"><li><a href="#installation">Installation</a></li><li><a href="#template-loading">Template Loading</a></li><li><a href="#template-rendering">Template Rendering</a><ul class="toc-level1"><li><a href="#callback-api">Callback API</a></li><li><a href="#streaming-api">Streaming API</a></li><li><a href="#synchronous-api">Synchronous API</a></li><li><a href="#asynchronous-rendering-api">Asynchronous Rendering API</a></li></ul></li><li><a href="#hot-reloading-templates">Hot Reloading Templates</a></li></ul></p>
<h2 id="installation"><a name="installation" class="anchor" href="#installation"><span class="header-link"></span></a>Installation</h2><p>To install the <code>marko</code> module into your project you should use the following command:</p>
<pre><code class="lang-bash">npm install marko --save
</code></pre>
<p>To install the optional <code>markoc</code> command line interface to compile templates you can use the following command:</p>
<pre><code class="lang-bash">npm install marko --global
</code></pre>
<h2 id="template-loading"><a name="template-loading" class="anchor" href="#template-loading"><span class="header-link"></span></a>Template Loading</h2><p>Marko provides a <a href="https://github.com/marko-js/marko/blob/master/node-require.js">custom Node.js require extension</a> that allows Marko templates to be <code>require</code>&#39;d just like a standard JavaScript module. For example:</p>
<pre><code class="lang-javascript"><span class="hljs-comment">// The following line installs the Node.js require extension</span>
<span class="hljs-comment">// for `.marko` files. Once installed, `*.marko` files can be</span>
<span class="hljs-comment">// required just like any other JavaScript modules.</span>
<span class="hljs-built_in">require</span>(<span class="hljs-string">'marko/node-require'</span>).install();

<span class="hljs-comment">// ...</span>

<span class="hljs-comment">// Load a Marko template by requiring a .marko file:</span>
<span class="hljs-keyword">var</span> template = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./template.marko'</span>);
</code></pre>
<p><em>NOTE: The Node.js require extension for Marko templates simply hooks into the Node.js module loading system to automatically compile <code>.marko</code> template files to CommonJS JavaScript modules when they are first required and the loaded <code>Template</code> instance is exported by the compiled template module. Internally, the implementation for <code>require(&#39;marko/node-require&#39;).install()</code> will use <code>require.extensions[extension] = function markoExtension(module, filename) { ... }</code> to register the Node.js require extension.</em></p>
<p><em>NOTE 2: The require extension only needs to be installed once, but it does not hurt if it is installed multiple times. For example, it is okay if the main app registers the require extension and an installed module also registers the require extension. The require extension will always resolve the proper <code>marko</code> module relative to the template being required so that there can still be multiple versions of marko in use for a single app.</em></p>
<p>If you prefer to not rely on the require extension for Marko templates, the following code will work as well:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> template = <span class="hljs-built_in">require</span>(<span class="hljs-string">'marko'</span>).load(<span class="hljs-built_in">require</span>.resolve(<span class="hljs-string">'./template.marko'</span>));
</code></pre>
<p>A loaded Marko template has multiple methods for rendering the template as described in the next section.</p>
<h2 id="template-rendering"><a name="template-rendering" class="anchor" href="#template-rendering"><span class="header-link"></span></a>Template Rendering</h2><h3 id="callback-api"><a name="callback-api" class="anchor" href="#callback-api"><span class="header-link"></span></a>Callback API</h3><pre><code class="lang-javascript"><span class="hljs-keyword">var</span> template = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./template.marko'</span>);

template.render({
        name: <span class="hljs-string">'Frank'</span>,
        count: <span class="hljs-number">30</span>
    },
    <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">err, output</span>) </span>{
        <span class="hljs-keyword">if</span> (err) {
            <span class="hljs-built_in">console</span>.error(<span class="hljs-string">'Rendering failed'</span>);
            <span class="hljs-keyword">return</span>;
        }

        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Output HTML: '</span> + output);
    });
</code></pre>
<h3 id="streaming-api"><a name="streaming-api" class="anchor" href="#streaming-api"><span class="header-link"></span></a>Streaming API</h3><pre><code class="lang-javascript"><span class="hljs-keyword">var</span> template = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./template.marko'</span>);
<span class="hljs-keyword">var</span> out = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>).createWriteStream(<span class="hljs-string">'index.html'</span>, {encoding: <span class="hljs-string">'utf8'</span>});

<span class="hljs-comment">// Render the template to 'index.html'</span>
template.stream({
        name: <span class="hljs-string">'Frank'</span>,
        count: <span class="hljs-number">30</span>
    })
    .pipe(out);
</code></pre>
<p>Alternatively, you can render directly to an existing stream to avoid creating an intermediate stream:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> template = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./template.marko'</span>);
<span class="hljs-keyword">var</span> out = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>).createWriteStream(<span class="hljs-string">'index.html'</span>, {encoding: <span class="hljs-string">'utf8'</span>});

<span class="hljs-comment">// Render the template to 'index.html'</span>
template.render({
        name: <span class="hljs-string">'Frank'</span>,
        count: <span class="hljs-number">30</span>
    }, out);
</code></pre>
<p><em>NOTE:</em> This will end the target output stream.</p>
<h3 id="synchronous-api"><a name="synchronous-api" class="anchor" href="#synchronous-api"><span class="header-link"></span></a>Synchronous API</h3><p>If you know that your template rendering requires no asynchronous rendering then you can use the synchronous API to render a template to a String:</p>
<pre><code class="lang-javascript"><span class="hljs-keyword">var</span> template = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./template.marko'</span>);

<span class="hljs-keyword">var</span> output = template.renderSync({
        name: <span class="hljs-string">'Frank'</span>,
        count: <span class="hljs-number">30</span>
    });

<span class="hljs-built_in">console</span>.log(<span class="hljs-string">'Output HTML: '</span> + output);
</code></pre>
<h3 id="asynchronous-rendering-api"><a name="asynchronous-rendering-api" class="anchor" href="#asynchronous-rendering-api"><span class="header-link"></span></a>Asynchronous Rendering API</h3><pre><code class="lang-javascript"><span class="hljs-keyword">var</span> fs = <span class="hljs-built_in">require</span>(<span class="hljs-string">'fs'</span>);
<span class="hljs-keyword">var</span> template = <span class="hljs-built_in">require</span>(<span class="hljs-string">'./template.marko'</span>);

<span class="hljs-keyword">var</span> out = marko.createWriter(fs.createWriteStream(<span class="hljs-string">'index.html'</span>, {encoding: <span class="hljs-string">'utf8'</span>}));

<span class="hljs-comment">// Render the first chunk asynchronously (after 1s delay):</span>
<span class="hljs-keyword">var</span> asyncOut = out.beginAsync();
setTimeout(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    asyncOut.write(<span class="hljs-string">'BEGIN '</span>);
    asyncOut.end();
}, <span class="hljs-number">1000</span>);

<span class="hljs-comment">// Render the template to the original writer:</span>
template.render({
        name: <span class="hljs-string">'World'</span>
    },
    out);

<span class="hljs-comment">// Write the last chunk synchronously:</span>
out.write(<span class="hljs-string">' END'</span>);

<span class="hljs-comment">// End the rendering out</span>
out.end();
</code></pre>
<p>Despite rendering the first chunk asynchronously, the above program will stream out the output in the correct order to <code>index.html</code>:</p>
<pre><code class="lang-xml">BEGIN Hello World! END
</code></pre>
<p>For more details, please see the documentation for the <a href="https://github.com/marko-js/async-writer">async-writer</a> module.</p>
<h2 id="hot-reloading-templates"><a name="hot-reloading-templates" class="anchor" href="#hot-reloading-templates"><span class="header-link"></span></a>Hot Reloading Templates</h2><p>During development it is very beneficial to not have to restart the server in order for changes to already loaded templates to be reflected. Marko supports hot reloading of templates on the server, but this feature must be explicitly enabled. Enabling hot reloading is documented as part of the following sample app: <a href="https://github.com/marko-js-samples/marko-hot-reload">marko-js-samples/marko-hot-reload</a></p>
</main></div><footer id="footer"><section id="footer-message" class="container">Â© 2015 eBay, Inc</section></footer><script type="text/javascript" src="/static/docs-page-e8a33c02.js"></script>
<script type="text/javascript" src="/static/marko-widgets-5df23b91.js"></script>
<script type="text/javascript" src="/static/marko-62ed63a9.js"></script>
<script type="text/javascript">$rmod.ready();</script><span id="markoWidgets" data-ids="header" style="display:none;"></span><script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-66854919-1', 'markojs.com');
  ga('send', 'pageview');

</script><script>
          ((window.gitter = {}).chat = {}).options = {
            room: 'marko-js/marko'
          };
        </script><script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script></body></html>