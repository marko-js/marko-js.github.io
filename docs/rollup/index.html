<script src="/assets/598.6b6c14f3.js" async></script><link rel="stylesheet" href="/assets/ff15f5e4.css"><!doctype html><html lang=en><head><meta charset=UTF-8><title>Marko + Rollup | Marko</title><link rel=icon type=image/png sizes=32x32 href=/assets/d78b83f1.png><meta name=viewport content="width=device-width, initial-scale=1"><meta name=description content="Marko is a friendly (and fast!) UI library that makes building web apps fun."><script>
      if (window.self !== window.top) {
        document.documentElement.classList.add("iframe");
      }
    </script><script src="/assets/666.3bcb9a8a.js" async></script><script src="/assets/323.2fde299f.js" async></script><script src="/assets/987.ae467f67.js" async></script><link rel="stylesheet" href="/assets/c1768f68.css"></head><body class=docs><a href=#main id=skip-link>Skip to main content</a><!--M#s0-1-0-11--><header data-marko-key="@header s0-1-0-11" class=site-header><div class=content><a href=/ ><img src=/assets/91bc26e5.svg alt="Marko Home" class=site-logo></a><div class=stuff><nav class=site-menu><a href=/docs/getting-started/ >Docs</a><a href=/try-online>Try Online</a><a href=https://github.com/marko-js/marko>GitHub</a><form class="SiteSearch search" role=search action=https://google.com/search><svg width=1em height=1em viewBox="0 0 64 64" fill=none stroke=#595959 stroke-width=5 focusable=false class=SiteSearch-icon><path d="M41 39a1 1 0 0 0-27-27 1 1 0 0 0 27 27l15 16-2 2-15-15" /></svg><input name=q type=search placeholder="search docs…" pattern=.*?\S+.*? title="Enter something to search for" required autocapitalize=off class=SiteSearch-input><button name=q value=site:markojs.com class=SiteSearch-submit>Go</button></form></nav><button data-marko='{"onclick":"toggleMenu s0-1-0-11 false"}' class=menu>&#9776;</button></div></div></header><!--M/--><!--M#s0-1-0-12--><div data-marko-key="@sidebar s0-1-0-12" class=doc-sidebar><button data-marko='{"onclick":"hide s0-1-0-12 false"}' class=close>&#10005;</button><h1>Marko <!--M^s0-1-0-12-9 s0-1-0-12 9--><select data-marko='{"onchange":"switchVersion s0-1-0-12-9 false"}'><option value=current selected>5.21.8</option><option value=http://marko-v4.github.io/docs/ >4.x</option><option value=http://v3.markojs.com/docs/ >3.x</option><option value=http://marko-v2.github.io/docs/ >2.x</option></select><!--M/--></h1><form class="SiteSearch search" role=search action=https://google.com/search><svg width=1em height=1em viewBox="0 0 64 64" fill=none stroke=#595959 stroke-width=5 focusable=false class=SiteSearch-icon><path d="M41 39a1 1 0 0 0-27-27 1 1 0 0 0 27 27l15 16-2 2-15-15" /></svg><input name=q type=search placeholder="search docs…" pattern=.*?\S+.*? title="Enter something to search for" required autocapitalize=off class=SiteSearch-input><button name=q value=site:markojs.com class=SiteSearch-submit>Go</button></form><ul class=toc-level0><li class=section><a href=/docs/guides-overview/ >GUIDES</a></li><li><a href=/docs/installing/ >Installing</a></li><li><a href=/docs/getting-started/ >Getting started</a></li><li><a href=/docs/conditionals-and-lists/ >Conditionals and lists</a></li><li><a href=/docs/custom-tags/ >Custom tags</a></li><li><a href=/docs/state/ >State</a></li><li><a href=/docs/styles/ >Styles</a></li><li><a href=/docs/events/ >Events</a></li><li><a href=/docs/body-content/ >Body content</a></li><li><a href=/docs/marko-5-upgrade/ >Marko 5 upgrade</a></li><li><a href=/docs/troubleshooting-streaming/ >Troubleshooting Streaming</a></li></ul><ul class=toc-level0><li class=section><a href=/docs/tutorials-overview/ >TUTORIALS</a></li><li><a href=/docs/color-picker/ >Color Picker</a></li></ul><ul class=toc-level0><li class=section><a href=/docs/reference-overview/ >REFERENCE</a></li><li><a href=/docs/rendering/ >Rendering</a></li><li><a href=/docs/syntax/ >Syntax</a></li><li><a href=/docs/core-tags/ >Core tags</a></li><li><a href=/docs/class-components/ >Class components</a></li><li><a href=/docs/marko-json/ >marko.json</a></li><li><a href=/docs/compiler/ >Compiler</a></li></ul><ul class=toc-level0><li class=section><a href=/docs/bundler-integrations-overview/ >BUNDLER INTEGRATIONS</a></li><li><a href=/docs/vite/ >Vite</a></li><li><a href=/docs/webpack/ >Webpack</a></li><li><a class=selected href=/docs/rollup/ >Rollup</a><ul class="toc toc-level0"><li><a href="#marko-rollup">Marko + Rollup</a></li><li><a href="#installation">Installation</a></li><li><a href="#basic-example-config">Basic example config</a></li><li><a href="#linked-config">Linked config</a><ul class="toc toc-level1"><li><a href="#rollup-tag">&lt;rollup&gt; tag</a></li></ul></li><li><a href="#top-level-components">Top level components</a><ul class="toc toc-level1"><li><a href="#options">Options</a><ul class="toc toc-level2"><li><a href="#optionsbabelconfig">options.babelConfig</a></li><li><a href="#optionsruntimeid">options.runtimeId</a></li><li><a href="#optionsserialize">options.serialize</a></li></ul></li></ul></li></ul></li><li><a href=/docs/lasso/ >Lasso</a></li></ul><ul class=toc-level0><li class=section><a href=/docs/server-integrations-overview/ >SERVER INTEGRATIONS</a></li><li><a href=/docs/cloudflare-workers/ >Cloudflare Workers</a></li><li><a href=/docs/express/ >Express</a></li><li><a href=/docs/fastify/ >Fastify</a></li><li><a href=/docs/koa/ >Koa</a></li><li><a href=/docs/http/ >HTTP</a></li></ul><ul class=toc-level0><li class=section><a href=/docs/tooling-overview/ >TOOLING</a></li><li><a href=/docs/editor-plugins/ >Editor plugins</a></li></ul><ul class=toc-level0><li class=section><a href=/docs/articles-overview/ >ARTICLES</a></li><li><a href=/docs/marko-vs-react/ >Marko vs React</a></li><li><a href=/docs/why-is-marko-fast/ >Why is Marko Fast</a></li><li><a href=/docs/10-awesome-marko-features/ >10 Awesome Marko Features</a></li></ul></div><!--M/--><main id=main tabindex=-1 class=content><div class=doc-layout><div class=doc-container><div class=doc-content><h1 id=marko-rollup><a name=marko-rollup class=anchor href=#marko-rollup><span class=header-link></span></a>Marko + Rollup</h1><h1 id=installation><a name=installation class=anchor href=#installation><span class=header-link></span></a>Installation</h1><script>if(localStorage.getItem('markojs-website:syntax') === 'concise'){document.body.classList.add('concise')}</script><pre class=highlighted style=color:#D0D0E0;background-color:#202034>npm install @marko/rollup rollup @rollup/plugin-node-resolve @rollup/plugin-commonjs -D
</pre><h1 id=basic-example-config><a name=basic-example-config class=anchor href=#basic-example-config><span class=header-link></span></a>Basic example config</h1><p><strong>Note: The Marko runtime is authored in commonjs, this means the <code>@rollup/plugin-commonjs</code> is required!</strong></p><pre class=highlighted style=color:#D0D0E0;background-color:#202034><span style=color:#FF4185>import</span> <span style=color:#FFFFFF>nodeResolve</span> <span style=color:#FF4185>from</span> <span style=color:#FFF066>"@rollup/plugin-node-resolve"</span>;
<span style=color:#FF4185>import</span> <span style=color:#FFFFFF>commonjs</span> <span style=color:#FF4185>from</span> <span style=color:#FFF066>"@rollup/plugin-commonjs"</span>;
<span style=color:#FF4185>import</span> <span style=color:#FFFFFF>marko</span> <span style=color:#FF4185>from</span> <span style=color:#FFF066>"@marko/rollup"</span>;

<span style=color:#FF4185>export</span> <span style=color:#FF4185>default</span> {
  <span style=color:#FF4185>...</span>,
  plugins: [
    <span style=color:#FFFFFF>marko</span>.<span style=color:#A6E22E>browser</span>(),
    <span style=color:#A6E22E>nodeResolve</span>({
      browser: <span style=color:#AE81FF>true</span>,
      extensions: [<span style=color:#FFF066>".js"</span>, <span style=color:#FFF066>".marko"</span>]
    }),
    <span style=color:#8F8F9E>// NOTE: The Marko runtime uses commonjs so this plugin is also required.</span>
    <span style=color:#A6E22E>commonjs</span>({
      extensions: [<span style=color:#FFF066>".js"</span>, <span style=color:#FFF066>".marko"</span>]
    }),
    <span style=color:#8F8F9E>// If using `style` blocks with Marko you must use an appropriate plugin.</span>
    <span style=color:#A6E22E>postcss</span>({
      external: <span style=color:#AE81FF>true</span>
    })
  ]
};
</pre><p>Likewise, if bundling the components for the server use <code>marko.server()</code> as the plugin.</p><h1 id=linked-config><a name=linked-config class=anchor href=#linked-config><span class=header-link></span></a>Linked config</h1><p>If you use <em>both</em> the <code>server</code> and <code>browser</code> plugins (in a <a href=https://rollupjs.org/guide/en/#configuration-files:~:text=export%20an%20array>multi rollup config setup</a>) <code>@marko/rollup</code> will go into a <em>linked</em> mode. In the linked mode you will have access to the <a href=#rollup-tag><code>&lt;rollup&gt;</code> tag</a> on the server, and the browser config will automatically have the <a href=https://rollupjs.org/guide/en/#input><code>input</code></a> option set.</p><pre class=highlighted style=color:#D0D0E0;background-color:#202034><span style=color:#FF4185>export</span> <span style=color:#FF4185>default</span> [{
  <span style=color:#8F8F9E>// Config object for bundling server assets.</span>
  input: <span style=color:#FFF066>"src/your-server-entry.js"</span>,
  plugins: [
    <span style=color:#FFFFFF>marko</span>.<span style=color:#A6E22E>server</span>()
    <span style=color:#FF4185>...</span>
  ]
}, {
  <span style=color:#8F8F9E>// Config object for bundling browser assets.</span>
  plugins: [
    <span style=color:#FFFFFF>marko</span>.<span style=color:#A6E22E>browser</span>()
    <span style=color:#FF4185>...</span>
  ]
}];
</pre><h2 id=rollup-tag><a name=rollup-tag class=anchor href=#rollup-tag><span class=header-link></span></a><code>&lt;rollup&gt;</code> tag</h2><p>In a <a href=#linked-config>linked setup</a> you have access to the <code>&lt;rollup&gt;</code> tag which will provide two <a href=/docs/syntax/#parameters>tag parameters</a> that allow you to write out the asset links for your server rendered app.</p><p>The first parameter <code>entry</code> is the generated <code>input</code> name that the server plugin gave to the browser compiler. You can use it to find the corresponding entry chunk from rollups build.</p><p>The second parameter <code>output</code> is an array of <code>AssetInfo | ChunkInfo</code> objects with most of the same properties returned from rollup&#39;s <a href=https://rollupjs.org/guide/en/#generatebundle><code>generateBundle</code> hook</a>. Some properties have been stripped, notably <code>code</code> and <code>map</code> since they would be too large to inline directly. A <code>size</code> property is also available for all chunks to allow you to be able to filter out empty chunks, or inline chunks of certain size.</p><!--M#s0-1-0-14-4-48-1--><div class=marko-code-block><button data-marko='{"onclick":"changeSyntax s0-1-0-14-4-48-1 false"}' title="Switch Syntax" class=switch-syntax>⇄</button><div class="code html"><pre class=highlighted style=color:#D0D0E0;background-color:#202034>&lt;<span style=color:#FF4185>head</span>>
  &lt;<span style=color:#FF4185>rollup</span>|<span style=color:#FFAC4D>entry</span>, <span style=color:#FFAC4D>output</span>|>
    <span style=color:#FF4185>$</span> <span style=color:#66D9EF>const</span> <span style=color:#FFFFFF>entryChunk</span> <span style=color:#FFFFFF>=</span> <span style=color:#FFFFFF>output</span>.<span style=color:#A6E22E>find</span>(<span style=color:#FFAC4D>chunk</span> <span style=color:#66D9EF>=></span> <span style=color:#FFFFFF>chunk</span>.<span style=color:#FFFFFF>name</span> <span style=color:#FF4185>===</span> <span style=color:#FFFFFF>entry</span>);

    &lt;<span style=color:#FF4185>if</span>(<span style=color:#FFFFFF>entryChunk</span>.<span style=color:#FFFFFF>size</span> <span style=color:#8F8F9E>/* skip scripts all together if empty js file */</span>)>
      &lt;<span style=color:#FF4185>for</span>|<span style=color:#FFAC4D>fileName</span>| <span style=color:#A6E22E>of</span><span style=color:#FFFFFF>=</span><span style=color:#FFFFFF>entryChunk</span>.<span style=color:#FFFFFF>imports</span>>
        &lt;<span style=color:#FF4185>link</span> <span style=color:#A6E22E>rel</span><span style=color:#FFFFFF>=</span><span style=color:#FFF066>"modulepreload"</span> <span style=color:#A6E22E>href</span><span style=color:#FFFFFF>=</span><span style=color:#FFFFFF>fileName</span>/>
      &lt;/<span style=color:#FF4185>for</span>>

      &lt;<span style=color:#FF4185>script</span> <span style=color:#A6E22E>async</span> <span style=color:#A6E22E>type</span><span style=color:#FFFFFF>=</span><span style=color:#FFF066>"module"</span> <span style=color:#A6E22E>src</span><span style=color:#FFFFFF>=</span><span style=color:#FFFFFF>entryChunk</span>.<span style=color:#FFFFFF>fileName</span>/>
    &lt;/<span style=color:#FF4185>if</span>>
  &lt;/<span style=color:#FF4185>rollup</span>>
&lt;/<span style=color:#FF4185>head</span>>
</pre></div><div class="code concise"><pre class=highlighted style=color:#D0D0E0;background-color:#202034><span style=color:#FF4185>head</span>
  <span style=color:#FF4185>rollup</span>|<span style=color:#FFAC4D>entry</span>, <span style=color:#FFAC4D>output</span>|
    <span style=color:#FF4185>$</span> <span style=color:#66D9EF>const</span> <span style=color:#FFFFFF>entryChunk</span> <span style=color:#FFFFFF>=</span> <span style=color:#FFFFFF>output</span>.<span style=color:#A6E22E>find</span>((<span style=color:#FFAC4D>chunk</span>) <span style=color:#66D9EF>=></span> <span style=color:#FFFFFF>chunk</span>.<span style=color:#FFFFFF>name</span> <span style=color:#FF4185>===</span> <span style=color:#FFFFFF>entry</span>);

    <span style=color:#FF4185>if</span>(<span style=color:#FFFFFF>entryChunk</span>.<span style=color:#FFFFFF>size</span>)
      <span style=color:#FF4185>for</span>|<span style=color:#FFAC4D>fileName</span>| <span style=color:#A6E22E>of</span><span style=color:#FFFFFF>=</span><span style=color:#FFFFFF>entryChunk</span>.<span style=color:#FFFFFF>imports</span>
        <span style=color:#FF4185>link</span> <span style=color:#A6E22E>rel</span><span style=color:#FFFFFF>=</span><span style=color:#FFF066>"modulepreload"</span> <span style=color:#A6E22E>href</span><span style=color:#FFFFFF>=</span><span style=color:#FFFFFF>fileName</span>

      <span style=color:#FF4185>script</span> <span style=color:#A6E22E>async</span> <span style=color:#A6E22E>type</span><span style=color:#FFFFFF>=</span><span style=color:#FFF066>"module"</span> <span style=color:#A6E22E>src</span><span style=color:#FFFFFF>=</span><span style=color:#FFFFFF>entryChunk</span>.<span style=color:#FFFFFF>fileName</span>
</pre></div></div><!--M/--><p>Ultimately it is up to you to map the chunk data (sometimes referred to as a manifest) into the <code>&lt;link&gt;</code>&#39;s and <code>&lt;script&gt;</code>&#39;s rendered by your application.</p><p>If your rollup browser config contains multiple <code>output</code> options, or you have multiple browser configs, all of the <code>chunks</code> for each <code>output</code> are passed into the <code>&lt;rollup&gt;</code> tag.</p><p>For example if you have an <code>esm</code> and <code>iife</code> build:</p><pre class=highlighted style=color:#D0D0E0;background-color:#202034>{
  plugins: [
    <span style=color:#FFFFFF>marko</span>.<span style=color:#A6E22E>browser</span>()
    <span style=color:#FF4185>...</span>
  ],
  output: [
    { dir: <span style=color:#FFF066>'dist/iife'</span>, format: <span style=color:#FFF066>'iife'</span> },
    { dir: <span style=color:#FFF066>'dist/esm'</span>, format: <span style=color:#FFF066>'esm'</span> }
  ]
}
</pre><p>we could access the assets from both builds:</p><!--M#s0-1-0-14-4-61-1--><div class=marko-code-block><button data-marko='{"onclick":"changeSyntax s0-1-0-14-4-61-1 false"}' title="Switch Syntax" class=switch-syntax>⇄</button><div class="code html"><pre class=highlighted style=color:#D0D0E0;background-color:#202034>&lt;<span style=color:#FF4185>head</span>>
  &lt;<span style=color:#FF4185>rollup</span>|<span style=color:#FFAC4D>entry</span>, <span style=color:#FFAC4D>iifeOutput</span>, <span style=color:#FFAC4D>esmOutput</span>|>
    <span style=color:#FF4185>$</span> <span style=color:#66D9EF>const</span> <span style=color:#FFFFFF>iifeEntryChunk</span> <span style=color:#FFFFFF>=</span> <span style=color:#FFFFFF>iifeOutput</span>.<span style=color:#A6E22E>find</span>(<span style=color:#FFAC4D>chunk</span> <span style=color:#66D9EF>=></span> <span style=color:#FFFFFF>chunk</span>.<span style=color:#FFFFFF>name</span> <span style=color:#FF4185>===</span> <span style=color:#FFFFFF>entry</span>);
    <span style=color:#FF4185>$</span> <span style=color:#66D9EF>const</span> <span style=color:#FFFFFF>esmEntryChunk</span> <span style=color:#FFFFFF>=</span> <span style=color:#FFFFFF>esmOutput</span>.<span style=color:#A6E22E>find</span>(<span style=color:#FFAC4D>chunk</span> <span style=color:#66D9EF>=></span> <span style=color:#FFFFFF>chunk</span>.<span style=color:#FFFFFF>name</span> <span style=color:#FF4185>===</span> <span style=color:#FFFFFF>entry</span>);

    &lt;<span style=color:#FF4185>script</span> <span style=color:#A6E22E>async</span> <span style=color:#A6E22E>type</span><span style=color:#FFFFFF>=</span><span style=color:#FFF066>"module"</span> <span style=color:#A6E22E>src</span><span style=color:#FFFFFF>=</span><span style=color:#FFFFFF>esmEntryChunk</span>.<span style=color:#FFFFFF>fileName</span>/>
    &lt;<span style=color:#FF4185>script</span> <span style=color:#A6E22E>nomodule</span> <span style=color:#A6E22E>src</span><span style=color:#FFFFFF>=</span><span style=color:#FFFFFF>iifeEntryChunk</span>.<span style=color:#FFFFFF>fileName</span>>&lt;/<span style=color:#FF4185>script</span>>
  &lt;/<span style=color:#FF4185>rollup</span>>
&lt;/<span style=color:#FF4185>head</span>>
</pre></div><div class="code concise"><pre class=highlighted style=color:#D0D0E0;background-color:#202034><span style=color:#FF4185>head</span>
  <span style=color:#FF4185>rollup</span>|<span style=color:#FFAC4D>entry</span>, <span style=color:#FFAC4D>iifeOutput</span>, <span style=color:#FFAC4D>esmOutput</span>|
    <span style=color:#FF4185>$</span> <span style=color:#66D9EF>const</span> <span style=color:#FFFFFF>iifeEntryChunk</span> <span style=color:#FFFFFF>=</span> <span style=color:#FFFFFF>iifeOutput</span>.<span style=color:#A6E22E>find</span>((<span style=color:#FFAC4D>chunk</span>) <span style=color:#66D9EF>=></span> <span style=color:#FFFFFF>chunk</span>.<span style=color:#FFFFFF>name</span> <span style=color:#FF4185>===</span> <span style=color:#FFFFFF>entry</span>);
    <span style=color:#FF4185>$</span> <span style=color:#66D9EF>const</span> <span style=color:#FFFFFF>esmEntryChunk</span> <span style=color:#FFFFFF>=</span> <span style=color:#FFFFFF>esmOutput</span>.<span style=color:#A6E22E>find</span>((<span style=color:#FFAC4D>chunk</span>) <span style=color:#66D9EF>=></span> <span style=color:#FFFFFF>chunk</span>.<span style=color:#FFFFFF>name</span> <span style=color:#FF4185>===</span> <span style=color:#FFFFFF>entry</span>);

    <span style=color:#FF4185>script</span> <span style=color:#A6E22E>async</span> <span style=color:#A6E22E>type</span><span style=color:#FFFFFF>=</span><span style=color:#FFF066>"module"</span> <span style=color:#A6E22E>src</span><span style=color:#FFFFFF>=</span><span style=color:#FFFFFF>esmEntryChunk</span>.<span style=color:#FFFFFF>fileName</span>
    <span style=color:#FF4185>script</span> <span style=color:#A6E22E>nomodule</span> <span style=color:#A6E22E>src</span><span style=color:#FFFFFF>=</span><span style=color:#FFFFFF>iifeEntryChunk</span>.<span style=color:#FFFFFF>fileName</span>
</pre></div></div><!--M/--><p>and <em>boom</em> you now have a <a href=https://philipwalton.com/articles/using-native-javascript-modules-in-production-today/ ><code>module/nomodule</code> setup</a>.</p><h1 id=top-level-components><a name=top-level-components class=anchor href=#top-level-components><span class=header-link></span></a>Top level components</h1><p>Marko was designed to send as little JavaScript to the browser as possible. One of the ways we do this is by automatically determining which templates in your app should be shipped to the browser. When rendering a template on the server, it is only necessary to bundle the styles and interactive components rendered by that template.</p><p>To send the minimal amount of Marko templates to the browser you can provide a Marko template directly as the <code>input</code>. This will also automatically invoke code to initialize the components in the browser, so there is no need to call <code>template.render</code> yourself in the browser.</p><blockquote class=null><p>Note: if you are using <em>linked</em> plugins then the server plugin will automatically tell the browser compiler which Marko templates to load.</p></blockquote><pre class=highlighted style=color:#D0D0E0;background-color:#202034><span style=color:#FF4185>export</span> <span style=color:#FF4185>default</span> {
  input: <span style=color:#FFF066>"./my-marko-page.marko"</span>,
  plugins: [
    <span style=color:#FFFFFF>marko</span>.<span style=color:#A6E22E>browser</span>(),
    <span style=color:#FF4185>...</span>
  ],
  <span style=color:#FF4185>...</span>
}
</pre><h2 id=options><a name=options class=anchor href=#options><span class=header-link></span></a>Options</h2><p>Both the <code>server</code> and <code>browser</code> plugins can receive the same options.</p><h3 id=optionsbabelconfig><a name=optionsbabelconfig class=anchor href=#optionsbabelconfig><span class=header-link></span></a>options.babelConfig</h3><p>You can manually override the Babel configuration used by passing a <code>babelConfig</code> object to the <code>@marko/rollup</code> plugin. By default Babels regular <a href=https://babeljs.io/docs/en/config-files>config file resolution</a> will be used.</p><pre class=highlighted style=color:#D0D0E0;background-color:#202034><span style=color:#FFFFFF>marko</span>.<span style=color:#A6E22E>browser</span>({
  babelConfig: {
    presets: [<span style=color:#FFF066>"@babel/preset-env"</span>]
  }
});
</pre><h3 id=optionsruntimeid><a name=optionsruntimeid class=anchor href=#optionsruntimeid><span class=header-link></span></a>options.runtimeId</h3><p>In some cases you may want to embed multiple isolated copies of Marko on the page. Since Marko relies on some <code>window</code> properties to initialize this can cause issues. For example, by default Marko will read the server rendered hydration code from <code>window.&#36;components</code>. In Marko you can change these <code>window</code> properties by rendering with <code>{ &#36;global: { runtimeId: &quot;MY_MARKO_RUNTIME_ID&quot; } }</code> as input on the server side.</p><p>This plugin exposes a <code>runtimeId</code> option produces output that automatically sets <code>&#36;global.runtimeId</code> on the server side and initializes properly in the browser.</p><pre class=highlighted style=color:#D0D0E0;background-color:#202034><span style=color:#66D9EF>const</span> <span style=color:#FFFFFF>runtimeId</span> <span style=color:#FFFFFF>=</span> <span style=color:#FFF066>"MY_MARKO_RUNTIME_ID"</span>;
<span style=color:#8F8F9E>// Make sure the `runtimeId` is the same across all of your plugins!</span>
<span style=color:#FFFFFF>marko</span>.<span style=color:#A6E22E>server</span>({ <span style=color:#FFFFFF>runtimeId</span> });
<span style=color:#FFFFFF>marko</span>.<span style=color:#A6E22E>browser</span>({ <span style=color:#FFFFFF>runtimeId</span> });
</pre><h3 id=optionsserialize><a name=optionsserialize class=anchor href=#optionsserialize><span class=header-link></span></a>options.serialize</h3><p>This option is only available for the <code>browser</code> plugin. It allows you to transform the list of chunks serialzed in a <a href=#linked-config><em>linked config</em></a> to include whatever you like. For example if you <em>did</em> want to include the <code>code</code> property from the rollup chunk, to say inline some content, the following would work:</p><pre class=highlighted style=color:#D0D0E0;background-color:#202034><span style=color:#FFFFFF>marko</span>.<span style=color:#A6E22E>browser</span>({
  <span style=color:#A6E22E>serialize</span>(<span style=color:#FFAC4D>output</span>) {
    <span style=color:#FF4185>return</span> <span style=color:#FFFFFF>output</span>.<span style=color:#A6E22E>map</span>(<span style=color:#FFAC4D>chunk</span> <span style=color:#66D9EF>=></span>
      <span style=color:#FFFFFF>chunk</span>.<span style=color:#FFFFFF>type</span> <span style=color:#FF4185>===</span> <span style=color:#FFF066>"asset"</span>
        <span style=color:#FF4185>?</span> {
            type: <span style=color:#FFF066>"asset"</span>,
            fileName: <span style=color:#FFFFFF>chunk</span>.<span style=color:#FFFFFF>fileName</span>
          }
        <span style=color:#FF4185>:</span> {
            type: <span style=color:#FFF066>"chunk"</span>,
            name: <span style=color:#FFFFFF>chunk</span>.<span style=color:#FFFFFF>name</span>,
            isEntry: <span style=color:#FFFFFF>chunk</span>.<span style=color:#FFFFFF>isEntry</span>,
            fileName: <span style=color:#FFFFFF>chunk</span>.<span style=color:#FFFFFF>fileName</span>,
            code:
              <span style=color:#FFFFFF>chunk</span>.<span style=color:#FFFFFF>code</span>.<span style=color:#A6E22E>replace</span>(<span style=color:#FFF066>/</span><span style=color:#FF4185>^</span><span style=color:#AE81FF>\s</span><span style=color:#FF4185>+$</span><span style=color:#FFF066>/</span>, <span style=color:#FFF066>""</span>).length <span style=color:#FF4185>&lt;</span> <span style=color:#AE81FF>1024</span>
                <span style=color:#FF4185>?</span> <span style=color:#FFFFFF>chunk</span>.<span style=color:#FFFFFF>code</span>
                <span style=color:#FF4185>:</span> <span style=color:#AE81FF>undefined</span> <span style=color:#8F8F9E>// only inline small code chunks</span>
          }
    );
  }
});
</pre><a href=https://github.com/marko-js/marko/blob/main/packages/marko/docs/rollup.md class=edit-on-github>EDIT <img alt="on GitHub" src=/assets/0bc571bc.svg></a><h2 id=contributors><a name=contributors class=anchor href=#contributors><span class=header-link></span></a> Contributors</h2><p>Helpful? You can thank these awesome people! You can also <a href=https://github.com/marko-js/marko/blob/main/packages/marko/docs/rollup.md>edit this doc</a> if you see any issues or want to improve it.</p><div class=contributors><a href=https://github.com/DylanPiercey class=contributor><img src=https://avatars.githubusercontent.com/u/4985201?v=4 alt class=photo><span class=name>DylanPiercey</span></a><a href=https://github.com/ScottAwesome class=contributor><img src=https://avatars.githubusercontent.com/u/52388100?v=4 alt class=photo><span class=name>ScottAwesome</span></a><a href=https://github.com/mlrawlings class=contributor><img src=https://avatars.githubusercontent.com/u/1958812?v=4 alt class=photo><span class=name>mlrawlings</span></a><a class=contributor><img alt class=photo><span class=name></span></a><a href=https://github.com/marko-js/marko/blob/main/packages/marko/docs/rollup.md class="contributor you"><div class=photo><span class=icon>+</span></div><span class=name>You?</span></a></div><footer class="site-footer doc-footer"><a href=https://openjsf.org/  class=openjsf><img src=/assets/6876aea9.svg alt> <span><span class=bold>OpenJS</span>&nbsp;<span class=light>Foundation</span></span></a><div class=separator></div><a href=https://github.com/marko-js/marko/blob/main/LICENSE class=osi><img src=/assets/1b70b500.svg alt> MIT&nbsp;License</a><div class=separator></div><a href=https://github.com/eBay class=ebay><img src=/assets/339b8a9e.svg alt=eBay> open&nbsp;source</a></footer></div></div></div></main><script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-66854919-1', 'markojs.com');
    ga('send', 'pageview');
  </script><a href=https://discord.gg/marko target=_blank class=discord-button><img src=/assets/78800ea4.svg alt="Chat in Marko's Discord Server"></a><script>$MC=(window.$MC||[]).concat({"l":1,"w":[["s0-1-0-11",0,{}],["s0-1-0-12",1,{"currentDoc":"rollup","toc":"<ul class=\"toc toc-level0\"><li><a href=\"#marko-rollup\">Marko + Rollup\u003C/a>\u003C/li><li><a href=\"#installation\">Installation\u003C/a>\u003C/li><li><a href=\"#basic-example-config\">Basic example config\u003C/a>\u003C/li><li><a href=\"#linked-config\">Linked config\u003C/a><ul class=\"toc toc-level1\"><li><a href=\"#rollup-tag\">&lt;rollup&gt; tag\u003C/a>\u003C/li>\u003C/ul>\u003C/li><li><a href=\"#top-level-components\">Top level components\u003C/a><ul class=\"toc toc-level1\"><li><a href=\"#options\">Options\u003C/a><ul class=\"toc toc-level2\"><li><a href=\"#optionsbabelconfig\">options.babelConfig\u003C/a>\u003C/li><li><a href=\"#optionsruntimeid\">options.runtimeId\u003C/a>\u003C/li><li><a href=\"#optionsserialize\">options.serialize\u003C/a>\u003C/li>\u003C/ul>\u003C/li>\u003C/ul>\u003C/li>\u003C/ul>"}],["s0-1-0-12-9",2,{}],["s0-1-0-14-4-48-1",3,{"html":"<pre class=highlighted style=color:#D0D0E0;background-color:#202034>&lt;<span style=color:#FF4185>head\u003C/span>>\n  &lt;<span style=color:#FF4185>rollup\u003C/span>|<span style=color:#FFAC4D>entry\u003C/span>, <span style=color:#FFAC4D>output\u003C/span>|>\n    <span style=color:#FF4185>$\u003C/span> <span style=color:#66D9EF>const\u003C/span> <span style=color:#FFFFFF>entryChunk\u003C/span> <span style=color:#FFFFFF>=\u003C/span> <span style=color:#FFFFFF>output\u003C/span>.<span style=color:#A6E22E>find\u003C/span>(<span style=color:#FFAC4D>chunk\u003C/span> <span style=color:#66D9EF>=>\u003C/span> <span style=color:#FFFFFF>chunk\u003C/span>.<span style=color:#FFFFFF>name\u003C/span> <span style=color:#FF4185>===\u003C/span> <span style=color:#FFFFFF>entry\u003C/span>);\n\n    &lt;<span style=color:#FF4185>if\u003C/span>(<span style=color:#FFFFFF>entryChunk\u003C/span>.<span style=color:#FFFFFF>size\u003C/span> <span style=color:#8F8F9E>/* skip scripts all together if empty js file */\u003C/span>)>\n      &lt;<span style=color:#FF4185>for\u003C/span>|<span style=color:#FFAC4D>fileName\u003C/span>| <span style=color:#A6E22E>of\u003C/span><span style=color:#FFFFFF>=\u003C/span><span style=color:#FFFFFF>entryChunk\u003C/span>.<span style=color:#FFFFFF>imports\u003C/span>>\n        &lt;<span style=color:#FF4185>link\u003C/span> <span style=color:#A6E22E>rel\u003C/span><span style=color:#FFFFFF>=\u003C/span><span style=color:#FFF066>\"modulepreload\"\u003C/span> <span style=color:#A6E22E>href\u003C/span><span style=color:#FFFFFF>=\u003C/span><span style=color:#FFFFFF>fileName\u003C/span>/>\n      &lt;/<span style=color:#FF4185>for\u003C/span>>\n\n      &lt;<span style=color:#FF4185>script\u003C/span> <span style=color:#A6E22E>async\u003C/span> <span style=color:#A6E22E>type\u003C/span><span style=color:#FFFFFF>=\u003C/span><span style=color:#FFF066>\"module\"\u003C/span> <span style=color:#A6E22E>src\u003C/span><span style=color:#FFFFFF>=\u003C/span><span style=color:#FFFFFF>entryChunk\u003C/span>.<span style=color:#FFFFFF>fileName\u003C/span>/>\n    &lt;/<span style=color:#FF4185>if\u003C/span>>\n  &lt;/<span style=color:#FF4185>rollup\u003C/span>>\n&lt;/<span style=color:#FF4185>head\u003C/span>>\n\u003C/pre>","concise":"<pre class=highlighted style=color:#D0D0E0;background-color:#202034><span style=color:#FF4185>head\u003C/span>\n  <span style=color:#FF4185>rollup\u003C/span>|<span style=color:#FFAC4D>entry\u003C/span>, <span style=color:#FFAC4D>output\u003C/span>|\n    <span style=color:#FF4185>$\u003C/span> <span style=color:#66D9EF>const\u003C/span> <span style=color:#FFFFFF>entryChunk\u003C/span> <span style=color:#FFFFFF>=\u003C/span> <span style=color:#FFFFFF>output\u003C/span>.<span style=color:#A6E22E>find\u003C/span>((<span style=color:#FFAC4D>chunk\u003C/span>) <span style=color:#66D9EF>=>\u003C/span> <span style=color:#FFFFFF>chunk\u003C/span>.<span style=color:#FFFFFF>name\u003C/span> <span style=color:#FF4185>===\u003C/span> <span style=color:#FFFFFF>entry\u003C/span>);\n\n    <span style=color:#FF4185>if\u003C/span>(<span style=color:#FFFFFF>entryChunk\u003C/span>.<span style=color:#FFFFFF>size\u003C/span>)\n      <span style=color:#FF4185>for\u003C/span>|<span style=color:#FFAC4D>fileName\u003C/span>| <span style=color:#A6E22E>of\u003C/span><span style=color:#FFFFFF>=\u003C/span><span style=color:#FFFFFF>entryChunk\u003C/span>.<span style=color:#FFFFFF>imports\u003C/span>\n        <span style=color:#FF4185>link\u003C/span> <span style=color:#A6E22E>rel\u003C/span><span style=color:#FFFFFF>=\u003C/span><span style=color:#FFF066>\"modulepreload\"\u003C/span> <span style=color:#A6E22E>href\u003C/span><span style=color:#FFFFFF>=\u003C/span><span style=color:#FFFFFF>fileName\u003C/span>\n\n      <span style=color:#FF4185>script\u003C/span> <span style=color:#A6E22E>async\u003C/span> <span style=color:#A6E22E>type\u003C/span><span style=color:#FFFFFF>=\u003C/span><span style=color:#FFF066>\"module\"\u003C/span> <span style=color:#A6E22E>src\u003C/span><span style=color:#FFFFFF>=\u003C/span><span style=color:#FFFFFF>entryChunk\u003C/span>.<span style=color:#FFFFFF>fileName\u003C/span>\n\u003C/pre>"}],["s0-1-0-14-4-61-1",3,{"html":"<pre class=highlighted style=color:#D0D0E0;background-color:#202034>&lt;<span style=color:#FF4185>head\u003C/span>>\n  &lt;<span style=color:#FF4185>rollup\u003C/span>|<span style=color:#FFAC4D>entry\u003C/span>, <span style=color:#FFAC4D>iifeOutput\u003C/span>, <span style=color:#FFAC4D>esmOutput\u003C/span>|>\n    <span style=color:#FF4185>$\u003C/span> <span style=color:#66D9EF>const\u003C/span> <span style=color:#FFFFFF>iifeEntryChunk\u003C/span> <span style=color:#FFFFFF>=\u003C/span> <span style=color:#FFFFFF>iifeOutput\u003C/span>.<span style=color:#A6E22E>find\u003C/span>(<span style=color:#FFAC4D>chunk\u003C/span> <span style=color:#66D9EF>=>\u003C/span> <span style=color:#FFFFFF>chunk\u003C/span>.<span style=color:#FFFFFF>name\u003C/span> <span style=color:#FF4185>===\u003C/span> <span style=color:#FFFFFF>entry\u003C/span>);\n    <span style=color:#FF4185>$\u003C/span> <span style=color:#66D9EF>const\u003C/span> <span style=color:#FFFFFF>esmEntryChunk\u003C/span> <span style=color:#FFFFFF>=\u003C/span> <span style=color:#FFFFFF>esmOutput\u003C/span>.<span style=color:#A6E22E>find\u003C/span>(<span style=color:#FFAC4D>chunk\u003C/span> <span style=color:#66D9EF>=>\u003C/span> <span style=color:#FFFFFF>chunk\u003C/span>.<span style=color:#FFFFFF>name\u003C/span> <span style=color:#FF4185>===\u003C/span> <span style=color:#FFFFFF>entry\u003C/span>);\n\n    &lt;<span style=color:#FF4185>script\u003C/span> <span style=color:#A6E22E>async\u003C/span> <span style=color:#A6E22E>type\u003C/span><span style=color:#FFFFFF>=\u003C/span><span style=color:#FFF066>\"module\"\u003C/span> <span style=color:#A6E22E>src\u003C/span><span style=color:#FFFFFF>=\u003C/span><span style=color:#FFFFFF>esmEntryChunk\u003C/span>.<span style=color:#FFFFFF>fileName\u003C/span>/>\n    &lt;<span style=color:#FF4185>script\u003C/span> <span style=color:#A6E22E>nomodule\u003C/span> <span style=color:#A6E22E>src\u003C/span><span style=color:#FFFFFF>=\u003C/span><span style=color:#FFFFFF>iifeEntryChunk\u003C/span>.<span style=color:#FFFFFF>fileName\u003C/span>>&lt;/<span style=color:#FF4185>script\u003C/span>>\n  &lt;/<span style=color:#FF4185>rollup\u003C/span>>\n&lt;/<span style=color:#FF4185>head\u003C/span>>\n\u003C/pre>","concise":"<pre class=highlighted style=color:#D0D0E0;background-color:#202034><span style=color:#FF4185>head\u003C/span>\n  <span style=color:#FF4185>rollup\u003C/span>|<span style=color:#FFAC4D>entry\u003C/span>, <span style=color:#FFAC4D>iifeOutput\u003C/span>, <span style=color:#FFAC4D>esmOutput\u003C/span>|\n    <span style=color:#FF4185>$\u003C/span> <span style=color:#66D9EF>const\u003C/span> <span style=color:#FFFFFF>iifeEntryChunk\u003C/span> <span style=color:#FFFFFF>=\u003C/span> <span style=color:#FFFFFF>iifeOutput\u003C/span>.<span style=color:#A6E22E>find\u003C/span>((<span style=color:#FFAC4D>chunk\u003C/span>) <span style=color:#66D9EF>=>\u003C/span> <span style=color:#FFFFFF>chunk\u003C/span>.<span style=color:#FFFFFF>name\u003C/span> <span style=color:#FF4185>===\u003C/span> <span style=color:#FFFFFF>entry\u003C/span>);\n    <span style=color:#FF4185>$\u003C/span> <span style=color:#66D9EF>const\u003C/span> <span style=color:#FFFFFF>esmEntryChunk\u003C/span> <span style=color:#FFFFFF>=\u003C/span> <span style=color:#FFFFFF>esmOutput\u003C/span>.<span style=color:#A6E22E>find\u003C/span>((<span style=color:#FFAC4D>chunk\u003C/span>) <span style=color:#66D9EF>=>\u003C/span> <span style=color:#FFFFFF>chunk\u003C/span>.<span style=color:#FFFFFF>name\u003C/span> <span style=color:#FF4185>===\u003C/span> <span style=color:#FFFFFF>entry\u003C/span>);\n\n    <span style=color:#FF4185>script\u003C/span> <span style=color:#A6E22E>async\u003C/span> <span style=color:#A6E22E>type\u003C/span><span style=color:#FFFFFF>=\u003C/span><span style=color:#FFF066>\"module\"\u003C/span> <span style=color:#A6E22E>src\u003C/span><span style=color:#FFFFFF>=\u003C/span><span style=color:#FFFFFF>esmEntryChunk\u003C/span>.<span style=color:#FFFFFF>fileName\u003C/span>\n    <span style=color:#FF4185>script\u003C/span> <span style=color:#A6E22E>nomodule\u003C/span> <span style=color:#A6E22E>src\u003C/span><span style=color:#FFFFFF>=\u003C/span><span style=color:#FFFFFF>iifeEntryChunk\u003C/span>.<span style=color:#FFFFFF>fileName\u003C/span>\n\u003C/pre>"}]],"t":["OIKmBXjW","mFesaajv","07hv1F0+","UUumdCIE"]})</script></body></html>